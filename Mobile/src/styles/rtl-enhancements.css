/**
 * RTL Layout Enhancements - Al-Shuail Mobile PWA
 *
 * Systematic RTL support with icon mirroring and logical properties
 * Phase 5: UI/UX Polish & Accessibility
 */

/* =========================
   Icon Mirroring Strategy
   ========================= */

/**
 * Directional icons that should mirror in RTL
 * (arrows, chevrons, back/forward navigation)
 */
[dir="rtl"] .icon-directional,
[dir="rtl"] .header-back-btn svg,
[dir="rtl"] .nav-arrow svg {
  transform: scaleX(-1);
}

/**
 * Button icons on the right side (after text) should mirror
 */
[dir="rtl"] .btn-primary svg:last-child,
[dir="rtl"] .btn-secondary svg:last-child,
[dir="rtl"] .btn-arrow svg {
  transform: scaleX(-1);
}

/**
 * Icons that should NOT mirror
 * (symmetric icons: circles, squares, settings, etc.)
 */
.icon-no-mirror,
[dir="rtl"] .icon-symmetric {
  transform: none !important;
}

/* =========================
   CSS Logical Properties
   ========================= */

/**
 * Spacing utilities using logical properties
 * for automatic RTL adaptation
 */

/* Padding Inline (horizontal) */
.px-1 { padding-inline: var(--spacing-1); }
.px-2 { padding-inline: var(--spacing-2); }
.px-3 { padding-inline: var(--spacing-3); }
.px-4 { padding-inline: var(--spacing-4); }
.px-5 { padding-inline: var(--spacing-5); }
.px-6 { padding-inline: var(--spacing-6); }
.px-8 { padding-inline: var(--spacing-8); }

/* Padding Block (vertical) */
.py-1 { padding-block: var(--spacing-1); }
.py-2 { padding-block: var(--spacing-2); }
.py-3 { padding-block: var(--spacing-3); }
.py-4 { padding-block: var(--spacing-4); }
.py-5 { padding-block: var(--spacing-5); }
.py-6 { padding-block: var(--spacing-6); }
.py-8 { padding-block: var(--spacing-8); }

/* Margin Inline End (right in LTR, left in RTL) */
.mr-1 { margin-inline-end: var(--spacing-1); }
.mr-2 { margin-inline-end: var(--spacing-2); }
.mr-3 { margin-inline-end: var(--spacing-3); }
.mr-4 { margin-inline-end: var(--spacing-4); }
.mr-5 { margin-inline-end: var(--spacing-5); }
.mr-6 { margin-inline-end: var(--spacing-6); }

/* Margin Inline Start (left in LTR, right in RTL) */
.ml-1 { margin-inline-start: var(--spacing-1); }
.ml-2 { margin-inline-start: var(--spacing-2); }
.ml-3 { margin-inline-start: var(--spacing-3); }
.ml-4 { margin-inline-start: var(--spacing-4); }
.ml-5 { margin-inline-start: var(--spacing-5); }
.ml-6 { margin-inline-start: var(--spacing-6); }

/* Margin Block (vertical) */
.mt-1 { margin-block-start: var(--spacing-1); }
.mt-2 { margin-block-start: var(--spacing-2); }
.mt-3 { margin-block-start: var(--spacing-3); }
.mt-4 { margin-block-start: var(--spacing-4); }
.mt-5 { margin-block-start: var(--spacing-5); }
.mt-6 { margin-block-start: var(--spacing-6); }

.mb-1 { margin-block-end: var(--spacing-1); }
.mb-2 { margin-block-end: var(--spacing-2); }
.mb-3 { margin-block-end: var(--spacing-3); }
.mb-4 { margin-block-end: var(--spacing-4); }
.mb-5 { margin-block-end: var(--spacing-5); }
.mb-6 { margin-block-end: var(--spacing-6); }

/* =========================
   Flex Direction Utilities
   ========================= */

/**
 * Flex direction utilities that adapt to RTL
 */
[dir="rtl"] .flex-row {
  flex-direction: row-reverse;
}

[dir="rtl"] .flex-row-reverse {
  flex-direction: row; /* Becomes normal in RTL */
}

/* =========================
   Component-Specific RTL Fixes
   ========================= */

/**
 * Dashboard - Event Meta Icons
 */
.event-meta {
  display: flex;
  gap: var(--spacing-4);
  flex-wrap: wrap;
}

.event-meta > div {
  display: flex;
  align-items: center;
  gap: var(--spacing-2);
}

[dir="rtl"] .event-meta svg {
  /* Icon positioning is handled by flex gap */
}

/**
 * Payment - Quick Amount Buttons
 */
.quick-amounts {
  display: flex;
  flex-wrap: wrap;
  gap: var(--spacing-3);
  justify-content: flex-start;
}

[dir="rtl"] .quick-amounts {
  justify-content: flex-start; /* Start from right in RTL */
}

/**
 * Payment - Method Selection Cards
 */
.method-content {
  display: flex;
  align-items: center;
  gap: var(--spacing-4);
}

[dir="rtl"] .method-content {
  /* Flex gap handles spacing automatically */
}

/**
 * Payment - Bank Details Info Items
 */
.bank-info .info-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

[dir="rtl"] .bank-info .info-item {
  /* Space-between works correctly in RTL */
}

/**
 * Navigation - Bottom Nav Items
 */
.nav-container {
  display: flex;
  justify-content: space-around;
}

[dir="rtl"] .nav-container {
  /* Space-around distributes evenly, no change needed */
}

/**
 * Header - Action Buttons
 */
.header-container {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

[dir="rtl"] .header-container {
  /* Space-between works correctly, icons mirrored above */
}

/* =========================
   Animation Enhancements
   ========================= */

/**
 * Spin animations should rotate counter-clockwise in RTL
 */
[dir="rtl"] @keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(-360deg); } /* Counter-clockwise for RTL */
}

[dir="rtl"] .loading-spinner {
  animation: spin 1s linear infinite;
}

/**
 * Slide animations should come from right in RTL
 */
[dir="rtl"] @keyframes slideInFromRight {
  from {
    opacity: 0;
    transform: translateX(-20px); /* Negative for RTL */
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* =========================
   Accessibility Enhancements
   ========================= */

/**
 * Focus indicators should be consistent in RTL
 */
[dir="rtl"] .btn:focus,
[dir="rtl"] .form-input:focus {
  outline-offset: 2px;
}

/**
 * Skip to content link for RTL
 */
.skip-to-content {
  position: absolute;
  top: -40px;
  inset-inline-start: 0; /* Logical property for left/right */
  background: var(--primary-purple);
  color: var(--white);
  padding: var(--spacing-2) var(--spacing-4);
  text-decoration: none;
  border-radius: var(--radius-md);
  z-index: var(--z-tooltip);
}

.skip-to-content:focus {
  top: var(--spacing-2);
}

/* =========================
   Print Styles (RTL-aware)
   ========================= */
@media print {
  [dir="rtl"] body {
    direction: rtl;
    text-align: right;
  }

  [dir="rtl"] .page-header,
  [dir="rtl"] .bottom-nav {
    display: none;
  }
}

/* =========================
   Responsive RTL Adjustments
   ========================= */

/**
 * Mobile-specific RTL fixes
 */
@media (max-width: 480px) {
  [dir="rtl"] .header-title {
    text-align: center;
  }

  [dir="rtl"] .nav-item span {
    /* Text hidden on mobile, no RTL adjustment needed */
  }

  [dir="rtl"] .card {
    /* Card padding already uses logical properties */
  }
}

/**
 * Tablet-specific RTL fixes
 */
@media (min-width: 768px) and (max-width: 1024px) {
  [dir="rtl"] .page-content {
    /* Max-width centers content, no RTL adjustment */
  }
}

/* =========================
   Developer Utilities
   ========================= */

/**
 * Debug mode: Show RTL direction indicators
 * Add class .rtl-debug to <body> during development
 */
.rtl-debug [dir="rtl"]::before {
  content: "RTL MODE";
  position: fixed;
  top: 0;
  right: 0;
  background: red;
  color: white;
  padding: 4px 8px;
  font-size: 10px;
  z-index: 99999;
  opacity: 0.5;
}

.rtl-debug .icon-directional {
  outline: 2px solid blue;
}

.rtl-debug .icon-no-mirror {
  outline: 2px solid green;
}
