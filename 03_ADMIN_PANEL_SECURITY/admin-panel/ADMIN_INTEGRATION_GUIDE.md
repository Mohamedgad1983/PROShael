# 📋 دليل دمج قسم الأمان في Admin Panel

## 📁 الملف المُنشأ:

```
admin-panel/
└── MemberSecuritySection.jsx   ← مكون قسم الأمان
```

---

## 🔧 طريقة الدمج:

### الخطوة 1: نسخ الملف

انسخ `MemberSecuritySection.jsx` إلى مجلد components:

```bash
cp MemberSecuritySection.jsx src/components/members/
```

### الخطوة 2: Import في صفحة تفاصيل العضو

في ملف `MemberDetails.jsx` أو ما يعادله:

```jsx
// أضف هذا السطر في أعلى الملف
import MemberSecuritySection from './MemberSecuritySection';
```

### الخطوة 3: استخدام المكون

أضف المكون في نهاية صفحة تفاصيل العضو:

```jsx
const MemberDetails = ({ member }) => {
    // Get current user info (from context or state)
    const { currentUser } = useAuth(); // أو من أي مكان تخزن فيه بيانات المستخدم

    return (
        <div className="member-details">
            {/* المعلومات الأساسية */}
            <MemberBasicInfo member={member} />
            
            {/* المعلومات المالية */}
            <MemberFinancialInfo member={member} />
            
            {/* قسم الأمان - يظهر فقط لـ Super Admin */}
            <MemberSecuritySection 
                memberId={member.id}
                memberName={member.full_name_ar}
                currentUserRole={currentUser.role}
            />
        </div>
    );
};
```

---

## 📦 المكتبات المطلوبة:

تأكد من وجود هذه المكتبات:

```bash
npm install react-icons react-toastify axios
```

وأضف ToastContainer في App.jsx:

```jsx
import { ToastContainer } from 'react-toastify';
import 'react-toastify/dist/ReactToastify.css';

function App() {
    return (
        <>
            {/* باقي التطبيق */}
            <ToastContainer 
                position="top-left"
                rtl={true}
                theme="dark"
            />
        </>
    );
}
```

---

## 🎨 شكل المكون:

```
┌─────────────────────────────────────────────────────────────────┐
│  🛡️ إعدادات الأمان                        🔒 Super Admin فقط   │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  ┌─────────────────────────┐  ┌─────────────────────────┐      │
│  │  🔒 كلمة المرور         │  │  👆 Face ID            │      │
│  │                         │  │                         │      │
│  │  الحالة: ✅ مفعّلة     │  │  الحالة: ✅ مفعّل      │      │
│  │  آخر تغيير: 20/12/2024 │  │  تاريخ التفعيل: 15/12  │      │
│  │                         │  │                         │      │
│  │         [🗑️ حذف]       │  │         [🗑️ حذف]       │      │
│  └─────────────────────────┘  └─────────────────────────┘      │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  📊 حالة الحساب                                         │   │
│  │  ─────────────────────────────────────────────────────  │   │
│  │  آخر دخول: 20/12/2024    طريقة: كلمة المرور             │   │
│  │  محاولات فاشلة: 0        الحساب مقفل: لا                │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
│  ┌─────────────────────────────────────────────────────────┐   │
│  │  📜 سجل العمليات الأخيرة                                │   │
│  │  ─────────────────────────────────────────────────────  │   │
│  │  ▪ تسجيل دخول ناجح         20/12/2024 10:30            │   │
│  │  ▪ تغيير كلمة المرور       19/12/2024 15:45            │   │
│  │  ▪ تفعيل Face ID           15/12/2024 09:00            │   │
│  └─────────────────────────────────────────────────────────┘   │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔐 ملاحظات الأمان:

1. **المكون لا يظهر** إلا إذا كان `currentUserRole === 'super_admin'`
2. **رسالة تأكيد** قبل أي عملية حذف
3. **كل العمليات تُسجل** في Audit Log
4. **Token مطلوب** لكل API call

---

## ✅ اختبار المكون:

1. سجل دخول كـ Super Admin
2. افتح صفحة تفاصيل أي عضو
3. تأكد من ظهور قسم "إعدادات الأمان"
4. جرب حذف كلمة المرور (على عضو تجريبي)
5. تحقق من سجل العمليات

---

## 🎯 Props المطلوبة:

| Prop | النوع | الوصف |
|------|-------|-------|
| `memberId` | string (UUID) | معرّف العضو |
| `memberName` | string | اسم العضو بالعربي |
| `currentUserRole` | string | دور المستخدم الحالي |

---

**جاهز للاستخدام! 🚀**
