{"numFailedTestSuites":14,"numFailedTests":57,"numPassedTestSuites":42,"numPassedTests":490,"numPendingTestSuites":0,"numPendingTests":0,"numRuntimeErrorTestSuites":3,"numTodoTests":0,"numTotalTestSuites":56,"numTotalTests":547,"openHandles":[],"snapshot":{"added":0,"didUpdate":false,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0},"startTime":1764075856612,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Data Type Validation Tests","Data Type Operations"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Type Validation Tests Data Type Operations should validate and coerce basic data types","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"startAt":1764075857484,"status":"passed","title":"should validate and coerce basic data types"},{"ancestorTitles":["Data Type Validation Tests","Data Type Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Type Validation Tests Data Type Operations should validate complex constraints on data types","invocations":1,"location":null,"numPassingAsserts":18,"retryReasons":[],"startAt":1764075857498,"status":"passed","title":"should validate complex constraints on data types"},{"ancestorTitles":["Data Type Validation Tests","Data Type Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Type Validation Tests Data Type Operations should validate complete data schemas","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075857501,"status":"passed","title":"should validate complete data schemas"}],"endTime":1764075857506,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\data-types.test.js","startTime":1764075856914,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Required Field Validation Tests","Required Field Operations"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Required Field Validation Tests Required Field Operations should validate all required fields for members","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075857678,"status":"passed","title":"should validate all required fields for members"},{"ancestorTitles":["Required Field Validation Tests","Required Field Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Required Field Validation Tests Required Field Operations should validate field formats and constraints","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075857686,"status":"passed","title":"should validate field formats and constraints"},{"ancestorTitles":["Required Field Validation Tests","Required Field Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Required Field Validation Tests Required Field Operations should validate payment required fields with constraints","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075857690,"status":"passed","title":"should validate payment required fields with constraints"},{"ancestorTitles":["Required Field Validation Tests","Required Field Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Required Field Validation Tests Required Field Operations should handle bulk insert validation","invocations":1,"location":null,"numPassingAsserts":13,"retryReasons":[],"startAt":1764075857697,"status":"passed","title":"should handle bulk insert validation"}],"endTime":1764075857701,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\required-fields.test.js","startTime":1764075857525,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Data Consistency Tests","Data Consistency Operations"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Consistency Tests Data Consistency Operations should detect balance inconsistencies and reconcile","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075857840,"status":"passed","title":"should detect balance inconsistencies and reconcile"},{"ancestorTitles":["Data Consistency Tests","Data Consistency Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Consistency Tests Data Consistency Operations should detect subscription date inconsistencies","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075857850,"status":"passed","title":"should detect subscription date inconsistencies"},{"ancestorTitles":["Data Consistency Tests","Data Consistency Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Data Consistency Tests Data Consistency Operations should validate payment status transitions and detect violations","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075857854,"status":"passed","title":"should validate payment status transitions and detect violations"}],"endTime":1764075857859,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\data-consistency.test.js","startTime":1764075857710,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ReceiptService","numberToWords","Arabic Number Conversion"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords Arabic Number Conversion should convert integer amounts to Arabic","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858561,"status":"passed","title":"should convert integer amounts to Arabic"},{"ancestorTitles":["ReceiptService","numberToWords","Arabic Number Conversion"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords Arabic Number Conversion should convert decimal amounts to Arabic","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075858566,"status":"passed","title":"should convert decimal amounts to Arabic"},{"ancestorTitles":["ReceiptService","numberToWords","Arabic Number Conversion"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords Arabic Number Conversion should handle zero decimals","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858567,"status":"passed","title":"should handle zero decimals"},{"ancestorTitles":["ReceiptService","numberToWords","Arabic Number Conversion"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords Arabic Number Conversion should handle various decimal amounts","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075858568,"status":"passed","title":"should handle various decimal amounts"},{"ancestorTitles":["ReceiptService","numberToWords","English Number Conversion"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords English Number Conversion should convert integer amounts to English","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858570,"status":"passed","title":"should convert integer amounts to English"},{"ancestorTitles":["ReceiptService","numberToWords","English Number Conversion"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords English Number Conversion should convert decimal amounts to English","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075858571,"status":"passed","title":"should convert decimal amounts to English"},{"ancestorTitles":["ReceiptService","numberToWords","English Number Conversion"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords English Number Conversion should handle singular for single riyal","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858572,"status":"passed","title":"should handle singular for single riyal"},{"ancestorTitles":["ReceiptService","numberToWords","English Number Conversion"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService numberToWords English Number Conversion should handle plural correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858573,"status":"passed","title":"should handle plural correctly"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate subscription to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858574,"status":"passed","title":"should translate subscription to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate donation to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858575,"status":"passed","title":"should translate donation to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate event to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858576,"status":"passed","title":"should translate event to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate membership to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858577,"status":"passed","title":"should translate membership to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate diya to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858577,"status":"passed","title":"should translate diya to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should translate other to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858578,"status":"passed","title":"should translate other to Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory Arabic Translation should return original for unknown category in Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858579,"status":"passed","title":"should return original for unknown category in Arabic"},{"ancestorTitles":["ReceiptService","translateCategory","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory English Translation should translate subscription to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858579,"status":"passed","title":"should translate subscription to English"},{"ancestorTitles":["ReceiptService","translateCategory","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory English Translation should translate donation to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858580,"status":"passed","title":"should translate donation to English"},{"ancestorTitles":["ReceiptService","translateCategory","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateCategory English Translation should return original for unknown category in English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858581,"status":"passed","title":"should return original for unknown category in English"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod Arabic Translation should translate cash to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858582,"status":"passed","title":"should translate cash to Arabic"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod Arabic Translation should translate card to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858583,"status":"passed","title":"should translate card to Arabic"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod Arabic Translation should translate transfer to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858584,"status":"passed","title":"should translate transfer to Arabic"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod Arabic Translation should translate online to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858584,"status":"passed","title":"should translate online to Arabic"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","Arabic Translation"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod Arabic Translation should translate check to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858585,"status":"passed","title":"should translate check to Arabic"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod English Translation should translate cash to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858590,"status":"passed","title":"should translate cash to English"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","English Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod English Translation should translate card to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858591,"status":"passed","title":"should translate card to English"},{"ancestorTitles":["ReceiptService","translatePaymentMethod","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translatePaymentMethod English Translation should translate transfer to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858591,"status":"passed","title":"should translate transfer to English"},{"ancestorTitles":["ReceiptService","translateStatus","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus Arabic Translation should translate paid to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858592,"status":"passed","title":"should translate paid to Arabic"},{"ancestorTitles":["ReceiptService","translateStatus","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus Arabic Translation should translate pending to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858593,"status":"passed","title":"should translate pending to Arabic"},{"ancestorTitles":["ReceiptService","translateStatus","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus Arabic Translation should translate cancelled to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858593,"status":"passed","title":"should translate cancelled to Arabic"},{"ancestorTitles":["ReceiptService","translateStatus","Arabic Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus Arabic Translation should translate failed to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858594,"status":"passed","title":"should translate failed to Arabic"},{"ancestorTitles":["ReceiptService","translateStatus","Arabic Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus Arabic Translation should translate refunded to Arabic","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858594,"status":"passed","title":"should translate refunded to Arabic"},{"ancestorTitles":["ReceiptService","translateStatus","English Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus English Translation should translate paid to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858595,"status":"passed","title":"should translate paid to English"},{"ancestorTitles":["ReceiptService","translateStatus","English Translation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus English Translation should translate pending to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858596,"status":"passed","title":"should translate pending to English"},{"ancestorTitles":["ReceiptService","translateStatus","English Translation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService translateStatus English Translation should translate cancelled to English","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858596,"status":"passed","title":"should translate cancelled to English"},{"ancestorTitles":["ReceiptService","getOrganizationDetails"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService getOrganizationDetails should return Arabic organization details","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075858597,"status":"passed","title":"should return Arabic organization details"},{"ancestorTitles":["ReceiptService","getOrganizationDetails"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService getOrganizationDetails should return English organization details","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858599,"status":"passed","title":"should return English organization details"},{"ancestorTitles":["ReceiptService","getOrganizationDetails"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService getOrganizationDetails should have consistent contact information","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075858600,"status":"passed","title":"should have consistent contact information"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":33,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should generate receipt data in Arabic","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075858601,"status":"passed","title":"should generate receipt data in Arabic"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should generate receipt data in English","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858634,"status":"passed","title":"should generate receipt data in English"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should include payer information","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075858636,"status":"passed","title":"should include payer information"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should include payment details","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075858637,"status":"passed","title":"should include payment details"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should handle missing payer information","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858638,"status":"passed","title":"should handle missing payer information"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should translate amount to words","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858639,"status":"passed","title":"should translate amount to words"},{"ancestorTitles":["ReceiptService","generateReceiptData"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ReceiptService generateReceiptData should include timestamps","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858640,"status":"passed","title":"should include timestamps"}],"endTime":1764075858644,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\unit\\services\\receiptService.test.js","startTime":1764075857869,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":71,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should reject payment creation without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858369,"status":"passed","title":"should reject payment creation without authentication"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should reject payment creation by member (requires financial role)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858441,"status":"passed","title":"should reject payment creation by member (requires financial role)"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":101,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should accept payment creation by financial manager","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858465,"status":"passed","title":"should accept payment creation by financial manager"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should validate required payment fields","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858566,"status":"passed","title":"should validate required payment fields"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should validate payment amount is positive","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858576,"status":"passed","title":"should validate payment amount is positive"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments (Create Payment)"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments (Create Payment) should validate payment category","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858589,"status":"passed","title":"should validate payment category"},{"ancestorTitles":["Payment Integration Tests","GET /api/payments/:id (Get Payment by ID)"],"duration":35,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests GET /api/payments/:id (Get Payment by ID) should reject without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858600,"status":"passed","title":"should reject without authentication"},{"ancestorTitles":["Payment Integration Tests","GET /api/payments/:id (Get Payment by ID)"],"duration":174,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests GET /api/payments/:id (Get Payment by ID) should allow financial manager to get payment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075858635,"status":"passed","title":"should allow financial manager to get payment"},{"ancestorTitles":["Payment Integration Tests","GET /api/payments/:id (Get Payment by ID)"],"duration":159,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests GET /api/payments/:id (Get Payment by ID) should allow member to get their own payment","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075858809,"status":"passed","title":"should allow member to get their own payment"},{"ancestorTitles":["Payment Integration Tests","GET /api/payments/:id (Get Payment by ID)"],"duration":163,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests GET /api/payments/:id (Get Payment by ID) should return 404 for non-existent payment","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858968,"status":"passed","title":"should return 404 for non-existent payment"},{"ancestorTitles":["Payment Integration Tests","PUT /api/payments/:id/status (Update Payment Status)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests PUT /api/payments/:id/status (Update Payment Status) should reject without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859131,"status":"passed","title":"should reject without authentication"},{"ancestorTitles":["Payment Integration Tests","PUT /api/payments/:id/status (Update Payment Status)"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests PUT /api/payments/:id/status (Update Payment Status) should reject status update by member","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859136,"status":"passed","title":"should reject status update by member"},{"ancestorTitles":["Payment Integration Tests","PUT /api/payments/:id/status (Update Payment Status)"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests PUT /api/payments/:id/status (Update Payment Status) should allow financial manager to update status","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859143,"status":"passed","title":"should allow financial manager to update status"},{"ancestorTitles":["Payment Integration Tests","PUT /api/payments/:id/status (Update Payment Status)"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests PUT /api/payments/:id/status (Update Payment Status) should validate status values","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859151,"status":"passed","title":"should validate status values"},{"ancestorTitles":["Payment Integration Tests","PUT /api/payments/:id/status (Update Payment Status)"],"duration":28,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests PUT /api/payments/:id/status (Update Payment Status) should accept valid status values","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075859159,"status":"passed","title":"should accept valid status values"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments/:id/process (Process Payment)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments/:id/process (Process Payment) should reject without authentication","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859187,"status":"passed","title":"should reject without authentication"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments/:id/process (Process Payment)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments/:id/process (Process Payment) should reject processing by member","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859192,"status":"passed","title":"should reject processing by member"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments/:id/process (Process Payment)"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments/:id/process (Process Payment) should allow financial manager to process payment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859197,"status":"passed","title":"should allow financial manager to process payment"},{"ancestorTitles":["Payment Integration Tests","POST /api/payments/:id/process (Process Payment)"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests POST /api/payments/:id/process (Process Payment) should return proper error for already processed payment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859203,"status":"passed","title":"should return proper error for already processed payment"},{"ancestorTitles":["Payment Integration Tests","Payment Flow Integration"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Payment Flow Integration should handle complete payment lifecycle","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859218,"status":"passed","title":"should handle complete payment lifecycle"},{"ancestorTitles":["Payment Integration Tests","Error Handling"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Error Handling should return proper error structure","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075859225,"status":"passed","title":"should return proper error structure"},{"ancestorTitles":["Payment Integration Tests","Error Handling"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Error Handling should handle malformed JSON gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859232,"status":"passed","title":"should handle malformed JSON gracefully"},{"ancestorTitles":["Payment Integration Tests","Error Handling"],"duration":41,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Error Handling should validate payment amounts","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075859241,"status":"passed","title":"should validate payment amounts"},{"ancestorTitles":["Payment Integration Tests","Role-Based Access Control"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Role-Based Access Control should enforce role requirements for create","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859282,"status":"passed","title":"should enforce role requirements for create"},{"ancestorTitles":["Payment Integration Tests","Role-Based Access Control"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Role-Based Access Control should enforce role requirements for status update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859289,"status":"passed","title":"should enforce role requirements for status update"},{"ancestorTitles":["Payment Integration Tests","Role-Based Access Control"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Integration Tests Role-Based Access Control should enforce role requirements for processing","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859296,"status":"passed","title":"should enforce role requirements for processing"}],"endTime":1764075859304,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\routes\\payments.test.js","startTime":1764075856875,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Cascade Behavior Tests","Cascade Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cascade Behavior Tests Cascade Operations should enforce RESTRICT cascade rules on delete","invocations":1,"location":null,"numPassingAsserts":11,"retryReasons":[],"startAt":1764075859453,"status":"passed","title":"should enforce RESTRICT cascade rules on delete"},{"ancestorTitles":["Cascade Behavior Tests","Cascade Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Cascade Behavior Tests Cascade Operations should handle CASCADE update operations","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075859460,"status":"passed","title":"should handle CASCADE update operations"},{"ancestorTitles":["Cascade Behavior Tests","Cascade Operations"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveLength(expected)\n\nExpected length: 6\nReceived length: 5\nReceived array:  [{\"recordId\": \"MEM-002\", \"table\": \"members\"}, {\"recordId\": \"SUB-002\", \"table\": \"subscriptions\"}, {\"recordId\": \"SUB-003\", \"table\": \"subscriptions\"}, {\"recordId\": \"NOT-002\", \"table\": \"notifications\"}, {\"recordId\": \"NOT-003\", \"table\": \"notifications\"}]","pass":false}}],"failureMessages":["Error: expect(received).toHaveLength(expected)\n\nExpected length: 6\nReceived length: 5\nReceived array:  [{\"recordId\": \"MEM-002\", \"table\": \"members\"}, {\"recordId\": \"SUB-002\", \"table\": \"subscriptions\"}, {\"recordId\": \"SUB-003\", \"table\": \"subscriptions\"}, {\"recordId\": \"NOT-002\", \"table\": \"notifications\"}, {\"recordId\": \"NOT-003\", \"table\": \"notifications\"}]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\cascade-behavior.test.js:390:30)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"Cascade Behavior Tests Cascade Operations should handle complex cascade scenarios with multiple relationships","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859461,"status":"failed","title":"should handle complex cascade scenarios with multiple relationships"}],"endTime":1764075859488,"message":"  ● Cascade Behavior Tests › Cascade Operations › should handle complex cascade scenarios with multiple relationships\n\n    expect(received).toHaveLength(expected)\n\n    Expected length: 6\n    Received length: 5\n    Received array:  [{\"recordId\": \"MEM-002\", \"table\": \"members\"}, {\"recordId\": \"SUB-002\", \"table\": \"subscriptions\"}, {\"recordId\": \"SUB-003\", \"table\": \"subscriptions\"}, {\"recordId\": \"NOT-002\", \"table\": \"notifications\"}, {\"recordId\": \"NOT-003\", \"table\": \"notifications\"}]\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m\n     \u001b[90m 389 |\u001b[39m       \u001b[90m// Verify all cascades\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       expect(result\u001b[33m.\u001b[39mdeleted)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m6\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 1 member + 2 subscriptions + 2 notifications\u001b[39m\n     \u001b[90m     |\u001b[39m                              \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m       expect(result\u001b[33m.\u001b[39mupdated)\u001b[33m.\u001b[39mtoHaveLength(\u001b[35m2\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// 2 documents set to null\u001b[39m\n     \u001b[90m 392 |\u001b[39m\n     \u001b[90m 393 |\u001b[39m       \u001b[90m// Verify specific deletions\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/data/cascade-behavior.test.js:390:30)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\cascade-behavior.test.js","startTime":1764075859324,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments"],"duration":390,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments should return paginated payments for financial_manager","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858410,"status":"passed","title":"should return paginated payments for financial_manager"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments should reject member role with 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858801,"status":"passed","title":"should reject member role with 403"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments"],"duration":27,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments should create payment for financial_manager","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858812,"status":"passed","title":"should create payment for financial_manager"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments should reject member role with 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858840,"status":"passed","title":"should reject member role with 403"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/member/:memberId"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/member/:memberId should allow member to view own payments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858851,"status":"passed","title":"should allow member to view own payments"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/member/:memberId"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/member/:memberId should reject member viewing other member payments with 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858989,"status":"passed","title":"should reject member viewing other member payments with 403"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/member/:memberId"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/member/:memberId should allow financial_manager to view any member payments","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858995,"status":"passed","title":"should allow financial_manager to view any member payments"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments/mobile/initiative"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments/mobile/initiative should allow member to pay for initiative","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859138,"status":"passed","title":"should allow member to pay for initiative"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments/mobile/initiative"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments/mobile/initiative should reject financial_manager role with 403 (mobile endpoints are member-only)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859150,"status":"passed","title":"should reject financial_manager role with 403 (mobile endpoints are member-only)"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments/mobile/subscription"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments/mobile/subscription should allow member to pay subscription","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859160,"status":"passed","title":"should allow member to pay subscription"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/statistics"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/statistics should return statistics for financial_manager","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859173,"status":"passed","title":"should return statistics for financial_manager"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/statistics"],"duration":151,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/statistics should reject member role with 403 or 404","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859317,"status":"passed","title":"should reject member role with 403 or 404"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments/bulk-update"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments/bulk-update should allow super_admin to perform bulk update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859469,"status":"passed","title":"should allow super_admin to perform bulk update"},{"ancestorTitles":["Payments Controller Integration Tests","POST /api/payments/bulk-update"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests POST /api/payments/bulk-update should reject financial_manager with 403 (super_admin only)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859477,"status":"passed","title":"should reject financial_manager with 403 (super_admin only)"},{"ancestorTitles":["Payments Controller Integration Tests","GET /api/payments/receipt/:paymentId"],"duration":135,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payments Controller Integration Tests GET /api/payments/receipt/:paymentId should generate receipt for member own payment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859482,"status":"passed","title":"should generate receipt for member own payment"}],"endTime":1764075859619,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\payments.test.js","startTime":1764075856912,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/financial-summary"],"duration":324,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/financial-summary should return financial summary with admin role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859054,"status":"passed","title":"should return financial summary with admin role"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/financial-summary"],"duration":182,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/financial-summary should return yearly summary with details for financial_manager","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859380,"status":"passed","title":"should return yearly summary with details for financial_manager"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/financial-summary"],"duration":157,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/financial-summary should support Hijri calendar queries for treasurer","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859562,"status":"passed","title":"should support Hijri calendar queries for treasurer"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/financial-summary"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/financial-summary should reject unauthorized access from member role","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859719,"status":"passed","title":"should reject unauthorized access from member role"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/financial-summary"],"duration":174,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/financial-summary should reject invalid period parameter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859728,"status":"passed","title":"should reject invalid period parameter"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/forensic"],"duration":197,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/forensic should generate full forensic analysis for admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859902,"status":"passed","title":"should generate full forensic analysis for admin"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/forensic"],"duration":168,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/forensic should detect revenue anomalies for auditor","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860099,"status":"passed","title":"should detect revenue anomalies for auditor"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/forensic"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/forensic should reject forensic access from financial_manager","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860268,"status":"passed","title":"should reject forensic access from financial_manager"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/forensic"],"duration":166,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/forensic should reject request without report_type parameter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860279,"status":"passed","title":"should reject request without report_type parameter"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/cash-flow"],"duration":147,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/cash-flow should return monthly cash flow analysis for financial_manager","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075860446,"status":"passed","title":"should return monthly cash flow analysis for financial_manager"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/cash-flow"],"duration":167,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/cash-flow should support quarterly analysis with custom range for treasurer","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860593,"status":"passed","title":"should support quarterly analysis with custom range for treasurer"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/cash-flow"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/cash-flow should reject unauthorized access from member","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860761,"status":"passed","title":"should reject unauthorized access from member"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/budget-variance"],"duration":159,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/budget-variance should return monthly budget variance for admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860766,"status":"passed","title":"should return monthly budget variance for admin"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/budget-variance"],"duration":187,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/budget-variance should return yearly variance analysis for auditor","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860925,"status":"passed","title":"should return yearly variance analysis for auditor"},{"ancestorTitles":["Financial Reports Controller Integration Tests","GET /api/reports/budget-variance"],"duration":160,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Financial Reports Controller Integration Tests GET /api/reports/budget-variance should reject budget variance access from treasurer (enhanced RBAC)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861112,"status":"passed","title":"should reject budget variance access from treasurer (enhanced RBAC)"}],"endTime":1764075861274,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\financialReports.test.js","startTime":1764075856895,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Validation Edge Cases Tests","Payment Validation Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Validation Edge Cases Tests Payment Validation Operations should validate amount edge cases correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075861367,"status":"passed","title":"should validate amount edge cases correctly"},{"ancestorTitles":["Payment Validation Edge Cases Tests","Payment Validation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Validation Edge Cases Tests Payment Validation Operations should validate Arabic and special characters in description","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075861372,"status":"passed","title":"should validate Arabic and special characters in description"},{"ancestorTitles":["Payment Validation Edge Cases Tests","Payment Validation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Validation Edge Cases Tests Payment Validation Operations should validate metadata constraints","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075861374,"status":"passed","title":"should validate metadata constraints"},{"ancestorTitles":["Payment Validation Edge Cases Tests","Payment Validation Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Validation Edge Cases Tests Payment Validation Operations should handle currency conversion correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075861375,"status":"passed","title":"should handle currency conversion correctly"},{"ancestorTitles":["Payment Validation Edge Cases Tests","Payment Validation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Validation Edge Cases Tests Payment Validation Operations should validate batch payments with mixed validity","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075861381,"status":"passed","title":"should validate batch payments with mixed validity"}],"endTime":1764075861383,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-validation.test.js","startTime":1764075861282,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":31,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859248,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":114,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should require phone parameter","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075859279,"status":"passed","title":"should require phone parameter"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should require minimum 8 digits","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859394,"status":"passed","title":"should require minimum 8 digits"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should validate phone format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859405,"status":"passed","title":"should validate phone format"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":189,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should search by Saudi phone number","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859420,"status":"passed","title":"should search by Saudi phone number"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":175,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should return statement with financial data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859609,"status":"passed","title":"should return statement with financial data"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":176,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should return alert messages","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859784,"status":"passed","title":"should return alert messages"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/phone"],"duration":140,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/phone should return recent transactions","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859960,"status":"passed","title":"should return recent transactions"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860101,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should require name parameter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860108,"status":"passed","title":"should require name parameter"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should require minimum 3 characters","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860115,"status":"passed","title":"should require minimum 3 characters"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":145,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should search by Arabic name","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075860122,"status":"passed","title":"should search by Arabic name"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":167,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should normalize Arabic text for better search","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860268,"status":"passed","title":"should normalize Arabic text for better search"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/name"],"duration":163,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/name should limit results to 10 members","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075860435,"status":"passed","title":"should limit results to 10 members"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/member-id"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/member-id should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860598,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/member-id"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/member-id should require memberId parameter","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860602,"status":"passed","title":"should require memberId parameter"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/search/member-id"],"duration":144,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/search/member-id should search by membership number","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860610,"status":"passed","title":"should search by membership number"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/generate/:memberId"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/generate/:memberId should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860754,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/generate/:memberId"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/generate/:memberId should generate statement for member","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860758,"status":"passed","title":"should generate statement for member"},{"ancestorTitles":["Statements Controller Integration Tests","GET /api/statements/generate/:memberId"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests GET /api/statements/generate/:memberId should include comprehensive statement data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075860894,"status":"passed","title":"should include comprehensive statement data"},{"ancestorTitles":["Statements Controller Integration Tests","Statement Data Quality"],"duration":139,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests Statement Data Quality should calculate balance correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861037,"status":"passed","title":"should calculate balance correctly"},{"ancestorTitles":["Statements Controller Integration Tests","Statement Data Quality"],"duration":144,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests Statement Data Quality should set appropriate alert levels","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861176,"status":"passed","title":"should set appropriate alert levels"},{"ancestorTitles":["Statements Controller Integration Tests","Statement Data Quality"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests Statement Data Quality should calculate percentage complete correctly","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861320,"status":"passed","title":"should calculate percentage complete correctly"},{"ancestorTitles":["Statements Controller Integration Tests","Statement Data Quality"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Statements Controller Integration Tests Statement Data Quality should include transaction statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861461,"status":"passed","title":"should include transaction statistics"}],"endTime":1764075861604,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\statements.test.js","startTime":1764075858651,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["PaymentProcessingService","generateReferenceNumber"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService generateReferenceNumber should generate reference number with SH prefix","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861620,"status":"passed","title":"should generate reference number with SH prefix"},{"ancestorTitles":["PaymentProcessingService","generateReferenceNumber"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService generateReferenceNumber should generate unique reference numbers","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861622,"status":"passed","title":"should generate unique reference numbers"},{"ancestorTitles":["PaymentProcessingService","generateReferenceNumber"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService generateReferenceNumber should include timestamp in reference number","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075861623,"status":"passed","title":"should include timestamp in reference number"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should accept valid positive amounts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861624,"status":"passed","title":"should accept valid positive amounts"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should reject zero amount","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861624,"status":"passed","title":"should reject zero amount"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should reject negative amounts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861625,"status":"passed","title":"should reject negative amounts"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should reject non-numeric amounts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861625,"status":"passed","title":"should reject non-numeric amounts"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should reject amounts exceeding maximum (100,000 SAR)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861625,"status":"passed","title":"should reject amounts exceeding maximum (100,000 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Basic Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Basic Validation should accept maximum amount (100,000 SAR)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861626,"status":"passed","title":"should accept maximum amount (100,000 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Subscription Category Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Subscription Category Validation should accept minimum subscription amount (50 SAR)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861627,"status":"passed","title":"should accept minimum subscription amount (50 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Subscription Category Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Subscription Category Validation should reject subscription below minimum (50 SAR)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861628,"status":"passed","title":"should reject subscription below minimum (50 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Subscription Category Validation"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Subscription Category Validation should accept subscription multiples of 50","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075861628,"status":"passed","title":"should accept subscription multiples of 50"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Subscription Category Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Subscription Category Validation should reject subscription not multiple of 50","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075861630,"status":"passed","title":"should reject subscription not multiple of 50"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Subscription Category Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Subscription Category Validation should handle decimal subscriptions correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861631,"status":"passed","title":"should handle decimal subscriptions correctly"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Event Category Validation"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Event Category Validation should accept minimum event amount (10 SAR)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861632,"status":"passed","title":"should accept minimum event amount (10 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Event Category Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Event Category Validation should reject event below minimum (10 SAR)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861632,"status":"passed","title":"should reject event below minimum (10 SAR)"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Event Category Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Event Category Validation should accept various event amounts","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075861633,"status":"passed","title":"should accept various event amounts"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Other Categories"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Other Categories should accept any valid amount for donation category","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075861634,"status":"passed","title":"should accept any valid amount for donation category"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Other Categories"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Other Categories should accept any valid amount for membership category","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861635,"status":"passed","title":"should accept any valid amount for membership category"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Other Categories"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Other Categories should accept any valid amount for diya category","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861640,"status":"passed","title":"should accept any valid amount for diya category"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Edge Cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Edge Cases should handle string numbers correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861640,"status":"passed","title":"should handle string numbers correctly"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Edge Cases"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Edge Cases should handle decimal amounts","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861641,"status":"passed","title":"should handle decimal amounts"},{"ancestorTitles":["PaymentProcessingService","validatePaymentAmount","Edge Cases"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService validatePaymentAmount Edge Cases should return error for validation exception","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861641,"status":"passed","title":"should return error for validation exception"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should remove HTML tags","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861642,"status":"passed","title":"should remove HTML tags"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should remove script tags and content","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861642,"status":"passed","title":"should remove script tags and content"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should remove dangerous characters","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075861643,"status":"passed","title":"should remove dangerous characters"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should trim whitespace","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861643,"status":"passed","title":"should trim whitespace"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should limit length to 500 characters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861643,"status":"passed","title":"should limit length to 500 characters"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should return empty string for null/undefined","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861644,"status":"passed","title":"should return empty string for null/undefined"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should preserve Arabic text","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861644,"status":"passed","title":"should preserve Arabic text"},{"ancestorTitles":["PaymentProcessingService","sanitizeDescription"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService sanitizeDescription should handle mixed Arabic and English","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075861644,"status":"passed","title":"should handle mixed Arabic and English"},{"ancestorTitles":["PaymentProcessingService","Integration Scenarios"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService Integration Scenarios should validate complete payment workflow","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861645,"status":"passed","title":"should validate complete payment workflow"},{"ancestorTitles":["PaymentProcessingService","Integration Scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"PaymentProcessingService Integration Scenarios should handle subscription calculation correctly","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075861645,"status":"passed","title":"should handle subscription calculation correctly"}],"endTime":1764075861647,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\unit\\services\\paymentProcessing.test.js","startTime":1764075861392,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","GET /api/notifications"],"duration":59,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC GET /api/notifications should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858327,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","GET /api/notifications"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC GET /api/notifications should deny access to members","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858387,"status":"passed","title":"should deny access to members"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","GET /api/notifications"],"duration":518,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC GET /api/notifications should allow access to super_admin","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858402,"status":"passed","title":"should allow access to super_admin"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","GET /api/notifications"],"duration":394,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC GET /api/notifications should allow access to financial_manager","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075858920,"status":"passed","title":"should allow access to financial_manager"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","POST /api/notifications"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC POST /api/notifications should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859315,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","POST /api/notifications"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC POST /api/notifications should deny access to members","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859334,"status":"passed","title":"should deny access to members"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","DELETE /api/notifications/:id"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC DELETE /api/notifications/:id should require super_admin role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859343,"status":"passed","title":"should require super_admin role"},{"ancestorTitles":["Notifications Controller Integration Tests","Authentication & RBAC","PUT /api/notifications/bulk-read"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Authentication & RBAC PUT /api/notifications/bulk-read should require super_admin role","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859354,"status":"passed","title":"should require super_admin role"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","GET /api/notifications - List All"],"duration":369,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations GET /api/notifications - List All should return paginated notifications list","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075859364,"status":"passed","title":"should return paginated notifications list"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","GET /api/notifications/:id - Get By ID"],"duration":159,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations GET /api/notifications/:id - Get By ID should return notification by ID","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859734,"status":"passed","title":"should return notification by ID"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","POST /api/notifications - Create"],"duration":457,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations POST /api/notifications - Create should create notification successfully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859893,"status":"passed","title":"should create notification successfully"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","PUT /api/notifications/:id/read - Mark as Read"],"duration":159,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations PUT /api/notifications/:id/read - Mark as Read should mark notification as read","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860350,"status":"passed","title":"should mark notification as read"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","PUT /api/notifications/bulk-read - Bulk Mark"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations PUT /api/notifications/bulk-read - Bulk Mark should bulk mark notifications as read","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860509,"status":"passed","title":"should bulk mark notifications as read"},{"ancestorTitles":["Notifications Controller Integration Tests","CRUD Operations","DELETE /api/notifications/:id - Delete"],"duration":138,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests CRUD Operations DELETE /api/notifications/:id - Delete should delete notification","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860646,"status":"passed","title":"should delete notification"},{"ancestorTitles":["Notifications Controller Integration Tests","Filtering & Pagination"],"duration":140,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Filtering & Pagination should filter notifications by type","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075860784,"status":"passed","title":"should filter notifications by type"},{"ancestorTitles":["Notifications Controller Integration Tests","Filtering & Pagination"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Filtering & Pagination should filter notifications by priority","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860925,"status":"passed","title":"should filter notifications by priority"},{"ancestorTitles":["Notifications Controller Integration Tests","Filtering & Pagination"],"duration":378,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Filtering & Pagination should filter notifications by read status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861067,"status":"passed","title":"should filter notifications by read status"},{"ancestorTitles":["Notifications Controller Integration Tests","Filtering & Pagination"],"duration":346,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Filtering & Pagination should support pagination","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075861445,"status":"passed","title":"should support pagination"},{"ancestorTitles":["Notifications Controller Integration Tests","Validation"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Validation should require title and message","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861791,"status":"passed","title":"should require title and message"},{"ancestorTitles":["Notifications Controller Integration Tests","Validation"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Validation should validate notification type enum","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861797,"status":"passed","title":"should validate notification type enum"},{"ancestorTitles":["Notifications Controller Integration Tests","Validation"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Validation should validate priority enum","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861806,"status":"passed","title":"should validate priority enum"},{"ancestorTitles":["Notifications Controller Integration Tests","Statistics"],"duration":405,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Statistics should return notification statistics","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"startAt":1764075861813,"status":"passed","title":"should return notification statistics"},{"ancestorTitles":["Notifications Controller Integration Tests","Member-Specific Operations"],"duration":362,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Member-Specific Operations should return member notifications","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075862219,"status":"passed","title":"should return member notifications"},{"ancestorTitles":["Notifications Controller Integration Tests","Member-Specific Operations"],"duration":151,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Member-Specific Operations should allow members to access own notifications","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075862582,"status":"passed","title":"should allow members to access own notifications"},{"ancestorTitles":["Notifications Controller Integration Tests","Member-Specific Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Notifications Controller Integration Tests Member-Specific Operations should deny members from accessing other members notifications","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075862734,"status":"passed","title":"should deny members from accessing other members notifications"}],"endTime":1764075862740,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\notifications.test.js","startTime":1764075856905,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Initiatives Controller Integration Tests","POST / - Create Initiative"],"duration":161,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST / - Create Initiative should allow admin to create initiative","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859994,"status":"passed","title":"should allow admin to create initiative"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST / - Create Initiative"],"duration":294,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST / - Create Initiative should reject member with 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860156,"status":"passed","title":"should reject member with 403"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST / - Create Initiative"],"duration":265,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST / - Create Initiative should validate required fields (title_ar and target_amount)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860450,"status":"passed","title":"should validate required fields (title_ar and target_amount)"},{"ancestorTitles":["Initiatives Controller Integration Tests","PATCH /:id/status - Change Initiative Status"],"duration":137,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests PATCH /:id/status - Change Initiative Status should allow admin to change initiative status","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860715,"status":"passed","title":"should allow admin to change initiative status"},{"ancestorTitles":["Initiatives Controller Integration Tests","GET /admin/all - Get All Initiatives"],"duration":144,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests GET /admin/all - Get All Initiatives should allow admin to view all initiatives","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860852,"status":"passed","title":"should allow admin to view all initiatives"},{"ancestorTitles":["Initiatives Controller Integration Tests","GET /admin/all - Get All Initiatives"],"duration":275,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests GET /admin/all - Get All Initiatives should reject member with 403","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860996,"status":"passed","title":"should reject member with 403"},{"ancestorTitles":["Initiatives Controller Integration Tests","GET /:id/non-contributors - Get Non-Contributing Members"],"duration":135,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests GET /:id/non-contributors - Get Non-Contributing Members should allow admin to view non-contributors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861271,"status":"passed","title":"should allow admin to view non-contributors"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST /:id/notify-non-contributors - Notify Non-Contributors"],"duration":140,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST /:id/notify-non-contributors - Notify Non-Contributors should allow admin to notify non-contributors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861406,"status":"passed","title":"should allow admin to notify non-contributors"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST /:id/push-notification - Broadcast to All Members"],"duration":136,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST /:id/push-notification - Broadcast to All Members should allow admin to broadcast notification to all members","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861546,"status":"passed","title":"should allow admin to broadcast notification to all members"},{"ancestorTitles":["Initiatives Controller Integration Tests","GET /active - Get Active Initiatives"],"duration":279,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests GET /active - Get Active Initiatives should allow member to view active initiatives","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075861682,"status":"passed","title":"should allow member to view active initiatives"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST /:id/contribute - Contribute to Initiative"],"duration":287,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST /:id/contribute - Contribute to Initiative should allow member to contribute to active initiative","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075861962,"status":"passed","title":"should allow member to contribute to active initiative"},{"ancestorTitles":["Initiatives Controller Integration Tests","POST /:id/contribute - Contribute to Initiative"],"duration":273,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests POST /:id/contribute - Contribute to Initiative should validate contribution amount constraints","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075862249,"status":"passed","title":"should validate contribution amount constraints"},{"ancestorTitles":["Initiatives Controller Integration Tests","GET /my-contributions - Get My Contributions"],"duration":266,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Initiatives Controller Integration Tests GET /my-contributions - Get My Contributions should allow member to view own contributions","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075862522,"status":"passed","title":"should allow member to view own contributions"}],"endTime":1764075862790,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\initiatives.test.js","startTime":1764075859627,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment History Tracking Tests","Payment History Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment History Tracking Tests Payment History Operations should track member payment history with filters","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075862841,"status":"passed","title":"should track member payment history with filters"},{"ancestorTitles":["Payment History Tracking Tests","Payment History Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment History Tracking Tests Payment History Operations should generate comprehensive summary report","invocations":1,"location":null,"numPassingAsserts":14,"retryReasons":[],"startAt":1764075862848,"status":"passed","title":"should generate comprehensive summary report"},{"ancestorTitles":["Payment History Tracking Tests","Payment History Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment History Tracking Tests Payment History Operations should calculate member payment statistics","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075862852,"status":"passed","title":"should calculate member payment statistics"}],"endTime":1764075862855,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-history.test.js","startTime":1764075862748,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Foreign Key Relationships Tests","Foreign Key Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Foreign Key Relationships Tests Foreign Key Operations should validate foreign key references correctly","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862901,"status":"passed","title":"should validate foreign key references correctly"},{"ancestorTitles":["Foreign Key Relationships Tests","Foreign Key Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Foreign Key Relationships Tests Foreign Key Operations should handle CASCADE delete operations","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862904,"status":"passed","title":"should handle CASCADE delete operations"},{"ancestorTitles":["Foreign Key Relationships Tests","Foreign Key Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Foreign Key Relationships Tests Foreign Key Operations should handle SET_NULL on delete operations","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075862905,"status":"passed","title":"should handle SET_NULL on delete operations"},{"ancestorTitles":["Foreign Key Relationships Tests","Foreign Key Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Foreign Key Relationships Tests Foreign Key Operations should enforce RESTRICT delete constraints","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075862907,"status":"passed","title":"should enforce RESTRICT delete constraints"},{"ancestorTitles":["Foreign Key Relationships Tests","Foreign Key Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Foreign Key Relationships Tests Foreign Key Operations should find all related records for a parent","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862912,"status":"passed","title":"should find all related records for a parent"}],"endTime":1764075862914,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\foreign-keys.test.js","startTime":1764075862797,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Member Data Integrity Tests","Member Constraint Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Member Data Integrity Tests Member Constraint Operations should validate required member fields","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862958,"status":"passed","title":"should validate required member fields"},{"ancestorTitles":["Member Data Integrity Tests","Member Constraint Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Member Data Integrity Tests Member Constraint Operations should enforce unique constraints on member data","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862963,"status":"passed","title":"should enforce unique constraints on member data"},{"ancestorTitles":["Member Data Integrity Tests","Member Constraint Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Member Data Integrity Tests Member Constraint Operations should validate member name with Arabic and English characters","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862969,"status":"passed","title":"should validate member name with Arabic and English characters"},{"ancestorTitles":["Member Data Integrity Tests","Member Constraint Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Member Data Integrity Tests Member Constraint Operations should validate Saudi and Kuwait phone numbers","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075862970,"status":"passed","title":"should validate Saudi and Kuwait phone numbers"}],"endTime":1764075862973,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\member-constraints.test.js","startTime":1764075862860,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Load Testing with Concurrent Users","Authentication Load Test"],"duration":518,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Load Testing with Concurrent Users Authentication Load Test should handle 10 concurrent login requests","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862224,"status":"passed","title":"should handle 10 concurrent login requests"},{"ancestorTitles":["Load Testing with Concurrent Users","Member List Load Test"],"duration":644,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Load Testing with Concurrent Users Member List Load Test should handle 20 concurrent member list requests","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862743,"status":"passed","title":"should handle 20 concurrent member list requests"},{"ancestorTitles":["Load Testing with Concurrent Users","Payment Creation Load Test"],"duration":33,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Load Testing with Concurrent Users Payment Creation Load Test should handle 5 concurrent payment creation requests","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075863387,"status":"passed","title":"should handle 5 concurrent payment creation requests"},{"ancestorTitles":["Load Testing with Concurrent Users","Mixed Operations Load Test"],"duration":228,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Load Testing with Concurrent Users Mixed Operations Load Test should handle 15 concurrent mixed read/write operations","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075863421,"status":"passed","title":"should handle 15 concurrent mixed read/write operations"}],"endTime":1764075863650,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\performance\\load-testing.test.js","startTime":1764075861653,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete Occasions Management Workflow"],"duration":358,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete Occasions Management Workflow should complete full occasions lifecycle","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863382,"status":"passed","title":"should complete full occasions lifecycle"}],"endTime":1764075863742,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\occasions-management.e2e.test.js","startTime":1764075862980,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":81,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should reject login without credentials","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858317,"status":"passed","title":"should reject login without credentials"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should reject login with only email","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858399,"status":"passed","title":"should reject login with only email"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should reject login with only password","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858410,"status":"passed","title":"should reject login with only password"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":450,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should handle login attempt with valid format but non-existent user","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075858430,"status":"passed","title":"should handle login attempt with valid format but non-existent user"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":312,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should accept phone-based admin login format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075858880,"status":"passed","title":"should accept phone-based admin login format"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/login (Admin Login)"],"duration":280,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/login (Admin Login) should validate email format in identifier","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075859192,"status":"passed","title":"should validate email format in identifier"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should reject member login without credentials","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075859472,"status":"passed","title":"should reject member login without credentials"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should reject member login with only phone","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075859476,"status":"passed","title":"should reject member login with only phone"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should reject member login with only password","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075859481,"status":"passed","title":"should reject member login with only password"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":287,"failing":false,"failureDetails":[{"matcherResult":{"actual":401,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\routes\\auth.test.js:153:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should authenticate test member with valid credentials","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859489,"status":"failed","title":"should authenticate test member with valid credentials"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":296,"failing":false,"failureDetails":[{"matcherResult":{"actual":401,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\routes\\auth.test.js:169:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should authenticate test member with test password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859778,"status":"failed","title":"should authenticate test member with test password"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":303,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should reject test member with wrong password","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075860074,"status":"passed","title":"should reject test member with wrong password"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/member-login (Member Login)"],"duration":276,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/member-login (Member Login) should return proper member data structure","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075860377,"status":"passed","title":"should return proper member data structure"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/mobile-login (Mobile Login Alias)"],"duration":637,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/mobile-login (Mobile Login Alias) should work identically to member-login","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075860653,"status":"passed","title":"should work identically to member-login"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/mobile-login (Mobile Login Alias)"],"duration":312,"failing":false,"failureDetails":[{"matcherResult":{"actual":401,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 401\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\routes\\auth.test.js:238:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Auth Integration Tests POST /api/auth/mobile-login (Mobile Login Alias) should authenticate via mobile-login endpoint","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861290,"status":"failed","title":"should authenticate via mobile-login endpoint"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/verify (JWT Verification)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/verify (JWT Verification) should reject verification without token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861886,"status":"passed","title":"should reject verification without token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/verify (JWT Verification)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/verify (JWT Verification) should reject verification with invalid token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075861889,"status":"passed","title":"should reject verification with invalid token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/verify (JWT Verification)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/verify (JWT Verification) should verify valid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861892,"status":"passed","title":"should verify valid token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/verify (JWT Verification)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/verify (JWT Verification) should return user data in verification response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861892,"status":"passed","title":"should return user data in verification response"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/verify (JWT Verification)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/verify (JWT Verification) should include newToken if token is expiring soon","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861893,"status":"passed","title":"should include newToken if token is expiring soon"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/refresh (Token Refresh)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/refresh (Token Refresh) should reject refresh without token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862229,"status":"passed","title":"should reject refresh without token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/refresh (Token Refresh)"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/refresh (Token Refresh) should reject refresh with invalid token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075862234,"status":"passed","title":"should reject refresh with invalid token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/refresh (Token Refresh)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/refresh (Token Refresh) should refresh valid token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862238,"status":"passed","title":"should refresh valid token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/refresh (Token Refresh)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/refresh (Token Refresh) should return user data with refreshed token","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862239,"status":"passed","title":"should return user data with refreshed token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/refresh (Token Refresh)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/refresh (Token Refresh) refreshed token should preserve user data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862239,"status":"passed","title":"refreshed token should preserve user data"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/change-password (Password Change)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/change-password (Password Change) should reject password change without token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862526,"status":"passed","title":"should reject password change without token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/change-password (Password Change)"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/change-password (Password Change) should reject password change with invalid token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862529,"status":"passed","title":"should reject password change with invalid token"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/change-password (Password Change)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/change-password (Password Change) should reject password change without new password","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862532,"status":"passed","title":"should reject password change without new password"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/change-password (Password Change)"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/change-password (Password Change) should accept password change for test member","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862532,"status":"passed","title":"should accept password change for test member"},{"ancestorTitles":["Auth Integration Tests","POST /api/auth/change-password (Password Change)"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests POST /api/auth/change-password (Password Change) should return Arabic success message","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862533,"status":"passed","title":"should return Arabic success message"},{"ancestorTitles":["Auth Integration Tests","Phone Number Normalization"],"duration":745,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Phone Number Normalization should accept phone with spaces","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075862533,"status":"passed","title":"should accept phone with spaces"},{"ancestorTitles":["Auth Integration Tests","Phone Number Normalization"],"duration":289,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Phone Number Normalization should accept phone with dashes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863279,"status":"passed","title":"should accept phone with dashes"},{"ancestorTitles":["Auth Integration Tests","Phone Number Normalization"],"duration":308,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Phone Number Normalization should accept international format","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863568,"status":"passed","title":"should accept international format"},{"ancestorTitles":["Auth Integration Tests","Error Handling"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Error Handling should return proper error structure","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863876,"status":"passed","title":"should return proper error structure"},{"ancestorTitles":["Auth Integration Tests","Error Handling"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Error Handling should handle malformed JSON gracefully","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863880,"status":"passed","title":"should handle malformed JSON gracefully"},{"ancestorTitles":["Auth Integration Tests","Error Handling"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Auth Integration Tests Error Handling should handle missing content-type header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863887,"status":"passed","title":"should handle missing content-type header"}],"endTime":1764075863933,"message":"  ● Auth Integration Tests › POST /api/auth/member-login (Member Login) › should authenticate test member with valid credentials\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 401\n\n    \u001b[0m \u001b[90m 151 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 152 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 153 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 154 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 155 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 156 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'user'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/routes/auth.test.js:153:31)\n\n  ● Auth Integration Tests › POST /api/auth/member-login (Member Login) › should authenticate test member with test password\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 401\n\n    \u001b[0m \u001b[90m 167 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 168 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 169 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 170 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 171 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 172 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39muser)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'role'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/routes/auth.test.js:169:31)\n\n  ● Auth Integration Tests › POST /api/auth/mobile-login (Mobile Login Alias) › should authenticate via mobile-login endpoint\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 401\n\n    \u001b[0m \u001b[90m 236 |\u001b[39m         })\u001b[33m;\u001b[39m\n     \u001b[90m 237 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 238 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 239 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 240 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 241 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/routes/auth.test.js:238:31)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\routes\\auth.test.js","startTime":1764075856880,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests GET /api/expenses should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075859871,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":21,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests GET /api/expenses should deny access to non-financial managers","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075859891,"status":"passed","title":"should deny access to non-financial managers"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":432,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:74:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should allow financial managers to view expenses","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075859912,"status":"failed","title":"should allow financial managers to view expenses"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":443,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:87:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should return expenses with summary statistics","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075860346,"status":"failed","title":"should return expenses with summary statistics"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":504,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:102:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should support category filtering","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075860789,"status":"failed","title":"should support category filtering"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":425,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:113:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should support status filtering","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861293,"status":"failed","title":"should support status filtering"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":549,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:124:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should support Hijri date filtering","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075861718,"status":"failed","title":"should support Hijri date filtering"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":455,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:135:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should support search functionality","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862267,"status":"failed","title":"should support search functionality"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses"],"duration":730,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:146:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses should include pagination information","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075862722,"status":"failed","title":"should include pagination information"},{"ancestorTitles":["Expenses Controller Integration Tests","POST /api/expenses"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests POST /api/expenses should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863453,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Expenses Controller Integration Tests","POST /api/expenses"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests POST /api/expenses should deny access to members","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863464,"status":"passed","title":"should deny access to members"},{"ancestorTitles":["Expenses Controller Integration Tests","POST /api/expenses"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests POST /api/expenses should require all required fields","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863470,"status":"passed","title":"should require all required fields"},{"ancestorTitles":["Expenses Controller Integration Tests","POST /api/expenses"],"duration":190,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests POST /api/expenses should auto-approve for financial managers","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863478,"status":"passed","title":"should auto-approve for financial managers"},{"ancestorTitles":["Expenses Controller Integration Tests","POST /api/expenses"],"duration":159,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests POST /api/expenses should generate Hijri dates automatically","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863668,"status":"passed","title":"should generate Hijri dates automatically"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses/statistics"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests GET /api/expenses/statistics should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863827,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses/statistics"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests GET /api/expenses/statistics should deny access to non-financial managers","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863830,"status":"passed","title":"should deny access to non-financial managers"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses/statistics"],"duration":323,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:281:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses/statistics should return comprehensive statistics","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075863834,"status":"failed","title":"should return comprehensive statistics"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses/statistics"],"duration":291,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:298:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses/statistics should support period filtering","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075864157,"status":"failed","title":"should support period filtering"},{"ancestorTitles":["Expenses Controller Integration Tests","GET /api/expenses/statistics"],"duration":303,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": \"1446\", \"type\": \"year\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}","pass":false}}],"failureMessages":["Error: expect(received).toHaveProperty(path)\n\nExpected path: \"total_expenses\"\nReceived path: []\n\nReceived value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": \"1446\", \"type\": \"year\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js:311:34)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Expenses Controller Integration Tests GET /api/expenses/statistics should support Hijri year filtering","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075864448,"status":"failed","title":"should support Hijri year filtering"},{"ancestorTitles":["Expenses Controller Integration Tests","RBAC and Access Control"],"duration":459,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests RBAC and Access Control should log financial access attempts","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075864752,"status":"passed","title":"should log financial access attempts"},{"ancestorTitles":["Expenses Controller Integration Tests","RBAC and Access Control"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Expenses Controller Integration Tests RBAC and Access Control should block non-financial users consistently","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075865211,"status":"passed","title":"should block non-financial users consistently"}],"endTime":1764075865268,"message":"  ● Expenses Controller Integration Tests › GET /api/expenses › should allow financial managers to view expenses\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 72 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 73 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 74 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 75 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 76 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'expenses'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mexpenses))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:74:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should return expenses with summary statistics\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 85 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 86 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 87 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 88 |\u001b[39m       \u001b[90m// Response structure: {data: {expenses: [...], metadata: {...}, total_amount, total_count}}\u001b[39m\n     \u001b[90m 89 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'expenses'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_amount'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:87:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should support category filtering\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 100 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 101 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 102 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 103 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 104 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 105 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:102:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should support status filtering\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 111 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 112 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 113 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 114 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 115 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 116 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:113:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should support Hijri date filtering\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 122 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 123 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 124 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 125 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 126 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 127 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:124:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should support search functionality\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 133 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 134 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 135 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 136 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 137 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 138 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:135:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses › should include pagination information\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 500\n\n    \u001b[0m \u001b[90m 144 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${token}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 145 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 146 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 147 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mmetadata)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 148 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mmetadata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'limit'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 149 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mmetadata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'page'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:146:31)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses/statistics › should return comprehensive statistics\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"total_expenses\"\n    Received path: []\n\n    Received value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n\n    \u001b[0m \u001b[90m 279 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 280 |\u001b[39m       \u001b[90m// API returns flat structure with totals and breakdowns\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 281 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_expenses'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 282 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_approved'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 283 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_pending'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 284 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'category_breakdown'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:281:34)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses/statistics › should support period filtering\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"total_expenses\"\n    Received path: []\n\n    Received value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": 1447, \"type\": \"month\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n\n    \u001b[0m \u001b[90m 296 |\u001b[39m       \u001b[90m// API accepts period parameter and returns statistics\u001b[39m\n     \u001b[90m 297 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 298 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_expenses'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 299 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m\n     \u001b[90m 301 |\u001b[39m     it(\u001b[32m'should support Hijri year filtering'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:298:34)\n\n  ● Expenses Controller Integration Tests › GET /api/expenses/statistics › should support Hijri year filtering\n\n    expect(received).toHaveProperty(path)\n\n    Expected path: \"total_expenses\"\n    Received path: []\n\n    Received value: {\"by_category\": {}, \"by_status\": {\"approved\": {\"amount\": 0, \"count\": 0}, \"paid\": {\"amount\": 0, \"count\": 0}, \"pending\": {\"amount\": 0, \"count\": 0}, \"rejected\": {\"amount\": 0, \"count\": 0}}, \"payment_methods\": {}, \"period\": {\"hijri_month\": 6, \"hijri_month_name\": \"جمادى الآخرة\", \"hijri_year\": \"1446\", \"type\": \"year\"}, \"top_expenses\": [], \"totals\": {\"average_expense\": 0, \"total_count\": 0, \"total_expenses\": 0}}\n\n    \u001b[0m \u001b[90m 309 |\u001b[39m       \u001b[90m// API accepts hijri_year parameter and returns statistics\u001b[39m\n     \u001b[90m 310 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 311 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'total_expenses'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 312 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 313 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 314 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/controllers/expenses.test.js:311:34)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\expenses.test.js","startTime":1764075859504,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete Settings Management Workflow"],"duration":1268,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete Settings Management Workflow should complete full settings and user management lifecycle","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075864062,"status":"passed","title":"should complete full settings and user management lifecycle"}],"endTime":1764075865331,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\settings-management.e2e.test.js","startTime":1764075863656,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Unique Constraints Tests","Unique Constraint Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Unique Constraints Tests Unique Constraint Operations should enforce case-insensitive unique constraints on email","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075865373,"status":"passed","title":"should enforce case-insensitive unique constraints on email"},{"ancestorTitles":["Unique Constraints Tests","Unique Constraint Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Unique Constraints Tests Unique Constraint Operations should enforce compound unique constraints","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075865379,"status":"passed","title":"should enforce compound unique constraints"},{"ancestorTitles":["Unique Constraints Tests","Unique Constraint Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Unique Constraints Tests Unique Constraint Operations should handle index updates and removals correctly","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075865382,"status":"passed","title":"should handle index updates and removals correctly"}],"endTime":1764075865385,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\data\\unique-constraints.test.js","startTime":1764075865279,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","1. Member Search API - /api/multi-role/search-members"],"duration":479,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 1. Member Search API - /api/multi-role/search-members should search members successfully with super_admin token","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075859819,"status":"passed","title":"should search members successfully with super_admin token"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","1. Member Search API - /api/multi-role/search-members"],"duration":442,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 1. Member Search API - /api/multi-role/search-members should return members with active_roles attached","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075860299,"status":"passed","title":"should return members with active_roles attached"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","1. Member Search API - /api/multi-role/search-members"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 1. Member Search API - /api/multi-role/search-members should require authentication for member search","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860741,"status":"passed","title":"should require authentication for member search"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","1. Member Search API - /api/multi-role/search-members"],"duration":446,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 3\nReceived:    6","pass":false}}],"failureMessages":["Error: expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 3\nReceived:    6\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:148:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 1. Member Search API - /api/multi-role/search-members should limit search results correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075860746,"status":"failed","title":"should limit search results correctly"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","1. Member Search API - /api/multi-role/search-members"],"duration":460,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 1. Member Search API - /api/multi-role/search-members should search in both users and members tables","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075861193,"status":"passed","title":"should search in both users and members tables"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","2. Role Assignment API - /api/multi-role/assign"],"duration":778,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 2. Role Assignment API - /api/multi-role/assign should assign role with Hijri dates successfully","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075861653,"status":"passed","title":"should assign role with Hijri dates successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","2. Role Assignment API - /api/multi-role/assign"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 2. Role Assignment API - /api/multi-role/assign should validate start_date before end_date","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075862431,"status":"passed","title":"should validate start_date before end_date"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","2. Role Assignment API - /api/multi-role/assign"],"duration":599,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 2. Role Assignment API - /api/multi-role/assign should detect overlapping role assignments","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075862441,"status":"passed","title":"should detect overlapping role assignments"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","2. Role Assignment API - /api/multi-role/assign"],"duration":217,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 2. Role Assignment API - /api/multi-role/assign should require super_admin role for assignment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863041,"status":"passed","title":"should require super_admin role for assignment"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","2. Role Assignment API - /api/multi-role/assign"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 2. Role Assignment API - /api/multi-role/assign should validate Hijri date format","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863259,"status":"passed","title":"should validate Hijri date format"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","3. Get User Role Assignments - /api/multi-role/user/:userId"],"duration":6,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:297:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 3. Get User Role Assignments - /api/multi-role/user/:userId should get all role assignments for a user","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863267,"status":"failed","title":"should get all role assignments for a user"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","3. Get User Role Assignments - /api/multi-role/user/:userId"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:312:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 3. Get User Role Assignments - /api/multi-role/user/:userId should include assignment status in response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863274,"status":"failed","title":"should include assignment status in response"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","3. Get User Role Assignments - /api/multi-role/user/:userId"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:327:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 3. Get User Role Assignments - /api/multi-role/user/:userId should return empty array for user with no assignments","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863280,"status":"failed","title":"should return empty array for user with no assignments"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","4. Update Role Assignment - /api/multi-role/:assignmentId"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:351:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 4. Update Role Assignment - /api/multi-role/:assignmentId should update assignment dates successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863285,"status":"failed","title":"should update assignment dates successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","4. Update Role Assignment - /api/multi-role/:assignmentId"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:367:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 4. Update Role Assignment - /api/multi-role/:assignmentId should deactivate assignment by setting is_active to false","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863290,"status":"failed","title":"should deactivate assignment by setting is_active to false"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","5. Delete Role Assignment - /api/multi-role/:assignmentId"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:390:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 5. Delete Role Assignment - /api/multi-role/:assignmentId should soft-delete assignment successfully","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863295,"status":"failed","title":"should soft-delete assignment successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","5. Delete Role Assignment - /api/multi-role/:assignmentId"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 5. Delete Role Assignment - /api/multi-role/:assignmentId should return 404 for non-existent assignment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863300,"status":"passed","title":"should return 404 for non-existent assignment"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","6. Available Roles API - /api/multi-role/available-roles"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:424:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 6. Available Roles API - /api/multi-role/available-roles should return all active roles","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863305,"status":"failed","title":"should return all active roles"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","6. Available Roles API - /api/multi-role/available-roles"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:434:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 6. Available Roles API - /api/multi-role/available-roles should include role permissions in response","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863311,"status":"failed","title":"should include role permissions in response"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","7. PostgreSQL Functions Testing"],"duration":145,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 7. PostgreSQL Functions Testing should call get_active_roles function successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863316,"status":"passed","title":"should call get_active_roles function successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","7. PostgreSQL Functions Testing"],"duration":162,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 7. PostgreSQL Functions Testing should call user_has_permission function successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863461,"status":"passed","title":"should call user_has_permission function successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","7. PostgreSQL Functions Testing"],"duration":131,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 7. PostgreSQL Functions Testing should call get_merged_permissions function successfully","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863623,"status":"passed","title":"should call get_merged_permissions function successfully"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","8. Hijri Date Conversion Tests"],"duration":39,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 8. Hijri Date Conversion Tests should convert Gregorian to Hijri correctly","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863754,"status":"passed","title":"should convert Gregorian to Hijri correctly"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","8. Hijri Date Conversion Tests"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 8. Hijri Date Conversion Tests should convert Hijri to Gregorian correctly","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863793,"status":"passed","title":"should convert Hijri to Gregorian correctly"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","8. Hijri Date Conversion Tests"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 8. Hijri Date Conversion Tests should validate Hijri date format","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863795,"status":"passed","title":"should validate Hijri date format"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","8. Hijri Date Conversion Tests"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 8. Hijri Date Conversion Tests should format Hijri date in Arabic","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075863795,"status":"passed","title":"should format Hijri date in Arabic"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","9. Performance and Load Testing"],"duration":13,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:553:33\n    at Array.forEach (<anonymous>)\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:552:15)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 9. Performance and Load Testing should handle concurrent role assignment requests","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863796,"status":"failed","title":"should handle concurrent role assignment requests"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","9. Performance and Load Testing"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"actual":404,"expected":200,"message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 200\nReceived: 404\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js:567:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Multi-Role Management API - Comprehensive QA Suite 9. Performance and Load Testing should respond within acceptable time limits","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075863809,"status":"failed","title":"should respond within acceptable time limits"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","10. Security and Authorization Tests"],"duration":142,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 10. Security and Authorization Tests should enforce RLS policies on role_assignments table","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863814,"status":"passed","title":"should enforce RLS policies on role_assignments table"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","10. Security and Authorization Tests"],"duration":661,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 10. Security and Authorization Tests should prevent SQL injection in search queries","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075863956,"status":"passed","title":"should prevent SQL injection in search queries"},{"ancestorTitles":["Multi-Role Management API - Comprehensive QA Suite","10. Security and Authorization Tests"],"duration":570,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multi-Role Management API - Comprehensive QA Suite 10. Security and Authorization Tests should sanitize user input in notes field","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075864617,"status":"passed","title":"should sanitize user input in notes field"}],"endTime":1764075865396,"message":"  ● Multi-Role Management API - Comprehensive QA Suite › 1. Member Search API - /api/multi-role/search-members › should limit search results correctly\n\n    expect(received).toBeLessThanOrEqual(expected)\n\n    Expected: <= 3\n    Received:    6\n\n    \u001b[0m \u001b[90m 146 |\u001b[39m\n     \u001b[90m 147 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 148 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mlength)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(limit)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 149 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 150 |\u001b[39m\n     \u001b[90m 151 |\u001b[39m     test(\u001b[32m'should search in both users and members tables'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:148:41)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 3. Get User Role Assignments - /api/multi-role/user/:userId › should get all role assignments for a user\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 295 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 296 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 297 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 298 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 299 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 300 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:297:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 3. Get User Role Assignments - /api/multi-role/user/:userId › should include assignment status in response\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 310 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 311 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 312 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 313 |\u001b[39m       \u001b[36mif\u001b[39m (response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mlength \u001b[33m>\u001b[39m \u001b[35m0\u001b[39m) {\n     \u001b[90m 314 |\u001b[39m         \u001b[36mconst\u001b[39m assignment \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 315 |\u001b[39m         expect(assignment)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'status'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:312:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 3. Get User Role Assignments - /api/multi-role/user/:userId › should return empty array for user with no assignments\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 325 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 326 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 327 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 328 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata)\u001b[33m.\u001b[39mtoEqual([])\u001b[33m;\u001b[39m\n     \u001b[90m 329 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 330 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:327:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 4. Update Role Assignment - /api/multi-role/:assignmentId › should update assignment dates successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 349 |\u001b[39m         \u001b[33m.\u001b[39msend(updateData)\u001b[33m;\u001b[39m\n     \u001b[90m 350 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 351 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 352 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 353 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mnotes)\u001b[33m.\u001b[39mtoBe(updateData\u001b[33m.\u001b[39mnotes)\u001b[33m;\u001b[39m\n     \u001b[90m 354 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:351:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 4. Update Role Assignment - /api/multi-role/:assignmentId › should deactivate assignment by setting is_active to false\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 365 |\u001b[39m         \u001b[33m.\u001b[39msend({ is_active\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m })\u001b[33m;\u001b[39m\n     \u001b[90m 366 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 367 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 368 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mis_active)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 369 |\u001b[39m\n     \u001b[90m 370 |\u001b[39m       \u001b[90m// Reactivate for other tests\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:367:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 5. Delete Role Assignment - /api/multi-role/:assignmentId › should soft-delete assignment successfully\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 388 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 389 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 390 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 391 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 392 |\u001b[39m\n     \u001b[90m 393 |\u001b[39m       \u001b[90m// Verify it's soft-deleted (is_active = false)\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:390:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 6. Available Roles API - /api/multi-role/available-roles › should return all active roles\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 422 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 423 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 424 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 425 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 426 |\u001b[39m       expect(\u001b[33mArray\u001b[39m\u001b[33m.\u001b[39misArray(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata))\u001b[33m.\u001b[39mtoBe(\u001b[36mtrue\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 427 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:424:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 6. Available Roles API - /api/multi-role/available-roles › should include role permissions in response\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 432 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${testData.superAdminToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 433 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 434 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 435 |\u001b[39m       \u001b[36mif\u001b[39m (response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata\u001b[33m.\u001b[39mlength \u001b[33m>\u001b[39m \u001b[35m0\u001b[39m) {\n     \u001b[90m 436 |\u001b[39m         \u001b[36mconst\u001b[39m role \u001b[33m=\u001b[39m response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mdata[\u001b[35m0\u001b[39m]\u001b[33m;\u001b[39m\n     \u001b[90m 437 |\u001b[39m         expect(role)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'id'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:434:31)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 9. Performance and Load Testing › should handle concurrent role assignment requests\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 551 |\u001b[39m\n     \u001b[90m 552 |\u001b[39m       results\u001b[33m.\u001b[39mforEach(response \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 553 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                 \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 554 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 555 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 556 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/multi-role/multiRoleManagement.test.js:553:33\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:552:15)\n\n  ● Multi-Role Management API - Comprehensive QA Suite › 9. Performance and Load Testing › should respond within acceptable time limits\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: 200\n    Received: 404\n\n    \u001b[0m \u001b[90m 565 |\u001b[39m       \u001b[36mconst\u001b[39m duration \u001b[33m=\u001b[39m endTime \u001b[33m-\u001b[39m startTime\u001b[33m;\u001b[39m\n     \u001b[90m 566 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 567 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mtoBe(\u001b[35m200\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 568 |\u001b[39m       expect(duration)\u001b[33m.\u001b[39mtoBeLessThan(\u001b[35m2000\u001b[39m)\u001b[33m;\u001b[39m \u001b[90m// Should respond within 2 seconds\u001b[39m\n     \u001b[90m 569 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 570 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/multi-role/multiRoleManagement.test.js:567:31)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\multi-role\\multiRoleManagement.test.js","startTime":1764075856869,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Refund Processing Tests","Refund Operations"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refund Processing Tests Refund Operations should process full refund within policy limits","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075865491,"status":"passed","title":"should process full refund within policy limits"},{"ancestorTitles":["Refund Processing Tests","Refund Operations"],"duration":3,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toThrow(expected)\n\nExpected pattern: /Refund amount cannot exceed/\n\nReceived function did not throw","pass":false}}],"failureMessages":["Error: expect(received).toThrow(expected)\n\nExpected pattern: /Refund amount cannot exceed/\n\nReceived function did not throw\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\refund-processing.test.js:223:10)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"Refund Processing Tests Refund Operations should handle partial refunds correctly","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075865498,"status":"failed","title":"should handle partial refunds correctly"},{"ancestorTitles":["Refund Processing Tests","Refund Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refund Processing Tests Refund Operations should enforce refund time limits based on policy","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075865503,"status":"passed","title":"should enforce refund time limits based on policy"},{"ancestorTitles":["Refund Processing Tests","Refund Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refund Processing Tests Refund Operations should complete refund processing workflow","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075865506,"status":"passed","title":"should complete refund processing workflow"}],"endTime":1764075865521,"message":"  ● Refund Processing Tests › Refund Operations › should handle partial refunds correctly\n\n    expect(received).toThrow(expected)\n\n    Expected pattern: /Refund amount cannot exceed/\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 221 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n     \u001b[90m 222 |\u001b[39m         processor\u001b[33m.\u001b[39mprocessRefund(completedPayment\u001b[33m,\u001b[39m \u001b[35m30\u001b[39m\u001b[33m,\u001b[39m \u001b[32m'excess_refund'\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 223 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow(\u001b[35m/Refund amount cannot exceed/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 224 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 225 |\u001b[39m\n     \u001b[90m 226 |\u001b[39m     test(\u001b[32m'should enforce refund time limits based on policy'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/payments/refund-processing.test.js:223:10)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\refund-processing.test.js","startTime":1764075865391,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete News Management Workflow"],"duration":341,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete News Management Workflow should complete full news lifecycle","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075865925,"status":"passed","title":"should complete full news lifecycle"}],"endTime":1764075866267,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\news-management.e2e.test.js","startTime":1764075865526,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Cancellation Tests","Payment Cancellation Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Cancellation Tests Payment Cancellation Operations should cancel pending payment successfully","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075866359,"status":"passed","title":"should cancel pending payment successfully"},{"ancestorTitles":["Payment Cancellation Tests","Payment Cancellation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Cancellation Tests Payment Cancellation Operations should handle cancellation eligibility correctly","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075866362,"status":"passed","title":"should handle cancellation eligibility correctly"},{"ancestorTitles":["Payment Cancellation Tests","Payment Cancellation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Cancellation Tests Payment Cancellation Operations should perform bulk cancellations with mixed results","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075866363,"status":"passed","title":"should perform bulk cancellations with mixed results"},{"ancestorTitles":["Payment Cancellation Tests","Payment Cancellation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Cancellation Tests Payment Cancellation Operations should track cancellation statistics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075866364,"status":"passed","title":"should track cancellation statistics"}],"endTime":1764075866365,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-cancellation.test.js","startTime":1764075866274,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1764075875683,"message":"  ● Test suite failed to run\n\n    Your test suite must contain at least one test.\n\n      at onResult (node_modules/@jest/core/build/index.js:1057:18)\n      at node_modules/@jest/core/build/index.js:1127:165\n      at node_modules/emittery/index.js:363:13\n          at Array.map (<anonymous>)\n      at Emittery.emit (node_modules/emittery/index.js:361:23)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\security\\run-security-tests.js","startTime":1764075875683,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":26,"failing":false,"failureDetails":[{"matcherResult":{"actual":403,"expected":403,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:67:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow admin access to POST /api/members","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075864860,"status":"failed","title":"should allow admin access to POST /api/members"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":180,"failing":false,"failureDetails":[{"code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001},{"matcherResult":{"message":"expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }","pass":false}}],"failureMessages":["Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)","Error: expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:78:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should deny member access to POST /api/members","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075864887,"status":"failed","title":"should deny member access to POST /api/members"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow super admin access to POST /api/members","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865068,"status":"passed","title":"should allow super admin access to POST /api/members"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":7,"failing":false,"failureDetails":[{"matcherResult":{"actual":403,"expected":403,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:67:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow admin access to PUT /api/members/123","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865075,"status":"failed","title":"should allow admin access to PUT /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":158,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }","pass":false}}],"failureMessages":["Error: expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:78:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should deny member access to PUT /api/members/123","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865082,"status":"failed","title":"should deny member access to PUT /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow super admin access to PUT /api/members/123","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865241,"status":"passed","title":"should allow super admin access to PUT /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":9,"failing":false,"failureDetails":[{"matcherResult":{"actual":403,"expected":403,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 403\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:67:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow admin access to DELETE /api/members/123","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865250,"status":"failed","title":"should allow admin access to DELETE /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":178,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }","pass":false}}],"failureMessages":["Error: expect(received).toMatchObject(expected)\n\n- Expected  - 1\n+ Received  + 0\n\n  Object {\n-   \"error\": \"Access denied\",\n    \"success\": false,\n  }\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:78:31)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should deny member access to DELETE /api/members/123","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865259,"status":"failed","title":"should deny member access to DELETE /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow super admin access to DELETE /api/members/123","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865438,"status":"passed","title":"should allow super admin access to DELETE /api/members/123"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow admin access to POST /api/subscriptions/bulk-update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865593,"status":"passed","title":"should allow admin access to POST /api/subscriptions/bulk-update"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":8,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:76:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should deny member access to POST /api/subscriptions/bulk-update","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865601,"status":"failed","title":"should deny member access to POST /api/subscriptions/bulk-update"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow super admin access to POST /api/subscriptions/bulk-update","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865609,"status":"passed","title":"should allow super admin access to POST /api/subscriptions/bulk-update"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow admin access to POST /api/notifications/broadcast","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865614,"status":"passed","title":"should allow admin access to POST /api/notifications/broadcast"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:76:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should deny member access to POST /api/notifications/broadcast","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865620,"status":"failed","title":"should deny member access to POST /api/notifications/broadcast"},{"ancestorTitles":["RBAC Authorization Security Tests","Admin-Only Endpoints"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Admin-Only Endpoints should allow super admin access to POST /api/notifications/broadcast","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865626,"status":"passed","title":"should allow super admin access to POST /api/notifications/broadcast"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should allow super admin access to POST /api/settings/system","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865629,"status":"passed","title":"should allow super admin access to POST /api/settings/system"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":6,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:123:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny admin access to POST /api/settings/system","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865634,"status":"failed","title":"should deny admin access to POST /api/settings/system"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:137:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny member access to POST /api/settings/system","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865640,"status":"failed","title":"should deny member access to POST /api/settings/system"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should allow super admin access to DELETE /api/database/reset","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865645,"status":"passed","title":"should allow super admin access to DELETE /api/database/reset"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":6,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:123:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny admin access to DELETE /api/database/reset","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865650,"status":"failed","title":"should deny admin access to DELETE /api/database/reset"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:137:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny member access to DELETE /api/database/reset","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865656,"status":"failed","title":"should deny member access to DELETE /api/database/reset"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should allow super admin access to POST /api/roles/assign","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865661,"status":"passed","title":"should allow super admin access to POST /api/roles/assign"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":5,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:123:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny admin access to POST /api/roles/assign","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865667,"status":"failed","title":"should deny admin access to POST /api/roles/assign"},{"ancestorTitles":["RBAC Authorization Security Tests","Super Admin-Only Endpoints"],"duration":6,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:137:36)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Super Admin-Only Endpoints should deny member access to POST /api/roles/assign","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865673,"status":"failed","title":"should deny member access to POST /api/roles/assign"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should allow financial manager access to GET /api/financial-reports","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865679,"status":"passed","title":"should allow financial manager access to GET /api/financial-reports"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":9,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:173:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should deny regular member access to GET /api/financial-reports","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865685,"status":"failed","title":"should deny regular member access to GET /api/financial-reports"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should allow financial manager access to POST /api/payments/process","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865694,"status":"passed","title":"should allow financial manager access to POST /api/payments/process"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:173:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should deny regular member access to POST /api/payments/process","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865700,"status":"failed","title":"should deny regular member access to POST /api/payments/process"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should allow financial manager access to GET /api/financial-reports/summary","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865706,"status":"passed","title":"should allow financial manager access to GET /api/financial-reports/summary"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":5,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:173:28)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should deny regular member access to GET /api/financial-reports/summary","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865711,"status":"failed","title":"should deny regular member access to GET /api/financial-reports/summary"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should allow financial manager access to POST /api/expenses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865716,"status":"passed","title":"should allow financial manager access to POST /api/expenses"},{"ancestorTitles":["RBAC Authorization Security Tests","Financial Manager Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Financial Manager Endpoints should deny regular member access to POST /api/expenses","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865723,"status":"passed","title":"should deny regular member access to POST /api/expenses"},{"ancestorTitles":["RBAC Authorization Security Tests","Role Escalation Prevention"],"duration":6,"failing":false,"failureDetails":[{}],"failureMessages":["Error: expected 401 \"Unauthorized\", got 404 \"Not Found\"\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:190:10)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)\n----\n    at Test._assertStatus (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:309:14)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:365:13\n    at Test._assertFunction (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:342:13)\n    at Test.assert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:195:23)\n    at localAssert (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:138:14)\n    at Server.<anonymous> (D:\\PROShael\\alshuail-backend\\node_modules\\supertest\\lib\\test.js:152:11)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2419:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"fullName":"RBAC Authorization Security Tests Role Escalation Prevention should not allow role escalation through token manipulation","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865729,"status":"failed","title":"should not allow role escalation through token manipulation"},{"ancestorTitles":["RBAC Authorization Security Tests","Role Escalation Prevention"],"duration":157,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Role Escalation Prevention should not allow privilege escalation through modified requests","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865735,"status":"passed","title":"should not allow privilege escalation through modified requests"},{"ancestorTitles":["RBAC Authorization Security Tests","Cross-Role Access Patterns"],"duration":301,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected value: 500\nReceived array: [403, 404]","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected value: 500\nReceived array: [403, 404]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:217:26)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Cross-Role Access Patterns members should only access their own data","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075865892,"status":"failed","title":"members should only access their own data"},{"ancestorTitles":["RBAC Authorization Security Tests","Cross-Role Access Patterns"],"duration":273,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Cross-Role Access Patterns admins should access all member data","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866193,"status":"passed","title":"admins should access all member data"},{"ancestorTitles":["RBAC Authorization Security Tests","Cross-Role Access Patterns"],"duration":304,"failing":false,"failureDetails":[{"matcherResult":{"expected":"Access denied","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"Access denied\"\nReceived: undefined","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"Access denied\"\nReceived: undefined\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:243:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Cross-Role Access Patterns viewer role should only have read access","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866466,"status":"failed","title":"viewer role should only have read access"},{"ancestorTitles":["RBAC Authorization Security Tests","Authorization Bypass Prevention"],"duration":17,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"RBAC Authorization Security Tests Authorization Bypass Prevention should not bypass authorization with missing role checks","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075866770,"status":"passed","title":"should not bypass authorization with missing role checks"},{"ancestorTitles":["RBAC Authorization Security Tests","Authorization Bypass Prevention"],"duration":7,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]","pass":false}}],"failureMessages":["Error: expect(received).toContain(expected) // indexOf\n\nExpected value: 404\nReceived array: [403, 401]\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js:279:26)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"RBAC Authorization Security Tests Authorization Bypass Prevention should validate roles on every request, not cache authorization","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866787,"status":"failed","title":"should validate roles on every request, not cache authorization"}],"endTime":1764075866864,"message":"  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should allow admin access to POST /api/members\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 403\n\n    \u001b[0m \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m         \u001b[90m// Should not be forbidden (403) for admin\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 67 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 68 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m       test(\u001b[32m`should deny member access to ${method.toUpperCase()} ${path}`\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:67:37)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to POST /api/members\n\n    listen EADDRINUSE: address already in use 0.0.0.0:3001\n\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to POST /api/members\n\n    expect(received).toMatchObject(expected)\n\n    - Expected  - 1\n    + Received  + 0\n\n      Object {\n    -   \"error\": \"Access denied\",\n        \"success\": false,\n      }\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 80 |\u001b[39m           error\u001b[33m:\u001b[39m \u001b[32m'Access denied'\u001b[39m\n     \u001b[90m 81 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:78:31)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should allow admin access to PUT /api/members/123\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 403\n\n    \u001b[0m \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m         \u001b[90m// Should not be forbidden (403) for admin\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 67 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 68 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m       test(\u001b[32m`should deny member access to ${method.toUpperCase()} ${path}`\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:67:37)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to PUT /api/members/123\n\n    expect(received).toMatchObject(expected)\n\n    - Expected  - 1\n    + Received  + 0\n\n      Object {\n    -   \"error\": \"Access denied\",\n        \"success\": false,\n      }\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 80 |\u001b[39m           error\u001b[33m:\u001b[39m \u001b[32m'Access denied'\u001b[39m\n     \u001b[90m 81 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:78:31)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should allow admin access to DELETE /api/members/123\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 403\n\n    \u001b[0m \u001b[90m 65 |\u001b[39m\n     \u001b[90m 66 |\u001b[39m         \u001b[90m// Should not be forbidden (403) for admin\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 67 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 68 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 69 |\u001b[39m\n     \u001b[90m 70 |\u001b[39m       test(\u001b[32m`should deny member access to ${method.toUpperCase()} ${path}`\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:67:37)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to DELETE /api/members/123\n\n    expect(received).toMatchObject(expected)\n\n    - Expected  - 1\n    + Received  + 0\n\n      Object {\n    -   \"error\": \"Access denied\",\n        \"success\": false,\n      }\n\n    \u001b[0m \u001b[90m 76 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 78 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m    |\u001b[39m                               \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 79 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\n     \u001b[90m 80 |\u001b[39m           error\u001b[33m:\u001b[39m \u001b[32m'Access denied'\u001b[39m\n     \u001b[90m 81 |\u001b[39m         })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:78:31)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to POST /api/subscriptions/bulk-update\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 74 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 75 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 76 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n     \u001b[90m 78 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m 79 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:76:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Admin-Only Endpoints › should deny member access to POST /api/notifications/broadcast\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 74 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 75 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 76 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 77 |\u001b[39m\n     \u001b[90m 78 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m 79 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:76:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny admin access to POST /api/settings/system\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m\n     \u001b[90m 125 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m 126 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:123:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny member access to POST /api/settings/system\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 135 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 137 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 138 |\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:137:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny admin access to DELETE /api/database/reset\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m\n     \u001b[90m 125 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m 126 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:123:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny member access to DELETE /api/database/reset\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 135 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 137 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 138 |\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:137:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny admin access to POST /api/roles/assign\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 121 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 122 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 123 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 124 |\u001b[39m\n     \u001b[90m 125 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoMatchObject({\n     \u001b[90m 126 |\u001b[39m           success\u001b[33m:\u001b[39m \u001b[36mfalse\u001b[39m\u001b[33m,\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:123:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Super Admin-Only Endpoints › should deny member access to POST /api/roles/assign\n\n    expected 403 \"Forbidden\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 135 |\u001b[39m         \u001b[36mif\u001b[39m (data) req\u001b[33m.\u001b[39msend(data)\u001b[33m;\u001b[39m\n     \u001b[90m 136 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 137 |\u001b[39m         \u001b[36mconst\u001b[39m response \u001b[33m=\u001b[39m \u001b[36mawait\u001b[39m req\u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                    \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 138 |\u001b[39m\n     \u001b[90m 139 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 140 |\u001b[39m       })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:137:36)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Financial Manager Endpoints › should deny regular member access to GET /api/financial-reports\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 404\n    Received array: [403, 401]\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m\n     \u001b[90m 172 |\u001b[39m         \u001b[90m// Members should not have access to financial endpoints\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect([\u001b[35m403\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:173:28)\n\n  ● RBAC Authorization Security Tests › Financial Manager Endpoints › should deny regular member access to POST /api/payments/process\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 404\n    Received array: [403, 401]\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m\n     \u001b[90m 172 |\u001b[39m         \u001b[90m// Members should not have access to financial endpoints\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect([\u001b[35m403\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:173:28)\n\n  ● RBAC Authorization Security Tests › Financial Manager Endpoints › should deny regular member access to GET /api/financial-reports/summary\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 404\n    Received array: [403, 401]\n\n    \u001b[0m \u001b[90m 171 |\u001b[39m\n     \u001b[90m 172 |\u001b[39m         \u001b[90m// Members should not have access to financial endpoints\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 173 |\u001b[39m         expect([\u001b[35m403\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 174 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 175 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 176 |\u001b[39m   })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:173:28)\n\n  ● RBAC Authorization Security Tests › Role Escalation Prevention › should not allow role escalation through token manipulation\n\n    expected 401 \"Unauthorized\", got 404 \"Not Found\"\n\n    \u001b[0m \u001b[90m 188 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mdelete\u001b[39m(\u001b[32m'/api/database/reset'\u001b[39m)\n     \u001b[90m 189 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${fakeAdminToken}`\u001b[39m)\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 190 |\u001b[39m         \u001b[33m.\u001b[39mexpect(\u001b[35m401\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 191 |\u001b[39m\n     \u001b[90m 192 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Invalid token'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 193 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:190:10)\n      ----\n      at Test._assertStatus (node_modules/supertest/lib/test.js:309:14)\n      at node_modules/supertest/lib/test.js:365:13\n      at Test._assertFunction (node_modules/supertest/lib/test.js:342:13)\n      at Test.assert (node_modules/supertest/lib/test.js:195:23)\n      at localAssert (node_modules/supertest/lib/test.js:138:14)\n      at Server.<anonymous> (node_modules/supertest/lib/test.js:152:11)\n\n  ● RBAC Authorization Security Tests › Cross-Role Access Patterns › members should only access their own data\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 500\n    Received array: [403, 404]\n\n    \u001b[0m \u001b[90m 215 |\u001b[39m\n     \u001b[90m 216 |\u001b[39m       \u001b[90m// Should either be forbidden or return only limited data\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 217 |\u001b[39m       expect([\u001b[35m403\u001b[39m\u001b[33m,\u001b[39m \u001b[35m404\u001b[39m])\u001b[33m.\u001b[39mtoContain(response\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 218 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 219 |\u001b[39m\n     \u001b[90m 220 |\u001b[39m     test(\u001b[32m'admins should access all member data'\u001b[39m\u001b[33m,\u001b[39m \u001b[36masync\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:217:26)\n\n  ● RBAC Authorization Security Tests › Cross-Role Access Patterns › viewer role should only have read access\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Access denied\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 241 |\u001b[39m         \u001b[33m.\u001b[39mexpect(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 242 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 243 |\u001b[39m       expect(writeResponse\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Access denied'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                        \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 244 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 245 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 246 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:243:40)\n\n  ● RBAC Authorization Security Tests › Authorization Bypass Prevention › should validate roles on every request, not cache authorization\n\n    expect(received).toContain(expected) // indexOf\n\n    Expected value: 404\n    Received array: [403, 401]\n\n    \u001b[0m \u001b[90m 277 |\u001b[39m       \u001b[90m// Admin should have access, member should not\u001b[39m\n     \u001b[90m 278 |\u001b[39m       expect(response1\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m403\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 279 |\u001b[39m       expect([\u001b[35m403\u001b[39m\u001b[33m,\u001b[39m \u001b[35m401\u001b[39m])\u001b[33m.\u001b[39mtoContain(response2\u001b[33m.\u001b[39mstatus)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 280 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 281 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 282 |\u001b[39m })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authorization.test.js:279:26)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\security\\authorization.test.js","startTime":1764075863750,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/member/:memberId - List Member Documents"],"duration":356,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/member/:memberId - List Member Documents should allow member to view own documents","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075864356,"status":"passed","title":"should allow member to view own documents"},{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/member/:memberId - List Member Documents"],"duration":183,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/member/:memberId - List Member Documents should support filtering and pagination","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075864713,"status":"passed","title":"should support filtering and pagination"},{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/:documentId - Get Document by ID"],"duration":303,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/:documentId - Get Document by ID should allow member to view own document","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075864896,"status":"passed","title":"should allow member to view own document"},{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/:documentId - Get Document by ID"],"duration":403,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/:documentId - Get Document by ID should reject member viewing other member document with 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865199,"status":"passed","title":"should reject member viewing other member document with 403"},{"ancestorTitles":["Documents Controller Integration Tests","PUT /api/documents/:documentId - Update Document Metadata"],"duration":297,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests PUT /api/documents/:documentId - Update Document Metadata should allow member to update own document metadata","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865602,"status":"passed","title":"should allow member to update own document metadata"},{"ancestorTitles":["Documents Controller Integration Tests","PUT /api/documents/:documentId - Update Document Metadata"],"duration":268,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests PUT /api/documents/:documentId - Update Document Metadata should reject member updating other member document with 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865899,"status":"passed","title":"should reject member updating other member document with 403"},{"ancestorTitles":["Documents Controller Integration Tests","DELETE /api/documents/:documentId - Delete Document"],"duration":279,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests DELETE /api/documents/:documentId - Delete Document should allow member to delete own document","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866167,"status":"passed","title":"should allow member to delete own document"},{"ancestorTitles":["Documents Controller Integration Tests","DELETE /api/documents/:documentId - Delete Document"],"duration":274,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests DELETE /api/documents/:documentId - Delete Document should reject member deleting other member document with 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866446,"status":"passed","title":"should reject member deleting other member document with 403"},{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/config/categories - Get Document Categories"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/config/categories - Get Document Categories should return available document categories","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075866720,"status":"passed","title":"should return available document categories"},{"ancestorTitles":["Documents Controller Integration Tests","GET /api/documents/stats/overview - Get Document Statistics"],"duration":272,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Documents Controller Integration Tests GET /api/documents/stats/overview - Get Document Statistics should return document statistics for member","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866726,"status":"passed","title":"should return document statistics for member"}],"endTime":1764075867001,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\documents.test.js","startTime":1764075863945,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Transaction Logging Tests","Transaction Logging Operations"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Transaction Logging Tests Transaction Logging Operations should log transaction with complete audit information","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075867123,"status":"passed","title":"should log transaction with complete audit information"},{"ancestorTitles":["Transaction Logging Tests","Transaction Logging Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Transaction Logging Tests Transaction Logging Operations should filter transaction logs by various criteria","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075867133,"status":"passed","title":"should filter transaction logs by various criteria"},{"ancestorTitles":["Transaction Logging Tests","Transaction Logging Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Transaction Logging Tests Transaction Logging Operations should maintain audit trail and verify log integrity","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075867137,"status":"passed","title":"should maintain audit trail and verify log integrity"}],"endTime":1764075867141,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\transaction-logging.test.js","startTime":1764075867008,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Family Tree Controller Integration Tests","GET /api/family-tree/member/:memberId - Get Family Tree"],"duration":300,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests GET /api/family-tree/member/:memberId - Get Family Tree should return family tree data for member","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865753,"status":"passed","title":"should return family tree data for member"},{"ancestorTitles":["Family Tree Controller Integration Tests","GET /api/family-tree/visualization/:memberId - Get Visualization Data"],"duration":292,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests GET /api/family-tree/visualization/:memberId - Get Visualization Data should return tree structure for visualization","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866054,"status":"passed","title":"should return tree structure for visualization"},{"ancestorTitles":["Family Tree Controller Integration Tests","POST /api/family-tree/relationship - Create Relationship"],"duration":311,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests POST /api/family-tree/relationship - Create Relationship should allow creating family relationship","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866346,"status":"passed","title":"should allow creating family relationship"},{"ancestorTitles":["Family Tree Controller Integration Tests","POST /api/family-tree/relationship - Create Relationship"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests POST /api/family-tree/relationship - Create Relationship should validate required fields for relationship","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075866657,"status":"passed","title":"should validate required fields for relationship"},{"ancestorTitles":["Family Tree Controller Integration Tests","PUT /api/family-tree/relationship/:id - Update Relationship"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests PUT /api/family-tree/relationship/:id - Update Relationship should allow updating relationship metadata","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866667,"status":"passed","title":"should allow updating relationship metadata"},{"ancestorTitles":["Family Tree Controller Integration Tests","DELETE /api/family-tree/relationship/:id - Delete Relationship"],"duration":147,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests DELETE /api/family-tree/relationship/:id - Delete Relationship should soft delete relationship","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866808,"status":"passed","title":"should soft delete relationship"},{"ancestorTitles":["Family Tree Controller Integration Tests","GET /api/family-tree/search - Search Members"],"duration":306,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests GET /api/family-tree/search - Search Members should search members by name or phone","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075866956,"status":"passed","title":"should search members by name or phone"},{"ancestorTitles":["Family Tree Controller Integration Tests","GET /api/family-tree/search - Search Members"],"duration":158,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Family Tree Controller Integration Tests GET /api/family-tree/search - Search Members should validate minimum query length","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075867262,"status":"passed","title":"should validate minimum query length"}],"endTime":1764075867421,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\familyTree.test.js","startTime":1764075865339,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete Document Management Workflow"],"duration":168,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete Document Management Workflow should complete full document lifecycle","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075867306,"status":"passed","title":"should complete full document lifecycle"}],"endTime":1764075867476,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\document-management.e2e.test.js","startTime":1764075866873,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["ErrorCodes Utility","ErrorCodes Structure"],"duration":44,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility ErrorCodes Structure should have all required properties for each error code","invocations":1,"location":null,"numPassingAsserts":336,"retryReasons":[],"startAt":1764075867432,"status":"passed","title":"should have all required properties for each error code"},{"ancestorTitles":["ErrorCodes Utility","ErrorCodes Structure"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility ErrorCodes Structure should have unique error codes","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867477,"status":"passed","title":"should have unique error codes"},{"ancestorTitles":["ErrorCodes Utility","ErrorCodes Structure"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility ErrorCodes Structure should use correct HTTP status codes","invocations":1,"location":null,"numPassingAsserts":42,"retryReasons":[],"startAt":1764075867478,"status":"passed","title":"should use correct HTTP status codes"},{"ancestorTitles":["ErrorCodes Utility","ErrorCodes Structure"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility ErrorCodes Structure should have bilingual messages (English and Arabic)","invocations":1,"location":null,"numPassingAsserts":126,"retryReasons":[],"startAt":1764075867485,"status":"passed","title":"should have bilingual messages (English and Arabic)"},{"ancestorTitles":["ErrorCodes Utility","createErrorResponse"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility createErrorResponse should create error response with valid error key","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075867498,"status":"passed","title":"should create error response with valid error key"},{"ancestorTitles":["ErrorCodes Utility","createErrorResponse"],"duration":0,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility createErrorResponse should fallback to SYSTEM_ERROR for invalid error key","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075867500,"status":"passed","title":"should fallback to SYSTEM_ERROR for invalid error key"},{"ancestorTitles":["ErrorCodes Utility","createErrorResponse"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility createErrorResponse should include additional info in error response","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075867500,"status":"passed","title":"should include additional info in error response"},{"ancestorTitles":["ErrorCodes Utility","createErrorResponse"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility createErrorResponse should include ISO timestamp","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867501,"status":"passed","title":"should include ISO timestamp"},{"ancestorTitles":["ErrorCodes Utility","errorHandler middleware"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility errorHandler middleware should handle known error codes","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075867502,"status":"passed","title":"should handle known error codes"},{"ancestorTitles":["ErrorCodes Utility","errorHandler middleware"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility errorHandler middleware should handle JWT errors with AUTH_TOKEN_INVALID","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867508,"status":"passed","title":"should handle JWT errors with AUTH_TOKEN_INVALID"},{"ancestorTitles":["ErrorCodes Utility","errorHandler middleware"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility errorHandler middleware should handle duplicate entry errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867513,"status":"passed","title":"should handle duplicate entry errors"},{"ancestorTitles":["ErrorCodes Utility","errorHandler middleware"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility errorHandler middleware should handle timeout errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867515,"status":"passed","title":"should handle timeout errors"},{"ancestorTitles":["ErrorCodes Utility","errorHandler middleware"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility errorHandler middleware should default to SYSTEM_ERROR for unknown errors","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867517,"status":"passed","title":"should default to SYSTEM_ERROR for unknown errors"},{"ancestorTitles":["ErrorCodes Utility","asyncErrorWrapper"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility asyncErrorWrapper should call function and handle success","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867519,"status":"passed","title":"should call function and handle success"},{"ancestorTitles":["ErrorCodes Utility","asyncErrorWrapper"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility asyncErrorWrapper should catch errors and call next","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867520,"status":"passed","title":"should catch errors and call next"},{"ancestorTitles":["ErrorCodes Utility","asyncErrorWrapper"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"ErrorCodes Utility asyncErrorWrapper should handle synchronous errors","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867521,"status":"passed","title":"should handle synchronous errors"}],"endTime":1764075867524,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\unit\\utils\\errorCodes.test.js","startTime":1764075867148,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Status Transitions Tests","Payment Status Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Status Transitions Tests Payment Status Operations should validate status transitions correctly","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075867551,"status":"passed","title":"should validate status transitions correctly"},{"ancestorTitles":["Payment Status Transitions Tests","Payment Status Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Status Transitions Tests Payment Status Operations should track complete payment lifecycle","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075867556,"status":"passed","title":"should track complete payment lifecycle"},{"ancestorTitles":["Payment Status Transitions Tests","Payment Status Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Status Transitions Tests Payment Status Operations should handle failure and retry scenarios","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075867558,"status":"passed","title":"should handle failure and retry scenarios"},{"ancestorTitles":["Payment Status Transitions Tests","Payment Status Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Status Transitions Tests Payment Status Operations should prevent invalid status transitions","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075867560,"status":"passed","title":"should prevent invalid status transitions"},{"ancestorTitles":["Payment Status Transitions Tests","Payment Status Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Status Transitions Tests Payment Status Operations should identify terminal states correctly","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075867566,"status":"passed","title":"should identify terminal states correctly"}],"endTime":1764075867569,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-status.test.js","startTime":1764075867427,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Currency Handling Tests","Currency Operations"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Currency Handling Tests Currency Operations should format currencies correctly with proper symbols","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075867700,"status":"passed","title":"should format currencies correctly with proper symbols"},{"ancestorTitles":["Currency Handling Tests","Currency Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Currency Handling Tests Currency Operations should normalize multi-currency payments to base currency","invocations":1,"location":null,"numPassingAsserts":17,"retryReasons":[],"startAt":1764075867709,"status":"passed","title":"should normalize multi-currency payments to base currency"}],"endTime":1764075867713,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\currency-handling.test.js","startTime":1764075867576,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Payment Creation Validation Tests","Payment Creation Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Creation Validation Tests Payment Creation Operations should create valid payment with all required fields","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075867850,"status":"passed","title":"should create valid payment with all required fields"},{"ancestorTitles":["Payment Creation Validation Tests","Payment Creation Operations"],"duration":8,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toThrow(expected)\n\nExpected pattern: /Invalid amount/\n\nReceived function did not throw","pass":false}}],"failureMessages":["Error: expect(received).toThrow(expected)\n\nExpected pattern: /Invalid amount/\n\nReceived function did not throw\n    at D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-creation.test.js:130:12\n    at Array.forEach (<anonymous>)\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-creation.test.js:121:22)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"Payment Creation Validation Tests Payment Creation Operations should reject payment with invalid amount","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075867855,"status":"failed","title":"should reject payment with invalid amount"},{"ancestorTitles":["Payment Creation Validation Tests","Payment Creation Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Creation Validation Tests Payment Creation Operations should validate payment method and currency","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075867864,"status":"passed","title":"should validate payment method and currency"},{"ancestorTitles":["Payment Creation Validation Tests","Payment Creation Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Payment Creation Validation Tests Payment Creation Operations should calculate fees based on payment method","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075867867,"status":"passed","title":"should calculate fees based on payment method"}],"endTime":1764075867881,"message":"  ● Payment Creation Validation Tests › Payment Creation Operations › should reject payment with invalid amount\n\n    expect(received).toThrow(expected)\n\n    Expected pattern: /Invalid amount/\n\n    Received function did not throw\n\n    \u001b[0m \u001b[90m 128 |\u001b[39m\n     \u001b[90m 129 |\u001b[39m         expect(() \u001b[33m=>\u001b[39m processor\u001b[33m.\u001b[39mcreatePayment(paymentData))\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 130 |\u001b[39m           \u001b[33m.\u001b[39mtoThrow(\u001b[35m/Invalid amount/\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m            \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 131 |\u001b[39m       })\u001b[33m;\u001b[39m\n     \u001b[90m 132 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 133 |\u001b[39m\u001b[0m\n\n      at __tests__/integration/payments/payment-creation.test.js:130:12\n          at Array.forEach (<anonymous>)\n      at Object.<anonymous> (__tests__/integration/payments/payment-creation.test.js:121:22)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\payments\\payment-creation.test.js","startTime":1764075867725,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075863695,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":284,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should return paginated members list for admin","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075863709,"status":"passed","title":"should return paginated members list for admin"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":304,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should filter by membership status","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075863993,"status":"passed","title":"should filter by membership status"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":141,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should filter by profile completion","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075864297,"status":"passed","title":"should filter by profile completion"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":160,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should support search by name or phone","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075864438,"status":"passed","title":"should support search by name or phone"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members"],"duration":173,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members should respect pagination limits","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075864598,"status":"passed","title":"should respect pagination limits"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/:id"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/:id should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075864771,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/:id"],"duration":277,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/:id should return member by ID for admin","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864774,"status":"passed","title":"should return member by ID for admin"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/:id"],"duration":147,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/:id should return 404 for non-existent member","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865051,"status":"passed","title":"should return 404 for non-existent member"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/statistics"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/statistics should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075865198,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/statistics"],"duration":1130,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/statistics should return comprehensive member statistics","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075865206,"status":"passed","title":"should return comprehensive member statistics"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/statistics"],"duration":1101,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/statistics should have numeric statistics","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075866336,"status":"passed","title":"should have numeric statistics"},{"ancestorTitles":["Members Controller Integration Tests","POST /api/members"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests POST /api/members should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867438,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Members Controller Integration Tests","POST /api/members"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests POST /api/members should validate required fields","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867453,"status":"passed","title":"should validate required fields"},{"ancestorTitles":["Members Controller Integration Tests","POST /api/members"],"duration":186,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests POST /api/members should reject duplicate phone numbers","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867463,"status":"passed","title":"should reject duplicate phone numbers"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/profile (Mobile)"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/profile (Mobile) should require authentication","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867649,"status":"passed","title":"should require authentication"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/profile (Mobile)"],"duration":156,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/profile (Mobile) should return member own profile","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867654,"status":"passed","title":"should return member own profile"},{"ancestorTitles":["Members Controller Integration Tests","GET /api/members/profile (Mobile)"],"duration":163,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Members Controller Integration Tests GET /api/members/profile (Mobile) should not include sensitive fields in profile","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075867811,"status":"passed","title":"should not include sensitive fields in profile"}],"endTime":1764075867976,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\members.test.js","startTime":1764075862921,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete Payment Processing Workflow"],"duration":32,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete Payment Processing Workflow should complete full payment lifecycle","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867953,"status":"passed","title":"should complete full payment lifecycle"}],"endTime":1764075867990,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\payment.e2e.test.js","startTime":1764075867488,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should extract Bearer token from authorization header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868036,"status":"passed","title":"should extract Bearer token from authorization header"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should extract token without Bearer prefix","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868042,"status":"passed","title":"should extract token without Bearer prefix"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":4,"failing":false,"failureDetails":[{"matcherResult":{"actual":null,"expected":"","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"\"\nReceived: null","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"\"\nReceived: null\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\auth-middleware.test.js:88:26)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"Authentication Middleware Tests Middleware Operations should return null for missing authorization header","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868044,"status":"failed","title":"should return null for missing authorization header"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should authenticate valid request with token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868051,"status":"passed","title":"should authenticate valid request with token"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should reject blacklisted tokens","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868057,"status":"passed","title":"should reject blacklisted tokens"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should enforce rate limiting per user","invocations":1,"location":null,"numPassingAsserts":101,"retryReasons":[],"startAt":1764075868060,"status":"passed","title":"should enforce rate limiting per user"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should handle malformed authorization headers","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868069,"status":"passed","title":"should handle malformed authorization headers"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should track separate rate limits for different users","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075868070,"status":"passed","title":"should track separate rate limits for different users"},{"ancestorTitles":["Authentication Middleware Tests","Middleware Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Middleware Tests Middleware Operations should validate token permissions and scopes","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868072,"status":"passed","title":"should validate token permissions and scopes"}],"endTime":1764075868089,"message":"  ● Authentication Middleware Tests › Middleware Operations › should return null for missing authorization header\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"\"\n    Received: null\n\n    \u001b[0m \u001b[90m 86 |\u001b[39m\n     \u001b[90m 87 |\u001b[39m       \u001b[36mconst\u001b[39m extracted2 \u001b[33m=\u001b[39m middleware\u001b[33m.\u001b[39mextractToken(\u001b[32m''\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 88 |\u001b[39m       expect(extracted2)\u001b[33m.\u001b[39mtoBe(\u001b[32m''\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                          \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 89 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 90 |\u001b[39m\n     \u001b[90m 91 |\u001b[39m     test(\u001b[32m'should authenticate valid request with token'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (__tests__/integration/auth/auth-middleware.test.js:88:26)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\auth-middleware.test.js","startTime":1764075867886,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Diyas Controller Integration Tests","GET /api/diyas - Get All Diyas"],"duration":470,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Diyas Controller Integration Tests GET /api/diyas - Get All Diyas should return list of diyas","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075865837,"status":"passed","title":"should return list of diyas"},{"ancestorTitles":["Diyas Controller Integration Tests","GET /api/diyas/stats - Get Diya Statistics"],"duration":164,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Diyas Controller Integration Tests GET /api/diyas/stats - Get Diya Statistics should return diya statistics","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075866308,"status":"passed","title":"should return diya statistics"},{"ancestorTitles":["Diyas Controller Integration Tests","POST /api/diyas - Create Diya"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Diyas Controller Integration Tests POST /api/diyas - Create Diya should create diya (if authenticated)","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866472,"status":"passed","title":"should create diya (if authenticated)"},{"ancestorTitles":["Subscriptions Controller Integration Tests","GET /api/subscriptions/plans - Get Subscription Plans (Public)"],"duration":148,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests GET /api/subscriptions/plans - Get Subscription Plans (Public) should return subscription plans without authentication","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075866487,"status":"passed","title":"should return subscription plans without authentication"},{"ancestorTitles":["Subscriptions Controller Integration Tests","GET /api/subscriptions/member/subscription - Get Member Subscription"],"duration":300,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests GET /api/subscriptions/member/subscription - Get Member Subscription should return member subscription details","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075866635,"status":"passed","title":"should return member subscription details"},{"ancestorTitles":["Subscriptions Controller Integration Tests","GET /api/subscriptions/admin/subscriptions - Get All Subscriptions"],"duration":603,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests GET /api/subscriptions/admin/subscriptions - Get All Subscriptions should allow admin to view all subscriptions","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075866936,"status":"passed","title":"should allow admin to view all subscriptions"},{"ancestorTitles":["Subscriptions Controller Integration Tests","GET /api/subscriptions/admin/subscriptions - Get All Subscriptions"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests GET /api/subscriptions/admin/subscriptions - Get All Subscriptions should reject member with 403","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867539,"status":"passed","title":"should reject member with 403"},{"ancestorTitles":["Subscriptions Controller Integration Tests","GET /api/subscriptions/admin/subscriptions/stats - Get Statistics"],"duration":275,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests GET /api/subscriptions/admin/subscriptions/stats - Get Statistics should allow admin to view subscription statistics","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867682,"status":"passed","title":"should allow admin to view subscription statistics"},{"ancestorTitles":["Subscriptions Controller Integration Tests","POST /api/subscriptions/admin/subscriptions/payment - Record Payment"],"duration":204,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Subscriptions Controller Integration Tests POST /api/subscriptions/admin/subscriptions/payment - Record Payment should allow admin to record subscription payment","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075867957,"status":"passed","title":"should allow admin to record subscription payment"}],"endTime":1764075868163,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\diyas-subscriptions.test.js","startTime":1764075865405,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Role-Based Access Control Tests","RBAC Operations"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Role-Based Access Control Tests RBAC Operations should validate role-based permissions correctly","invocations":1,"location":null,"numPassingAsserts":9,"retryReasons":[],"startAt":1764075868131,"status":"passed","title":"should validate role-based permissions correctly"},{"ancestorTitles":["Role-Based Access Control Tests","RBAC Operations"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Role-Based Access Control Tests RBAC Operations should enforce role hierarchy access control","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075868140,"status":"passed","title":"should enforce role hierarchy access control"},{"ancestorTitles":["Role-Based Access Control Tests","RBAC Operations"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Role-Based Access Control Tests RBAC Operations should generate tokens with role claims","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075868141,"status":"passed","title":"should generate tokens with role claims"},{"ancestorTitles":["Role-Based Access Control Tests","RBAC Operations"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Role-Based Access Control Tests RBAC Operations should compare role levels correctly","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075868159,"status":"passed","title":"should compare role levels correctly"},{"ancestorTitles":["Role-Based Access Control Tests","RBAC Operations"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Role-Based Access Control Tests RBAC Operations should handle dynamic permission checking with token","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868162,"status":"passed","title":"should handle dynamic permission checking with token"}],"endTime":1764075868167,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\rbac.test.js","startTime":1764075867984,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":19,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle concurrent token generation for same user","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075868141,"status":"passed","title":"should handle concurrent token generation for same user"},{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle token with special characters in payload","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075868161,"status":"passed","title":"should handle token with special characters in payload"},{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle very large payload in token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075868165,"status":"passed","title":"should handle very large payload in token"},{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle token verification with wrong secret variations","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868169,"status":"passed","title":"should handle token verification with wrong secret variations"},{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":18,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle rapid token refresh scenario","invocations":1,"location":null,"numPassingAsserts":21,"retryReasons":[],"startAt":1764075868183,"status":"passed","title":"should handle rapid token refresh scenario"},{"ancestorTitles":["Authentication Edge Cases Tests","Edge Case Scenarios"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Edge Cases Tests Edge Case Scenarios should handle token with missing optional claims gracefully","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075868202,"status":"passed","title":"should handle token with missing optional claims gracefully"}],"endTime":1764075868210,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\auth-edge-cases.test.js","startTime":1764075867997,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Token Storage and Retrieval Tests","Token Storage Operations"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Storage and Retrieval Tests Token Storage Operations should store and retrieve access token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075868248,"status":"passed","title":"should store and retrieve access token"},{"ancestorTitles":["Token Storage and Retrieval Tests","Token Storage Operations"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Storage and Retrieval Tests Token Storage Operations should store multiple token types for same user","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075868261,"status":"passed","title":"should store multiple token types for same user"},{"ancestorTitles":["Token Storage and Retrieval Tests","Token Storage Operations"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Storage and Retrieval Tests Token Storage Operations should handle session-based token storage","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868268,"status":"passed","title":"should handle session-based token storage"},{"ancestorTitles":["Token Storage and Retrieval Tests","Token Storage Operations"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Storage and Retrieval Tests Token Storage Operations should clear expired tokens from storage","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868278,"status":"passed","title":"should clear expired tokens from storage"}],"endTime":1764075868290,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\token-storage.test.js","startTime":1764075868099,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Refresh Token Mechanism Tests","Refresh Token Operations"],"duration":12,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refresh Token Mechanism Tests Refresh Token Operations should generate valid access and refresh token pair","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868349,"status":"passed","title":"should generate valid access and refresh token pair"},{"ancestorTitles":["Refresh Token Mechanism Tests","Refresh Token Operations"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refresh Token Mechanism Tests Refresh Token Operations should use refresh token to generate new access token","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868362,"status":"passed","title":"should use refresh token to generate new access token"},{"ancestorTitles":["Refresh Token Mechanism Tests","Refresh Token Operations"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refresh Token Mechanism Tests Refresh Token Operations should reject refresh token used with access token secret","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868368,"status":"passed","title":"should reject refresh token used with access token secret"},{"ancestorTitles":["Refresh Token Mechanism Tests","Refresh Token Operations"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Refresh Token Mechanism Tests Refresh Token Operations should handle refresh token rotation","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075868376,"status":"passed","title":"should handle refresh token rotation"}],"endTime":1764075868385,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\refresh-token.test.js","startTime":1764075868174,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Multiple Authentication Methods Tests","Multi-Auth Scenarios"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multiple Authentication Methods Tests Multi-Auth Scenarios should support JWT authentication method","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868395,"status":"passed","title":"should support JWT authentication method"},{"ancestorTitles":["Multiple Authentication Methods Tests","Multi-Auth Scenarios"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multiple Authentication Methods Tests Multi-Auth Scenarios should support API Key authentication method","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868411,"status":"passed","title":"should support API Key authentication method"},{"ancestorTitles":["Multiple Authentication Methods Tests","Multi-Auth Scenarios"],"duration":2,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Multiple Authentication Methods Tests Multi-Auth Scenarios should support Basic authentication method","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868412,"status":"passed","title":"should support Basic authentication method"}],"endTime":1764075868415,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\multi-auth.test.js","startTime":1764075868224,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Token Expiration Handling Tests","Token Expiration Scenarios"],"duration":13,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Expiration Handling Tests Token Expiration Scenarios should reject expired access token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868458,"status":"passed","title":"should reject expired access token"},{"ancestorTitles":["Token Expiration Handling Tests","Token Expiration Scenarios"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Expiration Handling Tests Token Expiration Scenarios should accept token that has not expired yet","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868472,"status":"passed","title":"should accept token that has not expired yet"},{"ancestorTitles":["Token Expiration Handling Tests","Token Expiration Scenarios"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Expiration Handling Tests Token Expiration Scenarios should handle token with no expiration when configured","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868479,"status":"passed","title":"should handle token with no expiration when configured"},{"ancestorTitles":["Token Expiration Handling Tests","Token Expiration Scenarios"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Expiration Handling Tests Token Expiration Scenarios should validate token expiration timestamp format","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075868484,"status":"passed","title":"should validate token expiration timestamp format"},{"ancestorTitles":["Token Expiration Handling Tests","Token Expiration Scenarios"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Expiration Handling Tests Token Expiration Scenarios should handle near-expiration tokens with clock skew","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868489,"status":"passed","title":"should handle near-expiration tokens with clock skew"}],"endTime":1764075868497,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\token-expiration.test.js","startTime":1764075868298,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["JWT Token Validation Tests","Token Structure Validation"],"duration":22,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JWT Token Validation Tests Token Structure Validation should validate correct JWT structure with all required claims","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075868566,"status":"passed","title":"should validate correct JWT structure with all required claims"},{"ancestorTitles":["JWT Token Validation Tests","Token Structure Validation"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JWT Token Validation Tests Token Structure Validation should reject token with invalid signature","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868589,"status":"passed","title":"should reject token with invalid signature"},{"ancestorTitles":["JWT Token Validation Tests","Token Structure Validation"],"duration":1,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JWT Token Validation Tests Token Structure Validation should reject malformed JWT token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075868598,"status":"passed","title":"should reject malformed JWT token"},{"ancestorTitles":["JWT Token Validation Tests","Token Structure Validation"],"duration":3,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JWT Token Validation Tests Token Structure Validation should validate token with custom claims and audience","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868599,"status":"passed","title":"should validate token with custom claims and audience"},{"ancestorTitles":["JWT Token Validation Tests","Token Structure Validation"],"duration":5,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"JWT Token Validation Tests Token Structure Validation should handle tokens with different algorithms","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868602,"status":"passed","title":"should handle tokens with different algorithms"}],"endTime":1764075868609,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\jwt-validation.test.js","startTime":1764075868395,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Token Revocation Tests","Token Revocation Scenarios"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Revocation Tests Token Revocation Scenarios should revoke token by JTI (JWT ID)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868613,"status":"passed","title":"should revoke token by JTI (JWT ID)"},{"ancestorTitles":["Token Revocation Tests","Token Revocation Scenarios"],"duration":4,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Revocation Tests Token Revocation Scenarios should handle revocation of tokens without JTI","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868620,"status":"passed","title":"should handle revocation of tokens without JTI"},{"ancestorTitles":["Token Revocation Tests","Token Revocation Scenarios"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Token Revocation Tests Token Revocation Scenarios should maintain revocation list for multiple tokens","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075868624,"status":"passed","title":"should maintain revocation list for multiple tokens"}],"endTime":1764075868634,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\token-revocation.test.js","startTime":1764075868426,"status":"passed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1764075875683,"message":"  ● Test suite failed to run\n\n    Your test suite must contain at least one test.\n\n      at onResult (node_modules/@jest/core/build/index.js:1057:18)\n      at node_modules/@jest/core/build/index.js:1127:165\n      at node_modules/emittery/index.js:363:13\n          at Array.map (<anonymous>)\n      at Emittery.emit (node_modules/emittery/index.js:361:23)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\__mocks__\\accessControlMocks.js","startTime":1764075875683,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["API Performance Benchmarks","Authentication Endpoints"],"duration":334,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Authentication Endpoints should benchmark member login performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867608,"status":"passed","title":"should benchmark member login performance"},{"ancestorTitles":["API Performance Benchmarks","Authentication Endpoints"],"duration":8,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Authentication Endpoints should benchmark token verification performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867943,"status":"passed","title":"should benchmark token verification performance"},{"ancestorTitles":["API Performance Benchmarks","Member Endpoints"],"duration":157,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Member Endpoints should benchmark members list performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075867951,"status":"passed","title":"should benchmark members list performance"},{"ancestorTitles":["API Performance Benchmarks","Member Endpoints"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Member Endpoints should benchmark member statistics performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868108,"status":"passed","title":"should benchmark member statistics performance"},{"ancestorTitles":["API Performance Benchmarks","Payment Endpoints"],"duration":155,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Payment Endpoints should benchmark payments list performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868117,"status":"passed","title":"should benchmark payments list performance"},{"ancestorTitles":["API Performance Benchmarks","Payment Endpoints"],"duration":10,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Payment Endpoints should benchmark payment statistics performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868272,"status":"passed","title":"should benchmark payment statistics performance"},{"ancestorTitles":["API Performance Benchmarks","Document Endpoints"],"duration":177,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Document Endpoints should benchmark documents list performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868282,"status":"passed","title":"should benchmark documents list performance"},{"ancestorTitles":["API Performance Benchmarks","Document Endpoints"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Document Endpoints should benchmark document categories performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868459,"status":"passed","title":"should benchmark document categories performance"},{"ancestorTitles":["API Performance Benchmarks","Financial Report Endpoints"],"duration":185,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Financial Report Endpoints should benchmark financial summary performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868465,"status":"passed","title":"should benchmark financial summary performance"},{"ancestorTitles":["API Performance Benchmarks","Financial Report Endpoints"],"duration":179,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"API Performance Benchmarks Financial Report Endpoints should benchmark cash flow analysis performance","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075868650,"status":"passed","title":"should benchmark cash flow analysis performance"}],"endTime":1764075868831,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\performance\\api-benchmarks.test.js","startTime":1764075866511,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Invalid Token Scenarios Tests","Invalid Token Handling"],"duration":14,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Invalid Token Scenarios Tests Invalid Token Handling should reject empty or null token","invocations":1,"location":null,"numPassingAsserts":3,"retryReasons":[],"startAt":1764075868839,"status":"passed","title":"should reject empty or null token"},{"ancestorTitles":["Invalid Token Scenarios Tests","Invalid Token Handling"],"duration":26,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toThrow(expected)\n\nExpected substring: \"invalid signature\"\nReceived message:   \"invalid token\"\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m         jwt\u001b[33m.\u001b[39mverify(tamperedToken\u001b[33m,\u001b[39m \u001b[33mSECRET_KEY\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow(\u001b[32m'invalid signature'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m\u001b[0m\n\n      at Object.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:82:17)\n      at __tests__/integration/auth/invalid-token.test.js:31:13\n      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)\n      at Object.<anonymous> (__tests__/integration/auth/invalid-token.test.js:32:10)","pass":false}}],"failureMessages":["Error: expect(received).toThrow(expected)\n\nExpected substring: \"invalid signature\"\nReceived message:   \"invalid token\"\n\n    \u001b[0m \u001b[90m 29 |\u001b[39m\n     \u001b[90m 30 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m         jwt\u001b[33m.\u001b[39mverify(tamperedToken\u001b[33m,\u001b[39m \u001b[33mSECRET_KEY\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 32 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow(\u001b[32m'invalid signature'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 33 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 34 |\u001b[39m\u001b[0m\n\n      at Object.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:82:17)\n      at __tests__/integration/auth/invalid-token.test.js:31:13\n      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)\n      at Object.<anonymous> (__tests__/integration/auth/invalid-token.test.js:32:10)\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\invalid-token.test.js:32:10)\n    at Promise.finally.completed (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1557:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1497:10)\n    at _callCircusTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1007:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:947:3)\n    at D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:849:7\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:862:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at _runTestsForDescribeBlock (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:857:11)\n    at run (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:761:3)\n    at runAndTransformResultsToJestFormat (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1918:21)\n    at jestAdapter (D:\\PROShael\\alshuail-backend\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (D:\\PROShael\\alshuail-backend\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"],"fullName":"Invalid Token Scenarios Tests Invalid Token Handling should reject token with tampered payload","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075868854,"status":"failed","title":"should reject token with tampered payload"},{"ancestorTitles":["Invalid Token Scenarios Tests","Invalid Token Handling"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Invalid Token Scenarios Tests Invalid Token Handling should reject token with invalid format","invocations":1,"location":null,"numPassingAsserts":7,"retryReasons":[],"startAt":1764075868880,"status":"passed","title":"should reject token with invalid format"}],"endTime":1764075868899,"message":"  ● Invalid Token Scenarios Tests › Invalid Token Handling › should reject token with tampered payload\n\n    expect(received).toThrow(expected)\n\n    Expected substring: \"invalid signature\"\n    Received message:   \"invalid token\"\n\n        \u001b[0m \u001b[90m 29 |\u001b[39m\n         \u001b[90m 30 |\u001b[39m       expect(() \u001b[33m=>\u001b[39m {\n        \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 31 |\u001b[39m         jwt\u001b[33m.\u001b[39mverify(tamperedToken\u001b[33m,\u001b[39m \u001b[33mSECRET_KEY\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m    |\u001b[39m             \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n         \u001b[90m 32 |\u001b[39m       })\u001b[33m.\u001b[39mtoThrow(\u001b[32m'invalid signature'\u001b[39m)\u001b[33m;\u001b[39m\n         \u001b[90m 33 |\u001b[39m     })\u001b[33m;\u001b[39m\n         \u001b[90m 34 |\u001b[39m\u001b[0m\n\n      at Object.module.exports [as verify] (node_modules/jsonwebtoken/verify.js:82:17)\n      at __tests__/integration/auth/invalid-token.test.js:31:13\n      at Object.<anonymous> (node_modules/expect/build/index.js:1824:9)\n      at Object.throwingMatcher [as toThrow] (node_modules/expect/build/index.js:2235:93)\n      at Object.<anonymous> (__tests__/integration/auth/invalid-token.test.js:32:10)\n      at Object.<anonymous> (__tests__/integration/auth/invalid-token.test.js:32:10)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\auth\\invalid-token.test.js","startTime":1764075868666,"status":"failed","summary":""},{"assertionResults":[],"coverage":{},"endTime":1764075875683,"message":"  ● Test suite failed to run\n\n    Your test suite must contain at least one test.\n\n      at onResult (node_modules/@jest/core/build/index.js:1057:18)\n      at node_modules/@jest/core/build/index.js:1127:165\n      at node_modules/emittery/index.js:363:13\n          at Array.map (<anonymous>)\n      at Emittery.emit (node_modules/emittery/index.js:361:23)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\setup.js","startTime":1764075875683,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["E2E: Complete Authentication Workflow"],"duration":331,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"E2E: Complete Authentication Workflow should complete full authentication lifecycle","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869028,"status":"passed","title":"should complete full authentication lifecycle"}],"endTime":1764075869360,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\e2e\\workflows\\authentication.e2e.test.js","startTime":1764075868172,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":20,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests JWT Token Validation should reject requests without token to protected endpoints","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869125,"status":"passed","title":"should reject requests without token to protected endpoints"},{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests JWT Token Validation should reject requests with invalid token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869145,"status":"passed","title":"should reject requests with invalid token"},{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests JWT Token Validation should reject requests with expired token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869152,"status":"passed","title":"should reject requests with expired token"},{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":195,"failing":false,"failureDetails":[{"code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}],"failureMessages":["Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)"],"fullName":"Authentication Security Tests JWT Token Validation should accept requests with valid token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869158,"status":"failed","title":"should accept requests with valid token"},{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests JWT Token Validation should reject malformed tokens","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869355,"status":"passed","title":"should reject malformed tokens"},{"ancestorTitles":["Authentication Security Tests","JWT Token Validation"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests JWT Token Validation should reject tokens with missing Bearer prefix","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869361,"status":"passed","title":"should reject tokens with missing Bearer prefix"},{"ancestorTitles":["Authentication Security Tests","Public Endpoint Access"],"duration":7,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Public Endpoint Access should allow access to member-monitoring without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869367,"status":"passed","title":"should allow access to member-monitoring without token"},{"ancestorTitles":["Authentication Security Tests","Public Endpoint Access"],"duration":281,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Public Endpoint Access should allow access to dashboard stats without token","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869374,"status":"passed","title":"should allow access to dashboard stats without token"},{"ancestorTitles":["Authentication Security Tests","Token Tampering Protection"],"duration":9,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Token Tampering Protection should reject tampered token payload","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869656,"status":"passed","title":"should reject tampered token payload"},{"ancestorTitles":["Authentication Security Tests","Token Tampering Protection"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Token Tampering Protection should reject token with modified signature","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869665,"status":"passed","title":"should reject token with modified signature"},{"ancestorTitles":["Authentication Security Tests","Authentication Bypass Prevention"],"duration":16,"failing":false,"failureDetails":[{"matcherResult":{"expected":"Authentication required","message":"expect(received).toBe(expected) // Object.is equality\n\nExpected: \"Authentication required\"\nReceived: undefined","name":"toBe","pass":false}}],"failureMessages":["Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: \"Authentication required\"\nReceived: undefined\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\authentication.test.js:177:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"Authentication Security Tests Authentication Bypass Prevention should not allow access to protected routes without proper authentication","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075869676,"status":"failed","title":"should not allow access to protected routes without proper authentication"},{"ancestorTitles":["Authentication Security Tests","Authentication Bypass Prevention"],"duration":6,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Authentication Bypass Prevention should not accept authentication in query parameters","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869692,"status":"passed","title":"should not accept authentication in query parameters"},{"ancestorTitles":["Authentication Security Tests","Authentication Bypass Prevention"],"duration":11,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Authentication Security Tests Authentication Bypass Prevention should not accept authentication in request body for GET requests","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075869698,"status":"passed","title":"should not accept authentication in request body for GET requests"}],"endTime":1764075869720,"message":"  ● Authentication Security Tests › JWT Token Validation › should accept requests with valid token\n\n    listen EADDRINUSE: address already in use 0.0.0.0:3001\n\n\n  ● Authentication Security Tests › Authentication Bypass Prevention › should not allow access to protected routes without proper authentication\n\n    expect(received).toBe(expected) // Object.is equality\n\n    Expected: \"Authentication required\"\n    Received: undefined\n\n    \u001b[0m \u001b[90m 175 |\u001b[39m\n     \u001b[90m 176 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBe(\u001b[36mfalse\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 177 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39merror)\u001b[33m.\u001b[39mtoBe(\u001b[32m'Authentication required'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 178 |\u001b[39m       }\n     \u001b[90m 179 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 180 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/authentication.test.js:177:37)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\security\\authentication.test.js","startTime":1764075867532,"status":"failed","summary":""},{"assertionResults":[{"ancestorTitles":["Crisis Controller Integration Tests","GET /api/crisis/dashboard - Get Crisis Dashboard"],"duration":2566,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Crisis Controller Integration Tests GET /api/crisis/dashboard - Get Crisis Dashboard should return crisis dashboard data (public endpoint)","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075869059,"status":"passed","title":"should return crisis dashboard data (public endpoint)"},{"ancestorTitles":["Crisis Controller Integration Tests","POST /api/crisis/update-balance - Update Member Balance"],"duration":143,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"Crisis Controller Integration Tests POST /api/crisis/update-balance - Update Member Balance should accept balance update request","invocations":1,"location":null,"numPassingAsserts":1,"retryReasons":[],"startAt":1764075871625,"status":"passed","title":"should accept balance update request"}],"endTime":1764075871770,"message":"","name":"D:\\PROShael\\alshuail-backend\\__tests__\\integration\\controllers\\crisis.test.js","startTime":1764075868507,"status":"passed","summary":""},{"assertionResults":[{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":197,"failing":false,"failureDetails":[{"code":"EADDRINUSE","errno":-4091,"syscall":"listen","address":"0.0.0.0","port":3001}],"failureMessages":["Error: listen EADDRINUSE: address already in use 0.0.0.0:3001\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)"],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: '; DROP TABLE members; --...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862672,"status":"failed","title":"should sanitize SQL injection attempt: '; DROP TABLE members; --..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":235,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: 1' OR '1'='1...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075862870,"status":"passed","title":"should sanitize SQL injection attempt: 1' OR '1'='1..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":210,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: admin'--...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863106,"status":"passed","title":"should sanitize SQL injection attempt: admin'--..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":166,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: ' UNION SELECT * FROM users--...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863316,"status":"passed","title":"should sanitize SQL injection attempt: ' UNION SELECT * FROM users--..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":398,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: 1'; DELETE FROM members WHERE ...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863482,"status":"passed","title":"should sanitize SQL injection attempt: 1'; DELETE FROM members WHERE ..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":203,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: ' OR 1=1--...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075863880,"status":"passed","title":"should sanitize SQL injection attempt: ' OR 1=1--..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":185,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: '; EXEC xp_cmdshell('dir'); --...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864083,"status":"passed","title":"should sanitize SQL injection attempt: '; EXEC xp_cmdshell('dir'); --..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":156,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: \\'; DROP TABLE members; --...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864268,"status":"passed","title":"should sanitize SQL injection attempt: \\'; DROP TABLE members; --..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":175,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: 1' AND (SELECT * FROM (SELECT(...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864424,"status":"passed","title":"should sanitize SQL injection attempt: 1' AND (SELECT * FROM (SELECT(..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":143,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":500,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\sql-injection.test.js:45:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: ' UNION ALL SELECT NULL,NULL,N...","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075864599,"status":"failed","title":"should sanitize SQL injection attempt: ' UNION ALL SELECT NULL,NULL,N..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":153,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: %27%20OR%20%271%27%3D%271...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864742,"status":"passed","title":"should sanitize SQL injection attempt: %27%20OR%20%271%27%3D%271..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":175,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: Robert'); DROP TABLE members;-...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075864895,"status":"passed","title":"should sanitize SQL injection attempt: Robert'); DROP TABLE members;-..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":148,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: 1' UNION SELECT username, pass...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075865070,"status":"passed","title":"should sanitize SQL injection attempt: 1' UNION SELECT username, pass..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":153,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: <script>alert('XSS')</script>...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075865219,"status":"passed","title":"should sanitize SQL injection attempt: <script>alert('XSS')</script>..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":146,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize SQL injection attempt: '; UPDATE members SET role='ad...","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075865372,"status":"passed","title":"should sanitize SQL injection attempt: '; UPDATE members SET role='ad..."},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":185,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should handle nested SQL injection attempts","invocations":1,"location":null,"numPassingAsserts":2,"retryReasons":[],"startAt":1764075865518,"status":"passed","title":"should handle nested SQL injection attempts"},{"ancestorTitles":["SQL Injection Prevention Tests","Search Parameter Injection"],"duration":832,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Search Parameter Injection should sanitize wildcard characters in search","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075865703,"status":"passed","title":"should sanitize wildcard characters in search"},{"ancestorTitles":["SQL Injection Prevention Tests","Pagination Parameter Injection"],"duration":745,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":500,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\sql-injection.test.js:112:37)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"SQL Injection Prevention Tests Pagination Parameter Injection should sanitize page parameter injection","invocations":1,"location":null,"numPassingAsserts":6,"retryReasons":[],"startAt":1764075866535,"status":"failed","title":"should sanitize page parameter injection"},{"ancestorTitles":["SQL Injection Prevention Tests","Pagination Parameter Injection"],"duration":921,"failing":false,"failureDetails":[{"matcherResult":{"message":"expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 100\nReceived:    1000","pass":false}}],"failureMessages":["Error: expect(received).toBeLessThanOrEqual(expected)\n\nExpected: <= 100\nReceived:    1000\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\sql-injection.test.js:142:50)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"SQL Injection Prevention Tests Pagination Parameter Injection should sanitize limit parameter injection","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075867280,"status":"failed","title":"should sanitize limit parameter injection"},{"ancestorTitles":["SQL Injection Prevention Tests","Boolean Parameter Injection"],"duration":1435,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Boolean Parameter Injection should sanitize profile_completed parameter","invocations":1,"location":null,"numPassingAsserts":10,"retryReasons":[],"startAt":1764075868202,"status":"passed","title":"should sanitize profile_completed parameter"},{"ancestorTitles":["SQL Injection Prevention Tests","Boolean Parameter Injection"],"duration":1512,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Boolean Parameter Injection should sanitize status parameter","invocations":1,"location":null,"numPassingAsserts":8,"retryReasons":[],"startAt":1764075869637,"status":"passed","title":"should sanitize status parameter"},{"ancestorTitles":["SQL Injection Prevention Tests","Combined Injection Attempts"],"duration":436,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Combined Injection Attempts should handle multiple injection vectors simultaneously","invocations":1,"location":null,"numPassingAsserts":4,"retryReasons":[],"startAt":1764075871149,"status":"passed","title":"should handle multiple injection vectors simultaneously"},{"ancestorTitles":["SQL Injection Prevention Tests","Combined Injection Attempts"],"duration":15,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Combined Injection Attempts should prevent second-order SQL injection","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075871585,"status":"passed","title":"should prevent second-order SQL injection"},{"ancestorTitles":["SQL Injection Prevention Tests","NoSQL Injection Prevention"],"duration":23,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests NoSQL Injection Prevention should prevent NoSQL injection through JSON payloads","invocations":1,"location":null,"numPassingAsserts":5,"retryReasons":[],"startAt":1764075871600,"status":"passed","title":"should prevent NoSQL injection through JSON payloads"},{"ancestorTitles":["SQL Injection Prevention Tests","Special Character Handling"],"duration":1528,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Special Character Handling should safely handle special characters in search","invocations":1,"location":null,"numPassingAsserts":20,"retryReasons":[],"startAt":1764075871623,"status":"passed","title":"should safely handle special characters in search"},{"ancestorTitles":["SQL Injection Prevention Tests","Input Length Validation"],"duration":236,"failing":false,"failureDetails":[{"matcherResult":{"actual":500,"expected":500,"message":"expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500","name":"toBe","pass":true}}],"failureMessages":["Error: expect(received).not.toBe(expected) // Object.is equality\n\nExpected: not 500\n    at Object.<anonymous> (D:\\PROShael\\alshuail-backend\\__tests__\\security\\sql-injection.test.js:299:35)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)"],"fullName":"SQL Injection Prevention Tests Input Length Validation should handle extremely long input strings","invocations":1,"location":null,"numPassingAsserts":0,"retryReasons":[],"startAt":1764075873152,"status":"failed","title":"should handle extremely long input strings"},{"ancestorTitles":["SQL Injection Prevention Tests","Input Length Validation"],"duration":1606,"failing":false,"failureDetails":[],"failureMessages":[],"fullName":"SQL Injection Prevention Tests Input Length Validation should handle empty and null inputs","invocations":1,"location":null,"numPassingAsserts":12,"retryReasons":[],"startAt":1764075873388,"status":"passed","title":"should handle empty and null inputs"}],"endTime":1764075875019,"message":"  ● SQL Injection Prevention Tests › Search Parameter Injection › should sanitize SQL injection attempt: '; DROP TABLE members; --...\n\n    listen EADDRINUSE: address already in use 0.0.0.0:3001\n\n\n  ● SQL Injection Prevention Tests › Search Parameter Injection › should sanitize SQL injection attempt: ' UNION ALL SELECT NULL,NULL,N...\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 500\n\n    \u001b[0m \u001b[90m 43 |\u001b[39m\n     \u001b[90m 44 |\u001b[39m         \u001b[90m// Should not cause server error\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 45 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 46 |\u001b[39m\n     \u001b[90m 47 |\u001b[39m         \u001b[90m// Should return valid response structure\u001b[39m\n     \u001b[90m 48 |\u001b[39m         expect(response\u001b[33m.\u001b[39mbody)\u001b[33m.\u001b[39mtoHaveProperty(\u001b[32m'success'\u001b[39m)\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/sql-injection.test.js:45:37)\n\n  ● SQL Injection Prevention Tests › Pagination Parameter Injection › should sanitize page parameter injection\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 500\n\n    \u001b[0m \u001b[90m 110 |\u001b[39m           \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${validToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 111 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 112 |\u001b[39m         expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                     \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 113 |\u001b[39m\n     \u001b[90m 114 |\u001b[39m         \u001b[36mif\u001b[39m (response\u001b[33m.\u001b[39mstatus \u001b[33m===\u001b[39m \u001b[35m200\u001b[39m) {\n     \u001b[90m 115 |\u001b[39m           \u001b[90m// Page should be sanitized to a valid number\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/sql-injection.test.js:112:37)\n\n  ● SQL Injection Prevention Tests › Pagination Parameter Injection › should sanitize limit parameter injection\n\n    expect(received).toBeLessThanOrEqual(expected)\n\n    Expected: <= 100\n    Received:    1000\n\n    \u001b[0m \u001b[90m 140 |\u001b[39m           \u001b[90m// Limit should be within bounds\u001b[39m\n     \u001b[90m 141 |\u001b[39m           expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mpagination\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBeGreaterThanOrEqual(\u001b[35m1\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 142 |\u001b[39m           expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39mpagination\u001b[33m.\u001b[39mlimit)\u001b[33m.\u001b[39mtoBeLessThanOrEqual(\u001b[35m100\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                                  \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 143 |\u001b[39m         }\n     \u001b[90m 144 |\u001b[39m       }\n     \u001b[90m 145 |\u001b[39m     })\u001b[33m;\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/sql-injection.test.js:142:50)\n\n  ● SQL Injection Prevention Tests › Input Length Validation › should handle extremely long input strings\n\n    expect(received).not.toBe(expected) // Object.is equality\n\n    Expected: not 500\n\n    \u001b[0m \u001b[90m 297 |\u001b[39m         \u001b[33m.\u001b[39m\u001b[36mset\u001b[39m(\u001b[32m'Authorization'\u001b[39m\u001b[33m,\u001b[39m \u001b[32m`Bearer ${validToken}`\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 298 |\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 299 |\u001b[39m       expect(response\u001b[33m.\u001b[39mstatus)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoBe(\u001b[35m500\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m     |\u001b[39m                                   \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 300 |\u001b[39m       expect(response\u001b[33m.\u001b[39mbody\u001b[33m.\u001b[39msuccess)\u001b[33m.\u001b[39mtoBeDefined()\u001b[33m;\u001b[39m\n     \u001b[90m 301 |\u001b[39m     })\u001b[33m;\u001b[39m\n     \u001b[90m 302 |\u001b[39m\u001b[0m\n\n      at Object.<anonymous> (__tests__/security/sql-injection.test.js:299:35)\n","name":"D:\\PROShael\\alshuail-backend\\__tests__\\security\\sql-injection.test.js","startTime":1764075861613,"status":"failed","summary":""}],"wasInterrupted":false}
