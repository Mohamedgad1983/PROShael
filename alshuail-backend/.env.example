# ============================================
# AL-SHUAIL BACKEND - ENVIRONMENT VARIABLES
# ============================================
#
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
#
# Required variables are marked with [REQUIRED]
# Production-only requirements marked with [PROD REQUIRED]

# ============================================
# ENVIRONMENT
# ============================================
# Options: development, production, test
NODE_ENV=development

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for the Express server
PORT=5001

# ============================================
# VPS POSTGRESQL DATABASE [PRIMARY - REQUIRED]
# ============================================
# Direct PostgreSQL connection to VPS server (213.199.62.185)
# Used by pgQueryBuilder.js for all database operations
DB_HOST=213.199.62.185
DB_PORT=5432
DB_NAME=alshuail_db
DB_USER=alshuail
DB_PASSWORD=your_database_password_here

# ============================================
# SUPABASE CONFIGURATION [DEPRECATED]
# ============================================
# NOTE: These variables are DEPRECATED
# The system now uses VPS PostgreSQL directly via pgQueryBuilder
# Only documentStorage.js still references these (migration pending)
#
# SUPABASE_URL=https://oneiggrfzagqjbkdinin.supabase.co
# SUPABASE_KEY=your_supabase_anon_key_here
# SUPABASE_ANON_KEY=your_supabase_anon_key_here
# SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here
# SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ============================================
# JWT AUTHENTICATION [PROD REQUIRED]
# ============================================
# Secret key for signing JWT tokens
# [PROD REQUIRED] - Generate with: openssl rand -base64 64
# In development, a fallback secret will be used if not set
JWT_SECRET=your_jwt_secret_here

# JWT Refresh Secret (optional, for refresh tokens)
JWT_REFRESH_SECRET=your_jwt_refresh_secret_here

# Alternative name for backward compatibility
SECRET_KEY=your_jwt_secret_here

# JWT Token Expiration
# Admin tokens (shorter for security)
ADMIN_JWT_TTL=7d

# Member tokens (longer for convenience)
MEMBER_JWT_TTL=30d

# ============================================
# FRONTEND CONFIGURATION
# ============================================
# Frontend application URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3002

# Specific CORS origin (optional, defaults to FRONTEND_URL)
# Use comma-separated list for multiple origins
CORS_ORIGIN=http://localhost:3002

# ============================================
# REDIS CACHE (Optional)
# ============================================
# Redis connection URL for caching
# If not provided, caching will be disabled
REDIS_URL=redis://localhost:6379

# ============================================
# PLATFORM DETECTION
# ============================================
# Automatically set by hosting platforms
# Platform detection (legacy, no longer on Render.com)
RENDER=false

# ============================================
# API CONFIGURATION (Optional)
# ============================================
# General API key for third-party integrations
API_KEY=your-api-key-here

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# SMTP configuration for sending emails
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_email_password

# ============================================
# SMS CONFIGURATION (Optional)
# ============================================
# SMS service configuration
SMS_API_KEY=your_sms_api_key
SMS_SENDER=AlShuail

# ============================================
# WHATSAPP - ULTRAMSG (Recommended)
# ============================================
# Easy WhatsApp API - No Docker needed!
# Sign up: https://ultramsg.com
# $39/month - Unlimited messages
# Steps:
#   1. Create account at ultramsg.com
#   2. Create new instance
#   3. Scan QR code with WhatsApp
#   4. Copy instance_id and token below
ULTRAMSG_INSTANCE_ID=your_instance_id
ULTRAMSG_TOKEN=your_token

# Test mode: Use fixed OTP '123456' (auto-enabled in development)
USE_TEST_OTP=false

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable password authentication (for safe rollout)
# When false, only OTP login is available
PASSWORD_AUTH_ENABLED=true

# Enable/disable OTP authentication (should always be true as fallback)
OTP_AUTH_ENABLED=true

# ============================================
# TESTING CONFIGURATION
# ============================================
# Allow test member logins (auto-enabled in development)
ALLOW_TEST_MEMBER_LOGINS=true

# Test member password (for development/testing only)
TEST_MEMBER_PASSWORD=test123

# Generic test password (for development/testing only)
PASSWORD=test-password

# ============================================
# FIREBASE (Push Notifications)
# ============================================
# Firebase Cloud Messaging configuration
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_CLIENT_EMAIL=your_client_email
FIREBASE_PRIVATE_KEY=your_private_key

# ============================================
# SECURITY NOTES
# ============================================
# 1. Generate strong JWT_SECRET: openssl rand -base64 64
# 2. Never commit .env file to version control
# 3. Use different secrets for dev/staging/production
# 4. Rotate secrets periodically (every 90 days)
# 5. Store production secrets in secure vault (GitHub Secrets, etc.)
# 6. DB_PASSWORD should be strong and unique

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# Before deploying to production, ensure:
# [x] NODE_ENV=production
# [x] JWT_SECRET is set (not using default)
# [x] DB_HOST, DB_NAME, DB_USER, DB_PASSWORD are set for VPS PostgreSQL
# [x] FRONTEND_URL points to production domain
# [x] CORS_ORIGIN is properly configured
# [x] All secrets are stored in platform's secret manager
# [x] .env file is in .gitignore
