# ============================================
# AL-SHUAIL BACKEND - ENVIRONMENT VARIABLES
# ============================================
#
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
#
# Required variables are marked with [REQUIRED]
# Production-only requirements marked with [PROD REQUIRED]

# ============================================
# ENVIRONMENT
# ============================================
# Options: development, production, test
NODE_ENV=development

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for the Express server
PORT=5001

# ============================================
# SUPABASE CONFIGURATION [REQUIRED]
# ============================================
# Your Supabase project URL
SUPABASE_URL=https://oneiggrfzagqjbkdinin.supabase.co

# Supabase Anonymous Key (client-side key)
# [REQUIRED] - Get from: Project Settings > API > anon public
SUPABASE_KEY=your_supabase_anon_key_here
SUPABASE_ANON_KEY=your_supabase_anon_key_here

# Supabase Service Role Key (server-side key with full access)
# [PROD REQUIRED] - Get from: Project Settings > API > service_role secret
# WARNING: Keep this secret! Never expose in client-side code
SUPABASE_SERVICE_KEY=your_supabase_service_role_key_here
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key_here

# ============================================
# DATABASE (Optional)
# ============================================
# PostgreSQL direct connection URL (for migrations)
DATABASE_URL=postgresql://postgres:[password]@db.oneiggrfzagqjbkdinin.supabase.co:5432/postgres

# ============================================
# JWT AUTHENTICATION [PROD REQUIRED]
# ============================================
# Secret key for signing JWT tokens
# [PROD REQUIRED] - Generate with: openssl rand -base64 64
# In development, a fallback secret will be used if not set
JWT_SECRET=your_jwt_secret_here

# JWT Refresh Secret (optional, for refresh tokens)
JWT_REFRESH_SECRET=your_jwt_refresh_secret_here

# Alternative name for backward compatibility
SECRET_KEY=your_jwt_secret_here

# JWT Token Expiration
# Admin tokens (shorter for security)
ADMIN_JWT_TTL=7d

# Member tokens (longer for convenience)
MEMBER_JWT_TTL=30d

# ============================================
# FRONTEND CONFIGURATION
# ============================================
# Frontend application URL (for CORS and redirects)
FRONTEND_URL=http://localhost:3002

# Specific CORS origin (optional, defaults to FRONTEND_URL)
# Use comma-separated list for multiple origins
CORS_ORIGIN=http://localhost:3002

# ============================================
# REDIS CACHE (Optional)
# ============================================
# Redis connection URL for caching
# If not provided, caching will be disabled
REDIS_URL=redis://localhost:6379

# ============================================
# PLATFORM DETECTION
# ============================================
# Automatically set by hosting platforms
# Render.com sets this automatically
RENDER=false

# ============================================
# API CONFIGURATION (Optional)
# ============================================
# General API key for third-party integrations
API_KEY=your-api-key-here

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# SMTP configuration for sending emails
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your_email@gmail.com
EMAIL_PASS=your_email_password

# ============================================
# SMS CONFIGURATION (Optional)
# ============================================
# SMS service configuration
SMS_API_KEY=your_sms_api_key
SMS_SENDER=AlShuail

# ============================================
# WHATSAPP - ULTRAMSG (Recommended)
# ============================================
# Easy WhatsApp API - No Docker needed!
# Sign up: https://ultramsg.com
# $39/month - Unlimited messages
# Steps:
#   1. Create account at ultramsg.com
#   2. Create new instance
#   3. Scan QR code with WhatsApp
#   4. Copy instance_id and token below
ULTRAMSG_INSTANCE_ID=your_instance_id
ULTRAMSG_TOKEN=your_token

# Test mode: Use fixed OTP '123456' (auto-enabled in development)
USE_TEST_OTP=false

# ============================================
# FEATURE FLAGS
# ============================================
# Enable/disable password authentication (for safe rollout)
# When false, only OTP login is available
PASSWORD_AUTH_ENABLED=true

# Enable/disable OTP authentication (should always be true as fallback)
OTP_AUTH_ENABLED=true

# ============================================
# TESTING CONFIGURATION
# ============================================
# Allow test member logins (auto-enabled in development)
ALLOW_TEST_MEMBER_LOGINS=true

# Test member password (for development/testing only)
TEST_MEMBER_PASSWORD=test123

# Generic test password (for development/testing only)
PASSWORD=test-password

# ============================================
# SECURITY NOTES
# ============================================
# 1. Generate strong JWT_SECRET: openssl rand -base64 64
# 2. Never commit .env file to version control
# 3. Use different secrets for dev/staging/production
# 4. Rotate secrets periodically (every 90 days)
# 5. Store production secrets in secure vault (GitHub Secrets, etc.)
# 6. SUPABASE_SERVICE_KEY has full database access - protect it!

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# Before deploying to production, ensure:
# ✓ NODE_ENV=production
# ✓ JWT_SECRET is set (not using default)
# ✓ SUPABASE_SERVICE_KEY is set
# ✓ FRONTEND_URL points to production domain
# ✓ CORS_ORIGIN is properly configured
# ✓ All secrets are stored in platform's secret manager
# ✓ .env file is in .gitignore
