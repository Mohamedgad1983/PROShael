<!DOCTYPE html>
<html>
<head>
    <title>Clear Cache - Al-Shuail Admin</title>
    <style>
        body {
            font-family: 'Cairo', Arial, sans-serif;
            direction: rtl;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            text-align: center;
        }
        .container {
            background: rgba(255,255,255,0.1);
            padding: 40px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        button {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            transform: scale(1.05);
        }
        #log {
            margin-top: 20px;
            text-align: right;
            font-family: monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¹ ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ù…Ø¤Ù‚ØªØ©</h1>
        <p>Ø§Ø¶ØºØ· Ø§Ù„Ø²Ø± Ù„Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø®Ø²Ù†Ø© Ù…Ø¤Ù‚ØªØ§Ù‹</p>
        <button onclick="clearEverything()">ğŸ—‘ï¸ Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
        <button onclick="goToApp()">â†—ï¸ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù†Ø¸Ø§Ù…</button>
        <div id="log"></div>
    </div>

    <script>
        function log(msg) {
            const logDiv = document.getElementById('log');
            logDiv.innerHTML += msg + '<br>';
        }

        async function clearEverything() {
            try {
                log('ğŸ”„ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø³Ø­...');

                // 1. Unregister ALL service workers
                const registrations = await navigator.serviceWorker.getRegistrations();
                for(let registration of registrations) {
                    await registration.unregister();
                    log('âœ… ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªØ³Ø¬ÙŠÙ„ Service Worker');
                }

                // 2. Clear ALL caches
                const cacheNames = await caches.keys();
                for (let name of cacheNames) {
                    await caches.delete(name);
                    log('âœ… ØªÙ… Ù…Ø³Ø­ Cache: ' + name);
                }

                // 3. Clear localStorage
                localStorage.clear();
                log('âœ… ØªÙ… Ù…Ø³Ø­ LocalStorage');

                // 4. Clear sessionStorage
                sessionStorage.clear();
                log('âœ… ØªÙ… Ù…Ø³Ø­ SessionStorage');

                // 5. Clear cookies
                document.cookie.split(";").forEach(function(c) {
                    document.cookie = c.replace(/^ +/, "").replace(/=.*/, "=;expires=" + new Date().toUTCString() + ";path=/");
                });
                log('âœ… ØªÙ… Ù…Ø³Ø­ Cookies');

                log('');
                log('âœ…âœ…âœ… ØªÙ… Ø§Ù„Ù…Ø³Ø­ Ø¨Ù†Ø¬Ø§Ø­!');
                log('');
                log('â³ Ø³ÙŠØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© Ø®Ù„Ø§Ù„ 3 Ø«ÙˆØ§Ù†ÙŠ...');

                setTimeout(() => {
                    window.location.href = '/';
                }, 3000);

            } catch (error) {
                log('âŒ Ø®Ø·Ø£: ' + error.message);
            }
        }

        function goToApp() {
            window.location.href = '/';
        }

        // Auto-clear on load
        window.addEventListener('load', () => {
            log('ğŸ“„ ØµÙØ­Ø© Ø§Ù„ØªÙ†Ø¸ÙŠÙ Ø¬Ø§Ù‡Ø²Ø©');
            log('');
        });
    </script>
</body>
</html>
