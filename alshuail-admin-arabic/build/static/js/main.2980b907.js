(()=>{var e={2383:()=>{},3686:()=>{},8111:(e,t,a)=>{"use strict";var s=a(9950),n=a(1352),i=a(9379),r=a(9396),l=a(8996),o=a(1818),c=a(2777),d=a(1435),p=a(5452),x=a(7081),m=a(4776),h=a(1714),u=a(2941),g=a(9290),b=a(8823),j=a(8838),f=a(4206),y=a(259),v=a(6923),N=a(88),w=a(2422),A=a(5536),k=a(2391),S=a(4414);const _="http://localhost:3001";console.log("\ud83d\udd27 AuthContext API_BASE_URL:",_),console.log("\ud83d\udd27 process.env.REACT_APP_API_URL:","http://localhost:3001");const C=(0,s.createContext)(),F=()=>{const e=(0,s.useContext)(C);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},T=e=>{let{children:t}=e;const[a,n]=(0,s.useState)(null),[r,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(!0),[d,p]=(0,s.useState)(!1),x=(e,t)=>{e&&t&&(l(e),n(t),p(!0),localStorage.setItem("token",e),localStorage.setItem("auth_token",e),localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("user_data",JSON.stringify(t)),localStorage.setItem("isLoggedIn","true"),t.email&&localStorage.setItem("userEmail",t.email),t.role&&localStorage.setItem("userRole",t.role))},m=()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("userRole"),n(null),l(null),p(!1)},h=async()=>{c(!0);try{const t=localStorage.getItem("token")||localStorage.getItem("auth_token"),a=localStorage.getItem("user")||localStorage.getItem("user_data");if(!t||!a)return void m();let s=null;try{s=JSON.parse(a)}catch(e){return console.error("Failed to parse stored user payload",e),void m()}const n="".concat(_,"/api/auth/verify");console.log("\ud83d\udd27 Verifying auth with URL:",n);const r=await fetch(n,{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(!r.ok){const e=await fetch("".concat(_,"/api/auth/refresh"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)}});if(e.ok){const t=await e.json();if(t.success&&t.token)return void x(t.token,t.user||s)}return void m()}const l=await r.json(),o=null!==l&&void 0!==l&&l.user?(0,i.A)((0,i.A)({},s),l.user):s;l.newToken?x(l.newToken,o):x(t,o)}catch(t){console.error("Auth status check failed:",t),m()}finally{c(!1)}};(0,s.useEffect)(()=>{h();const e=setInterval(()=>{d&&h()},18e5);return()=>clearInterval(e)},[d]);const u=async(e,t)=>{c(!0);try{var a;const i=await fetch("".concat(_).concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),r=await i.json().catch(()=>null);if(i.ok&&null!==r&&void 0!==r&&r.success&&(r.token||null!==r&&void 0!==r&&null!==(a=r.data)&&void 0!==a&&a.token)){var s,n;const e=r.token||(null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.token),t=r.user||(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.user);if(e&&t)return x(e,t),{success:!0,user:t,token:e,requires_password_change:r.requires_password_change||!1,is_first_login:r.is_first_login||!1}}return{success:!1,error:(null===r||void 0===r?void 0:r.error)||(null===r||void 0===r?void 0:r.message_ar)||"\u062e\u0637\u0623 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"}}catch(i){return console.error("Authentication error:",i),{success:!1,error:"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645"}}finally{c(!1)}},g=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"super_admin";const s=e.includes("@");return u("/api/auth/login",s?{email:e,password:t}:{phone:e,password:t,role:a})},b=async(e,t)=>u("/api/auth/member-login",{phone:e,password:t}),j={user:a,token:r,loading:o,isAuthenticated:d,login:async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return a&&"user_member"!==a?g(e,t,a):b(e,t)},loginAdmin:g,loginMember:b,logout:()=>{m()},hasRole:e=>{if(!a)return!1;const t=Array.isArray(e)?e:[e],s={super_admin:100,financial_manager:80,family_tree_admin:70,occasions_initiatives_diyas_admin:60,user_member:10,admin:3,organizer:2,member:1},n=s[a.role]||0;return t.some(e=>n>=(s[e]||0))},hasPermission:e=>{if(!a)return!1;if(null!==a&&void 0!==a&&a.permissions&&a.permissions.all_access)return!0;return({super_admin:["view_dashboard","manage_users","manage_roles","manage_members","manage_family_tree","manage_activities","manage_occasions","manage_initiatives","manage_diyas","manage_finances","view_reports","system_settings","audit_logs","all_access"],financial_manager:["view_dashboard","view_financial_overview","manage_subscriptions","manage_payments","view_financial_reports","view_member_financial","view_finances","manage_finances"],family_tree_admin:["view_dashboard","manage_family_tree","view_tree_management","manage_relationships","view_member_relationships"],occasions_initiatives_diyas_admin:["view_dashboard","manage_occasions","manage_initiatives","manage_diyas","view_events_calendar","manage_charity_projects","manage_mediation_cases","view_member_participation"],user_member:["view_dashboard","view_my_profile","view_my_payments","view_family_events","view_volunteer_opportunities","view_own_data"],admin:["view_dashboard","manage_users","manage_activities","manage_finances","view_reports","system_settings"],organizer:["view_dashboard","view_activities","manage_activities","view_finances","view_reports"],member:["view_dashboard","view_activities"]}[a.role]||[]).includes(e)},canAccessModule:e=>{if(!a)return!1;return({members:["super_admin"],financial:["super_admin","financial_manager"],family_tree:["super_admin","family_tree_admin"],occasions:["super_admin","occasions_initiatives_diyas_admin"],initiatives:["super_admin","occasions_initiatives_diyas_admin"],diyas:["super_admin","occasions_initiatives_diyas_admin"],settings:["super_admin"],audit:["super_admin"],dashboard:["super_admin","financial_manager","family_tree_admin","occasions_initiatives_diyas_admin","user_member"]}[e]||[]).includes(a.role)},checkAuthStatus:h};return(0,S.jsx)(C.Provider,{value:j,children:t})};var z=a(9718),R=a(8855),D=a(2765),I=a(5516),B=a(3421),E=a(7952),P=a(9818),L=a(7491),M=a(6536),W=a(9530),O=a(6467),q=a(4185);const H=()=>{const{user:e,canAccessModule:t}=F(),[a,n]=(0,s.useState)("overview"),[i,r]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[w,A]=(0,s.useState)(!1),[k,_]=(0,s.useState)(!1),[C,T]=(0,s.useState)(null),[H,U]=(0,s.useState)(null),[X,Y]=(0,s.useState)("list"),[J,G]=(0,s.useState)(1),V={id:1,name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",name_en:"Monthly Subscription",basePrice:50,currency:"\u0631\u064a\u0627\u0644",duration:"\u0634\u0647\u0631\u064a",duration_en:"monthly",features:["\u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0623\u062d\u062f\u0627\u062b \u0627\u0644\u0639\u0627\u0626\u0644\u064a\u0629","\u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0623\u0639\u0636\u0627\u0621","\u062f\u0639\u0645 \u0627\u0644\u0639\u0627\u0626\u0644\u0629","\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0641\u064a \u0627\u0644\u0623\u0646\u0634\u0637\u0629"],features_en:["Access to family events","Member communication","Family support","Participate in activities"],color:"#007AFF",status:"active"},Z=[V],$=[{id:1,member_id:"MEM001",member_name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234567",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",quantity:3,amount:150,currency:"\u0631\u064a\u0627\u0644",status:"active",payment_status:"paid",start_date:"2024-01-01",end_date:"2024-02-01",next_payment:"2024-02-01",created_hijri:(0,z.C)(2024,1,1),renewal_count:2,total_paid:450},{id:2,member_id:"MEM002",member_name:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0628\u062f\u0627\u0644\u0644\u0647 \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234568",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",quantity:1,amount:50,currency:"\u0631\u064a\u0627\u0644",status:"active",payment_status:"paid",start_date:"2024-01-15",end_date:"2024-02-15",next_payment:"2024-02-15",created_hijri:(0,z.C)(2024,1,15),renewal_count:1,total_paid:100},{id:3,member_id:"MEM003",member_name:"\u0645\u062d\u0645\u062f \u0633\u0639\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234569",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",quantity:10,amount:500,currency:"\u0631\u064a\u0627\u0644",status:"overdue",payment_status:"pending",start_date:"2023-12-01",end_date:"2024-01-01",next_payment:"2024-01-01",created_hijri:(0,z.C)(2023,12,1),renewal_count:0,total_paid:500},{id:4,member_id:"MEM004",member_name:"\u062e\u062f\u064a\u062c\u0629 \u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234570",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",quantity:2,amount:100,currency:"\u0631\u064a\u0627\u0644",status:"suspended",payment_status:"failed",start_date:"2023-11-01",end_date:"2023-12-01",next_payment:"2024-01-01",created_hijri:(0,z.C)(2023,11,1),renewal_count:3,total_paid:300}];(0,s.useEffect)(()=>{t("financial")&&K()},[]);const K=async()=>{g(!0);try{d(Z),r($)}catch(e){console.error("Error loading subscriptions data:",e)}finally{g(!1)}};if(!t("financial"))return(0,S.jsx)("div",{style:{height:"100%",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",display:"flex",alignItems:"center",justifyContent:"center"},dir:"rtl",children:(0,S.jsxs)("div",{className:"max-w-md mx-auto text-center p-8",children:[(0,S.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center",children:(0,S.jsx)(R.A,{className:"w-10 h-10 text-white"})}),(0,S.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\u063a\u064a\u0631 \u0645\u0635\u0631\u062d \u0628\u0627\u0644\u0648\u0635\u0648\u0644"}),(0,S.jsx)("p",{className:"text-gray-600 mb-6",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0642\u0633\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a. \u064a\u062a\u0637\u0644\u0628 \u0647\u0630\u0627 \u0627\u0644\u0642\u0633\u0645 \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a \u0623\u0648 \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645."}),(0,S.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629: ",(null===e||void 0===e?void 0:e.role)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]})});const Q={total_subscriptions:i.length,active_subscriptions:i.filter(e=>"active"===e.status).length,overdue_subscriptions:i.filter(e=>"overdue"===e.status).length,total_revenue:i.reduce((e,t)=>e+(t.total_paid||0),0),monthly_revenue:i.filter(e=>"active"===e.status).reduce((e,t)=>e+t.amount,0),subscription_rate:i.length>0?(i.filter(e=>"active"===e.status).length/i.length*100).toFixed(1):0},ee=i.filter(e=>{const t=!b||e.member_name.toLowerCase().includes(b.toLowerCase())||e.member_phone.includes(b)||e.plan_name.toLowerCase().includes(b.toLowerCase()),a=!f||e.status===f;return t&&a}),te=e=>{try{const t=new Date(e),a=(0,z.C)(t.getFullYear(),t.getMonth()+1,t.getDate());return"".concat(a.hy,"/").concat(a.hm,"/").concat(a.hd," \u0647\u0640")}catch(t){return e}},ae=e=>{switch(e){case"active":return(0,S.jsx)(D.A,{className:"w-5 h-5 text-green-500"});case"overdue":return(0,S.jsx)(I.A,{className:"w-5 h-5 text-yellow-500"});case"suspended":return(0,S.jsx)(B.A,{className:"w-5 h-5 text-red-500"});default:return(0,S.jsx)(v.A,{className:"w-5 h-5 text-gray-500"})}},se=e=>{switch(e){case"active":return"\u0646\u0634\u0637";case"overdue":return"\u0645\u062a\u0623\u062e\u0631";case"suspended":return"\u0645\u0639\u0644\u0642";case"expired":return"\u0645\u0646\u062a\u0647\u064a";default:return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}},ne=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"overdue":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"suspended":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},ie=()=>(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:[(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:Q.total_subscriptions})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(x.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a \u0627\u0644\u0646\u0634\u0637\u0629"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-green-600",children:Q.active_subscriptions})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(D.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a \u0627\u0644\u0645\u062a\u0623\u062e\u0631\u0629"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:Q.overdue_subscriptions})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(I.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[Q.total_revenue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(h.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0647\u0631\u064a\u0629"}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-indigo-600",children:[Q.monthly_revenue.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(N.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0646\u0634\u0627\u0637"}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-cyan-600",children:[Q.subscription_rate,"%"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(o.A,{className:"w-6 h-6 text-white"})})]})})]}),re=()=>(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsx)("div",{className:"flex items-center justify-between",children:(0,S.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\u062e\u0637\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"})}),(0,S.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,S.jsxs)("div",{className:"glass-card p-8 hover:scale-102 transition-all duration-300",children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h4",{className:"text-2xl font-bold text-gray-900 mb-3",children:V.name}),(0,S.jsxs)("div",{className:"flex items-baseline gap-2 mb-4",children:[(0,S.jsx)("span",{className:"text-4xl font-bold",style:{color:V.color},children:V.basePrice}),(0,S.jsxs)("span",{className:"text-lg text-gray-600",children:[V.currency," / ",V.duration]})]}),(0,S.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4",children:[(0,S.jsx)("p",{className:"text-sm text-blue-800 font-medium mb-2",children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0645\u0631\u0646:"}),(0,S.jsx)("p",{className:"text-sm text-blue-700",children:"\u064a\u0645\u0643\u0646 \u0644\u0644\u0639\u0636\u0648 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0628\u0645\u0636\u0627\u0639\u0641\u0627\u062a 50 \u0631\u064a\u0627\u0644"}),(0,S.jsxs)("div",{className:"mt-3 space-y-1",children:[(0,S.jsx)("div",{className:"text-xs text-blue-600",children:"\u2022 1 \u0648\u062d\u062f\u0629 = 50 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{className:"text-xs text-blue-600",children:"\u2022 2 \u0648\u062d\u062f\u0629 = 100 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{className:"text-xs text-blue-600",children:"\u2022 3 \u0648\u062d\u062f\u0627\u062a = 150 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{className:"text-xs text-blue-600",children:"\u2022 \u0648\u0647\u0643\u0630\u0627... \u0628\u062f\u0648\u0646 \u062d\u062f \u0623\u0642\u0635\u0649"})]})]})]}),(0,S.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center",style:{background:"".concat(V.color,"20"),color:V.color},children:(0,S.jsx)(E.A,{className:"w-8 h-8"})})]}),(0,S.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,S.jsx)("h5",{className:"font-semibold text-gray-900 mb-3",children:"\u0627\u0644\u0645\u0632\u0627\u064a\u0627 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629:"}),V.features.map((e,t)=>(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)(D.A,{className:"w-5 h-5 text-green-500 flex-shrink-0"}),(0,S.jsx)("span",{className:"text-gray-700",children:e})]},t))]}),(0,S.jsx)("div",{className:"border-t pt-6",children:(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:i.length}),(0,S.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u062a\u0631\u0643\u064a\u0646"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-3xl font-bold text-green-600",children:50*i.reduce((e,t)=>e+(t.quantity||1),0)}),(0,S.jsx)("div",{className:"text-sm text-gray-600",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0647\u0631\u064a\u0629 (\u0631\u064a\u0627\u0644)"})]})]})})]})})]}),le=()=>(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsx)("div",{className:"glass-card p-6",children:(0,S.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,S.jsxs)("div",{className:"flex-1 relative",children:[(0,S.jsx)(P.A,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0623\u0648 \u062e\u0637\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643...",value:b,onChange:e=>j(e.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]}),(0,S.jsxs)("div",{className:"flex gap-3",children:[(0,S.jsxs)("select",{value:f,onChange:e=>y(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"overdue",children:"\u0645\u062a\u0623\u062e\u0631"}),(0,S.jsx)("option",{value:"suspended",children:"\u0645\u0639\u0644\u0642"}),(0,S.jsx)("option",{value:"expired",children:"\u0645\u0646\u062a\u0647\u064a"})]}),(0,S.jsxs)("button",{onClick:()=>Y("addSubscription"),className:"premium-btn flex items-center gap-2",children:[(0,S.jsx)(L.A,{className:"w-5 h-5"}),"\u0627\u0634\u062a\u0631\u0627\u0643 \u062c\u062f\u064a\u062f"]})]})]})}),(0,S.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,S.jsx)("div",{className:"overflow-x-auto",children:(0,S.jsxs)("table",{className:"w-full",children:[(0,S.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0639\u0636\u0648"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0648\u062d\u062f\u0627\u062a"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u062f\u0641\u0639 \u0627\u0644\u062a\u0627\u0644\u064a"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsx)("tbody",{className:"divide-y divide-gray-200",children:ee.map(e=>(0,S.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"font-medium text-gray-900",children:e.member_name}),(0,S.jsx)("div",{className:"text-sm text-gray-500",children:e.member_phone}),(0,S.jsxs)("div",{className:"text-xs text-gray-400",children:["#",e.member_id]})]})}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:e.quantity||1}),(0,S.jsx)("span",{className:"text-sm text-gray-500",children:"\u0648\u062d\u062f\u0629"})]}),(0,S.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.quantity||1," \xd7 50 \u0631\u064a\u0627\u0644)"]})]}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsxs)("div",{className:"font-medium text-gray-900",children:[e.amount," ",e.currency]}),(0,S.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0627\u0644\u0645\u062c\u0645\u0648\u0639: ",e.total_paid," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[ae(e.status),(0,S.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium border ".concat(ne(e.status)),children:se(e.status)})]}),(0,S.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["\u0627\u0644\u062f\u0641\u0639: ","paid"===e.payment_status?"\u0645\u062f\u0641\u0648\u0639":"pending"===e.payment_status?"\u0645\u0639\u0644\u0642":"\u0641\u0634\u0644"]})]}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsx)("div",{className:"text-sm text-gray-900",children:e.start_date}),(0,S.jsx)("div",{className:"text-xs text-gray-500",children:te(e.start_date)})]}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsx)("div",{className:"text-sm text-gray-900",children:e.end_date}),(0,S.jsx)("div",{className:"text-xs text-gray-500",children:te(e.end_date)})]}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsx)("div",{className:"text-sm text-gray-900",children:e.next_payment}),(0,S.jsx)("div",{className:"text-xs text-gray-500",children:te(e.next_payment)})]}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{U(e),_(!0)},className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644",children:(0,S.jsx)(M.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors duration-200",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,S.jsx)(W.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors duration-200",title:"\u062d\u0630\u0641",children:(0,S.jsx)(O.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===ee.length&&(0,S.jsxs)("div",{className:"text-center py-12",children:[(0,S.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,S.jsx)(x.A,{className:"w-10 h-10 text-gray-400"})}),(0,S.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-500",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064a\u064a\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"})]})]})]});return p?(0,S.jsx)("div",{style:{height:"100%",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",display:"flex",alignItems:"center",justifyContent:"center"},dir:"rtl",children:(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a..."})]})}):"addSubscription"===X?(0,S.jsxs)("div",{style:{height:"100%",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",display:"flex",flexDirection:"column",overflow:"hidden"},dir:"rtl",children:[(0,S.jsx)("div",{className:"bg-white shadow-lg border-b border-gray-200 px-6 py-4",children:(0,S.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center gap-4",children:[(0,S.jsxs)("button",{onClick:()=>Y("list"),className:"flex items-center gap-2 px-4 py-2 bg-gradient-to-br from-gray-600 to-gray-700 text-white rounded-lg hover:shadow-lg transition-all duration-200 hover:transform hover:-translate-x-1",children:[(0,S.jsx)(q.A,{className:"w-5 h-5"}),(0,S.jsx)("span",{children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a"})]}),(0,S.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0634\u062a\u0631\u0627\u0643 \u062c\u062f\u064a\u062f"})]})}),(0,S.jsx)("div",{className:"flex-1 overflow-y-auto p-8",children:(0,S.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,S.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:[(0,S.jsx)("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 p-6",children:(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-xl flex items-center justify-center",children:(0,S.jsx)(m.A,{className:"w-7 h-7 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{className:"text-2xl font-bold text-white",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"}),(0,S.jsx)("p",{className:"text-blue-100",children:"\u0642\u0645 \u0628\u0645\u0644\u0621 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0627\u0644\u064a\u0629 \u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0634\u062a\u0631\u0627\u0643 \u062c\u062f\u064a\u062f"})]})]})}),(0,S.jsx)("div",{className:"p-8",children:(0,S.jsxs)("form",{className:"space-y-8",children:[(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,S.jsx)(x.A,{className:"w-5 h-5 text-blue-500"}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0636\u0648"]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0639\u0636\u0648 *"}),(0,S.jsxs)("select",{className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,S.jsx)("option",{value:"",children:"-- \u0627\u062e\u062a\u0631 \u0639\u0636\u0648 --"}),(0,S.jsx)("option",{value:"1",children:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644 - 0501234567"}),(0,S.jsx)("option",{value:"2",children:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0628\u062f\u0627\u0644\u0644\u0647 \u0627\u0644\u0634\u0639\u064a\u0644 - 0501234568"}),(0,S.jsx)("option",{value:"3",children:"\u0645\u062d\u0645\u062f \u0633\u0639\u062f \u0627\u0644\u0634\u0639\u064a\u0644 - 0501234569"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("input",{type:"text",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"\u0633\u064a\u062a\u0645 \u0627\u0644\u062a\u0639\u064a\u064a\u0646 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b",readOnly:!0})]})]})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,S.jsx)(E.A,{className:"w-5 h-5 text-purple-500"}),"\u0643\u0645\u064a\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"]}),(0,S.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6 border border-blue-200",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0639\u062f\u062f \u0627\u0644\u0648\u062d\u062f\u0627\u062a *"}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("button",{type:"button",onClick:()=>G(Math.max(1,J-1)),className:"w-12 h-12 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center",children:(0,S.jsx)("span",{className:"text-xl font-bold",children:"-"})}),(0,S.jsx)("input",{type:"number",min:"1",value:J,onChange:e=>G(Math.max(1,parseInt(e.target.value)||1)),className:"w-24 px-4 py-3 text-center text-xl font-bold border-2 border-blue-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),(0,S.jsx)("button",{type:"button",onClick:()=>G(J+1),className:"w-12 h-12 bg-white border-2 border-gray-300 rounded-lg hover:bg-gray-100 transition-colors flex items-center justify-center",children:(0,S.jsx)("span",{className:"text-xl font-bold",children:"+"})})]}),(0,S.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"\u0643\u0644 \u0648\u062d\u062f\u0629 = 50 \u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"}),(0,S.jsxs)("div",{className:"bg-white rounded-lg p-4 border-2 border-blue-300",children:[(0,S.jsxs)("div",{className:"text-3xl font-bold text-blue-600",children:[50*J,(0,S.jsx)("span",{className:"text-lg text-gray-600 mr-2",children:"\u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:[J," \u0648\u062d\u062f\u0629 \xd7 50 \u0631\u064a\u0627\u0644"]})]})]})]}),(0,S.jsx)("div",{className:"mt-4 p-3 bg-blue-100 rounded-lg",children:(0,S.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,S.jsx)("strong",{children:"\u0645\u0644\u0627\u062d\u0638\u0629:"})," \u064a\u0645\u0643\u0646 \u0644\u0644\u0639\u0636\u0648 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0628\u0623\u064a \u0639\u062f\u062f \u0645\u0646 \u0627\u0644\u0648\u062d\u062f\u0627\u062a\u060c \u0643\u0644 \u0648\u062d\u062f\u0629 \u0628\u0642\u064a\u0645\u0629 50 \u0631\u064a\u0627\u0644 \u0634\u0647\u0631\u064a\u0627\u064b."]})})]})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,S.jsx)(u.A,{className:"w-5 h-5 text-green-500"}),"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062f\u0641\u0639 \u0648\u0627\u0644\u0645\u062f\u0629"]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629 *"}),(0,S.jsx)("input",{type:"date",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u062a\u0647\u0627\u0621"}),(0,S.jsx)("input",{type:"date",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639 *"}),(0,S.jsxs)("select",{className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,S.jsx)("option",{value:"cash",children:"\u0646\u0642\u062f\u064a"}),(0,S.jsx)("option",{value:"bank",children:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"}),(0,S.jsx)("option",{value:"card",children:"\u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062a\u0645\u0627\u0646"}),(0,S.jsx)("option",{value:"online",children:"\u062f\u0641\u0639 \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsxs)("select",{className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[(0,S.jsx)("option",{value:"paid",children:"\u0645\u062f\u0641\u0648\u0639"}),(0,S.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,S.jsx)("option",{value:"partial",children:"\u062f\u0641\u0639 \u062c\u0632\u0626\u064a"})]})]})]})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,S.jsx)(c.A,{className:"w-5 h-5 text-orange-500"}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,S.jsx)("textarea",{rows:"4",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"\u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u062d\u0648\u0644 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643..."})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("input",{type:"checkbox",id:"autoRenew",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,S.jsx)("label",{htmlFor:"autoRenew",className:"text-sm text-gray-700",children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u062a\u062c\u062f\u064a\u062f \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0644\u0644\u0627\u0634\u062a\u0631\u0627\u0643"})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("input",{type:"checkbox",id:"sendNotification",className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,S.jsx)("label",{htmlFor:"sendNotification",className:"text-sm text-gray-700",children:"\u0625\u0631\u0633\u0627\u0644 \u0625\u0634\u0639\u0627\u0631 \u0644\u0644\u0639\u0636\u0648 \u0628\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"})]})]}),(0,S.jsxs)("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-gray-200",children:[(0,S.jsx)("button",{type:"button",onClick:()=>Y("list"),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-xl hover:bg-gray-100 transition-colors duration-200",children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsxs)("button",{type:"button",onClick:()=>{alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0628\u0646\u062c\u0627\u062d!"),Y("list"),K()},className:"px-8 py-3 bg-gradient-to-br from-blue-500 to-purple-600 text-white rounded-xl hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),"\u062d\u0641\u0638 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"]})]})]})})]})})})]}):(0,S.jsxs)("div",{style:{height:"calc(100% - 20px)",display:"flex",flexDirection:"column",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",overflow:"hidden"},dir:"rtl",children:[(0,S.jsx)("div",{style:{flexShrink:0,background:"white",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #E5E7EB"},children:(0,S.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,S.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(m.A,{className:"w-6 h-6 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a"}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u062e\u0637\u0637 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0648\u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0645\u0634\u062a\u0631\u0643\u064a\u0646"})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsxs)("span",{className:"text-sm text-gray-600",children:["\u0645\u0631\u062d\u0628\u0627\u064b\u060c ",(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)]}),(0,S.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:(0,S.jsx)("span",{className:"text-white text-sm font-medium",children:((null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)||"").charAt(0)})})]})]})})}),(0,S.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"32px"},children:[(0,S.jsx)(ie,{}),(0,S.jsx)("div",{className:"glass-card p-6 mb-8",children:(0,S.jsxs)("div",{className:"flex gap-2 overflow-x-auto",children:[(0,S.jsx)("button",{onClick:()=>n("overview"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("overview"===a?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629"}),(0,S.jsx)("button",{onClick:()=>n("plans"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("plans"===a?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u062e\u0637\u0637 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643"}),(0,S.jsx)("button",{onClick:()=>n("subscriptions"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("subscriptions"===a?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0627\u0644\u0645\u0634\u062a\u0631\u0643\u064a\u0646"}),(0,S.jsx)("button",{onClick:()=>n("analytics"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("analytics"===a?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a"})]})}),"overview"===a&&(0,S.jsx)(le,{}),"plans"===a&&(0,S.jsx)(re,{}),"subscriptions"===a&&(0,S.jsx)(le,{}),"analytics"===a&&(0,S.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,S.jsx)(o.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"}),(0,S.jsx)("p",{className:"text-gray-500",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a \u0648\u0627\u0644\u0625\u062d\u0635\u0627\u0626\u064a\u0627\u062a \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"})]})]}),(0,S.jsx)("style",{jsx:!0,children:"\n        .glass-card {\n          background: rgba(255, 255, 255, 0.9);\n          backdrop-filter: blur(40px);\n          -webkit-backdrop-filter: blur(40px);\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          border-radius: 20px;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        .glass-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);\n        }\n\n        .premium-btn {\n          background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);\n          padding: 12px 24px;\n          border-radius: 12px;\n          color: white;\n          font-weight: 600;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          position: relative;\n          overflow: hidden;\n          border: none;\n          cursor: pointer;\n        }\n\n        .premium-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 10px 30px rgba(0, 122, 255, 0.3);\n        }\n\n        .premium-btn::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n          transition: left 0.5s;\n        }\n\n        .premium-btn:hover::before {\n          left: 100%;\n        }\n\n        @keyframes float {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-10px); }\n        }\n\n        .floating-element {\n          animation: float 3s ease-in-out infinite;\n        }\n      "})]})};var U=a(8010),X=a(4498),Y=a(3102),J=a(2896);const G=()=>{const{user:e,canAccessModule:t}=F(),[a,n]=(0,s.useState)("overview"),[r,l]=(0,s.useState)([]),[d,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(""),[u,g]=(0,s.useState)({status:"",payment_type:"",date_range:"",member_id:""}),[b,j]=(0,s.useState)(null),[f,y]=(0,s.useState)(!1),[w,A]=(0,s.useState)({start:"",end:""}),k=[{id:1,payment_id:"PAY-2024-001",member_id:"MEM001",member_name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234567",amount:120,currency:"\u0631\u064a\u0627\u0644",payment_type:"subscription",payment_method:"bank_transfer",status:"completed",transaction_id:"TXN123456789",description:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0634\u0647\u0631\u064a - \u0627\u0644\u0639\u0636\u0648\u064a\u0629 \u0627\u0644\u0645\u0645\u064a\u0632\u0629",payment_date:"2024-01-15",due_date:"2024-01-10",hijri_date:(0,z.C)(2024,1,15),created_at:"2024-01-15T10:30:00Z",receipt_url:"/receipts/PAY-2024-001.pdf",notes:"\u062a\u0645 \u0627\u0644\u062f\u0641\u0639 \u0641\u064a \u0627\u0644\u0645\u0648\u0639\u062f \u0627\u0644\u0645\u062d\u062f\u062f"},{id:2,payment_id:"PAY-2024-002",member_id:"MEM002",member_name:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0628\u062f\u0627\u0644\u0644\u0647 \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234568",amount:50,currency:"\u0631\u064a\u0627\u0644",payment_type:"subscription",payment_method:"credit_card",status:"completed",transaction_id:"TXN123456790",description:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0634\u0647\u0631\u064a - \u0627\u0644\u0639\u0636\u0648\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629",payment_date:"2024-01-20",due_date:"2024-01-15",hijri_date:(0,z.C)(2024,1,20),created_at:"2024-01-20T14:15:00Z",receipt_url:"/receipts/PAY-2024-002.pdf",notes:"\u062f\u0641\u0639 \u0645\u062a\u0623\u062e\u0631 5 \u0623\u064a\u0627\u0645"},{id:3,payment_id:"PAY-2024-003",member_id:"MEM003",member_name:"\u0645\u062d\u0645\u062f \u0633\u0639\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234569",amount:500,currency:"\u0631\u064a\u0627\u0644",payment_type:"contribution",payment_method:"cash",status:"pending",transaction_id:null,description:"\u0645\u0633\u0627\u0647\u0645\u0629 \u0641\u064a \u0645\u0628\u0627\u062f\u0631\u0629 \u062e\u064a\u0631\u064a\u0629",payment_date:null,due_date:"2024-01-25",hijri_date:null,created_at:"2024-01-22T09:00:00Z",receipt_url:null,notes:"\u0641\u064a \u0627\u0646\u062a\u0638\u0627\u0631 \u0627\u0644\u062f\u0641\u0639"},{id:4,payment_id:"PAY-2024-004",member_id:"MEM004",member_name:"\u062e\u062f\u064a\u062c\u0629 \u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234570",amount:200,currency:"\u0631\u064a\u0627\u0644",payment_type:"diya",payment_method:"bank_transfer",status:"failed",transaction_id:"TXN123456791",description:"\u0645\u0633\u0627\u0647\u0645\u0629 \u0641\u064a \u062f\u064a\u0629",payment_date:"2024-01-18",due_date:"2024-01-15",hijri_date:(0,z.C)(2024,1,18),created_at:"2024-01-18T16:45:00Z",receipt_url:null,notes:"\u0641\u0634\u0644 \u0641\u064a \u0627\u0644\u062f\u0641\u0639 - \u0631\u0635\u064a\u062f \u063a\u064a\u0631 \u0643\u0627\u0641\u064a"},{id:5,payment_id:"PAY-2024-005",member_id:"MEM005",member_name:"\u0639\u0628\u062f\u0627\u0644\u0631\u062d\u0645\u0646 \u0639\u0644\u064a \u0627\u0644\u0634\u0639\u064a\u0644",member_phone:"0501234571",amount:300,currency:"\u0631\u064a\u0627\u0644",payment_type:"occasion",payment_method:"stc_pay",status:"completed",transaction_id:"TXN123456792",description:"\u0645\u0633\u0627\u0647\u0645\u0629 \u0641\u064a \u062d\u0641\u0644 \u0632\u0641\u0627\u0641",payment_date:"2024-01-25",due_date:"2024-01-25",hijri_date:(0,z.C)(2024,1,25),created_at:"2024-01-25T12:20:00Z",receipt_url:"/receipts/PAY-2024-005.pdf",notes:"\u062a\u0645 \u0627\u0644\u062f\u0641\u0639 \u0628\u0648\u0627\u0633\u0637\u0629 stc pay"}];(0,s.useEffect)(()=>{t("financial")&&_()},[u,w]);const _=async()=>{p(!0);try{l(k)}catch(e){console.error("Error loading payments data:",e)}finally{p(!1)}};if(!t("financial"))return(0,S.jsx)("div",{style:{height:"100%",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",display:"flex",alignItems:"center",justifyContent:"center"},dir:"rtl",children:(0,S.jsxs)("div",{className:"max-w-md mx-auto text-center p-8",children:[(0,S.jsx)("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-red-500 to-red-600 rounded-full flex items-center justify-center",children:(0,S.jsx)(R.A,{className:"w-10 h-10 text-white"})}),(0,S.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\u063a\u064a\u0631 \u0645\u0635\u0631\u062d \u0628\u0627\u0644\u0648\u0635\u0648\u0644"}),(0,S.jsx)("p",{className:"text-gray-600 mb-6",children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0642\u0633\u0645 \u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a. \u064a\u062a\u0637\u0644\u0628 \u0647\u0630\u0627 \u0627\u0644\u0642\u0633\u0645 \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a \u0623\u0648 \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0639\u0627\u0645."}),(0,S.jsxs)("div",{className:"text-sm text-gray-500",children:["\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629 \u0627\u0644\u062d\u0627\u0644\u064a\u0629: ",(null===e||void 0===e?void 0:e.role)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]})});const C={total_payments:r.length,completed_payments:r.filter(e=>"completed"===e.status).length,pending_payments:r.filter(e=>"pending"===e.status).length,failed_payments:r.filter(e=>"failed"===e.status).length,total_amount:r.filter(e=>"completed"===e.status).reduce((e,t)=>e+t.amount,0),pending_amount:r.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.amount,0),this_month_total:r.filter(e=>{const t=new Date(e.payment_date||e.created_at),a=(new Date).getMonth();return t.getMonth()===a&&"completed"===e.status}).reduce((e,t)=>e+t.amount,0),success_rate:r.length>0?(r.filter(e=>"completed"===e.status).length/r.length*100).toFixed(1):0},T=r.filter(e=>{const t=!x||e.member_name.toLowerCase().includes(x.toLowerCase())||e.member_phone.includes(x)||e.payment_id.toLowerCase().includes(x.toLowerCase())||e.description.toLowerCase().includes(x.toLowerCase()),a=!u.status||e.status===u.status,s=!u.payment_type||e.payment_type===u.payment_type,n=!u.member_id||e.member_id===u.member_id,i=!w.start||!w.end||e.payment_date&&e.payment_date>=w.start&&e.payment_date<=w.end;return t&&a&&s&&n&&i}),I=e=>{try{const t=new Date(e),a=(0,z.C)(t.getFullYear(),t.getMonth()+1,t.getDate());return"".concat(a.hy,"/").concat(a.hm,"/").concat(a.hd," \u0647\u0640")}catch(t){return e}},E=e=>{switch(e){case"completed":return(0,S.jsx)(D.A,{className:"w-5 h-5 text-green-500"});case"pending":return(0,S.jsx)(v.A,{className:"w-5 h-5 text-yellow-500"});case"failed":return(0,S.jsx)(B.A,{className:"w-5 h-5 text-red-500"});default:return(0,S.jsx)(v.A,{className:"w-5 h-5 text-gray-500"})}},O=e=>{switch(e){case"completed":return"\u0645\u0643\u062a\u0645\u0644";case"pending":return"\u0645\u0639\u0644\u0642";case"failed":return"\u0641\u0634\u0644";default:return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}},q=e=>{switch(e){case"completed":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"failed":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},H=e=>{switch(e){case"subscription":return"\u0627\u0634\u062a\u0631\u0627\u0643";case"contribution":return"\u0645\u0633\u0627\u0647\u0645\u0629";case"diya":return"\u062f\u064a\u0629";case"occasion":return"\u0645\u0646\u0627\u0633\u0628\u0629";case"initiative":return"\u0645\u0628\u0627\u062f\u0631\u0629";default:return"\u0623\u062e\u0631\u0649"}},G=e=>{switch(e){case"bank_transfer":return"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a";case"credit_card":return"\u0628\u0637\u0627\u0642\u0629 \u0627\u0626\u062a\u0645\u0627\u0646";case"cash":return"\u0646\u0642\u062f\u0627\u064b";case"stc_pay":return"STC Pay";case"apple_pay":return"Apple Pay";case"mada":return"\u0645\u062f\u0649";default:return"\u0623\u062e\u0631\u0649"}},V=()=>(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-8 gap-6 mb-8",children:[(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:C.total_payments})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(h.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0645\u0643\u062a\u0645\u0644\u0629"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-green-600",children:C.completed_payments})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-green-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(D.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0645\u0639\u0644\u0642\u0629"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:C.pending_payments})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(v.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0641\u0627\u0634\u0644\u0629"}),(0,S.jsx)("p",{className:"text-3xl font-bold text-red-600",children:C.failed_payments})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(B.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0644\u063a"}),(0,S.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:[C.total_amount.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(U.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0639\u0644\u0642"}),(0,S.jsxs)("p",{className:"text-2xl font-bold text-orange-600",children:[C.pending_amount.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(X.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"}),(0,S.jsxs)("p",{className:"text-2xl font-bold text-indigo-600",children:[C.this_month_total.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(N.A,{className:"w-6 h-6 text-white"})})]})}),(0,S.jsx)("div",{className:"glass-card p-6 hover:scale-105 transition-all duration-300",children:(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0646\u062c\u0627\u062d"}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-cyan-600",children:[C.success_rate,"%"]})]}),(0,S.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(Y.A,{className:"w-6 h-6 text-white"})})]})})]}),Z=()=>(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"glass-card p-6",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4",children:[(0,S.jsxs)("div",{className:"lg:col-span-2 relative",children:[(0,S.jsx)(P.A,{className:"absolute right-3 top-3 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629...",value:x,onChange:e=>m(e.target.value),className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]}),(0,S.jsx)("div",{children:(0,S.jsxs)("select",{value:u.status,onChange:e=>g((0,i.A)((0,i.A)({},u),{},{status:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,S.jsx)("option",{value:"pending",children:"\u0645\u0639\u0644\u0642"}),(0,S.jsx)("option",{value:"failed",children:"\u0641\u0634\u0644"})]})}),(0,S.jsx)("div",{children:(0,S.jsxs)("select",{value:u.payment_type,onChange:e=>g((0,i.A)((0,i.A)({},u),{},{payment_type:e.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,S.jsx)("option",{value:"subscription",children:"\u0627\u0634\u062a\u0631\u0627\u0643"}),(0,S.jsx)("option",{value:"contribution",children:"\u0645\u0633\u0627\u0647\u0645\u0629"}),(0,S.jsx)("option",{value:"diya",children:"\u062f\u064a\u0629"}),(0,S.jsx)("option",{value:"occasion",children:"\u0645\u0646\u0627\u0633\u0628\u0629"}),(0,S.jsx)("option",{value:"initiative",children:"\u0645\u0628\u0627\u062f\u0631\u0629"})]})}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsxs)("button",{onClick:()=>y(!0),className:"flex-1 premium-btn flex items-center justify-center gap-2",children:[(0,S.jsx)(L.A,{className:"w-5 h-5"}),"\u062c\u062f\u064a\u062f"]}),(0,S.jsx)("button",{className:"px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors duration-200",children:(0,S.jsx)(J.A,{className:"w-5 h-5"})})]})]}),(0,S.jsxs)("div",{className:"flex gap-4 mt-4",children:[(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"}),(0,S.jsx)("input",{type:"date",value:w.start,onChange:e=>A((0,i.A)((0,i.A)({},w),{},{start:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]}),(0,S.jsxs)("div",{className:"flex-1",children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"}),(0,S.jsx)("input",{type:"date",value:w.end,onChange:e=>A((0,i.A)((0,i.A)({},w),{},{end:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]})]})]}),(0,S.jsxs)("div",{className:"glass-card overflow-hidden",children:[(0,S.jsx)("div",{className:"overflow-x-auto",children:(0,S.jsxs)("table",{className:"w-full",children:[(0,S.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0629"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0639\u0636\u0648"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0646\u0648\u0639"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0637\u0631\u064a\u0642\u0629 \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("th",{className:"px-6 py-4 text-right text-sm font-medium text-gray-500",children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsx)("tbody",{className:"divide-y divide-gray-200",children:T.map(e=>(0,S.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors duration-200",children:[(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"font-medium text-gray-900",children:e.payment_id}),e.transaction_id&&(0,S.jsxs)("div",{className:"text-xs text-gray-500",children:["\u0645\u0639\u0631\u0641 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0629: ",e.transaction_id]})]})}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"font-medium text-gray-900",children:e.member_name}),(0,S.jsx)("div",{className:"text-sm text-gray-500",children:e.member_phone}),(0,S.jsxs)("div",{className:"text-xs text-gray-400",children:["#",e.member_id]})]})}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{className:"font-medium text-gray-900",children:[e.amount," ",e.currency]})}),(0,S.jsxs)("td",{className:"px-6 py-4",children:[(0,S.jsx)("div",{className:"text-sm text-gray-900",children:H(e.payment_type)}),(0,S.jsx)("div",{className:"text-xs text-gray-500",children:e.description})]}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsx)("div",{className:"text-sm text-gray-900",children:G(e.payment_method)})}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[E(e.status),(0,S.jsx)("span",{className:"px-2 py-1 rounded-lg text-xs font-medium border ".concat(q(e.status)),children:O(e.status)})]})}),(0,S.jsx)("td",{className:"px-6 py-4",children:e.payment_date?(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"text-sm text-gray-900",children:e.payment_date}),(0,S.jsx)("div",{className:"text-xs text-gray-500",children:I(e.payment_date)})]}):(0,S.jsx)("span",{className:"text-sm text-gray-400",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u062f\u0641\u0639"})}),(0,S.jsx)("td",{className:"px-6 py-4",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("button",{onClick:()=>{j(e),y(!0)},className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors duration-200",title:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644",children:(0,S.jsx)(M.A,{className:"w-4 h-4"})}),e.receipt_url&&(0,S.jsx)("button",{className:"p-2 text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors duration-200",title:"\u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u064a\u0635\u0627\u0644",children:(0,S.jsx)(J.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{className:"p-2 text-purple-600 hover:text-purple-800 hover:bg-purple-50 rounded-lg transition-colors duration-200",title:"\u062a\u0639\u062f\u064a\u0644",children:(0,S.jsx)(W.A,{className:"w-4 h-4"})})]})})]},e.id))})]})}),0===T.length&&(0,S.jsxs)("div",{className:"text-center py-12",children:[(0,S.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:(0,S.jsx)(h.A,{className:"w-10 h-10 text-gray-400"})}),(0,S.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-500",children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0645\u062f\u0641\u0648\u0639\u0627\u062a \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064a\u064a\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"})]})]})]});return d?(0,S.jsx)("div",{style:{height:"100%",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",display:"flex",alignItems:"center",justifyContent:"center"},dir:"rtl",children:(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a..."})]})}):(0,S.jsxs)("div",{style:{height:"calc(100% - 20px)",display:"flex",flexDirection:"column",background:"linear-gradient(to bottom right, #EFF6FF, #FFFFFF, #F5F3FF)",overflow:"hidden"},dir:"rtl",children:[(0,S.jsx)("div",{style:{flexShrink:0,background:"white",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",borderBottom:"1px solid #E5E7EB"},children:(0,S.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,S.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,S.jsxs)("div",{className:"flex items-center gap-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,S.jsx)(h.A,{className:"w-6 h-6 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"\u062a\u062a\u0628\u0639 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:"\u0645\u0631\u0627\u0642\u0628\u0629 \u0648\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629"})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsxs)("span",{className:"text-sm text-gray-600",children:["\u0645\u0631\u062d\u0628\u0627\u064b\u060c ",(null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)]}),(0,S.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-blue-600 rounded-full flex items-center justify-center",children:(0,S.jsx)("span",{className:"text-white text-sm font-medium",children:((null===e||void 0===e?void 0:e.full_name)||(null===e||void 0===e?void 0:e.name)||"").charAt(0)})})]})]})})}),(0,S.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"32px"},children:[(0,S.jsx)(V,{}),(0,S.jsx)("div",{className:"glass-card p-6 mb-8",children:(0,S.jsxs)("div",{className:"flex gap-2 overflow-x-auto",children:[(0,S.jsx)("button",{onClick:()=>n("overview"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("overview"===a?"bg-gradient-to-br from-green-500 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629"}),(0,S.jsx)("button",{onClick:()=>n("transactions"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("transactions"===a?"bg-gradient-to-br from-green-500 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0627\u0645\u0644\u0627\u062a"}),(0,S.jsx)("button",{onClick:()=>n("analytics"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("analytics"===a?"bg-gradient-to-br from-green-500 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a"}),(0,S.jsx)("button",{onClick:()=>n("reports"),className:"px-6 py-3 rounded-lg font-medium transition-all duration-200 whitespace-nowrap ".concat("reports"===a?"bg-gradient-to-br from-green-500 to-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"})]})}),("overview"===a||"transactions"===a)&&(0,S.jsx)(Z,{}),"analytics"===a&&(0,S.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,S.jsx)(o.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"}),(0,S.jsx)("p",{className:"text-gray-500",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0631\u0633\u0648\u0645 \u0627\u0644\u0628\u064a\u0627\u0646\u064a\u0629 \u0648\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"})]}),"reports"===a&&(0,S.jsxs)("div",{className:"glass-card p-8 text-center",children:[(0,S.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"}),(0,S.jsx)("p",{className:"text-gray-500",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"})]})]}),(0,S.jsx)("style",{jsx:!0,children:"\n        .glass-card {\n          background: rgba(255, 255, 255, 0.9);\n          backdrop-filter: blur(40px);\n          -webkit-backdrop-filter: blur(40px);\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          border-radius: 20px;\n          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        .glass-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 15px 50px rgba(0, 0, 0, 0.12);\n        }\n\n        .premium-btn {\n          background: linear-gradient(135deg, #22C55E 0%, #3B82F6 100%);\n          padding: 12px 24px;\n          border-radius: 12px;\n          color: white;\n          font-weight: 600;\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          position: relative;\n          overflow: hidden;\n          border: none;\n          cursor: pointer;\n        }\n\n        .premium-btn:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 10px 30px rgba(34, 197, 94, 0.3);\n        }\n\n        .premium-btn::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: -100%;\n          width: 100%;\n          height: 100%;\n          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n          transition: left 0.5s;\n        }\n\n        .premium-btn:hover::before {\n          left: 100%;\n        }\n      "})]})};var V=a(3302);const Z=e=>{let{value:t,onChange:a,required:n=!1,label:i="\u0627\u0644\u062a\u0627\u0631\u064a\u062e"}=e;const[r,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,p]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[h,u]=(0,s.useState)(!0);(0,s.useEffect)(()=>{if(t){const e=new Date(t),a=(0,z.C)(e.getFullYear(),e.getMonth()+1,e.getDate());l(a.hd.toString()),c(a.hm.toString()),p(a.hy.toString()),m(t)}else{const e=new Date,t=(0,z.C)(e.getFullYear(),e.getMonth()+1,e.getDate());l(t.hd.toString()),c(t.hm.toString()),p(t.hy.toString())}},[t]);const g=(e,t,s)=>{const n=parseInt(e)||1,i=parseInt(t)||1,r=parseInt(s)||1446;if(l(e),c(t),p(s),n<1||n>30||i<1||i>12||r<1300||r>1500)return u(!1),m(""),void a("");try{const e=(0,z.m)(r,i,n),t="".concat(e.gy,"-").concat(String(e.gm).padStart(2,"0"),"-").concat(String(e.gd).padStart(2,"0"));m(t),u(!0),a(t)}catch(o){u(!1),m(""),a("")}},b=(new Date).getFullYear()-579,j=[];for(let s=b-10;s<=b+10;s++)j.push(s);const f={width:"100%",padding:"8px",border:"2px solid #000080",borderRadius:"6px",fontSize:"15px",fontWeight:"700",color:"#000080",backgroundColor:"#FFFFFF",cursor:"pointer",outline:"none",fontFamily:"Arial, sans-serif"};return(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{style:{display:"block",marginBottom:"8px",fontSize:"15px",color:"#000080",fontWeight:"700"},children:[i," (\u0627\u0644\u062a\u0642\u0648\u064a\u0645 \u0627\u0644\u0647\u062c\u0631\u064a) ",n&&(0,S.jsx)("span",{style:{color:"#FF0000"},children:"*"})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"80px 140px 100px",gap:"8px",marginBottom:"8px",padding:"12px",background:"#F0F8FF",borderRadius:"8px",border:"2px solid #000080",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",color:"#000080",fontWeight:"600",textAlign:"center"},children:"\u0627\u0644\u064a\u0648\u0645"}),(0,S.jsxs)("select",{value:r,onChange:e=>g(e.target.value,o,d),required:n,style:f,children:[(0,S.jsx)("option",{value:"",style:{color:"#000080",fontWeight:"700"},children:"--"}),[...Array(30)].map((e,t)=>(0,S.jsx)("option",{value:t+1,style:{color:"#000080",fontWeight:"700",fontSize:"16px"},children:t+1},t+1))]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",color:"#000080",fontWeight:"600",textAlign:"center"},children:"\u0627\u0644\u0634\u0647\u0631"}),(0,S.jsxs)("select",{value:o,onChange:e=>g(r,e.target.value,d),required:n,style:f,children:[(0,S.jsx)("option",{value:"",style:{color:"#000080",fontWeight:"700"},children:"\u0627\u062e\u062a\u0631"}),[{value:1,label:"\u0645\u062d\u0631\u0645"},{value:2,label:"\u0635\u0641\u0631"},{value:3,label:"\u0631\u0628\u064a\u0639 \u0627\u0644\u0623\u0648\u0644"},{value:4,label:"\u0631\u0628\u064a\u0639 \u0627\u0644\u0622\u062e\u0631"},{value:5,label:"\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0623\u0648\u0644\u0649"},{value:6,label:"\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0622\u062e\u0631\u0629"},{value:7,label:"\u0631\u062c\u0628"},{value:8,label:"\u0634\u0639\u0628\u0627\u0646"},{value:9,label:"\u0631\u0645\u0636\u0627\u0646"},{value:10,label:"\u0634\u0648\u0627\u0644"},{value:11,label:"\u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629"},{value:12,label:"\u0630\u0648 \u0627\u0644\u062d\u062c\u0629"}].map(e=>(0,S.jsx)("option",{value:e.value,style:{color:"#000080",fontWeight:"700",fontSize:"16px"},children:e.label},e.value))]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"13px",color:"#000080",fontWeight:"600",textAlign:"center"},children:"\u0627\u0644\u0633\u0646\u0629"}),(0,S.jsxs)("select",{value:d,onChange:e=>g(r,o,e.target.value),required:n,style:f,children:[(0,S.jsx)("option",{value:"",style:{color:"#000080",fontWeight:"700"},children:"----"}),j.map(e=>(0,S.jsxs)("option",{value:e,style:{color:"#000080",fontWeight:"700",fontSize:"16px"},children:[e," \u0647\u0640"]},e))]})]})]}),x&&h&&(0,S.jsxs)("div",{style:{marginTop:"8px",padding:"10px 14px",background:"#E6F2FF",borderRadius:"10px",fontSize:"15px",color:"#000080",display:"flex",alignItems:"center",gap:"8px",border:"2px solid #000080",fontWeight:"700"},children:[(0,S.jsx)(V.A,{style:{width:"18px",height:"18px",color:"#000080"}}),(0,S.jsxs)("span",{children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f\u064a: ",new Date(x).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"})]})]}),!h&&r&&o&&d&&(0,S.jsx)("div",{style:{marginTop:"8px",padding:"10px 14px",background:"#FFE4E4",borderRadius:"10px",fontSize:"14px",color:"#CC0000",fontWeight:"700",border:"2px solid #CC0000"},children:"\u26a0\ufe0f \u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0647\u062c\u0631\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"})]})};var $=a(9919),K=a(9961),Q=a(3214),ee=a(1572),te=a(5556),ae=a(2406);const se=()=>{const[e,t]=(0,s.useState)("overview"),[a,n]=(0,s.useState)([]),[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[p,m]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[b,f]=(0,s.useState)(!1),[N,w]=(0,s.useState)({title:"",type:"celebration",date:"",hijriDate:"",time:"",location:"",description:"",maxAttendees:"",budget:"",organizer:""}),k=[{id:1,title:"\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f \u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",type:"birthday",date:"2024-03-15",time:"18:00",location:"\u0642\u0627\u0639\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 - \u0627\u0644\u0631\u064a\u0627\u0636",description:"\u0627\u062d\u062a\u0641\u0627\u0644 \u0628\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f \u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644 \u0627\u0644\u062e\u0627\u0645\u0633 \u0648\u0627\u0644\u062b\u0644\u0627\u062b\u064a\u0646",attendees:45,maxAttendees:60,status:"upcoming",organizer:"\u0641\u0627\u0637\u0645\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",budget:5e3,spent:3200,image:null,tags:["\u0639\u0627\u0626\u0644\u064a","\u0627\u062d\u062a\u0641\u0627\u0644","\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f"]},{id:2,title:"\u0627\u062c\u062a\u0645\u0627\u0639 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0647\u0631\u064a",type:"meeting",date:"2024-02-28",time:"19:30",location:"\u0628\u064a\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a",description:"\u0627\u062c\u062a\u0645\u0627\u0639 \u0634\u0647\u0631\u064a \u0644\u0645\u0646\u0627\u0642\u0634\u0629 \u0634\u0624\u0648\u0646 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0648\u0627\u0644\u0642\u0631\u0627\u0631\u0627\u062a \u0627\u0644\u0645\u0647\u0645\u0629",attendees:32,maxAttendees:40,status:"completed",organizer:"\u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",budget:1500,spent:1200,image:null,tags:["\u0627\u062c\u062a\u0645\u0627\u0639","\u0645\u0647\u0645","\u0642\u0631\u0627\u0631\u0627\u062a"]},{id:3,title:"\u062d\u0641\u0644 \u0632\u0641\u0627\u0641 \u0633\u0627\u0631\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",type:"wedding",date:"2024-05-20",time:"20:00",location:"\u0642\u0635\u0631 \u0627\u0644\u0623\u062d\u0644\u0627\u0645 - \u062c\u062f\u0629",description:"\u062d\u0641\u0644 \u0632\u0641\u0627\u0641 \u0633\u0627\u0631\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 \u0648\u0639\u0628\u062f\u0627\u0644\u0644\u0647 \u0627\u0644\u0645\u062d\u0645\u062f",attendees:120,maxAttendees:200,status:"planning",organizer:"\u0646\u0648\u0631\u0627 \u0627\u0644\u0634\u0639\u064a\u0644",budget:5e4,spent:15e3,image:null,tags:["\u0632\u0641\u0627\u0641","\u0645\u0646\u0627\u0633\u0628\u0629 \u0643\u0628\u064a\u0631\u0629","\u0627\u062d\u062a\u0641\u0627\u0644"]},{id:4,title:"\u0631\u062d\u0644\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0635\u064a\u0641\u064a\u0629",type:"trip",date:"2024-07-10",time:"08:00",location:"\u0634\u0627\u0637\u0626 \u0627\u0644\u062f\u0645\u0627\u0645",description:"\u0631\u062d\u0644\u0629 \u0639\u0627\u0626\u0644\u064a\u0629 \u0635\u064a\u0641\u064a\u0629 \u0644\u0642\u0636\u0627\u0621 \u0639\u0637\u0644\u0629 \u0645\u0645\u062a\u0639\u0629",attendees:28,maxAttendees:35,status:"planning",organizer:"\u062e\u0627\u0644\u062f \u0627\u0644\u0634\u0639\u064a\u0644",budget:15e3,spent:4e3,image:null,tags:["\u0631\u062d\u0644\u0629","\u0635\u064a\u0641","\u062a\u0631\u0641\u064a\u0647"]}];(0,s.useEffect)(()=>{n(k)},[]);const _=a.length,C=a.filter(e=>"upcoming"===e.status||"planning"===e.status).length,F=a.reduce((e,t)=>e+t.attendees,0),T=a.reduce((e,t)=>e+t.budget,0),z=a.reduce((e,t)=>e+t.spent,0),R=[{id:"overview",label:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629",icon:o.A},{id:"calendar",label:"\u0627\u0644\u062a\u0642\u0648\u064a\u0645",icon:u.A},{id:"events",label:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",icon:V.A},{id:"planning",label:"\u0627\u0644\u062a\u062e\u0637\u064a\u0637",icon:E.A},{id:"gallery",label:"\u0645\u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631",icon:te.A}],I=e=>{let{title:t,value:a,icon:s,gradient:n,subtitle:i,trend:r,trendValue:l}=e;return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"transform 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg",style:{background:"linear-gradient(135deg, ".concat(n,")"),animation:"apple-glow 3s ease-in-out infinite"},children:(0,S.jsx)(s,{className:"w-6 h-6"})}),r&&(0,S.jsxs)("div",{className:"flex items-center gap-1 text-sm ".concat("up"===r?"text-green-600":"text-red-600"),children:[(0,S.jsx)("span",{children:l}),(0,S.jsx)("div",{className:"w-0 h-0 border-l-4 border-r-4 border-transparent ".concat("up"===r?"border-b-4 border-b-green-600":"border-t-4 border-t-red-600")})]})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("h3",{className:"text-sm text-gray-600 font-medium",children:t}),(0,S.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a}),i&&(0,S.jsx)("p",{className:"text-xs text-gray-700",children:i})]})]})},B=e=>{let{occasion:t}=e;const a=(e=>{const t={birthday:{label:"\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f",icon:$.A,color:"#FF3B30",gradient:"from-red-500 to-pink-500"},wedding:{label:"\u0632\u0641\u0627\u0641",icon:K.A,color:"#FF2D92",gradient:"from-pink-500 to-rose-500"},meeting:{label:"\u0627\u062c\u062a\u0645\u0627\u0639",icon:x.A,color:"#007AFF",gradient:"from-blue-500 to-indigo-500"},trip:{label:"\u0631\u062d\u0644\u0629",icon:Q.A,color:"#30D158",gradient:"from-green-500 to-emerald-500"},celebration:{label:"\u0627\u062d\u062a\u0641\u0627\u0644",icon:E.A,color:"#FF9500",gradient:"from-orange-500 to-amber-500"},default:{label:"\u0645\u0646\u0627\u0633\u0628\u0629",icon:u.A,color:"#8E8E93",gradient:"from-gray-500 to-gray-600"}};return t[e]||t.default})(t.type),s=(e=>{const t={upcoming:{label:"\u0642\u0627\u062f\u0645\u0629",color:"#007AFF",icon:v.A},ongoing:{label:"\u062c\u0627\u0631\u064a\u0629",color:"#30D158",icon:D.A},completed:{label:"\u0645\u0646\u062a\u0647\u064a\u0629",color:"#8E8E93",icon:D.A},cancelled:{label:"\u0645\u0644\u063a\u064a\u0629",color:"#FF3B30",icon:ee.A},planning:{label:"\u062a\u062d\u062a \u0627\u0644\u062a\u062e\u0637\u064a\u0637",color:"#FF9500",icon:V.A}};return t[e]||t.upcoming})(t.status),n=a.icon,i=s.icon,r=t.attendees/t.maxAttendees*100,l=t.spent/t.budget*100;return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.02)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r ".concat(a.gradient," flex items-center justify-center text-white shadow-lg"),children:(0,S.jsx)(n,{className:"w-6 h-6"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:t.title}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:a.label})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"".concat(s.color,"20"),color:s.color},children:[(0,S.jsx)(i,{className:"w-3 h-3"}),s.label]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"4px",opacity:0,transition:"opacity 0.3s"},onMouseEnter:e=>{e.currentTarget.style.opacity=1},onMouseLeave:e=>{e.currentTarget.style.opacity=0},children:[(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(248, 250, 252, 1)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(M.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(248, 250, 252, 1)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(W.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(248, 250, 252, 1)",border:"1px solid #e5e7eb",borderRadius:"8px",color:"#1f2937",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(ae.A,{className:"w-4 h-4"})})]})]})]}),(0,S.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,S.jsx)(u.A,{className:"w-4 h-4"}),(0,S.jsxs)("span",{children:[t.date," - ",t.time]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,S.jsx)(Q.A,{className:"w-4 h-4"}),(0,S.jsx)("span",{children:t.location})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,S.jsx)(y.A,{className:"w-4 h-4"}),(0,S.jsxs)("span",{children:[t.attendees," \u0645\u0646 ",t.maxAttendees," \u0645\u0634\u0627\u0631\u0643"]})]})]}),(0,S.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.description}),(0,S.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062d\u0636\u0648\u0631"}),(0,S.jsxs)("span",{children:[r.toFixed(0),"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(r,"%")}})})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629"}),(0,S.jsxs)("span",{children:[l.toFixed(0),"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(l,"%")}})})]})]}),(0,S.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:t.tags.map((e,t)=>(0,S.jsx)("span",{className:"px-2 py-1 bg-gray-200 rounded-lg text-xs text-gray-700",children:e},t))}),(0,S.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,S.jsxs)("button",{style:{flex:1,padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[(0,S.jsx)(M.A,{className:"w-4 h-4"}),"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"]}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(j.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(ae.A,{className:"w-4 h-4"})})]})]})};return(0,S.jsxs)("div",{className:"p-6 space-y-6",dir:"rtl",style:{backgroundColor:"white",minHeight:"100vh"},children:[(0,S.jsx)("div",{style:{display:"flex",gap:"8px",padding:"8px",background:"linear-gradient(135deg, rgba(243, 244, 246, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",borderRadius:"16px",marginBottom:"24px"},children:R.map(a=>{const s=a.icon,n=e===a.id;return(0,S.jsxs)("button",{onClick:()=>t(a.id),style:{padding:"10px 20px",background:n?"linear-gradient(135deg, #007AFF, #5856D6)":"transparent",border:"none",color:n?"white":"#86868B",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderRadius:"100px",transition:"all 0.3s"},children:[(0,S.jsx)(s,{className:"w-5 h-5"}),(0,S.jsx)("span",{children:a.label})]},a.id)})}),(0,S.jsx)("div",{style:{animation:"apple-fade-up 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{switch(e){case"overview":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,S.jsx)(I,{title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",value:_.toString(),icon:V.A,gradient:"#007AFF, #5856D6",trend:"up",trendValue:"+5"}),(0,S.jsx)(I,{title:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0627\u0644\u0642\u0627\u062f\u0645\u0629",value:C.toString(),icon:v.A,gradient:"#30D158, #32D74B",trend:"up",trendValue:"+2"}),(0,S.jsx)(I,{title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646",value:F.toString(),icon:x.A,gradient:"#FF9500, #FFCC02",subtitle:"\u0647\u0630\u0627 \u0627\u0644\u0634\u0647\u0631"}),(0,S.jsx)(I,{title:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0629",value:"".concat((z/T*100).toFixed(0),"%"),icon:o.A,gradient:"#FF3B30, #FF453A",subtitle:"".concat(z.toLocaleString("ar-SA")," \u0645\u0646 ").concat(T.toLocaleString("ar-SA")," \u0631.\u0633")})]}),(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:(0,S.jsx)(E.A,{className:"w-5 h-5 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0633\u0631\u064a\u0639\u0629"}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a"})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,S.jsxs)("button",{onClick:()=>f(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0627\u0633\u0628\u0629"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #10B981, #059669)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(u.A,{className:"w-4 h-4"}),"\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0648\u064a\u0645"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(o.A,{className:"w-4 h-4"}),"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"]})]})]}),(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px"},children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629"}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:a.slice(0,4).map(e=>(0,S.jsx)(B,{occasion:e},e.id))})]})]});case"calendar":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(u.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\u062a\u0642\u0648\u064a\u0645 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062a\u0642\u0648\u064a\u0645 \u062a\u0641\u0627\u0639\u0644\u064a \u0644\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"})]});case"events":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u0625\u062f\u0627\u0631\u0629 \u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0641\u0639\u0627\u0644\u064a\u0627\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u0629"})]}),(0,S.jsxs)("button",{onClick:()=>{console.log("Add button clicked!"),f(!0)},style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0645\u0646\u0627\u0633\u0628\u0629 \u062c\u062f\u064a\u062f\u0629"]})]}),(0,S.jsx)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"16px"},children:(0,S.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,S.jsx)("div",{className:"flex-1 min-w-64",children:(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)(P.A,{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",color:"#9ca3af",pointerEvents:"none"}}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a...",value:c,onChange:e=>d(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",color:"#1f2937",fontSize:"14px",outline:"none"}})]})}),(0,S.jsxs)("select",{value:p,onChange:e=>m(e.target.value),style:{padding:"12px 16px",background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",color:"#1f2937",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,S.jsx)("option",{value:"birthday",children:"\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f"}),(0,S.jsx)("option",{value:"wedding",children:"\u0632\u0641\u0627\u0641"}),(0,S.jsx)("option",{value:"meeting",children:"\u0627\u062c\u062a\u0645\u0627\u0639"}),(0,S.jsx)("option",{value:"trip",children:"\u0631\u062d\u0644\u0629"}),(0,S.jsx)("option",{value:"celebration",children:"\u0627\u062d\u062a\u0641\u0627\u0644"})]}),(0,S.jsxs)("select",{value:h,onChange:e=>g(e.target.value),style:{padding:"12px 16px",background:"white",border:"1px solid #e5e7eb",borderRadius:"12px",color:"#1f2937",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"upcoming",children:"\u0642\u0627\u062f\u0645\u0629"}),(0,S.jsx)("option",{value:"ongoing",children:"\u062c\u0627\u0631\u064a\u0629"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0646\u062a\u0647\u064a\u0629"}),(0,S.jsx)("option",{value:"planning",children:"\u062a\u062d\u062a \u0627\u0644\u062a\u062e\u0637\u064a\u0637"}),(0,S.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a\u0629"})]})]})}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.filter(e=>(!p||e.type===p)&&(!h||e.status===h)&&(!c||e.title.toLowerCase().includes(c.toLowerCase()))).map(e=>(0,S.jsx)(B,{occasion:e},e.id))})]});case"planning":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(E.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\u0623\u062f\u0648\u0627\u062a \u0627\u0644\u062a\u062e\u0637\u064a\u0637"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0623\u062f\u0648\u0627\u062a \u0627\u0644\u062a\u062e\u0637\u064a\u0637 \u0627\u0644\u0645\u062a\u0642\u062f\u0645\u0629 \u0644\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"})]});case"gallery":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(te.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\u0645\u0639\u0631\u0636 \u0627\u0644\u0635\u0648\u0631"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0645\u0639\u0631\u0636 \u0635\u0648\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0630\u0643\u0631\u064a\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"})]});default:return null}})()}),console.log("Modal state:",b),b&&(0,S.jsx)("div",{style:{position:"fixed",inset:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,S.jsxs)("div",{style:{background:"white",borderRadius:"0",width:"100%",maxWidth:"100%",height:"100vh",maxHeight:"100vh",overflow:"hidden",boxShadow:"none",display:"flex",flexDirection:"column"},children:[(0,S.jsxs)("div",{style:{padding:"24px",borderBottom:"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1f2937"},children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u0627\u0633\u0628\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,S.jsx)("button",{onClick:()=>f(!1),style:{background:"transparent",border:"none",cursor:"pointer",color:"#6b7280"},children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px"}})})]}),(0,S.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=(0,i.A)((0,i.A)({},N),{},{id:Date.now(),attendees:0,status:"planning",spent:0,image:null,tags:[]});n(e=>[...e,t]),f(!1),w({title:"",type:"celebration",date:"",hijriDate:"",time:"",location:"",description:"",maxAttendees:"",budget:"",organizer:""})},style:{flex:1,overflowY:"auto",padding:"32px",display:"flex",flexDirection:"column",maxHeight:"calc(100vh - 160px)"},children:[(0,S.jsxs)("div",{style:{display:"grid",gap:"20px",flex:1},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:N.title,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{title:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},placeholder:"\u0645\u062b\u0627\u0644: \u062d\u0641\u0644 \u0632\u0641\u0627\u0641 \u0623\u062d\u0645\u062f"})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629 *"}),(0,S.jsxs)("select",{required:!0,value:N.type,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{type:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"celebration",children:"\u0627\u062d\u062a\u0641\u0627\u0644"}),(0,S.jsx)("option",{value:"wedding",children:"\u0632\u0641\u0627\u0641"}),(0,S.jsx)("option",{value:"birthday",children:"\u0639\u064a\u062f \u0645\u064a\u0644\u0627\u062f"}),(0,S.jsx)("option",{value:"meeting",children:"\u0627\u062c\u062a\u0645\u0627\u0639"}),(0,S.jsx)("option",{value:"trip",children:"\u0631\u062d\u0644\u0629"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0627\u0644\u0645\u0646\u0638\u0645 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:N.organizer,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{organizer:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u0638\u0645"})]})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsx)("div",{children:(0,S.jsx)(Z,{label:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629",value:N.date,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{date:e})),required:!0})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0627\u0644\u0648\u0642\u062a *"}),(0,S.jsx)("input",{type:"time",required:!0,value:N.time,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{time:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"}})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0627\u0644\u0645\u0643\u0627\u0646 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:N.location,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{location:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},placeholder:"\u0645\u062b\u0627\u0644: \u0642\u0627\u0639\u0629 \u0627\u0644\u0627\u062d\u062a\u0641\u0627\u0644\u0627\u062a - \u0627\u0644\u0631\u064a\u0627\u0636"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0627\u0644\u0648\u0635\u0641"}),(0,S.jsx)("textarea",{value:N.description,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{description:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px",minHeight:"100px"},placeholder:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629..."})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0639\u062f\u062f \u0627\u0644\u062d\u0636\u0648\u0631 \u0627\u0644\u0645\u062a\u0648\u0642\u0639"}),(0,S.jsx)("input",{type:"number",value:N.maxAttendees,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{maxAttendees:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},placeholder:"0"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"8px"},children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629 (\u0631\u064a\u0627\u0644)"}),(0,S.jsx)("input",{type:"number",value:N.budget,onChange:e=>w(t=>(0,i.A)((0,i.A)({},t),{},{budget:e.target.value})),style:{width:"100%",padding:"12px",border:"1px solid #d1d5db",borderRadius:"12px",fontSize:"14px"},placeholder:"0"})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #e5e7eb",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{type:"button",onClick:()=>f(!1),style:{padding:"10px 24px",background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{type:"submit",style:{padding:"10px 24px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"12px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0629"})]})]})]})})]})};var ne=a(3720),ie=a(5191),re=a(5870),le=a(780),oe=a(2623),ce=a(9255),de=a(1522),pe=a(6157);const xe=()=>{const[e,t]=(0,s.useState)("overview"),[a,n]=(0,s.useState)([]),[r,l]=(0,s.useState)(!1),[d,p]=(0,s.useState)(""),[x,m]=(0,s.useState)(""),[u,b]=(0,s.useState)(""),[j,f]=(0,s.useState)(!1),[w,k]=(0,s.useState)({title:"",category:"financial",description:"",status:"planning",startDate:"",startHijriDate:"",endDate:"",endHijriDate:"",budget:"",targetParticipants:"",manager:"",priority:"medium",objectives:"",expectedOutcomes:""}),_=[{id:1,title:"\u0635\u0646\u062f\u0648\u0642 \u0627\u0644\u0637\u0648\u0627\u0631\u0626 \u0627\u0644\u0639\u0627\u0626\u0644\u064a",category:"financial",description:"\u0635\u0646\u062f\u0648\u0642 \u0644\u062f\u0639\u0645 \u0623\u0641\u0631\u0627\u062f \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0641\u064a \u062d\u0627\u0644\u0627\u062a \u0627\u0644\u0637\u0648\u0627\u0631\u0626 \u0648\u0627\u0644\u062d\u0627\u062c\u0629",status:"active",progress:75,startDate:"2024-01-01",endDate:"2024-12-31",budget:1e5,raised:75e3,participants:28,targetParticipants:40,manager:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",priority:"high",tags:["\u0645\u0627\u0644\u064a","\u0637\u0648\u0627\u0631\u0626","\u062f\u0639\u0645"]},{id:2,title:"\u0628\u0631\u0646\u0627\u0645\u062c \u0627\u0644\u0645\u0646\u062d \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u064a\u0629",category:"education",description:"\u0645\u0646\u062d \u062f\u0631\u0627\u0633\u064a\u0629 \u0644\u0623\u0637\u0641\u0627\u0644 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0645\u062a\u0641\u0648\u0642\u064a\u0646 \u0623\u0643\u0627\u062f\u064a\u0645\u064a\u0627\u064b",status:"planning",progress:30,startDate:"2024-03-01",endDate:"2024-08-31",budget:5e4,raised:15e3,participants:12,targetParticipants:20,manager:"\u0641\u0627\u0637\u0645\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",priority:"high",tags:["\u062a\u0639\u0644\u064a\u0645","\u0645\u0646\u062d","\u0623\u0637\u0641\u0627\u0644"]},{id:3,title:"\u0645\u0634\u0631\u0648\u0639 \u0643\u0628\u0627\u0631 \u0627\u0644\u0633\u0646",category:"social",description:"\u0631\u0639\u0627\u064a\u0629 \u0648\u062e\u062f\u0645\u0627\u062a \u062e\u0627\u0635\u0629 \u0644\u0643\u0628\u0627\u0631 \u0627\u0644\u0633\u0646 \u0641\u064a \u0627\u0644\u0639\u0627\u0626\u0644\u0629",status:"active",progress:60,startDate:"2023-12-01",endDate:"2024-06-30",budget:3e4,raised:18e3,participants:15,targetParticipants:25,manager:"\u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",priority:"medium",tags:["\u0627\u062c\u062a\u0645\u0627\u0639\u064a","\u0643\u0628\u0627\u0631 \u0627\u0644\u0633\u0646","\u0631\u0639\u0627\u064a\u0629"]},{id:4,title:"\u0645\u0628\u0627\u062f\u0631\u0629 \u0627\u0644\u0628\u064a\u0626\u0629 \u0627\u0644\u062e\u0636\u0631\u0627\u0621",category:"environment",description:"\u0645\u0634\u0627\u0631\u064a\u0639 \u0628\u064a\u0626\u064a\u0629 \u0644\u062d\u0645\u0627\u064a\u0629 \u0627\u0644\u0628\u064a\u0626\u0629 \u0648\u0632\u0631\u0627\u0639\u0629 \u0627\u0644\u0623\u0634\u062c\u0627\u0631",status:"completed",progress:100,startDate:"2023-09-01",endDate:"2023-12-31",budget:2e4,raised:2e4,participants:35,targetParticipants:30,manager:"\u0633\u0627\u0631\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",priority:"medium",tags:["\u0628\u064a\u0626\u0629","\u0623\u0634\u062c\u0627\u0631","\u062d\u0645\u0627\u064a\u0629"]},{id:5,title:"\u0645\u0634\u0631\u0648\u0639 \u0631\u064a\u0627\u062f\u0629 \u0627\u0644\u0623\u0639\u0645\u0627\u0644",category:"business",description:"\u062f\u0639\u0645 \u0623\u0641\u0631\u0627\u062f \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0644\u0628\u062f\u0621 \u0645\u0634\u0627\u0631\u064a\u0639\u0647\u0645 \u0627\u0644\u062a\u062c\u0627\u0631\u064a\u0629",status:"active",progress:45,startDate:"2024-02-01",endDate:"2024-11-30",budget:8e4,raised:36e3,participants:8,targetParticipants:15,manager:"\u062e\u0627\u0644\u062f \u0627\u0644\u0634\u0639\u064a\u0644",priority:"high",tags:["\u0623\u0639\u0645\u0627\u0644","\u0631\u064a\u0627\u062f\u0629","\u0645\u0634\u0627\u0631\u064a\u0639"]}];(0,s.useEffect)(()=>{n(_)},[]);const C=e=>{const t={financial:{label:"\u0645\u0627\u0644\u064a",icon:U.A,color:"#007AFF",gradient:"from-blue-500 to-indigo-500"},education:{label:"\u062a\u0639\u0644\u064a\u0645\u064a",icon:ne.A,color:"#30D158",gradient:"from-green-500 to-emerald-500"},social:{label:"\u0627\u062c\u062a\u0645\u0627\u0639\u064a",icon:K.A,color:"#FF3B30",gradient:"from-red-500 to-pink-500"},environment:{label:"\u0628\u064a\u0626\u064a",icon:ie.A,color:"#30D158",gradient:"from-green-500 to-teal-500"},business:{label:"\u062a\u062c\u0627\u0631\u064a",icon:re.A,color:"#FF9500",gradient:"from-orange-500 to-amber-500"},health:{label:"\u0635\u062d\u064a",icon:K.A,color:"#FF2D92",gradient:"from-pink-500 to-rose-500"},default:{label:"\u0639\u0627\u0645",icon:g.A,color:"#8E8E93",gradient:"from-gray-500 to-gray-600"}};return t[e]||t.default},F=e=>{const t={high:{label:"\u0639\u0627\u0644\u064a\u0629",color:"#FF3B30",icon:oe.A},medium:{label:"\u0645\u062a\u0648\u0633\u0637\u0629",color:"#FF9500",icon:ce.A},low:{label:"\u0645\u0646\u062e\u0641\u0636\u0629",color:"#8E8E93",icon:v.A}};return t[e]||t.medium},T=a.length,z=a.filter(e=>"active"===e.status).length,R=a.filter(e=>"completed"===e.status).length,B=a.reduce((e,t)=>e+t.budget,0),O=a.reduce((e,t)=>e+t.raised,0),q=a.reduce((e,t)=>e+t.participants,0),H=[{id:"overview",label:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629",icon:o.A},{id:"active",label:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u0646\u0634\u0637\u0629",icon:le.A},{id:"all",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a",icon:g.A},{id:"reports",label:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",icon:c.A},{id:"proposals",label:"\u0627\u0642\u062a\u0631\u0627\u062d\u0627\u062a \u062c\u062f\u064a\u062f\u0629",icon:de.A}],X=e=>{let{title:t,value:a,icon:s,gradient:n,subtitle:i,trend:r,trendValue:l}=e;return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"transform 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg",style:{background:"linear-gradient(135deg, ".concat(n,")"),animation:"apple-glow 3s ease-in-out infinite"},children:(0,S.jsx)(s,{className:"w-6 h-6"})}),r&&(0,S.jsxs)("div",{className:"flex items-center gap-1 text-sm ".concat("up"===r?"text-green-400":"text-red-400"),children:[(0,S.jsx)("span",{children:l}),(0,S.jsx)(N.A,{className:"w-4 h-4 ".concat("down"===r?"rotate-180":"")})]})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("h3",{className:"text-sm text-gray-600 font-medium",children:t}),(0,S.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a}),i&&(0,S.jsx)("p",{className:"text-xs text-gray-500",children:i})]})]})},Y=e=>{var t,a;let{initiative:s}=e;const n=C(s.category),i=(e=>{const t={planning:{label:"\u0627\u0644\u062a\u062e\u0637\u064a\u0637",color:"#FF9500",icon:v.A},active:{label:"\u0646\u0634\u0637",color:"#30D158",icon:le.A},paused:{label:"\u0645\u062a\u0648\u0642\u0641 \u0645\u0624\u0642\u062a\u0627\u064b",color:"#FFCC02",icon:I.A},completed:{label:"\u0645\u0643\u062a\u0645\u0644",color:"#007AFF",icon:D.A},cancelled:{label:"\u0645\u0644\u063a\u064a",color:"#FF3B30",icon:I.A}};return t[e]||t.planning})(s.status),r=F(s.priority),l=n.icon,o=i.icon,c=r.icon,d=s.raised/s.budget*100,p=s.participants/s.targetParticipants*100;return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.02)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r ".concat(n.gradient," flex items-center justify-center text-white shadow-lg"),children:(0,S.jsx)(l,{className:"w-6 h-6"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:s.title}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:n.label})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"".concat(r.color,"20"),color:r.color},children:[(0,S.jsx)(c,{className:"w-3 h-3"}),r.label]}),(0,S.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"".concat(i.color,"20"),color:i.color},children:[(0,S.jsx)(o,{className:"w-3 h-3"}),i.label]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"4px",opacity:0,transition:"opacity 0.3s"},onMouseEnter:e=>{e.currentTarget.style.opacity=1},onMouseLeave:e=>{e.currentTarget.style.opacity=0},children:[(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(M.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(W.A,{className:"w-4 h-4"})}),(0,S.jsx)("button",{style:{padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(ae.A,{className:"w-4 h-4"})})]})]})]}),(0,S.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:s.description}),(0,S.jsxs)("div",{className:"mb-4",children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0642\u062f\u0645 \u0627\u0644\u0639\u0627\u0645"}),(0,S.jsxs)("span",{children:[s.progress,"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-400 h-3 rounded-full transition-all duration-500 relative overflow-hidden",style:{width:"".concat(s.progress,"%")},children:(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"})})})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0645\u0648\u064a\u0644"}),(0,S.jsxs)("span",{children:[d.toFixed(0),"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(d,"%")}})}),(0,S.jsxs)("p",{className:"text-xs text-gray-700 mt-1",children:[s.raised.toLocaleString("ar-SA")," / ",s.budget.toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629"}),(0,S.jsxs)("span",{children:[p.toFixed(0),"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-purple-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(p,"%")}})}),(0,S.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[s.participants," / ",s.targetParticipants," \u0645\u0634\u0627\u0631\u0643"]})]})]}),(0,S.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.map((e,t)=>(0,S.jsx)("span",{className:"px-2 py-1 bg-gray-200 rounded-lg text-xs text-gray-700",children:e},t))}),(0,S.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("div",{className:"w-6 h-6 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center",children:(0,S.jsx)("span",{className:"text-xs text-white font-bold",children:null===(t=s.manager)||void 0===t||null===(a=t.split(" ")[0])||void 0===a?void 0:a.charAt(0)})}),(0,S.jsx)("span",{className:"text-xs text-gray-600",children:s.manager})]}),(0,S.jsx)("div",{style:{display:"flex",gap:"8px"},children:(0,S.jsxs)("button",{style:{padding:"6px 12px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[(0,S.jsx)(M.A,{className:"w-3 h-3"}),"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"]})})]})]})};return(0,S.jsxs)("div",{className:"p-6 space-y-6",dir:"rtl",style:{backgroundColor:"white",minHeight:"100vh"},children:[(0,S.jsx)("div",{style:{display:"flex",gap:"8px",padding:"8px",background:"linear-gradient(135deg, rgba(243, 244, 246, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",borderRadius:"16px",marginBottom:"24px"},children:H.map(a=>{const s=a.icon,n=e===a.id;return(0,S.jsxs)("button",{onClick:()=>t(a.id),style:{padding:"10px 20px",background:n?"linear-gradient(135deg, #007AFF, #5856D6)":"transparent",border:"none",color:n?"white":"#86868B",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderRadius:"100px",transition:"all 0.3s"},children:[(0,S.jsx)(s,{className:"w-5 h-5"}),(0,S.jsx)("span",{children:a.label})]},a.id)})}),(0,S.jsx)("div",{style:{animation:"apple-fade-up 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{switch(e){case"overview":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,S.jsx)(X,{title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a",value:T.toString(),icon:g.A,gradient:"#007AFF, #5856D6",trend:"up",trendValue:"+3"}),(0,S.jsx)(X,{title:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u0646\u0634\u0637\u0629",value:z.toString(),icon:le.A,gradient:"#30D158, #32D74B",trend:"up",trendValue:"+2"}),(0,S.jsx)(X,{title:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u0645\u0643\u062a\u0645\u0644\u0629",value:R.toString(),icon:pe.A,gradient:"#FF9500, #FFCC02",trend:"up",trendValue:"+1"}),(0,S.jsx)(X,{title:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0646\u062c\u0627\u062d",value:"".concat((R/T*100).toFixed(0),"%"),icon:ce.A,gradient:"#FF3B30, #FF453A",subtitle:"\u0644\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u0645\u0643\u062a\u0645\u0644\u0629"})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:(0,S.jsx)(h.A,{className:"w-5 h-5 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0646\u0638\u0631\u0629 \u0645\u0627\u0644\u064a\u0629"}),(0,S.jsx)("p",{className:"text-sm text-gray-400",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0627\u062a \u0648\u0627\u0644\u062a\u0645\u0648\u064a\u0644"})]})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a\u0629"}),(0,S.jsxs)("span",{className:"text-white font-bold",children:[B.toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062c\u0645\u0639"}),(0,S.jsxs)("span",{className:"text-green-400 font-bold",children:[O.toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u062a\u062d\u0642\u0642"}),(0,S.jsxs)("span",{className:"text-blue-400 font-bold",children:[(O/B*100).toFixed(1),"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-3",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-700",style:{width:"".concat(O/B*100,"%")}})})]})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center",children:(0,S.jsx)(y.A,{className:"w-5 h-5 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629"}),(0,S.jsx)("p",{className:"text-sm text-gray-400",children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646 \u0648\u0627\u0644\u0645\u062a\u0637\u0648\u0639\u064a\u0646"})]})]}),(0,S.jsxs)("div",{className:"space-y-4",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646"}),(0,S.jsx)("span",{className:"text-white font-bold",children:q})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629"}),(0,S.jsxs)("span",{className:"text-purple-400 font-bold",children:[(q/T).toFixed(1)," / \u0645\u0628\u0627\u062f\u0631\u0629"]})]}),(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"text-gray-400",children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0627\u0644\u062a\u0632\u0627\u0645"}),(0,S.jsx)("span",{className:"text-green-400 font-bold",children:"87%"})]})]})]})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center",children:(0,S.jsx)(E.A,{className:"w-5 h-5 text-white"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0633\u0631\u064a\u0639\u0629"}),(0,S.jsx)("p",{className:"text-sm text-gray-400",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0648\u0627\u0644\u0645\u0634\u0627\u0631\u064a\u0639"})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,S.jsxs)("button",{onClick:()=>f(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0645\u0628\u0627\u062f\u0631\u0629 \u062c\u062f\u064a\u062f\u0629"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #10B981, #059669)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(de.A,{className:"w-4 h-4"}),"\u0627\u0642\u062a\u0631\u0627\u062d \u0645\u0628\u0627\u062f\u0631\u0629"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(c.A,{className:"w-4 h-4"}),"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #F97316, #EA580C)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(o.A,{className:"w-4 h-4"}),"\u0627\u0644\u062a\u062d\u0644\u064a\u0644\u0627\u062a"]})]})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u0623\u0641\u0636\u0644 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0623\u062f\u0627\u0621\u064b"}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:a.sort((e,t)=>t.progress-e.progress).slice(0,3).map(e=>(0,S.jsx)(Y,{initiative:e},e.id))})]})]});case"active":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u0646\u0634\u0637\u0629"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u062c\u0627\u0631\u064a\u0629 \u062d\u0627\u0644\u064a\u0627\u064b"})]}),(0,S.jsxs)("button",{onClick:()=>f(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0645\u0628\u0627\u062f\u0631\u0629 \u062c\u062f\u064a\u062f\u0629"]})]}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.filter(e=>"active"===e.status).map(e=>(0,S.jsx)(Y,{initiative:e},e.id))})]});case"all":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0648\u0645\u0634\u0627\u0631\u064a\u0639 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"})]}),(0,S.jsxs)("button",{onClick:()=>f(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0645\u0628\u0627\u062f\u0631\u0629 \u062c\u062f\u064a\u062f\u0629"]})]}),(0,S.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"16px"},children:(0,S.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,S.jsx)("div",{className:"flex-1 min-w-64",children:(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)(P.A,{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",color:"rgba(255, 255, 255, 0.5)",pointerEvents:"none"}}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a...",value:d,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"}})]})}),(0,S.jsxs)("select",{value:x,onChange:e=>m(e.target.value),style:{padding:"12px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),(0,S.jsx)("option",{value:"financial",children:"\u0645\u0627\u0644\u064a"}),(0,S.jsx)("option",{value:"education",children:"\u062a\u0639\u0644\u064a\u0645\u064a"}),(0,S.jsx)("option",{value:"social",children:"\u0627\u062c\u062a\u0645\u0627\u0639\u064a"}),(0,S.jsx)("option",{value:"environment",children:"\u0628\u064a\u0626\u064a"}),(0,S.jsx)("option",{value:"business",children:"\u062a\u062c\u0627\u0631\u064a"}),(0,S.jsx)("option",{value:"health",children:"\u0635\u062d\u064a"})]}),(0,S.jsxs)("select",{value:u,onChange:e=>b(e.target.value),style:{padding:"12px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"planning",children:"\u0627\u0644\u062a\u062e\u0637\u064a\u0637"}),(0,S.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"paused",children:"\u0645\u062a\u0648\u0642\u0641 \u0645\u0624\u0642\u062a\u0627\u064b"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,S.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a"})]})]})}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.filter(e=>(!x||e.category===x)&&(!u||e.status===u)&&(!d||e.title.toLowerCase().includes(d.toLowerCase()))).map(e=>(0,S.jsx)(Y,{initiative:e},e.id))})]});case"reports":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062a\u0642\u0627\u0631\u064a\u0631 \u0645\u0641\u0635\u0644\u0629 \u0639\u0646 \u0623\u062f\u0627\u0621 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"})]});case"proposals":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(de.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"\u0627\u0642\u062a\u0631\u0627\u062d\u0627\u062a \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0646\u0638\u0627\u0645 \u0627\u0633\u062a\u0642\u0628\u0627\u0644 \u0648\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0642\u062a\u0631\u0627\u062d\u0627\u062a \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u062c\u062f\u064a\u062f\u0629 \u0642\u0631\u064a\u0628\u0627\u064b"})]});default:return null}})()}),j&&(0,S.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,S.jsxs)("div",{style:{background:"white",borderRadius:"0",width:"100%",maxWidth:"100%",height:"100vh",maxHeight:"100vh",overflow:"hidden",boxShadow:"none",display:"flex",flexDirection:"column"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[(0,S.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937"},children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0628\u0627\u062f\u0631\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,S.jsx)("button",{onClick:()=>f(!1),style:{padding:"8px",background:"#F3F4F6",border:"none",borderRadius:"8px",cursor:"pointer"},children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px",color:"#6B7280"}})})]}),(0,S.jsx)("form",{onSubmit:e=>{e.preventDefault();const t=(0,i.A)((0,i.A)({id:a.length+1},w),{},{budget:parseFloat(w.budget)||0,raised:0,participants:0,targetParticipants:parseInt(w.targetParticipants)||0,progress:0,tags:[C(w.category).label,F(w.priority).label]});n([t,...a]),f(!1),k({title:"",category:"financial",description:"",status:"planning",startDate:"",startHijriDate:"",endDate:"",endHijriDate:"",budget:"",targetParticipants:"",manager:"",priority:"medium",objectives:"",expectedOutcomes:""})},style:{flex:1,overflowY:"auto",padding:"32px",maxHeight:"calc(100vh - 160px)"},children:(0,S.jsxs)("div",{style:{display:"grid",gap:"20px"},children:[(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0629 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:w.title,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{title:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0641\u0626\u0629 *"}),(0,S.jsxs)("select",{required:!0,value:w.category,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{category:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"financial",children:"\u0645\u0627\u0644\u064a"}),(0,S.jsx)("option",{value:"education",children:"\u062a\u0639\u0644\u064a\u0645\u064a"}),(0,S.jsx)("option",{value:"social",children:"\u0627\u062c\u062a\u0645\u0627\u0639\u064a"}),(0,S.jsx)("option",{value:"environment",children:"\u0628\u064a\u0626\u064a"}),(0,S.jsx)("option",{value:"business",children:"\u062a\u062c\u0627\u0631\u064a"}),(0,S.jsx)("option",{value:"health",children:"\u0635\u062d\u064a"})]})]}),(0,S.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0648\u0635\u0641 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0629 *"}),(0,S.jsx)("textarea",{required:!0,value:w.description,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{description:e.target.value})),rows:"3",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]})]})]}),(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0627\u0644\u062c\u062f\u0648\u0644 \u0627\u0644\u0632\u0645\u0646\u064a \u0648\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[(0,S.jsx)("div",{children:(0,S.jsx)(Z,{label:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0628\u062f\u0627\u064a\u0629",value:w.startDate,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{startDate:e})),required:!0})}),(0,S.jsx)("div",{children:(0,S.jsx)(Z,{label:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0646\u0647\u0627\u064a\u0629",value:w.endDate,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{endDate:e})),required:!0})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u064a\u0632\u0627\u0646\u064a\u0629 \u0627\u0644\u0645\u062a\u0648\u0642\u0639\u0629 (\u0631\u064a\u0627\u0644)"}),(0,S.jsx)("input",{type:"number",value:w.budget,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{budget:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0639\u062f\u062f \u0627\u0644\u0645\u0634\u0627\u0631\u0643\u064a\u0646 \u0627\u0644\u0645\u0633\u062a\u0647\u062f\u0641"}),(0,S.jsx)("input",{type:"number",value:w.targetParticipants,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{targetParticipants:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]})]})]}),(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0625\u062f\u0627\u0631\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0629 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:w.manager,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{manager:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsxs)("select",{value:w.status,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{status:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"planning",children:"\u0627\u0644\u062a\u062e\u0637\u064a\u0637"}),(0,S.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"paused",children:"\u0645\u062a\u0648\u0642\u0641 \u0645\u0624\u0642\u062a\u0627\u064b"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,S.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,S.jsxs)("select",{value:w.priority,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{priority:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"high",children:"\u0639\u0627\u0644\u064a\u0629"}),(0,S.jsx)("option",{value:"medium",children:"\u0645\u062a\u0648\u0633\u0637\u0629"}),(0,S.jsx)("option",{value:"low",children:"\u0645\u0646\u062e\u0641\u0636\u0629"})]})]})]})]}),(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0627\u0644\u0623\u0647\u062f\u0627\u0641 \u0648\u0627\u0644\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0645\u062a\u0648\u0642\u0639\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0623\u0647\u062f\u0627\u0641 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0629"}),(0,S.jsx)("textarea",{value:w.objectives,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{objectives:e.target.value})),rows:"3",placeholder:"\u0627\u0630\u0643\u0631 \u0627\u0644\u0623\u0647\u062f\u0627\u0641 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629 \u0644\u0644\u0645\u0628\u0627\u062f\u0631\u0629...",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0646\u062a\u0627\u0626\u062c \u0627\u0644\u0645\u062a\u0648\u0642\u0639\u0629"}),(0,S.jsx)("textarea",{value:w.expectedOutcomes,onChange:e=>k(t=>(0,i.A)((0,i.A)({},t),{},{expectedOutcomes:e.target.value})),rows:"3",placeholder:"\u0645\u0627 \u0647\u064a \u0627\u0644\u0646\u062a\u0627\u0626\u062c \u0648\u0627\u0644\u062a\u0623\u062b\u064a\u0631\u0627\u062a \u0627\u0644\u0645\u062a\u0648\u0642\u0639\u0629\u061f...",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{type:"button",onClick:()=>f(!1),style:{padding:"10px 24px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{type:"submit",style:{padding:"10px 24px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0629"})]})]})})]})})]})};var me=a(4294);const he=()=>{const[e,t]=(0,s.useState)("overview"),[a,n]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[d,p]=(0,s.useState)(""),[m,u]=(0,s.useState)(""),[g,j]=(0,s.useState)(""),[f,y]=(0,s.useState)(!1),[w,k]=(0,s.useState)(null),[_,C]=(0,s.useState)([]),[F,T]=(0,s.useState)(!1),z="http://localhost:3001",[R,B]=(0,s.useState)({title:"",type:"accident",amount:"",beneficiaryName:"",beneficiaryPhone:"",incidentDate:"",incidentHijriDate:"",location:"",description:"",status:"pending",paidAmount:"0",remainingAmount:"",collectorName:"",notes:""}),E=[{id:1,title:"\u062f\u064a\u0629 \u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a - \u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u064a\u0627\u0636",type:"accident",amount:3e5,beneficiaryName:"\u0639\u0627\u0626\u0644\u0629 \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",beneficiaryPhone:"0555555555",incidentDate:"2024-01-15",location:"\u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u064a\u0627\u0636 - \u0627\u0644\u062f\u0645\u0627\u0645",description:"\u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a \u0623\u062f\u0649 \u0625\u0644\u0649 \u0648\u0641\u0627\u0629 \u0631\u0628 \u0627\u0644\u0623\u0633\u0631\u0629",status:"in_progress",paidAmount:15e4,remainingAmount:15e4,collectorName:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",contributors:45,priority:"high",tags:["\u0639\u0627\u062c\u0644","\u062d\u0627\u062f\u062b","\u0637\u0631\u064a\u0642"]},{id:2,title:"\u062f\u064a\u0629 \u0642\u062a\u0644 \u062e\u0637\u0623",type:"manslaughter",amount:4e5,beneficiaryName:"\u0648\u0631\u062b\u0629 \u062e\u0627\u0644\u062f \u0627\u0644\u0639\u0645\u0631\u064a",beneficiaryPhone:"0544444444",incidentDate:"2024-02-01",location:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0634\u0631\u0642\u064a\u0629",description:"\u0642\u062a\u0644 \u062e\u0637\u0623 \u0641\u064a \u062d\u0627\u062f\u062b \u0639\u0645\u0644",status:"pending",paidAmount:0,remainingAmount:4e5,collectorName:"\u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",contributors:0,priority:"high",tags:["\u0642\u062a\u0644 \u062e\u0637\u0623","\u0639\u0645\u0644"]},{id:3,title:"\u062f\u064a\u0629 \u0625\u0635\u0627\u0628\u0629 - \u062d\u0627\u062f\u062b \u0645\u0646\u0632\u0644\u064a",type:"injury",amount:5e4,beneficiaryName:"\u0633\u0639\u062f \u0627\u0644\u0634\u0639\u064a\u0644",beneficiaryPhone:"0533333333",incidentDate:"2023-12-20",location:"\u0627\u0644\u0631\u064a\u0627\u0636",description:"\u0625\u0635\u0627\u0628\u0629 \u0628\u0644\u064a\u063a\u0629 \u0646\u062a\u064a\u062c\u0629 \u062d\u0627\u062f\u062b \u0645\u0646\u0632\u0644\u064a",status:"completed",paidAmount:5e4,remainingAmount:0,collectorName:"\u0641\u0627\u0637\u0645\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",contributors:23,priority:"medium",tags:["\u0625\u0635\u0627\u0628\u0629","\u0645\u0646\u0632\u0644\u064a","\u0645\u0643\u062a\u0645\u0644"]},{id:4,title:"\u062f\u064a\u0629 \u062d\u0627\u062f\u062b \u0639\u0645\u0644",type:"work_accident",amount:2e5,beneficiaryName:"\u0639\u0627\u0626\u0644\u0629 \u064a\u0648\u0633\u0641 \u0627\u0644\u0634\u0639\u064a\u0644",beneficiaryPhone:"0522222222",incidentDate:"2024-01-25",location:"\u062c\u062f\u0629 - \u0627\u0644\u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0635\u0646\u0627\u0639\u064a\u0629",description:"\u062d\u0627\u062f\u062b \u0641\u064a \u0645\u0648\u0642\u0639 \u0627\u0644\u0639\u0645\u0644 \u0623\u062f\u0649 \u0625\u0644\u0649 \u0625\u0635\u0627\u0628\u0627\u062a \u062e\u0637\u064a\u0631\u0629",status:"in_progress",paidAmount:8e4,remainingAmount:12e4,collectorName:"\u0633\u0627\u0631\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",contributors:28,priority:"high",tags:["\u0639\u0645\u0644","\u0635\u0646\u0627\u0639\u064a"]}];(0,s.useEffect)(()=>{W()},[]);const W=async()=>{try{l(!0);const e=await fetch("".concat(z,"/api/diya/dashboard")),t=await e.json();if(t.success&&t.data){const e=t.data.map(e=>({id:e.activity_id,title:e.title_ar||e.title_en,type:"accident",amount:e.target_amount||1e5,beneficiaryName:e.description_ar||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",paidAmount:e.total_collected||0,remainingAmount:(e.target_amount||1e5)-(e.total_collected||0),contributors:e.total_contributors||0,status:"completed"===e.collection_status?"completed":"in_progress",priority:"high",collectorName:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0646\u062f\u0648\u0642",tags:["\u062f\u064a\u0629"]}));n(e)}else n(E)}catch(e){console.error("Error fetching diya data:",e),n(E)}finally{l(!1)}},O=e=>{k(e),(async e=>{try{const t=await fetch("".concat(z,"/api/diya/").concat(e,"/contributors")),a=await t.json();a.success&&a.data&&(C(a.data),T(!0))}catch(t){console.error("Error fetching contributors:",t)}})(e.id)},q=e=>{const t={accident:{label:"\u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a",color:"#FF3B30",icon:b.A,gradient:"from-red-500 to-red-600"},manslaughter:{label:"\u0642\u062a\u0644 \u062e\u0637\u0623",color:"#FF9500",icon:me.A,gradient:"from-orange-500 to-orange-600"},injury:{label:"\u0625\u0635\u0627\u0628\u0629",color:"#FFCC02",icon:de.A,gradient:"from-yellow-500 to-yellow-600"},work_accident:{label:"\u062d\u0627\u062f\u062b \u0639\u0645\u0644",color:"#30D158",icon:oe.A,gradient:"from-green-500 to-green-600"},other:{label:"\u0623\u062e\u0631\u0649",color:"#8E8E93",icon:b.A,gradient:"from-gray-500 to-gray-600"}};return t[e]||t.other},H=a.length,X=a.filter(e=>"in_progress"===e.status).length,Y=a.filter(e=>"completed"===e.status).length,J=a.reduce((e,t)=>e+t.amount,0),G=a.reduce((e,t)=>e+t.paidAmount,0),$=a.reduce((e,t)=>e+t.remainingAmount,0),K=a.reduce((e,t)=>e+(t.contributors||0),0),Q=[{id:"overview",label:"\u0646\u0638\u0631\u0629 \u0639\u0627\u0645\u0629",icon:o.A},{id:"active",label:"\u0642\u0636\u0627\u064a\u0627 \u0646\u0634\u0637\u0629",icon:N.A},{id:"all",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0642\u0636\u0627\u064a\u0627",icon:b.A},{id:"reports",label:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",icon:c.A}],ee=e=>{let{title:t,value:a,icon:s,gradient:n,subtitle:i,trend:r,trendValue:l}=e;return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"transform 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-white shadow-lg",style:{background:"linear-gradient(135deg, ".concat(n,")"),animation:"apple-glow 3s ease-in-out infinite"},children:(0,S.jsx)(s,{className:"w-6 h-6"})}),r&&(0,S.jsxs)("div",{className:"flex items-center gap-1 text-sm ".concat("up"===r?"text-green-400":"text-red-400"),children:[(0,S.jsx)("span",{children:l}),(0,S.jsx)(N.A,{className:"w-4 h-4 ".concat("down"===r?"rotate-180":"")})]})]}),(0,S.jsxs)("div",{className:"space-y-1",children:[(0,S.jsx)("h3",{className:"text-sm text-gray-600 font-medium",children:t}),(0,S.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:a}),i&&(0,S.jsx)("p",{className:"text-xs text-gray-500",children:i})]})]})},te=e=>{let{diya:t}=e;const a=q(t.type),s=(e=>{const t={pending:{label:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",color:"#FF9500",icon:v.A},in_progress:{label:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0635\u064a\u0644",color:"#007AFF",icon:N.A},completed:{label:"\u0645\u0643\u062a\u0645\u0644\u0629",color:"#30D158",icon:D.A},cancelled:{label:"\u0645\u0644\u063a\u064a\u0629",color:"#FF3B30",icon:I.A}};return t[e]||t.pending})(t.status),n=(e=>{const t={high:{label:"\u0639\u0627\u0644\u064a\u0629",color:"#FF3B30",icon:oe.A},medium:{label:"\u0645\u062a\u0648\u0633\u0637\u0629",color:"#FF9500",icon:ce.A},low:{label:"\u0645\u0646\u062e\u0641\u0636\u0629",color:"#8E8E93",icon:v.A}};return t[e]||t.medium})(t.priority),i=a.icon,r=s.icon,l=(t.paidAmount/t.amount*100).toFixed(0);return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"24px",transform:"scale(1)",transition:"all 0.3s",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.02)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},onClick:()=>O(t),children:[(0,S.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3",children:[(0,S.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-r ".concat(a.gradient," flex items-center justify-center text-white shadow-lg"),children:(0,S.jsx)(i,{className:"w-6 h-6"})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:t.title}),(0,S.jsx)("p",{className:"text-sm text-gray-600",children:a.label})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"".concat(n.color,"20"),color:n.color},children:n.label}),(0,S.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-xs font-medium",style:{backgroundColor:"".concat(s.color,"20"),color:s.color},children:[(0,S.jsx)(r,{className:"w-3 h-3"}),s.label]})]})]}),(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,S.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f:"}),(0,S.jsx)("span",{className:"font-medium text-gray-900",children:t.beneficiaryName})]}),(0,S.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,S.jsx)("span",{className:"text-gray-600",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0643\u0644\u064a:"}),(0,S.jsxs)("span",{className:"font-bold text-gray-900",children:[t.amount.toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0642\u062f\u0645 \u0641\u064a \u0627\u0644\u062a\u062d\u0635\u064a\u0644"}),(0,S.jsxs)("span",{children:[l,"%"]})]}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,S.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-400 h-3 rounded-full transition-all duration-500 relative overflow-hidden",style:{width:"".concat(l,"%")},children:(0,S.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white to-transparent opacity-30 animate-pulse"})})}),(0,S.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,S.jsxs)("span",{children:["\u0645\u062d\u0635\u0644: ",t.paidAmount.toLocaleString("ar-SA")," \u0631.\u0633"]}),(0,S.jsxs)("span",{children:["\u0645\u062a\u0628\u0642\u064a: ",t.remainingAmount.toLocaleString("ar-SA")," \u0631.\u0633"]})]})]}),(0,S.jsxs)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:[(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)(x.A,{className:"w-4 h-4 text-gray-500"}),(0,S.jsxs)("span",{className:"text-xs text-gray-600",children:[t.contributors," \u0645\u0633\u0627\u0647\u0645"]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)(V.A,{className:"w-4 h-4 text-gray-500"}),(0,S.jsx)("span",{className:"text-xs text-gray-600",children:t.incidentDate})]})]}),(0,S.jsxs)("div",{className:"flex gap-2",children:[(0,S.jsxs)("button",{style:{flex:1,padding:"8px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[(0,S.jsx)(h.A,{className:"w-3 h-3"}),"\u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629"]}),(0,S.jsxs)("button",{style:{padding:"8px 12px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[(0,S.jsx)(M.A,{className:"w-3 h-3"}),"\u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"]})]})]})]})};return(0,S.jsxs)("div",{className:"p-6 space-y-6",dir:"rtl",style:{backgroundColor:"white",minHeight:"100vh"},children:[(0,S.jsx)("div",{style:{display:"flex",gap:"8px",padding:"8px",background:"linear-gradient(135deg, rgba(243, 244, 246, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",borderRadius:"16px",marginBottom:"24px"},children:Q.map(a=>{const s=a.icon,n=e===a.id;return(0,S.jsxs)("button",{onClick:()=>t(a.id),style:{padding:"10px 20px",background:n?"linear-gradient(135deg, #007AFF, #5856D6)":"transparent",border:"none",color:n?"white":"#86868B",fontSize:"14px",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",borderRadius:"100px",transition:"all 0.3s"},children:[(0,S.jsx)(s,{className:"w-5 h-5"}),(0,S.jsx)("span",{children:a.label})]},a.id)})}),(0,S.jsx)("div",{style:{animation:"apple-fade-up 0.6s cubic-bezier(0.4, 0, 0.2, 1)"},children:(()=>{switch(e){case"overview":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,S.jsx)(ee,{title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0642\u0636\u0627\u064a\u0627",value:H.toString(),icon:b.A,gradient:"#007AFF, #5856D6",trend:"up",trendValue:"+2"}),(0,S.jsx)(ee,{title:"\u0642\u0636\u0627\u064a\u0627 \u0646\u0634\u0637\u0629",value:X.toString(),icon:N.A,gradient:"#30D158, #32D74B"}),(0,S.jsx)(ee,{title:"\u0642\u0636\u0627\u064a\u0627 \u0645\u0643\u062a\u0645\u0644\u0629",value:Y.toString(),icon:D.A,gradient:"#FF9500, #FFCC02"}),(0,S.jsx)(ee,{title:"\u0639\u062f\u062f \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u064a\u0646",value:K.toString(),icon:x.A,gradient:"#FF3B30, #FF453A",subtitle:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u064a\u0646"})]}),(0,S.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-blue-500 to-indigo-500 flex items-center justify-center",children:(0,S.jsx)(U.A,{className:"w-5 h-5 text-white"})}),(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"})]}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-white",children:[J.toLocaleString("ar-SA")," \u0631.\u0633"]}),(0,S.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"\u0645\u062c\u0645\u0648\u0639 \u062c\u0645\u064a\u0639 \u0627\u0644\u0642\u0636\u0627\u064a\u0627"})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 flex items-center justify-center",children:(0,S.jsx)(D.A,{className:"w-5 h-5 text-white"})}),(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644"})]}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-green-400",children:[G.toLocaleString("ar-SA")," \u0631.\u0633"]}),(0,S.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"\u062a\u0645 \u062a\u062d\u0635\u064a\u0644\u0647 \u062d\u062a\u0649 \u0627\u0644\u0622\u0646"})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,S.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-r from-orange-500 to-red-500 flex items-center justify-center",children:(0,S.jsx)(I.A,{className:"w-5 h-5 text-white"})}),(0,S.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"})]}),(0,S.jsxs)("p",{className:"text-3xl font-bold text-orange-400",children:[$.toLocaleString("ar-SA")," \u0631.\u0633"]}),(0,S.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"\u064a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u062a\u062d\u0635\u064a\u0644"})]})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0633\u0631\u064a\u0639\u0629"}),(0,S.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,S.jsxs)("button",{onClick:()=>y(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0625\u0636\u0627\u0641\u0629 \u0642\u0636\u064a\u0629 \u062f\u064a\u0629"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #10B981, #059669)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(h.A,{className:"w-4 h-4"}),"\u062a\u0633\u062c\u064a\u0644 \u0645\u0633\u0627\u0647\u0645\u0629"]}),(0,S.jsxs)("button",{style:{padding:"10px 20px",background:"linear-gradient(135deg, #8B5CF6, #7C3AED)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(c.A,{className:"w-4 h-4"}),"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631"]})]})]}),(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"24px"},children:[(0,S.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"\u0623\u062d\u062f\u062b \u0627\u0644\u0642\u0636\u0627\u064a\u0627"}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:a.slice(0,3).map(e=>(0,S.jsx)(te,{diya:e},e.id))})]})]});case"active":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"\u0627\u0644\u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u0646\u0634\u0637\u0629"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0627\u0644\u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u062a\u064a \u062a\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u062a\u062d\u0635\u064a\u0644"})]}),(0,S.jsxs)("button",{onClick:()=>y(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0625\u0636\u0627\u0641\u0629 \u0642\u0636\u064a\u0629"]})]}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.filter(e=>"in_progress"===e.status||"pending"===e.status).map(e=>(0,S.jsx)(te,{diya:e},e.id))})]});case"all":return(0,S.jsxs)("div",{className:"space-y-6",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"\u062c\u0645\u064a\u0639 \u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u062f\u064a\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0625\u062f\u0627\u0631\u0629 \u062c\u0645\u064a\u0639 \u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u062f\u064a\u0627\u062a"})]}),(0,S.jsxs)("button",{onClick:()=>y(!0),style:{padding:"10px 20px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"100px",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(L.A,{className:"w-4 h-4"}),"\u0625\u0636\u0627\u0641\u0629 \u0642\u0636\u064a\u0629"]})]}),(0,S.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"16px"},children:(0,S.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,S.jsx)("div",{className:"flex-1 min-w-64",children:(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)(P.A,{style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",width:"20px",height:"20px",color:"rgba(255, 255, 255, 0.5)",pointerEvents:"none"}}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0642\u0636\u0627\u064a\u0627...",value:d,onChange:e=>p(e.target.value),style:{width:"100%",padding:"12px 16px 12px 44px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"}})]})}),(0,S.jsxs)("select",{value:g,onChange:e=>j(e.target.value),style:{padding:"12px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),(0,S.jsx)("option",{value:"accident",children:"\u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a"}),(0,S.jsx)("option",{value:"manslaughter",children:"\u0642\u062a\u0644 \u062e\u0637\u0623"}),(0,S.jsx)("option",{value:"injury",children:"\u0625\u0635\u0627\u0628\u0629"}),(0,S.jsx)("option",{value:"work_accident",children:"\u062d\u0627\u062f\u062b \u0639\u0645\u0644"}),(0,S.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]}),(0,S.jsxs)("select",{value:m,onChange:e=>u(e.target.value),style:{padding:"12px 16px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",color:"white",fontSize:"14px",outline:"none"},children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"pending",children:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629"}),(0,S.jsx)("option",{value:"in_progress",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0635\u064a\u0644"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644\u0629"}),(0,S.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a\u0629"})]})]})}),(0,S.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:a.filter(e=>(!g||e.type===g)&&(!m||e.status===m)&&(!d||e.title.toLowerCase().includes(d.toLowerCase()))).map(e=>(0,S.jsx)(te,{diya:e},e.id))})]});case"reports":return(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9))",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",border:"1px solid rgba(229, 231, 235, 0.5)",borderRadius:"16px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",padding:"32px",textAlign:"center"},children:[(0,S.jsx)(c.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,S.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u062f\u064a\u0627\u062a"}),(0,S.jsx)("p",{className:"text-gray-400",children:"\u0633\u064a\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u062a\u0642\u0627\u0631\u064a\u0631 \u0645\u0641\u0635\u0644\u0629 \u0639\u0646 \u0642\u0636\u0627\u064a\u0627 \u0627\u0644\u062f\u064a\u0627\u062a \u0642\u0631\u064a\u0628\u0627\u064b"})]});default:return null}})()}),f&&(0,S.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(10px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:(0,S.jsxs)("div",{style:{background:"white",borderRadius:"0",width:"100%",maxWidth:"100%",height:"100vh",maxHeight:"100vh",overflow:"hidden",boxShadow:"none",display:"flex",flexDirection:"column"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"24px",borderBottom:"1px solid #e5e7eb",flexShrink:0},children:[(0,S.jsx)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937"},children:"\u0625\u0636\u0627\u0641\u0629 \u0642\u0636\u064a\u0629 \u062f\u064a\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,S.jsx)("button",{onClick:()=>y(!1),style:{padding:"8px",background:"#F3F4F6",border:"none",borderRadius:"8px",cursor:"pointer"},children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px",color:"#6B7280"}})})]}),(0,S.jsx)("form",{onSubmit:e=>{e.preventDefault();const t=(0,i.A)((0,i.A)({id:a.length+1},R),{},{amount:parseFloat(R.amount)||0,paidAmount:parseFloat(R.paidAmount)||0,remainingAmount:parseFloat(R.amount)-parseFloat(R.paidAmount||0),contributors:0,priority:"high",tags:[q(R.type).label]});n([t,...a]),y(!1),B({title:"",type:"accident",amount:"",beneficiaryName:"",beneficiaryPhone:"",incidentDate:"",incidentHijriDate:"",location:"",description:"",status:"pending",paidAmount:"0",remainingAmount:"",collectorName:"",notes:""})},style:{flex:1,overflowY:"auto",padding:"32px",maxHeight:"calc(100vh - 160px)"},children:(0,S.jsxs)("div",{style:{display:"grid",gap:"20px"},children:[(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0642\u0636\u064a\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0642\u0636\u064a\u0629 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:R.title,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{title:e.target.value})),placeholder:"\u0645\u062b\u0627\u0644: \u062f\u064a\u0629 \u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a - \u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u064a\u0627\u0636",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0646\u0648\u0639 \u0627\u0644\u0642\u0636\u064a\u0629 *"}),(0,S.jsxs)("select",{required:!0,value:R.type,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{type:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"accident",children:"\u062d\u0627\u062f\u062b \u0645\u0631\u0648\u0631\u064a"}),(0,S.jsx)("option",{value:"manslaughter",children:"\u0642\u062a\u0644 \u062e\u0637\u0623"}),(0,S.jsx)("option",{value:"injury",children:"\u0625\u0635\u0627\u0628\u0629"}),(0,S.jsx)("option",{value:"work_accident",children:"\u062d\u0627\u062f\u062b \u0639\u0645\u0644"}),(0,S.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]}),(0,S.jsx)("div",{children:(0,S.jsx)(Z,{label:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062d\u0627\u062f\u062b\u0629",value:R.incidentDate,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{incidentDate:e})),required:!0})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u0643\u0627\u0646 *"}),(0,S.jsx)("input",{type:"text",required:!0,value:R.location,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{location:e.target.value})),placeholder:"\u0645\u062b\u0627\u0644: \u0637\u0631\u064a\u0642 \u0627\u0644\u0631\u064a\u0627\u0636 - \u0627\u0644\u062f\u0645\u0627\u0645",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsxs)("select",{value:R.status,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{status:e.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"},children:[(0,S.jsx)("option",{value:"pending",children:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629"}),(0,S.jsx)("option",{value:"in_progress",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0635\u064a\u0644"}),(0,S.jsx)("option",{value:"completed",children:"\u0645\u0643\u062a\u0645\u0644\u0629"}),(0,S.jsx)("option",{value:"cancelled",children:"\u0645\u0644\u063a\u064a\u0629"})]})]}),(0,S.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0648\u0635\u0641 \u0627\u0644\u0642\u0636\u064a\u0629"}),(0,S.jsx)("textarea",{value:R.description,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{description:e.target.value})),rows:"3",placeholder:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062d\u0627\u062f\u062b\u0629 \u0648\u0627\u0644\u0638\u0631\u0648\u0641...",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]})]})]}),(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062a\u0641\u064a\u062f *"}),(0,S.jsx)("input",{type:"text",required:!0,value:R.beneficiaryName,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{beneficiaryName:e.target.value})),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u062e\u0635 \u0623\u0648 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,S.jsx)("input",{type:"tel",value:R.beneficiaryPhone,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{beneficiaryPhone:e.target.value})),placeholder:"05xxxxxxxx",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]})]})]}),(0,S.jsxs)("div",{style:{background:"#F9FAFB",padding:"20px",borderRadius:"12px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"16px",color:"#374151"},children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629"}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0643\u0644\u064a (\u0631\u064a\u0627\u0644) *"}),(0,S.jsx)("input",{type:"number",required:!0,value:R.amount,onChange:e=>{return t=e.target.value,void B(e=>(0,i.A)((0,i.A)({},e),{},{amount:t,remainingAmount:t-(e.paidAmount||0)}));var t},style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062d\u0635\u0644"}),(0,S.jsx)("input",{type:"number",value:R.paidAmount,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{paidAmount:e.target.value,remainingAmount:(t.amount||0)-(e.target.value||0)})),style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"}),(0,S.jsx)("input",{type:"number",value:R.remainingAmount||R.amount-R.paidAmount||"",disabled:!0,style:{width:"100%",padding:"10px",border:"1px solid #E5E7EB",borderRadius:"8px",fontSize:"14px",background:"#F9FAFB",color:"#6B7280"}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644 \u0639\u0646 \u0627\u0644\u062a\u062d\u0635\u064a\u0644"}),(0,S.jsx)("input",{type:"text",value:R.collectorName,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{collectorName:e.target.value})),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u062e\u0635 \u0627\u0644\u0645\u0633\u0624\u0648\u0644",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px"}})]}),(0,S.jsxs)("div",{style:{gridColumn:"span 2"},children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",color:"#4B5563"},children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,S.jsx)("textarea",{value:R.notes,onChange:e=>B(t=>(0,i.A)((0,i.A)({},t),{},{notes:e.target.value})),rows:"2",placeholder:"\u0623\u064a \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0623\u0648 \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629...",style:{width:"100%",padding:"10px",border:"1px solid #D1D5DB",borderRadius:"8px",fontSize:"14px",resize:"vertical"}})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{type:"button",onClick:()=>y(!1),style:{padding:"10px 24px",background:"#F3F4F6",color:"#4B5563",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{type:"submit",style:{padding:"10px 24px",background:"linear-gradient(135deg, #3B82F6, #2563EB)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0642\u0636\u064a\u0629"})]})]})})]})}),F&&w&&(0,S.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},onClick:()=>T(!1),children:(0,S.jsxs)("div",{style:{background:"white",borderRadius:"20px",maxWidth:"1200px",width:"100%",maxHeight:"90vh",overflow:"auto",padding:"32px"},onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsxs)("h2",{style:{fontSize:"24px",fontWeight:"bold",color:"#1F2937",marginBottom:"8px"},children:[w.title," - \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u064a\u0646"]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"24px",fontSize:"14px",color:"#6B7280"},children:[(0,S.jsxs)("span",{children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u064a\u0646: ",(0,S.jsx)("strong",{children:_.length})]}),(0,S.jsxs)("span",{children:["\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a: ",(0,S.jsxs)("strong",{children:[w.paidAmount.toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("span",{children:["\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629: ",(0,S.jsxs)("strong",{children:[_.length>0?(w.paidAmount/_.length).toFixed(0):0," \u0631.\u0633"]})]})]})]}),(0,S.jsx)("button",{onClick:()=>T(!1),style:{padding:"8px",background:"#F3F4F6",border:"none",borderRadius:"8px",cursor:"pointer"},children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px",color:"#6B7280"}})})]}),(0,S.jsx)("div",{style:{background:"#F9FAFB",borderRadius:"12px",padding:"16px",marginBottom:"16px"},children:(0,S.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{style:{background:"#1F2937",color:"white"},children:[(0,S.jsx)("th",{style:{padding:"12px",textAlign:"right",borderRadius:"8px 0 0 0"},children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("th",{style:{padding:"12px",textAlign:"right"},children:"\u0627\u0644\u0627\u0633\u0645"}),(0,S.jsx)("th",{style:{padding:"12px",textAlign:"right"},children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("th",{style:{padding:"12px",textAlign:"right"},children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,S.jsx)("th",{style:{padding:"12px",textAlign:"right",borderRadius:"0 8px 0 0"},children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e"})]})}),(0,S.jsx)("tbody",{children:_.length>0?_.map((e,t)=>(0,S.jsxs)("tr",{style:{borderBottom:"1px solid #E5E7EB"},children:[(0,S.jsx)("td",{style:{padding:"12px",textAlign:"right"},children:e.membership_number}),(0,S.jsx)("td",{style:{padding:"12px",textAlign:"right",fontWeight:"500"},children:e.member_name}),(0,S.jsx)("td",{style:{padding:"12px",textAlign:"right"},children:e.tribal_section||"-"}),(0,S.jsxs)("td",{style:{padding:"12px",textAlign:"right",fontWeight:"bold",color:"#10B981"},children:[e.amount.toLocaleString("ar-SA")," \u0631.\u0633"]}),(0,S.jsx)("td",{style:{padding:"12px",textAlign:"right"},children:new Date(e.contribution_date).toLocaleDateString("ar-SA")})]},t)):(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:"5",style:{padding:"32px",textAlign:"center",color:"#9CA3AF"},children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0633\u0627\u0647\u0645\u0627\u062a \u062d\u0627\u0644\u064a\u0627\u064b"})})})]})}),(0,S.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:(0,S.jsx)("button",{onClick:()=>T(!1),style:{padding:"10px 20px",background:"#F3F4F6",border:"none",borderRadius:"8px",fontWeight:"600",cursor:"pointer"},children:"\u0625\u063a\u0644\u0627\u0642"})})]})})]})};var ue=a(3695),ge=a(8191),be=a(41),je=a(7619),fe=a(3375),ye=a(2013),ve=a(8793),Ne=a(9696);const we="\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...",Ae="\u0647\u0630\u0627 \u0627\u0644\u062d\u0642\u0644 \u0645\u0637\u0644\u0648\u0628",ke="\u0645\u0631\u0643\u0632 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a",Se="\u0625\u0646\u0634\u0627\u0621 \u0625\u0634\u0639\u0627\u0631 \u062c\u062f\u064a\u062f",_e="\u0645\u0631\u0634\u062d\u0627\u062a \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a",Ce="\u0625\u0631\u0633\u0627\u0644 \u0644\u0644\u062c\u0645\u064a\u0639",Fe="\u0625\u0631\u0633\u0627\u0644 \u0644\u0644\u0645\u062c\u0645\u0648\u0639\u0629",Te="\u0639\u0627\u0645",ze="\u0639\u0627\u062c\u0644",Re="\u062a\u0630\u0643\u064a\u0631",De="\u0625\u0639\u0644\u0627\u0646",Ie="\u0639\u0627\u0644\u064a\u0629",Be="\u0645\u062a\u0648\u0633\u0637\u0629",Ee="\u0645\u0646\u062e\u0641\u0636\u0629",Pe=e=>{let{notifications:t,onView:a,onEdit:n,onDelete:r,onMarkAsRead:l,loading:o=!1,currentPage:c=1,totalPages:d=1,onPageChange:p}=e;const[m,h]=(0,s.useState)([]),g=e=>{switch(e){case"general":return Te;case"urgent":return ze;case"reminder":return Re;case"announcement":return De;case"invitation":return"\u062f\u0639\u0648\u0629";case"payment":return"\u062f\u0641\u0639";case"system":return"\u0646\u0638\u0627\u0645";case"welcome":return"\u062a\u0631\u062d\u064a\u0628";default:return e}},b=e=>{switch(e){case"urgent":return ze;case"high":return Ie;case"medium":return Be;case"low":return Ee;default:return e}},f=e=>{switch(e){case"draft":return"\u0645\u0633\u0648\u062f\u0629";case"scheduled":return"\u0645\u062c\u062f\u0648\u0644";case"sending":return"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644";case"sent":return"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644";case"failed":return"\u0641\u0634\u0644";case"cancelled":return"\u0645\u0644\u063a\u064a";default:return e}},y=e=>{switch(e){case"all":return"\u0627\u0644\u062c\u0645\u064a\u0639";case"group":return"\u0645\u062c\u0645\u0648\u0639\u0629";case"role":return"\u062f\u0648\u0631";case"individual":return"\u0623\u0641\u0631\u0627\u062f";case"custom":return"\u0645\u062e\u0635\u0635";default:return e}},N=e=>new Intl.DateTimeFormat("ar-SA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(e),w={background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",overflow:"hidden",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",direction:"rtl"},A={padding:"6px 12px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},_={padding:"20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",background:"rgba(255, 255, 255, 0.3)"},C={display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"12px"},F={fontSize:"16px",fontWeight:"600",color:"#1f2937",marginBottom:"4px",lineHeight:"1.4"},T={display:"flex",gap:"12px",alignItems:"center",fontSize:"12px",color:"#6b7280",marginBottom:"8px",flexWrap:"wrap"},z={padding:"2px 6px",borderRadius:"8px",fontSize:"10px",fontWeight:"600",color:"white",display:"inline-flex",alignItems:"center",gap:"2px"},R={display:"flex",gap:"4px",alignItems:"center"},B={padding:"6px",border:"none",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},E={padding:"8px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"6px",background:"rgba(255, 255, 255, 0.8)",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},P=(0,i.A)((0,i.A)({},E),{},{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none"});return o?(0,S.jsx)("div",{style:w,children:(0,S.jsx)("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})}):(0,S.jsxs)("div",{style:w,children:[(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.6)",padding:"16px 20px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0},children:["\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a (",t.length,")"]}),m.length>0&&(0,S.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[(0,S.jsxs)("span",{style:{fontSize:"14px",color:"#6b7280"},children:[m.length," \u0645\u062d\u062f\u062f"]}),l&&(0,S.jsxs)("button",{style:(0,i.A)((0,i.A)({},A),{},{background:"#10b981",color:"white"}),onClick:()=>{m.forEach(e=>l(e)),h([])},children:[(0,S.jsx)(D.A,{style:{width:"14px",height:"14px",marginLeft:"4px"}}),"\u062a\u062d\u062f\u064a\u062f \u0643\u0645\u0642\u0631\u0648\u0621"]}),(0,S.jsxs)("button",{style:(0,i.A)((0,i.A)({},A),{},{background:"#ef4444",color:"white"}),onClick:()=>{m.forEach(e=>{const a=t.find(t=>t.id===e);a&&r(a)}),h([])},children:[(0,S.jsx)(O.A,{style:{width:"14px",height:"14px",marginLeft:"4px"}}),"\u062d\u0630\u0641"]})]})]}),t.length>0&&(0,S.jsxs)("div",{style:{padding:"12px 20px",background:"rgba(255, 255, 255, 0.4)",borderBottom:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)("input",{type:"checkbox",checked:m.length===t.length,onChange:()=>{m.length===t.length?h([]):h(t.map(e=>e.id))},style:{width:"16px",height:"16px"}}),(0,S.jsx)("span",{style:{fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u062a\u062d\u062f\u064a\u062f \u0627\u0644\u0643\u0644"})]}),(0,S.jsx)("div",{children:t.length>0?t.map(e=>{const t=(e=>{switch(e){case"urgent":return I.A;case"reminder":return v.A;case"announcement":case"welcome":return be.A;case"invitation":return je.A;case"payment":return j.A;default:return fe.A}})(e.type),s=(e=>{switch(e){case"urgent":return"#ef4444";case"reminder":return"#f59e0b";case"announcement":return"#3b82f6";case"invitation":return"#8b5cf6";case"payment":return"#10b981";case"system":default:return"#6b7280";case"welcome":return"#f97316"}})(e.type),l=(e=>{switch(e){case"urgent":return"#dc2626";case"high":return"#f59e0b";case"medium":return"#3b82f6";case"low":return"#10b981";default:return"#6b7280"}})(e.priority),o=(e=>{switch(e){case"sent":return"#10b981";case"scheduled":return"#3b82f6";case"sending":return"#f59e0b";case"failed":return"#ef4444";case"cancelled":default:return"#6b7280";case"draft":return"#8b5cf6"}})(e.status),c=(e=>0===e.totalRecipients?0:Math.round(e.readCount/e.totalRecipients*100))(e);return(0,S.jsx)("div",{style:_,onMouseEnter:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(255, 255, 255, 0.3)"},children:(0,S.jsxs)("div",{style:C,children:[(0,S.jsx)("div",{style:{flex:1},children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"12px"},children:[(0,S.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>{return t=e.id,void h(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},style:{width:"16px",height:"16px",marginTop:"2px"}}),(0,S.jsxs)("div",{style:{flex:1},children:[(0,S.jsx)("h4",{style:F,children:e.title}),(0,S.jsxs)("div",{style:T,children:[(0,S.jsxs)("span",{style:(0,i.A)((0,i.A)({},z),{},{background:s}),children:[(0,S.jsx)(t,{style:{width:"12px",height:"12px"}}),g(e.type)]}),(0,S.jsx)("span",{style:(0,i.A)((0,i.A)({},z),{},{background:l}),children:b(e.priority)}),(0,S.jsx)("span",{style:(0,i.A)((0,i.A)({},z),{},{background:o}),children:f(e.status)}),(0,S.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[(0,S.jsx)(x.A,{style:{width:"12px",height:"12px"}}),y(e.recipientType)]}),(0,S.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"2px"},children:[(0,S.jsx)(u.A,{style:{width:"12px",height:"12px"}}),e.sentDate?N(e.sentDate):e.scheduledDate?"\u0645\u062c\u062f\u0648\u0644: ".concat(N(e.scheduledDate)):N(e.createdDate)]})]}),(0,S.jsx)("p",{style:{fontSize:"14px",color:"#6b7280",lineHeight:"1.5",margin:"0 0 12px 0"},children:e.message.length>150?"".concat(e.message.substring(0,150),"..."):e.message}),(0,S.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",fontSize:"12px",color:"#6b7280"},children:[(0,S.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,S.jsx)(x.A,{style:{width:"14px",height:"14px"}}),e.totalRecipients," \u0645\u0633\u062a\u0642\u0628\u0644"]}),"sent"===e.status&&(0,S.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"4px",color:c>50?"#10b981":"#f59e0b"},children:[(0,S.jsx)(ye.A,{style:{width:"14px",height:"14px"}}),e.readCount," \u0642\u0631\u0623\u0648\u0627 (",c,"%)"]}),(0,S.jsxs)("span",{children:["\u0628\u0648\u0627\u0633\u0637\u0629: ",e.senderName]}),e.tags.length>0&&(0,S.jsxs)("span",{children:["\u0627\u0644\u0639\u0644\u0627\u0645\u0627\u062a: ",e.tags.join(", ")]})]})]})]})}),(0,S.jsxs)("div",{style:R,children:[(0,S.jsx)("button",{style:(0,i.A)((0,i.A)({},B),{},{background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6"}),onClick:()=>a(e),title:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644",onMouseEnter:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:(0,S.jsx)(M.A,{style:{width:"16px",height:"16px"}})}),"draft"===e.status&&(0,S.jsx)("button",{style:(0,i.A)((0,i.A)({},B),{},{background:"rgba(16, 185, 129, 0.1)",color:"#10b981"}),onClick:()=>n(e),title:"\u062a\u0639\u062f\u064a\u0644",onMouseEnter:e=>{e.currentTarget.style.background="rgba(16, 185, 129, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(16, 185, 129, 0.1)"},children:(0,S.jsx)(ve.A,{style:{width:"16px",height:"16px"}})}),(0,S.jsx)("button",{style:(0,i.A)((0,i.A)({},B),{},{background:"rgba(239, 68, 68, 0.1)",color:"#ef4444"}),onClick:()=>r(e),title:"\u062d\u0630\u0641",onMouseEnter:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(239, 68, 68, 0.1)"},children:(0,S.jsx)(O.A,{style:{width:"16px",height:"16px"}})})]})]})},e.id)}):(0,S.jsxs)("div",{style:{padding:"40px",textAlign:"center",color:"#6b7280"},children:[(0,S.jsx)(j.A,{style:{width:"48px",height:"48px",margin:"0 auto 16px",opacity:.5}}),(0,S.jsx)("h3",{style:{margin:"0 0 8px 0",fontSize:"18px"},children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a"}),(0,S.jsx)("p",{style:{margin:0,fontSize:"14px"},children:"\u0644\u0645 \u064a\u062a\u0645 \u0625\u0646\u0634\u0627\u0621 \u0623\u064a \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0628\u0639\u062f"})]})}),d>1&&p&&(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"8px",padding:"16px",background:"rgba(255, 255, 255, 0.6)",borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,S.jsx)("button",{style:(0,i.A)((0,i.A)({},E),{},{opacity:1===c?.5:1,cursor:1===c?"not-allowed":"pointer"}),onClick:()=>c>1&&p(c-1),disabled:1===c,children:(0,S.jsx)(Ne.A,{style:{width:"16px",height:"16px"}})}),Array.from({length:d},(e,t)=>t+1).map(e=>(0,S.jsx)("button",{style:e===c?P:E,onClick:()=>p(e),children:e},e)),(0,S.jsx)("button",{style:(0,i.A)((0,i.A)({},E),{},{opacity:c===d?.5:1,cursor:c===d?"not-allowed":"pointer"}),onClick:()=>c<d&&p(c+1),disabled:c===d,children:(0,S.jsx)(k.A,{style:{width:"16px",height:"16px"}})})]})]})};var Le=a(1465);const Me=[{value:"general",label:Te,icon:fe.A,color:"#6b7280"},{value:"urgent",label:ze,icon:I.A,color:"#ef4444"},{value:"reminder",label:Re,icon:v.A,color:"#f59e0b"},{value:"announcement",label:De,icon:be.A,color:"#3b82f6"},{value:"invitation",label:"\u062f\u0639\u0648\u0629",icon:je.A,color:"#8b5cf6"},{value:"payment",label:"\u062f\u0641\u0639",icon:j.A,color:"#10b981"},{value:"system",label:"\u0646\u0638\u0627\u0645",icon:fe.A,color:"#6b7280"},{value:"welcome",label:"\u062a\u0631\u062d\u064a\u0628",icon:be.A,color:"#f97316"}],We=[{value:"low",label:Ee,color:"#10b981"},{value:"medium",label:Be,color:"#3b82f6"},{value:"high",label:Ie,color:"#f59e0b"},{value:"urgent",label:ze,color:"#ef4444"}],Oe=[{value:"all",label:Ce,description:"\u0625\u0631\u0633\u0627\u0644 \u0644\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"},{value:"group",label:Fe,description:"\u0625\u0631\u0633\u0627\u0644 \u0644\u0645\u062c\u0645\u0648\u0639\u0629 \u0645\u062d\u062f\u062f\u0629"},{value:"role",label:"\u062d\u0633\u0628 \u0627\u0644\u062f\u0648\u0631",description:"\u0625\u0631\u0633\u0627\u0644 \u062d\u0633\u0628 \u062f\u0648\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"},{value:"individual",label:"\u0623\u0641\u0631\u0627\u062f \u0645\u062d\u062f\u062f\u064a\u0646",description:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0623\u0639\u0636\u0627\u0621 \u0645\u062d\u062f\u062f\u064a\u0646"},{value:"custom",label:"\u0645\u062e\u0635\u0635",description:"\u062a\u062d\u062f\u064a\u062f \u0645\u0639\u0627\u064a\u064a\u0631 \u0645\u062e\u0635\u0635\u0629"}],qe=e=>{let{isOpen:t,onClose:a,onSubmit:n,isLoading:r=!1,groups:l=[],roles:o=[],members:c=[]}=e;const[d,p]=(0,s.useState)({title:"",message:"",type:"general",priority:"medium",recipientType:"all",selectedRecipients:[],selectedGroups:[],selectedRoles:[],scheduledDate:"",scheduledTime:"",tags:[],attachments:[]}),[m,h]=(0,s.useState)(""),[g,b]=(0,s.useState)({}),[j,f]=(0,s.useState)(!1);if(!t)return null;const y=()=>{m.trim()&&!d.tags.includes(m.trim())&&(p(e=>(0,i.A)((0,i.A)({},e),{},{tags:[...e.tags,m.trim()]})),h(""))},N=(w=d.type,Me.find(e=>e.value===w)||Me[0]);var w;const k=(_=d.priority,We.find(e=>e.value===_)||We[0]);var _;const C=N.icon,F={marginBottom:"20px"},T={display:"block",fontSize:"14px",fontWeight:"600",color:"#374151",marginBottom:"6px"},z={width:"100%",padding:"12px 16px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"12px",fontSize:"14px",background:"rgba(255, 255, 255, 0.8)",backdropFilter:"blur(10px)",outline:"none",transition:"all 0.2s ease",fontFamily:"inherit",direction:"rtl"},R=(0,i.A)((0,i.A)({},z),{},{minHeight:"100px",resize:"vertical"}),D=(0,i.A)((0,i.A)({},z),{},{cursor:"pointer"}),I={color:"#ef4444",fontSize:"12px",marginTop:"4px"},B={padding:"12px 8px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",textAlign:"center",fontSize:"12px",fontWeight:"600",background:"rgba(255, 255, 255, 0.8)"},E={padding:"12px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"8px",cursor:"pointer",transition:"all 0.2s ease",background:"rgba(255, 255, 255, 0.8)"};return(0,S.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:a,children:(0,S.jsxs)("div",{style:{background:"linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.8) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"20px",padding:"32px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 25px 50px rgba(0, 0, 0, 0.25)",direction:"rtl"},onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px",paddingBottom:"16px",borderBottom:"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,S.jsxs)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1f2937",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(C,{style:{width:"28px",height:"28px",color:N.color}}),Se]}),(0,S.jsx)("button",{style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"8px",transition:"background 0.2s ease"},onClick:a,onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.background="none"},children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px"}})})]}),(0,S.jsx)("button",{style:{padding:"8px 16px",background:"rgba(59, 130, 246, 0.1)",color:"#3b82f6",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginBottom:"16px"},onClick:()=>f(!j),children:j?"\u0648\u0636\u0639 \u0627\u0644\u062a\u062d\u0631\u064a\u0631":"\u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0625\u0634\u0639\u0627\u0631"}),j?(0,S.jsxs)("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"12px",padding:"16px",marginBottom:"20px"},children:[(0,S.jsxs)("h4",{style:{margin:"0 0 8px 0",color:N.color,display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(C,{style:{width:"20px",height:"20px"}}),d.title||"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0625\u0634\u0639\u0627\u0631"]}),(0,S.jsx)("p",{style:{margin:"0 0 12px 0",lineHeight:"1.5"},children:d.message||"\u0646\u0635 \u0627\u0644\u0625\u0634\u0639\u0627\u0631..."}),(0,S.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#6b7280"},children:[(0,S.jsx)("span",{style:{background:k.color,color:"white",padding:"2px 6px",borderRadius:"8px",fontSize:"10px"},children:k.label}),(0,S.jsx)("span",{children:N.label}),d.tags.length>0&&(0,S.jsxs)("span",{children:["\u2022 ",d.tags.join(", ")]})]})]}):(0,S.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{var e,t;const a={};return d.title.trim()||(a.title=Ae),d.message.trim()||(a.message=Ae),"group"===d.recipientType&&0===(null===(e=d.selectedGroups)||void 0===e?void 0:e.length)&&(a.recipients="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u062c\u0645\u0648\u0639\u0629 \u0648\u0627\u062d\u062f\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),"role"===d.recipientType&&0===(null===(t=d.selectedRoles)||void 0===t?void 0:t.length)&&(a.recipients="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u062f\u0648\u0631 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),"individual"===d.recipientType&&0===d.selectedRecipients.length&&(a.recipients="\u064a\u062c\u0628 \u0627\u062e\u062a\u064a\u0627\u0631 \u0639\u0636\u0648 \u0648\u0627\u062d\u062f \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),d.scheduledDate&&!d.scheduledTime&&(a.scheduledTime="\u064a\u062c\u0628 \u062a\u062d\u062f\u064a\u062f \u0648\u0642\u062a \u0627\u0644\u0625\u0631\u0633\u0627\u0644"),b(a),0===Object.keys(a).length})()&&n(d)},children:[(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 *"}),(0,S.jsx)("input",{type:"text",style:(0,i.A)((0,i.A)({},z),{},{borderColor:g.title?"#ef4444":"rgba(0, 0, 0, 0.2)"}),value:d.title,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{title:e.target.value})),placeholder:"\u0639\u0646\u0648\u0627\u0646 \u0645\u062e\u062a\u0635\u0631 \u0648\u0648\u0627\u0636\u062d \u0644\u0644\u0625\u0634\u0639\u0627\u0631"}),g.title&&(0,S.jsx)("div",{style:I,children:g.title})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0646\u0635 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 *"}),(0,S.jsx)("textarea",{style:(0,i.A)((0,i.A)({},R),{},{borderColor:g.message?"#ef4444":"rgba(0, 0, 0, 0.2)"}),value:d.message,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{message:e.target.value})),placeholder:"\u0627\u0644\u0645\u062d\u062a\u0648\u0649 \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a \u0644\u0644\u0625\u0634\u0639\u0627\u0631..."}),g.message&&(0,S.jsx)("div",{style:I,children:g.message})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0646\u0648\u0639 \u0627\u0644\u0625\u0634\u0639\u0627\u0631"}),(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"8px",marginTop:"8px"},children:Me.map(e=>{const t=e.icon,a=d.type===e.value;return(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},B),{},{background:a?"".concat(e.color,"15"):"rgba(255, 255, 255, 0.8)",borderColor:a?e.color:"rgba(0, 0, 0, 0.2)",color:a?e.color:"#374151"}),onClick:()=>p(t=>(0,i.A)((0,i.A)({},t),{},{type:e.value})),children:[(0,S.jsx)(t,{style:{width:"20px",height:"20px",margin:"0 auto 4px"}}),(0,S.jsx)("div",{children:e.label})]},e.value)})})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"8px",marginTop:"8px"},children:We.map(e=>{const t=d.priority===e.value;return(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},B),{},{background:t?"".concat(e.color,"15"):"rgba(255, 255, 255, 0.8)",borderColor:t?e.color:"rgba(0, 0, 0, 0.2)",color:t?e.color:"#374151"}),onClick:()=>p(t=>(0,i.A)((0,i.A)({},t),{},{priority:e.value})),children:e.label},e.value)})})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsxs)("label",{style:T,children:[(0,S.jsx)(x.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644\u0648\u0646 *"]}),(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"8px",marginTop:"8px"},children:Oe.map(e=>{const t=d.recipientType===e.value;return(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},E),{},{background:t?"rgba(102, 126, 234, 0.1)":"rgba(255, 255, 255, 0.8)",borderColor:t?"#667eea":"rgba(0, 0, 0, 0.2)"}),onClick:()=>p(t=>(0,i.A)((0,i.A)({},t),{},{recipientType:e.value})),children:[(0,S.jsx)("div",{style:{fontWeight:"600",marginBottom:"4px"},children:e.label}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6b7280"},children:e.description})]},e.value)})}),g.recipients&&(0,S.jsx)("div",{style:I,children:g.recipients})]}),"group"===d.recipientType&&(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0645\u062c\u0645\u0648\u0639\u0627\u062a"}),(0,S.jsx)("select",{multiple:!0,style:(0,i.A)((0,i.A)({},D),{},{minHeight:"100px"}),value:d.selectedGroups,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);p(e=>(0,i.A)((0,i.A)({},e),{},{selectedGroups:t}))},children:l.map(e=>(0,S.jsxs)("option",{value:e.id,children:[e.name," (",e.memberCount," \u0639\u0636\u0648)"]},e.id))})]}),"role"===d.recipientType&&(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0623\u062f\u0648\u0627\u0631"}),(0,S.jsx)("select",{multiple:!0,style:(0,i.A)((0,i.A)({},D),{},{minHeight:"100px"}),value:d.selectedRoles,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);p(e=>(0,i.A)((0,i.A)({},e),{},{selectedRoles:t}))},children:o.map(e=>(0,S.jsxs)("option",{value:e.id,children:[e.name," (",e.memberCount," \u0639\u0636\u0648)"]},e.id))})]}),"individual"===d.recipientType&&(0,S.jsxs)("div",{style:F,children:[(0,S.jsx)("label",{style:T,children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"}),(0,S.jsx)("select",{multiple:!0,style:(0,i.A)((0,i.A)({},D),{},{minHeight:"150px"}),value:d.selectedRecipients,onChange:e=>{const t=Array.from(e.target.selectedOptions,e=>e.value);p(e=>(0,i.A)((0,i.A)({},e),{},{selectedRecipients:t}))},children:c.map(e=>(0,S.jsxs)("option",{value:e.id,children:[e.name," ",e.email&&"(".concat(e.email,")")]},e.id))})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,S.jsxs)("div",{style:F,children:[(0,S.jsxs)("label",{style:T,children:[(0,S.jsx)(u.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0631\u0633\u0627\u0644 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"]}),(0,S.jsx)("input",{type:"date",style:z,value:d.scheduledDate,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{scheduledDate:e.target.value}))})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsxs)("label",{style:T,children:[(0,S.jsx)(v.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0648\u0642\u062a \u0627\u0644\u0625\u0631\u0633\u0627\u0644"]}),(0,S.jsx)("input",{type:"time",style:(0,i.A)((0,i.A)({},z),{},{borderColor:g.scheduledTime?"#ef4444":"rgba(0, 0, 0, 0.2)"}),value:d.scheduledTime,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{scheduledTime:e.target.value}))}),g.scheduledTime&&(0,S.jsx)("div",{style:I,children:g.scheduledTime})]})]}),(0,S.jsxs)("div",{style:F,children:[(0,S.jsxs)("label",{style:T,children:[(0,S.jsx)(Le.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0627\u0644\u0639\u0644\u0627\u0645\u0627\u062a"]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"8px"},children:[(0,S.jsx)("input",{type:"text",style:(0,i.A)((0,i.A)({},z),{},{flex:1}),value:m,onChange:e=>h(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),y())},placeholder:"\u0623\u0636\u0641 \u0639\u0644\u0627\u0645\u0629 \u062c\u062f\u064a\u062f\u0629"}),(0,S.jsx)("button",{type:"button",style:{padding:"8px 16px",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},onClick:y,children:"\u0625\u0636\u0627\u0641\u0629"})]}),d.tags.length>0&&(0,S.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px"},children:d.tags.map((e,t)=>(0,S.jsxs)("span",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},children:[e,(0,S.jsx)("button",{type:"button",onClick:()=>{return t=e,void p(e=>(0,i.A)((0,i.A)({},e),{},{tags:e.tags.filter(e=>e!==t)}));var t},style:{background:"none",border:"none",color:"white",cursor:"pointer",padding:"0",fontSize:"14px"},children:"\xd7"})]},t))})]}),(0,S.jsx)("button",{type:"submit",style:{width:"100%",padding:"14px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",marginTop:"20px"},disabled:r,children:r?we:d.scheduledDate?"\u062c\u062f\u0648\u0644\u0629 \u0627\u0644\u0625\u0631\u0633\u0627\u0644":"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0622\u0646"})]})]})})},He=[{value:"general",label:Te},{value:"urgent",label:ze},{value:"reminder",label:Re},{value:"announcement",label:De},{value:"invitation",label:"\u062f\u0639\u0648\u0629"},{value:"payment",label:"\u062f\u0641\u0639"},{value:"system",label:"\u0646\u0638\u0627\u0645"},{value:"welcome",label:"\u062a\u0631\u062d\u064a\u0628"}],Ue=[{value:"low",label:Ee},{value:"medium",label:Be},{value:"high",label:Ie},{value:"urgent",label:ze}],Xe=[{value:"draft",label:"\u0645\u0633\u0648\u062f\u0629"},{value:"scheduled",label:"\u0645\u062c\u062f\u0648\u0644"},{value:"sending",label:"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644"},{value:"sent",label:"\u062a\u0645 \u0627\u0644\u0625\u0631\u0633\u0627\u0644"},{value:"failed",label:"\u0641\u0634\u0644"},{value:"cancelled",label:"\u0645\u0644\u063a\u064a"}],Ye=[{value:"all",label:"\u0627\u0644\u062c\u0645\u064a\u0639"},{value:"group",label:"\u0645\u062c\u0645\u0648\u0639\u0629"},{value:"role",label:"\u062f\u0648\u0631"},{value:"individual",label:"\u0623\u0641\u0631\u0627\u062f"},{value:"custom",label:"\u0645\u062e\u0635\u0635"}],Je=e=>{var t,a,s,n,r,l;let{filters:o,onFiltersChange:c,onClearFilters:d,className:p=""}=e;const x=(e,t)=>{c((0,i.A)((0,i.A)({},o),{},{[e]:t}))},m=(e,t)=>{const a=o.dateRange||{start:new Date,end:new Date};c((0,i.A)((0,i.A)({},o),{},{dateRange:(0,i.A)((0,i.A)({},a),{},{[e]:t?new Date(t):void 0})}))},h=Object.values(o).some(e=>void 0!==e&&""!==e&&("object"!==typeof e||null===e||Object.values(e).some(e=>void 0!==e))),g={padding:"6px 12px",background:h?"#ef4444":"rgba(107, 114, 128, 0.1)",color:h?"white":"#6b7280",border:"none",borderRadius:"8px",fontSize:"12px",fontWeight:"600",cursor:h?"pointer":"not-allowed",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px"},b={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"16px"},j={display:"flex",flexDirection:"column",gap:"6px"},f={fontSize:"14px",fontWeight:"600",color:"#374151"},y={padding:"8px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.8)",cursor:"pointer",outline:"none"},v={padding:"8px 12px",border:"1px solid rgba(0, 0, 0, 0.2)",borderRadius:"8px",fontSize:"14px",background:"rgba(255, 255, 255, 0.8)",outline:"none",direction:"rtl"},N={display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",background:"rgba(102, 126, 234, 0.1)",color:"#667eea",borderRadius:"12px",fontSize:"12px",fontWeight:"600"};return(0,S.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"20px",direction:"rtl"},className:p,children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,S.jsxs)("h3",{style:{fontSize:"18px",fontWeight:"700",color:"#1f2937",margin:0,display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(ue.A,{style:{width:"20px",height:"20px"}}),_e]}),(0,S.jsxs)("button",{style:g,onClick:d,disabled:!h,onMouseEnter:e=>{h&&(e.currentTarget.style.background="#dc2626")},onMouseLeave:e=>{h&&(e.currentTarget.style.background="#ef4444")},children:[(0,S.jsx)(A.A,{style:{width:"14px",height:"14px"}}),"\u0645\u0633\u062d \u0627\u0644\u0641\u0644\u0627\u062a\u0631"]})]}),(0,S.jsxs)("div",{style:b,children:[(0,S.jsxs)("div",{style:j,children:[(0,S.jsx)("label",{style:f,children:"\u0646\u0648\u0639 \u0627\u0644\u0625\u0634\u0639\u0627\u0631"}),(0,S.jsxs)("select",{style:y,value:o.type||"",onChange:e=>x("type",e.target.value||void 0),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),He.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,S.jsxs)("div",{style:j,children:[(0,S.jsx)("label",{style:f,children:"\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629"}),(0,S.jsxs)("select",{style:y,value:o.priority||"",onChange:e=>x("priority",e.target.value||void 0),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0627\u062a"}),Ue.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,S.jsxs)("div",{style:j,children:[(0,S.jsx)("label",{style:f,children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsxs)("select",{style:y,value:o.status||"",onChange:e=>x("status",e.target.value||void 0),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),Xe.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,S.jsxs)("div",{style:j,children:[(0,S.jsx)("label",{style:f,children:"\u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644"}),(0,S.jsxs)("select",{style:y,value:o.recipientType||"",onChange:e=>x("recipientType",e.target.value||void 0),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0646\u0648\u0627\u0639"}),Ye.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,S.jsxs)("div",{style:b,children:[(0,S.jsxs)("div",{style:j,children:[(0,S.jsxs)("label",{style:f,children:[(0,S.jsx)(u.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0645\u0646 \u062a\u0627\u0631\u064a\u062e"]}),(0,S.jsx)("input",{type:"date",style:v,value:null!==(t=o.dateRange)&&void 0!==t&&t.start?o.dateRange.start.toISOString().split("T")[0]:"",onChange:e=>m("start",e.target.value)})]}),(0,S.jsxs)("div",{style:j,children:[(0,S.jsxs)("label",{style:f,children:[(0,S.jsx)(u.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0625\u0644\u0649 \u062a\u0627\u0631\u064a\u062e"]}),(0,S.jsx)("input",{type:"date",style:v,value:null!==(a=o.dateRange)&&void 0!==a&&a.end?o.dateRange.end.toISOString().split("T")[0]:"",onChange:e=>m("end",e.target.value)})]}),(0,S.jsxs)("div",{style:j,children:[(0,S.jsxs)("label",{style:f,children:[(0,S.jsx)(Le.A,{style:{width:"16px",height:"16px",display:"inline",marginLeft:"4px"}}),"\u0627\u0644\u0628\u062d\u062b"]}),(0,S.jsx)("input",{type:"text",style:v,value:o.search||"",onChange:e=>x("search",e.target.value||void 0),placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0623\u0648 \u0627\u0644\u0645\u062d\u062a\u0648\u0649..."})]})]}),(0,S.jsx)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",cursor:"pointer"},onClick:()=>x("unreadOnly",!o.unreadOnly),children:[(0,S.jsx)("input",{type:"checkbox",checked:o.unreadOnly||!1,onChange:()=>{},style:{width:"16px",height:"16px"}}),(0,S.jsx)(ye.A,{style:{width:"16px",height:"16px",color:"#6b7280"}}),(0,S.jsx)("span",{children:"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621 \u0641\u0642\u0637"})]})}),h&&(0,S.jsxs)("div",{style:{marginTop:"16px",paddingTop:"16px",borderTop:"1px solid rgba(0, 0, 0, 0.1)"},children:[(0,S.jsx)("div",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"\u0627\u0644\u0641\u0644\u0627\u062a\u0631 \u0627\u0644\u0646\u0634\u0637\u0629:"}),(0,S.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[o.type&&(0,S.jsxs)("span",{style:N,children:["\u0627\u0644\u0646\u0648\u0639: ",null===(s=He.find(e=>e.value===o.type))||void 0===s?void 0:s.label]}),o.priority&&(0,S.jsxs)("span",{style:N,children:["\u0627\u0644\u0623\u0648\u0644\u0648\u064a\u0629: ",null===(n=Ue.find(e=>e.value===o.priority))||void 0===n?void 0:n.label]}),o.status&&(0,S.jsxs)("span",{style:N,children:["\u0627\u0644\u062d\u0627\u0644\u0629: ",null===(r=Xe.find(e=>e.value===o.status))||void 0===r?void 0:r.label]}),o.recipientType&&(0,S.jsxs)("span",{style:N,children:["\u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644: ",null===(l=Ye.find(e=>e.value===o.recipientType))||void 0===l?void 0:l.label]}),o.search&&(0,S.jsxs)("span",{style:N,children:['\u0627\u0644\u0628\u062d\u062b: "',o.search,'"']}),o.unreadOnly&&(0,S.jsxs)("span",{style:N,children:[(0,S.jsx)(ye.A,{style:{width:"12px",height:"12px"}}),"\u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621 \u0641\u0642\u0637"]}),o.dateRange&&(o.dateRange.start||o.dateRange.end)&&(0,S.jsxs)("span",{style:N,children:[(0,S.jsx)(u.A,{style:{width:"12px",height:"12px"}}),"\u0641\u062a\u0631\u0629 \u0632\u0645\u0646\u064a\u0629"]})]})]})]})},Ge=e=>{let{count:t,maxCount:a=99,showZero:n=!1,size:i="medium",color:r="#ef4444",onClick:l,className:o=""}=e;const c=t>a?"".concat(a,"+"):t.toString(),d=t>0||n,p=(()=>{switch(i){case"small":return{iconSize:"20px",badgeSize:"16px",badgePosition:{top:"-4px",left:"-4px"},fontSize:"10px",minWidth:"16px"};case"large":return{iconSize:"32px",badgeSize:"20px",badgePosition:{top:"-6px",left:"-6px"},fontSize:"12px",minWidth:"20px"};default:return{iconSize:"24px",badgeSize:"18px",badgePosition:{top:"-5px",left:"-5px"},fontSize:"11px",minWidth:"18px"}}})(),x={position:"relative",display:"inline-flex",alignItems:"center",justifyContent:"center",cursor:l?"pointer":"default",transition:"all 0.2s ease"},m={width:p.iconSize,height:p.iconSize,color:"#6b7280",transition:"color 0.2s ease"},h={position:"absolute",top:p.badgePosition.top,left:p.badgePosition.left,minWidth:p.minWidth,height:p.badgeSize,background:r,color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:p.fontSize,fontWeight:"600",padding:"0 4px",border:"2px solid white",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",animation:t>0?"notification-pulse 2s infinite":"none"};s.useMemo(()=>{const e=document.createElement("style");return e.textContent="\n      @keyframes notification-pulse {\n        0% { transform: scale(1); }\n        50% { transform: scale(1.1); }\n        100% { transform: scale(1); }\n      }\n      @keyframes notification-shake {\n        0%, 100% { transform: translateX(0); }\n        25% { transform: translateX(-2px); }\n        75% { transform: translateX(2px); }\n      }\n    ",document.head.appendChild(e),()=>document.head.removeChild(e)},[]);return(0,S.jsxs)("div",{style:x,onClick:()=>{if(l){const e=document.querySelector(".notification-badge-".concat(o));e&&(e.style.animation="notification-shake 0.5s ease-in-out",setTimeout(()=>{e.style.animation=""},500)),l()}},className:"notification-badge-".concat(o),onMouseEnter:e=>{if(l){e.currentTarget.style.transform="scale(1.05)";const t=e.currentTarget.querySelector("svg");t&&(t.style.color=r)}},onMouseLeave:e=>{if(l){e.currentTarget.style.transform="scale(1)";const t=e.currentTarget.querySelector("svg");t&&(t.style.color="#6b7280")}},children:[(0,S.jsx)(j.A,{style:m}),d&&(0,S.jsx)("div",{style:h,onAnimationEnd:e=>{0===t&&(e.currentTarget.style.animation="none")},children:c})]})},Ve={0:"\u0660",1:"\u0661",2:"\u0662",3:"\u0663",4:"\u0664",5:"\u0665",6:"\u0666",7:"\u0667",8:"\u0668",9:"\u0669"},Ze=e=>e.toString().replace(/[0-9]/g,e=>Ve[e]||e),$e=e=>{const t=new Intl.NumberFormat("ar-SA").format(e);return Ze(t)},Ke=e=>{const t=Math.round(e);return"".concat(Ze(t),"%")},Qe=475,et=640,tt=768,at=1024,st=1280,nt=()=>{if("undefined"===typeof window)return"lg";const e=window.innerWidth;return e<Qe?"xs":e<et?"sm":e<tt?"md":e<at?"lg":e<st?"xl":"2xl"},it=e=>({minHeight:e?"44px":"auto",minWidth:e?"44px":"auto",padding:e?"12px 16px":"8px 12px",fontSize:e?"16px":"14px",WebkitTapHighlightColor:"transparent",touchAction:"manipulation"}),rt=(e,t)=>{switch(e){case"xs":return t.xs||"12px";case"sm":return t.sm||t.xs||"16px";case"md":return t.md||t.sm||"20px";case"lg":case"xl":case"2xl":return t.lg||t.md||"24px";default:return"16px"}},lt={fadeIn:{duration:300,easing:"ease-out",fillMode:"forwards"},slideUp:{duration:400,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fillMode:"forwards"},slideDown:{duration:400,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fillMode:"forwards"},slideLeft:{duration:300,easing:"ease-out",fillMode:"forwards"},slideRight:{duration:300,easing:"ease-out",fillMode:"forwards"},scaleIn:{duration:200,easing:"cubic-bezier(0.34, 1.56, 0.64, 1)",fillMode:"forwards"},scaleOut:{duration:150,easing:"ease-in",fillMode:"forwards"},pulse:{duration:1e3,easing:"ease-in-out",iterationCount:"infinite"},bounce:{duration:600,easing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",fillMode:"forwards"},shake:{duration:500,easing:"ease-in-out"},rotate:{duration:1e3,easing:"linear",iterationCount:"infinite"}},ot=(e,t)=>{const a=lt[e],s=(0,i.A)((0,i.A)({},a),t);return{animation:"".concat(e," ").concat(s.duration,"ms ").concat(s.easing||"ease"," ").concat(s.delay||0,"ms ").concat(s.iterationCount||1," ").concat(s.fillMode||"forwards")}},ct=[{id:"1",title:"\u0625\u0634\u0639\u0627\u0631 \u0639\u0627\u062c\u0644 - \u0627\u062c\u062a\u0645\u0627\u0639 \u0645\u062c\u0644\u0633 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",message:"\u064a\u0631\u062c\u0649 \u062d\u0636\u0648\u0631 \u0627\u062c\u062a\u0645\u0627\u0639 \u0645\u062c\u0644\u0633 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0637\u0627\u0631\u0626 \u063a\u062f\u0627\u064b \u0627\u0644\u0633\u0627\u0639\u0629 3 \u0639\u0635\u0631\u0627\u064b \u0641\u064a \u0645\u0643\u062a\u0628 \u0627\u0644\u0625\u062f\u0627\u0631\u0629. \u0633\u064a\u062a\u0645 \u0645\u0646\u0627\u0642\u0634\u0629 \u0623\u0645\u0648\u0631 \u0645\u0647\u0645\u0629 \u062a\u062e\u0635 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0639\u0636\u0627\u0621.",type:"urgent",priority:"urgent",status:"sent",recipientType:"all",recipients:[],senderId:"admin1",senderName:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",sentDate:new Date("2024-02-20T10:00:00"),readCount:45,totalRecipients:67,tags:["\u0627\u062c\u062a\u0645\u0627\u0639","\u0639\u0627\u062c\u0644","\u0645\u062c\u0644\u0633"],relatedEntity:{type:"occasion",id:"meeting-1",title:"\u0627\u062c\u062a\u0645\u0627\u0639 \u0645\u062c\u0644\u0633 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"},createdDate:new Date("2024-02-20T09:30:00"),updatedDate:new Date("2024-02-20T09:30:00")},{id:"2",title:"\u062a\u0630\u0643\u064a\u0631 \u0628\u062f\u0641\u0639 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",message:"\u062a\u0630\u0643\u064a\u0631 \u0648\u062f\u064a \u0628\u0623\u0646 \u0645\u0648\u0639\u062f \u062f\u0641\u0639 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a \u064a\u062d\u0644 \u062e\u0644\u0627\u0644 3 \u0623\u064a\u0627\u0645. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0643\u0631\u0645 \u0628\u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0645\u0628\u0644\u063a \u0641\u064a \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u0645\u062d\u062f\u062f.",type:"reminder",priority:"medium",status:"sent",recipientType:"group",recipients:[],senderId:"finance1",senderName:"\u0642\u0633\u0645 \u0627\u0644\u0645\u0627\u0644\u064a\u0629",sentDate:new Date("2024-02-19T14:00:00"),readCount:23,totalRecipients:45,tags:["\u062f\u0641\u0639","\u0627\u0634\u062a\u0631\u0627\u0643","\u062a\u0630\u0643\u064a\u0631"],relatedEntity:{type:"payment",id:"subscription-feb",title:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0641\u0628\u0631\u0627\u064a\u0631"},createdDate:new Date("2024-02-19T13:45:00"),updatedDate:new Date("2024-02-19T13:45:00")},{id:"3",title:"\u0625\u0639\u0644\u0627\u0646 \u0639\u0646 \u0645\u0628\u0627\u062f\u0631\u0629 \u062e\u064a\u0631\u064a\u0629 \u062c\u062f\u064a\u062f\u0629",message:"\u0628\u0625\u0630\u0646 \u0627\u0644\u0644\u0647 \u062a\u0645 \u0625\u0637\u0644\u0627\u0642 \u0645\u0628\u0627\u062f\u0631\u0629 \u062e\u064a\u0631\u064a\u0629 \u062c\u062f\u064a\u062f\u0629 \u0644\u062f\u0639\u0645 \u0627\u0644\u0623\u0633\u0631 \u0627\u0644\u0645\u062d\u062a\u0627\u062c\u0629 \u0641\u064a \u0627\u0644\u0645\u0646\u0637\u0642\u0629. \u0646\u062f\u0639\u0648 \u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0644\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0648\u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0629.",type:"announcement",priority:"high",status:"sent",recipientType:"all",recipients:[],senderId:"charity1",senderName:"\u0644\u062c\u0646\u0629 \u0627\u0644\u0623\u0639\u0645\u0627\u0644 \u0627\u0644\u062e\u064a\u0631\u064a\u0629",sentDate:new Date("2024-02-18T16:30:00"),readCount:56,totalRecipients:67,tags:["\u062e\u064a\u0631\u064a","\u0645\u0628\u0627\u062f\u0631\u0629","\u0625\u0639\u0644\u0627\u0646"],relatedEntity:{type:"initiative",id:"charity-initiative-1",title:"\u0645\u0628\u0627\u062f\u0631\u0629 \u062f\u0639\u0645 \u0627\u0644\u0623\u0633\u0631"},createdDate:new Date("2024-02-18T16:00:00"),updatedDate:new Date("2024-02-18T16:00:00")},{id:"4",title:"\u062f\u0639\u0648\u0629 \u0644\u062d\u0641\u0644 \u0632\u0641\u0627\u0641 \u0623\u062d\u0645\u062f \u0648\u0641\u0627\u0637\u0645\u0629",message:"\u062a\u0634\u0631\u0641\u0646\u0627 \u062f\u0639\u0648\u062a\u0643\u0645 \u0644\u062d\u0636\u0648\u0631 \u062d\u0641\u0644 \u0632\u0641\u0627\u0641 \u0627\u0644\u0623\u062e \u0623\u062d\u0645\u062f \u0648\u0627\u0644\u0623\u062e\u062a \u0641\u0627\u0637\u0645\u0629 \u064a\u0648\u0645 \u0627\u0644\u062c\u0645\u0639\u0629 \u0627\u0644\u0642\u0627\u062f\u0645 \u0641\u064a \u0642\u0627\u0639\u0629 \u0627\u0644\u0627\u062d\u062a\u0641\u0627\u0644\u0627\u062a \u0627\u0644\u0643\u0628\u0631\u0649.",type:"invitation",priority:"medium",status:"scheduled",recipientType:"all",recipients:[],senderId:"events1",senderName:"\u0644\u062c\u0646\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",scheduledDate:new Date("2024-02-21T09:00:00"),readCount:0,totalRecipients:67,tags:["\u0632\u0641\u0627\u0641","\u062f\u0639\u0648\u0629","\u0627\u062d\u062a\u0641\u0627\u0644"],relatedEntity:{type:"occasion",id:"wedding-1",title:"\u0632\u0641\u0627\u0641 \u0623\u062d\u0645\u062f \u0648\u0641\u0627\u0637\u0645\u0629"},createdDate:new Date("2024-02-17T12:00:00"),updatedDate:new Date("2024-02-17T12:00:00")},{id:"5",title:"\u0645\u0633\u0648\u062f\u0629 - \u0625\u0634\u0639\u0627\u0631 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0646\u0638\u0627\u0645",message:"\u0633\u064a\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u064a\u0648\u0645 \u0627\u0644\u0633\u0628\u062a \u0645\u0646 \u0627\u0644\u0633\u0627\u0639\u0629 12 \u0638\u0647\u0631\u0627\u064b \u062d\u062a\u0649 2 \u0639\u0635\u0631\u0627\u064b. \u0642\u062f \u064a\u0648\u0627\u062c\u0647 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u0648\u0646 \u0627\u0646\u0642\u0637\u0627\u0639 \u0645\u0624\u0642\u062a \u0641\u064a \u0627\u0644\u062e\u062f\u0645\u0629.",type:"system",priority:"low",status:"draft",recipientType:"all",recipients:[],senderId:"admin1",senderName:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0646\u0638\u0627\u0645",readCount:0,totalRecipients:0,tags:["\u0646\u0638\u0627\u0645","\u062a\u062d\u062f\u064a\u062b","\u0635\u064a\u0627\u0646\u0629"],createdDate:new Date("2024-02-20T11:30:00"),updatedDate:new Date("2024-02-20T11:45:00")}],dt=[{id:"group1",name:"\u0645\u062c\u0644\u0633 \u0627\u0644\u0625\u062f\u0627\u0631\u0629",memberCount:12,description:"\u0623\u0639\u0636\u0627\u0621 \u0645\u062c\u0644\u0633 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"},{id:"group2",name:"\u0627\u0644\u0644\u062c\u0646\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629",memberCount:8,description:"\u0627\u0644\u0645\u0633\u0624\u0648\u0644\u0648\u0646 \u0639\u0646 \u0627\u0644\u0634\u0624\u0648\u0646 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"},{id:"group3",name:"\u0644\u062c\u0646\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",memberCount:15,description:"\u0645\u0646\u0638\u0645\u0648 \u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a \u0648\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a"},{id:"group4",name:"\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u062c\u062f\u062f",memberCount:23,description:"\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u0645\u0646\u0636\u0645\u0648\u0646 \u062d\u062f\u064a\u062b\u0627\u064b"}],pt=[{id:"admin",name:"\u0645\u062f\u064a\u0631",memberCount:5},{id:"financial",name:"\u0645\u062f\u064a\u0631 \u0645\u0627\u0644\u064a",memberCount:3},{id:"organizer",name:"\u0645\u0646\u0638\u0645",memberCount:12},{id:"member",name:"\u0639\u0636\u0648",memberCount:47}],xt=[{id:"user1",name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0633\u0639\u064a\u062f",email:"ahmad@family.com"},{id:"user2",name:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0628\u062f \u0627\u0644\u0644\u0647",email:"fatima@family.com"},{id:"user3",name:"\u062e\u0627\u0644\u062f \u064a\u0648\u0633\u0641 \u0627\u0644\u0645\u0637\u064a\u0631\u064a",email:"khalid@family.com"},{id:"user4",name:"\u0633\u0627\u0631\u0629 \u0623\u062d\u0645\u062f \u0627\u0644\u0632\u0647\u0631\u0627\u0646\u064a",email:"sara@family.com"}],mt=()=>{const{isMobile:e,isTablet:t,breakpoint:a}=(()=>{const[e,t]=(0,s.useState)(nt());return(0,s.useEffect)(()=>{const e=()=>{t(nt())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),{breakpoint:e,isMobile:"xs"===e||"sm"===e,isTablet:"md"===e,isDesktop:"lg"===e||"xl"===e||"2xl"===e,width:"undefined"!==typeof window?window.innerWidth:1024}})(),{getItemStyles:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fadeIn",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,n=arguments.length>3?arguments[3]:void 0;const[i,r]=s.useState([]);return s.useEffect(()=>{const t=[];for(let s=0;s<e;s++){const e=setTimeout(()=>{r(e=>[...e,s])},s*a);t.push(e)}return()=>{t.forEach(e=>clearTimeout(e))}},[e,a]),{getItemStyles:e=>i.includes(e)?ot(t,n):{opacity:0},visibleItems:i,reset:()=>{r([])}}}(6,"fadeIn",120);s.useEffect(()=>{(()=>{if("undefined"===typeof document)return;const e=document.createElement("style");e.textContent="\n    @keyframes fadeIn {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n\n    @keyframes slideUp {\n      from { transform: translateY(20px); opacity: 0; }\n      to { transform: translateY(0); opacity: 1; }\n    }\n\n    @keyframes slideDown {\n      from { transform: translateY(-20px); opacity: 0; }\n      to { transform: translateY(0); opacity: 1; }\n    }\n\n    @keyframes slideLeft {\n      from { transform: translateX(20px); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n\n    @keyframes slideRight {\n      from { transform: translateX(-20px); opacity: 0; }\n      to { transform: translateX(0); opacity: 1; }\n    }\n\n    @keyframes scaleIn {\n      from { transform: scale(0.9); opacity: 0; }\n      to { transform: scale(1); opacity: 1; }\n    }\n\n    @keyframes scaleOut {\n      from { transform: scale(1); opacity: 1; }\n      to { transform: scale(0.9); opacity: 0; }\n    }\n\n    @keyframes pulse {\n      0%, 100% { opacity: 1; }\n      50% { opacity: 0.5; }\n    }\n\n    @keyframes bounce {\n      0%, 20%, 53%, 80%, 100% { transform: translate3d(0, 0, 0); }\n      40%, 43% { transform: translate3d(0, -8px, 0); }\n      70% { transform: translate3d(0, -4px, 0); }\n      90% { transform: translate3d(0, -2px, 0); }\n    }\n\n    @keyframes shake {\n      0%, 100% { transform: translateX(0); }\n      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }\n      20%, 40%, 60%, 80% { transform: translateX(4px); }\n    }\n\n    @keyframes rotate {\n      from { transform: rotate(0deg); }\n      to { transform: rotate(360deg); }\n    }\n\n    @keyframes spin {\n      0% { transform: rotate(0deg); }\n      100% { transform: rotate(360deg); }\n    }\n\n    @keyframes skeleton {\n      0% { background-position: 200% 0; }\n      100% { background-position: -200% 0; }\n    }\n\n    @keyframes float {\n      0%, 100% { transform: translateY(0px); }\n      50% { transform: translateY(-4px); }\n    }\n\n    @keyframes pulse-ring {\n      0% { transform: translate(-50%, -50%) scale(0.8); opacity: 1; }\n      100% { transform: translate(-50%, -50%) scale(1.8); opacity: 0; }\n    }\n\n    @keyframes checkmark-scale {\n      0% { transform: scale(0); }\n      100% { transform: scale(1); }\n    }\n\n    @keyframes checkmark-draw {\n      0% { opacity: 0; }\n      100% { opacity: 1; }\n    }\n\n    @keyframes slide-in-top {\n      from { transform: translateY(-100%); }\n      to { transform: translateY(0); }\n    }\n\n    @keyframes slide-in-bottom {\n      from { transform: translateY(100%); }\n      to { transform: translateY(0); }\n    }\n\n    @keyframes slide-in-left {\n      from { transform: translateX(-100%); }\n      to { transform: translateX(0); }\n    }\n\n    @keyframes slide-in-right {\n      from { transform: translateX(100%); }\n      to { transform: translateX(0); }\n    }\n\n    @keyframes backdrop-fade {\n      from { opacity: 0; }\n      to { opacity: 1; }\n    }\n\n    /* Progress bar animations */\n    @keyframes progress-fill {\n      from { width: 0%; }\n    }\n\n    /* Gradient shimmer for loading states */\n    @keyframes shimmer {\n      0% { background-position: -468px 0; }\n      100% { background-position: 468px 0; }\n    }\n  ",document.head.appendChild(e)})()},[]);const[r,l]=(0,s.useState)(ct),[c,d]=(0,s.useState)(!1),[p,m]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),[g,b]=(0,s.useState)({}),[f,y]=(0,s.useState)(1),[N,w]=(0,s.useState)(!1),A=r.filter(e=>{if(g.type&&e.type!==g.type)return!1;if(g.priority&&e.priority!==g.priority)return!1;if(g.status&&e.status!==g.status)return!1;if(g.recipientType&&e.recipientType!==g.recipientType)return!1;if(g.unreadOnly&&e.readCount>=e.totalRecipients)return!1;if(g.search){const t=g.search.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.message.toLowerCase().includes(t))return!1}if(g.dateRange){const t=e.sentDate||e.createdDate;if(g.dateRange.start&&t<g.dateRange.start)return!1;if(g.dateRange.end&&t>g.dateRange.end)return!1}return!0}),k={totalNotifications:r.length,sentNotifications:r.filter(e=>"sent"===e.status).length,pendingNotifications:r.filter(e=>["draft","scheduled"].includes(e.status)).length,totalRecipients:r.reduce((e,t)=>e+t.totalRecipients,0),totalReads:r.reduce((e,t)=>e+t.readCount,0),readRate:r.length>0?Math.round(r.reduce((e,t)=>e+t.readCount,0)/r.reduce((e,t)=>e+t.totalRecipients,0)*100):0,mostUsedType:"general",recentActivity:r.filter(e=>{const t=new Date(Date.now()-864e5);return(e.sentDate||e.createdDate)>t}).length},_=r.filter(e=>"sent"===e.status&&e.readCount<e.totalRecipients).length,C=e=>$e(e),F={padding:rt(a,{xs:"16px",sm:"20px",md:"24px"}),direction:"rtl",minHeight:"100vh",maxWidth:"100%",overflow:"hidden"},T={display:"flex",flexDirection:e?"column":"row",justifyContent:"space-between",alignItems:e?"flex-start":"center",marginBottom:e?"20px":"24px",gap:e?"12px":"16px"},z={fontSize:e?"24px":"28px",fontWeight:"700",color:"#1f2937",margin:0,display:"flex",alignItems:"center",gap:e?"8px":"12px",fontFamily:"Cairo, Tajawal, sans-serif",letterSpacing:"-0.025em"},R={display:"flex",alignItems:"center",gap:e?"8px":"12px",flexWrap:e?"wrap":"nowrap",width:e?"100%":"auto"},D=(0,i.A)((0,i.A)({},it(e)),{},{borderRadius:"12px",border:"none",fontSize:e?"15px":"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)",userSelect:"none",WebkitTapHighlightColor:"transparent",flex:e?"1":"none"}),B=(0,i.A)((0,i.A)({},it(e)),{},{borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.2)",fontSize:e?"15px":"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",background:"rgba(255, 255, 255, 0.8)",color:"#374151",backdropFilter:"blur(10px)",userSelect:"none",WebkitTapHighlightColor:"transparent",flex:e?"1":"none"}),E=(0,i.A)((0,i.A)({},((e,t)=>({display:"grid",gridTemplateColumns:"repeat(".concat((()=>{switch(e){case"xs":return t.xs||1;case"sm":return t.sm||t.xs||1;case"md":return t.md||t.sm||t.xs||2;case"lg":return t.lg||t.md||t.sm||3;case"xl":case"2xl":return t.xl||t.lg||t.md||4;default:return 1}})(),", 1fr)"),gap:"xs"===e||"sm"===e?"12px":"16px"}))(a,{xs:1,sm:2,md:3,lg:6})),{},{gap:e?"12px":"16px",marginBottom:e?"24px":"32px"}),P={background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:e?"12px":"16px",padding:e?"16px":"24px",textAlign:"center",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",cursor:"pointer",position:"relative",overflow:"hidden"},W={fontSize:e?"24px":"32px",fontWeight:"700",marginBottom:e?"6px":"8px",fontFamily:"Cairo, Tajawal, sans-serif",letterSpacing:"-0.02em"},O={fontSize:e?"12px":"14px",color:"#6b7280",fontWeight:"500",lineHeight:"1.4"},q={display:"grid",gridTemplateColumns:e?"1fr":N?t?"250px 1fr":"300px 1fr":"1fr",gap:e?"16px":"24px",alignItems:"start"},H=Math.ceil(A.length/10),U=A.slice(10*(f-1),10*f);return(0,S.jsxs)("div",{style:F,children:[(0,S.jsxs)("div",{style:T,children:[(0,S.jsxs)("h1",{style:z,children:[(0,S.jsx)(j.A,{style:{width:"32px",height:"32px"}}),ke,(0,S.jsx)(Ge,{count:_,size:"large"})]}),(0,S.jsxs)("div",{style:R,children:[(0,S.jsxs)("button",{style:B,onClick:()=>w(!N),children:[(0,S.jsx)(ue.A,{style:{width:"20px",height:"20px"}}),N?"\u0625\u062e\u0641\u0627\u0621 \u0627\u0644\u0641\u0644\u0627\u062a\u0631":"\u0639\u0631\u0636 \u0627\u0644\u0641\u0644\u0627\u062a\u0631"]}),(0,S.jsxs)("button",{style:D,onClick:()=>m(!0),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-2px) scale(1.02)",t.currentTarget.style.boxShadow="0 8px 20px rgba(102, 126, 234, 0.4)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.3)")},onTouchStart:t=>{e&&(t.currentTarget.style.transform="scale(0.98)")},onTouchEnd:t=>{e&&(t.currentTarget.style.transform="scale(1)")},children:[(0,S.jsx)(L.A,{style:{width:"20px",height:"20px"}}),Se]})]})]}),(0,S.jsxs)("div",{style:E,children:[(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)((0,i.A)({},P),n(0)),{},{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(102, 126, 234, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(o.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#667eea",margin:"0 auto ".concat(e?"12px":"16px")}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#667eea"}),children:C(k.totalNotifications)}),(0,S.jsx)("div",{style:O,children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},P),{},{background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(ge.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#10b981",margin:"0 auto ".concat(e?"12px":"16px")}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#10b981"}),children:C(k.sentNotifications)}),(0,S.jsx)("div",{style:O,children:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a \u0627\u0644\u0645\u0631\u0633\u0644\u0629"})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},P),{},{background:"linear-gradient(135deg, rgba(245, 158, 11, 0.1) 0%, rgba(217, 119, 6, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(v.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#f59e0b",margin:"0 auto ".concat(e?"12px":"16px"),animation:k.pendingNotifications>0?"pulse 2s infinite":"none"}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#f59e0b"}),children:C(k.pendingNotifications)}),(0,S.jsx)("div",{style:O,children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},P),{},{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(37, 99, 235, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(x.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#3b82f6",margin:"0 auto ".concat(e?"12px":"16px")}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#3b82f6"}),children:C(k.totalRecipients)}),(0,S.jsx)("div",{style:O,children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u062a\u0642\u0628\u0644\u064a\u0646"})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},P),{},{background:"linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(124, 58, 237, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(M.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#8b5cf6",margin:"0 auto ".concat(e?"12px":"16px")}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#8b5cf6"}),children:Ke(k.readRate)}),(0,S.jsx)("div",{style:O,children:"\u0645\u0639\u062f\u0644 \u0627\u0644\u0642\u0631\u0627\u0621\u0629"})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},P),{},{background:"linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(220, 38, 38, 0.1) 100%)"}),onMouseEnter:t=>{e||(t.currentTarget.style.transform="translateY(-4px) scale(1.02)",t.currentTarget.style.boxShadow="0 12px 32px rgba(0, 0, 0, 0.2)")},onMouseLeave:t=>{e||(t.currentTarget.style.transform="translateY(0) scale(1)",t.currentTarget.style.boxShadow="none")},children:[(0,S.jsx)(I.A,{style:{width:e?"24px":"32px",height:e?"24px":"32px",color:"#ef4444",margin:"0 auto ".concat(e?"12px":"16px"),animation:k.recentActivity>0?"pulse 2s infinite":"none"}}),(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},W),{},{color:"#ef4444"}),children:C(k.recentActivity)}),(0,S.jsx)("div",{style:O,children:"\u0627\u0644\u0646\u0634\u0627\u0637 \u0627\u0644\u0623\u062e\u064a\u0631 (24 \u0633\u0627\u0639\u0629)"})]})]}),(0,S.jsxs)("div",{style:q,children:[N&&(0,S.jsx)("div",{style:{position:e?"static":"sticky",top:e?"auto":"24px",order:e?1:0,marginBottom:e?"16px":"0"},children:(0,S.jsx)(Je,{filters:g,onFiltersChange:b,onClearFilters:()=>{b({})}})}),(0,S.jsx)("div",{style:{order:e&&N?0:1,minHeight:e?"auto":"600px"},children:(0,S.jsx)(Pe,{notifications:U,onView:e=>{u(e)},onEdit:e=>{u(e),m(!0)},onDelete:async e=>{if(window.confirm("\u0647\u0644 \u062a\u0631\u064a\u062f \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u061f"))try{l(t=>t.filter(t=>t.id!==e.id))}catch(t){console.error("Error deleting notification:",t)}},onMarkAsRead:async e=>{try{l(t=>t.map(t=>t.id===e?(0,i.A)((0,i.A)({},t),{},{readCount:t.totalRecipients}):t))}catch(t){console.error("Error marking as read:",t)}},loading:c,currentPage:f,totalPages:H,onPageChange:y})})]}),p&&(0,S.jsx)(qe,{isOpen:p,onClose:()=>{m(!1),u(null)},onSubmit:async e=>{d(!0);try{const t={id:Date.now().toString(),title:e.title,message:e.message,type:e.type,priority:e.priority,status:e.scheduledDate?"scheduled":"sent",recipientType:e.recipientType,recipients:[],senderId:"current_user",senderName:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u062d\u0627\u0644\u064a",scheduledDate:e.scheduledDate?new Date("".concat(e.scheduledDate,"T").concat(e.scheduledTime)):void 0,sentDate:e.scheduledDate?void 0:new Date,readCount:0,totalRecipients:"all"===e.recipientType?67:e.selectedRecipients.length,tags:e.tags,createdDate:new Date,updatedDate:new Date};l(e=>[t,...e]),m(!1)}catch(t){console.error("Error creating notification:",t)}finally{d(!1)}},isLoading:c,groups:dt,roles:pt,members:xt})]})},ht=e=>{let{error:t,onRetry:a,onDismiss:s,title:n="\u062d\u062f\u062b \u062e\u0637\u0623",type:i="error",showDetails:r=!1,className:l=""}=e;const o=(e=>{const t={error:{icon:"\u274c",bgColor:"#fee",borderColor:"#dc3545",textColor:"#721c24"},warning:{icon:"\u26a0\ufe0f",bgColor:"#fff3cd",borderColor:"#ffc107",textColor:"#856404"},info:{icon:"\u2139\ufe0f",bgColor:"#d1ecf1",borderColor:"#17a2b8",textColor:"#0c5460"}};return t[e]||t.error})(i),c=(e=>{if("string"===typeof e)return e;if(null!==e&&void 0!==e&&e.message_ar)return e.message_ar;if(null!==e&&void 0!==e&&e.message)return e.message;if("NetworkError"===(null===e||void 0===e?void 0:e.name)||"NETWORK_ERROR"===(null===e||void 0===e?void 0:e.code))return"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u062a\u0635\u0627\u0644 \u0627\u0644\u0625\u0646\u062a\u0631\u0646\u062a.";if(null!==e&&void 0!==e&&e.status)switch(e.status){case 401:return"\u0627\u0646\u062a\u0647\u062a \u0635\u0644\u0627\u062d\u064a\u0629 \u062c\u0644\u0633\u0629 \u0627\u0644\u0639\u0645\u0644. \u064a\u0631\u062c\u0649 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.";case 403:return"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0648\u0631\u062f.";case 404:return"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0645\u0648\u0631\u062f \u0627\u0644\u0645\u0637\u0644\u0648\u0628.";case 429:return"\u062a\u0645 \u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0637\u0644\u0628\u0627\u062a. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b.";case 500:return"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062e\u0627\u062f\u0645. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b.";case 503:return"\u0627\u0644\u062e\u062f\u0645\u0629 \u063a\u064a\u0631 \u0645\u062a\u0627\u062d\u0629 \u0645\u0624\u0642\u062a\u0627\u064b. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b.";default:return"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062e\u0627\u062f\u0645 (".concat(e.status,")")}return"\u062d\u062f\u062b \u062e\u0637\u0623 \u063a\u064a\u0631 \u0645\u062a\u0648\u0642\u0639"})(t);return(0,S.jsxs)("div",{className:"error-display ".concat(i," ").concat(l),dir:"rtl",children:[(0,S.jsxs)("div",{className:"error-content",children:[(0,S.jsxs)("div",{className:"error-header",children:[(0,S.jsx)("div",{className:"error-icon",children:o.icon}),(0,S.jsxs)("div",{className:"error-text",children:[(0,S.jsx)("h4",{className:"error-title",children:n}),(0,S.jsx)("p",{className:"error-message",children:c})]}),s&&(0,S.jsx)("button",{className:"dismiss-btn",onClick:s,"aria-label":"\u0625\u063a\u0644\u0627\u0642",title:"\u0625\u063a\u0644\u0627\u0642",children:"\u2715"})]}),r&&t&&"object"===typeof t&&(0,S.jsxs)("details",{className:"error-details",children:[(0,S.jsx)("summary",{children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u062a\u0642\u0646\u064a\u0629"}),(0,S.jsx)("pre",{className:"error-stack",children:JSON.stringify(t,null,2)})]}),a&&(0,S.jsx)("div",{className:"error-actions",children:(0,S.jsxs)("button",{className:"retry-btn hover-lift ripple-effect",onClick:a,children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83d\udd04"}),"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"]})})]}),(0,S.jsx)("style",{jsx:!0,children:"\n        .error-display {\n          margin: 1rem 0;\n          border-radius: 8px;\n          border: 1px solid ".concat(o.borderColor,";\n          background: ").concat(o.bgColor,";\n          color: ").concat(o.textColor,";\n          animation: slideIn 0.3s ease-out;\n        }\n\n        .error-content {\n          padding: 1rem;\n        }\n\n        .error-header {\n          display: flex;\n          align-items: flex-start;\n          gap: 0.75rem;\n        }\n\n        .error-icon {\n          font-size: 1.25rem;\n          flex-shrink: 0;\n        }\n\n        .error-text {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .error-title {\n          margin: 0 0 0.25rem 0;\n          font-size: 1rem;\n          font-weight: 600;\n          color: inherit;\n        }\n\n        .error-message {\n          margin: 0;\n          font-size: 0.9rem;\n          line-height: 1.4;\n          word-break: break-word;\n        }\n\n        .dismiss-btn {\n          background: none;\n          border: none;\n          color: inherit;\n          font-size: 1.25rem;\n          cursor: pointer;\n          padding: 0.25rem;\n          border-radius: 4px;\n          transition: background-color 0.2s;\n          flex-shrink: 0;\n        }\n\n        .dismiss-btn:hover {\n          background: rgba(0, 0, 0, 0.1);\n        }\n\n        .error-details {\n          margin-top: 1rem;\n          border-top: 1px solid rgba(0, 0, 0, 0.1);\n          padding-top: 1rem;\n        }\n\n        .error-details summary {\n          cursor: pointer;\n          font-weight: 600;\n          margin-bottom: 0.5rem;\n          color: inherit;\n        }\n\n        .error-stack {\n          background: rgba(0, 0, 0, 0.05);\n          padding: 0.75rem;\n          border-radius: 4px;\n          font-size: 0.75rem;\n          overflow-x: auto;\n          border: 1px solid rgba(0, 0, 0, 0.1);\n          direction: ltr;\n          text-align: left;\n        }\n\n        .error-actions {\n          margin-top: 1rem;\n          display: flex;\n          gap: 0.5rem;\n        }\n\n        .retry-btn {\n          background: ").concat(o.borderColor,";\n          color: white;\n          border: none;\n          padding: 0.5rem 1rem;\n          border-radius: 6px;\n          font-weight: 600;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          font-size: 0.875rem;\n          transition: all 0.3s ease;\n        }\n\n        .retry-btn:hover {\n          transform: translateY(-1px);\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n        }\n\n        .btn-icon {\n          font-size: 1rem;\n        }\n\n        .hover-lift:hover {\n          transform: translateY(-1px);\n        }\n\n        .ripple-effect {\n          position: relative;\n          overflow: hidden;\n        }\n\n        .ripple-effect:before {\n          content: '';\n          position: absolute;\n          top: 50%;\n          left: 50%;\n          width: 0;\n          height: 0;\n          border-radius: 50%;\n          background: rgba(255, 255, 255, 0.3);\n          transition: width 0.4s, height 0.4s;\n          transform: translate(-50%, -50%);\n        }\n\n        .ripple-effect:active:before {\n          width: 200px;\n          height: 200px;\n        }\n\n        @keyframes slideIn {\n          from {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        /* Accessibility improvements */\n        @media (prefers-reduced-motion: reduce) {\n          .error-display {\n            animation: none;\n          }\n\n          .retry-btn:hover {\n            transform: none;\n          }\n\n          .ripple-effect:before {\n            transition: none;\n          }\n        }\n\n        /* High contrast mode */\n        @media (prefers-contrast: high) {\n          .error-display {\n            border-width: 2px;\n          }\n\n          .dismiss-btn:hover {\n            background: rgba(0, 0, 0, 0.2);\n          }\n        }\n      ")})]})},ut=ht,gt=e=>{let{size:t="medium",message:a="\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644...",overlay:s=!1,fullScreen:n=!1,className:i=""}=e;const r="\n    loading-spinner-container\n    ".concat(s?"loading-overlay":"","\n    ").concat(n?"loading-fullscreen":"","\n    ").concat(i,"\n  ").trim();return(0,S.jsxs)("div",{className:r,dir:"rtl",children:[(0,S.jsxs)("div",{className:"loading-content",children:[(0,S.jsxs)("div",{className:"loading-spinner ".concat({small:"spinner-small",medium:"spinner-medium",large:"spinner-large"}[t]),children:[(0,S.jsx)("div",{className:"spinner-ring"}),(0,S.jsx)("div",{className:"spinner-ring"}),(0,S.jsx)("div",{className:"spinner-ring"}),(0,S.jsx)("div",{className:"spinner-ring"})]}),a&&(0,S.jsx)("p",{className:"loading-message",children:a})]}),(0,S.jsx)("style",{jsx:!0,children:'\n        .loading-spinner-container {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          padding: 2rem;\n        }\n\n        .loading-overlay {\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(255, 255, 255, 0.9);\n          backdrop-filter: blur(2px);\n          z-index: 1000;\n        }\n\n        .loading-fullscreen {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(5px);\n          z-index: 9999;\n        }\n\n        .loading-content {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 1rem;\n        }\n\n        .loading-spinner {\n          position: relative;\n          display: inline-block;\n        }\n\n        .spinner-small {\n          width: 24px;\n          height: 24px;\n        }\n\n        .spinner-medium {\n          width: 40px;\n          height: 40px;\n        }\n\n        .spinner-large {\n          width: 64px;\n          height: 64px;\n        }\n\n        .spinner-ring {\n          position: absolute;\n          border: 3px solid transparent;\n          border-top: 3px solid #007bff;\n          border-radius: 50%;\n          animation: spin 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;\n        }\n\n        .spinner-small .spinner-ring {\n          width: 24px;\n          height: 24px;\n          border-width: 2px;\n        }\n\n        .spinner-medium .spinner-ring {\n          width: 40px;\n          height: 40px;\n          border-width: 3px;\n        }\n\n        .spinner-large .spinner-ring {\n          width: 64px;\n          height: 64px;\n          border-width: 4px;\n        }\n\n        .spinner-ring:nth-child(1) {\n          animation-delay: -0.45s;\n          border-top-color: #007bff;\n        }\n\n        .spinner-ring:nth-child(2) {\n          animation-delay: -0.3s;\n          border-top-color: #28a745;\n        }\n\n        .spinner-ring:nth-child(3) {\n          animation-delay: -0.15s;\n          border-top-color: #ffc107;\n        }\n\n        .spinner-ring:nth-child(4) {\n          animation-delay: 0s;\n          border-top-color: #dc3545;\n        }\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n            opacity: 1;\n          }\n          50% {\n            transform: rotate(180deg);\n            opacity: 0.6;\n          }\n          100% {\n            transform: rotate(360deg);\n            opacity: 1;\n          }\n        }\n\n        .loading-message {\n          color: #666;\n          font-size: 1rem;\n          font-weight: 500;\n          margin: 0;\n          text-align: center;\n          animation: pulse 2s ease-in-out infinite;\n        }\n\n        @keyframes pulse {\n          0%, 100% {\n            opacity: 1;\n          }\n          50% {\n            opacity: 0.6;\n          }\n        }\n\n        /* Dark theme support */\n        @media (prefers-color-scheme: dark) {\n          .loading-overlay, .loading-fullscreen {\n            background: rgba(0, 0, 0, 0.8);\n          }\n\n          .loading-message {\n            color: #fff;\n          }\n        }\n\n        /* Reduced motion support */\n        @media (prefers-reduced-motion: reduce) {\n          .spinner-ring {\n            animation: spin 2s linear infinite;\n          }\n\n          .loading-message {\n            animation: none;\n          }\n        }\n\n        /* RTL support */\n        [dir="rtl"] .loading-spinner {\n          transform: scaleX(-1);\n        }\n      '})]})};const bt=a.p+"static/media/logo.2ccba4f4e01bc7072fb8027414a3a35c.svg",jt=e=>{let{expense:t,onClose:a}=e;const s=()=>"\n      body {\n        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        margin: 0;\n        padding: 20px;\n        direction: rtl;\n      }\n      .voucher-container {\n        max-width: 800px;\n        margin: 0 auto;\n        background: white;\n        padding: 40px;\n        border: 2px solid #333;\n        border-radius: 10px;\n      }\n      .voucher-header {\n        text-align: center;\n        margin-bottom: 30px;\n        border-bottom: 3px double #333;\n        padding-bottom: 20px;\n      }\n      .voucher-logo img {\n        width: 120px;\n        height: 120px;\n        margin-bottom: 20px;\n      }\n      .voucher-title {\n        font-size: 28px;\n        font-weight: bold;\n        color: #1a1a1a;\n        margin-bottom: 10px;\n      }\n      .voucher-number {\n        font-size: 16px;\n        color: #666;\n      }\n      .voucher-body {\n        margin: 30px 0;\n      }\n      .voucher-row {\n        display: flex;\n        justify-content: space-between;\n        margin-bottom: 20px;\n        padding: 15px;\n        background: #f9f9f9;\n        border-radius: 5px;\n      }\n      .voucher-label {\n        font-weight: bold;\n        color: #555;\n        flex: 0 0 150px;\n      }\n      .voucher-value {\n        flex: 1;\n        color: #333;\n        font-size: 16px;\n      }\n      .amount-section {\n        background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);\n        color: white;\n        padding: 20px;\n        border-radius: 10px;\n        text-align: center;\n        margin: 30px 0;\n      }\n      .amount-label {\n        font-size: 18px;\n        margin-bottom: 10px;\n      }\n      .amount-value {\n        font-size: 36px;\n        font-weight: bold;\n      }\n      .voucher-footer {\n        margin-top: 40px;\n        padding-top: 30px;\n        border-top: 2px solid #ddd;\n      }\n      .signature-section {\n        display: flex;\n        justify-content: space-around;\n        margin-top: 50px;\n      }\n      .signature-box {\n        text-align: center;\n        flex: 1;\n      }\n      .signature-line {\n        border-bottom: 1px solid #333;\n        width: 150px;\n        margin: 0 auto 10px;\n        height: 40px;\n      }\n      .signature-label {\n        font-size: 14px;\n        color: #666;\n      }\n      @media print {\n        body {\n          padding: 0;\n        }\n        .no-print {\n          display: none !important;\n        }\n        .voucher-container {\n          border: 1px solid #333;\n          box-shadow: none;\n        }\n      }\n    ";return(0,S.jsx)("div",{className:"voucher-modal",children:(0,S.jsxs)("div",{className:"voucher-modal-content",children:[(0,S.jsx)("button",{className:"close-modal no-print",onClick:a,children:"\u2715"}),(0,S.jsxs)("div",{id:"expense-voucher",className:"voucher-container",children:[(0,S.jsxs)("div",{className:"voucher-header",children:[(0,S.jsxs)("div",{className:"voucher-logo",children:[(0,S.jsx)("img",{src:bt,alt:"Shuail Al-Anzi Fund",style:{width:"120px",height:"120px",marginBottom:"20px"}}),(0,S.jsx)("h1",{children:"\u0635\u0646\u062f\u0648\u0642 \u0634\u0639\u064a\u0644 \u0627\u0644\u0639\u0646\u0632\u064a"}),(0,S.jsx)("p",{style:{fontSize:"14px",color:"#666",marginTop:"5px"},children:"Shuail Al-Anzi Fund"})]}),(0,S.jsx)("div",{className:"voucher-title",children:"\u0633\u0646\u062f \u0635\u0631\u0641"}),(0,S.jsxs)("div",{className:"voucher-number",children:["\u0631\u0642\u0645 \u0627\u0644\u0633\u0646\u062f: ",t.id||"EXP-".concat(Date.now())]}),(0,S.jsxs)("div",{className:"voucher-date",children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e: ",(r=t.created_at,r?new Date(r).toLocaleDateString("ar-SA"):(new Date).toLocaleDateString("ar-SA"))," ","(",(e=>e?new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)):"")(t.created_at),")"]})]}),(0,S.jsxs)("div",{className:"voucher-body",children:[(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0635\u0631\u0648\u0641:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.title_ar})]}),t.title_en&&(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 (English):"}),(0,S.jsx)("span",{className:"voucher-value",children:t.title_en})]}),(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0627\u0644\u0641\u0626\u0629:"}),(0,S.jsx)("span",{className:"voucher-value",children:(i=t.category,{operations:"\u062a\u0634\u063a\u064a\u0644\u064a\u0629",activities:"\u0623\u0646\u0634\u0637\u0629",maintenance:"\u0635\u064a\u0627\u0646\u0629",utilities:"\u0645\u0631\u0627\u0641\u0642",supplies:"\u0645\u0633\u062a\u0644\u0632\u0645\u0627\u062a",travel:"\u0633\u0641\u0631",marketing:"\u062a\u0633\u0648\u064a\u0642",other:"\u0623\u062e\u0631\u0649"}[i]||i)})]}),(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,S.jsx)("span",{className:"voucher-value",children:(0,S.jsx)("span",{className:"status-badge status-".concat(t.status),children:(n=t.status,{pending:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631",approved:"\u0645\u0639\u062a\u0645\u062f",rejected:"\u0645\u0631\u0641\u0648\u0636"}[n]||n)})})]}),t.description_ar&&(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0627\u0644\u0648\u0635\u0641:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.description_ar})]}),t.notes&&(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.notes})]}),(0,S.jsxs)("div",{className:"amount-section",children:[(0,S.jsx)("div",{className:"amount-label",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0635\u0631\u0648\u0641"}),(0,S.jsxs)("div",{className:"amount-value",children:[parseFloat(t.amount||0).toLocaleString("ar-SA")," \u0631.\u0633"]})]}),t.created_by_name&&(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u062a\u0645 \u0627\u0644\u0625\u0646\u0634\u0627\u0621 \u0628\u0648\u0627\u0633\u0637\u0629:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.created_by_name})]}),t.approved_by_name&&(0,S.jsxs)("div",{className:"voucher-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u062a\u0645 \u0627\u0644\u0627\u0639\u062a\u0645\u0627\u062f \u0628\u0648\u0627\u0633\u0637\u0629:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.approved_by_name})]}),t.rejection_reason&&(0,S.jsxs)("div",{className:"voucher-row rejection-row",children:[(0,S.jsx)("span",{className:"voucher-label",children:"\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636:"}),(0,S.jsx)("span",{className:"voucher-value",children:t.rejection_reason})]})]}),(0,S.jsxs)("div",{className:"voucher-footer",children:[(0,S.jsxs)("div",{className:"signature-section",children:[(0,S.jsxs)("div",{className:"signature-box",children:[(0,S.jsx)("div",{className:"signature-line"}),(0,S.jsx)("div",{className:"signature-label",children:"\u0627\u0644\u0645\u0633\u062a\u0644\u0645"})]}),(0,S.jsxs)("div",{className:"signature-box",children:[(0,S.jsx)("div",{className:"signature-line"}),(0,S.jsx)("div",{className:"signature-label",children:"\u0627\u0644\u0645\u062d\u0627\u0633\u0628"})]}),(0,S.jsxs)("div",{className:"signature-box",children:[(0,S.jsx)("div",{className:"signature-line"}),(0,S.jsx)("div",{className:"signature-label",children:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a"})]})]}),(0,S.jsx)("div",{className:"voucher-stamp",children:(0,S.jsx)("p",{style:{textAlign:"center",marginTop:"40px",color:"#999",fontSize:"12px"},children:"\u0647\u0630\u0627 \u0627\u0644\u0633\u0646\u062f \u0635\u0627\u062f\u0631 \u0645\u0646 \u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"})})]})]}),(0,S.jsxs)("div",{className:"voucher-actions no-print",children:[(0,S.jsx)("button",{onClick:()=>{window.print()},className:"print-btn",children:"\ud83d\udda8\ufe0f \u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0633\u0646\u062f"}),(0,S.jsx)("button",{onClick:()=>{const e=document.getElementById("expense-voucher").outerHTML,a='\n      <!DOCTYPE html>\n      <html dir="rtl" lang="ar">\n      <head>\n        <meta charset="UTF-8">\n        <title>\u0633\u0646\u062f \u0635\u0631\u0641 - '.concat(t.title_ar,"</title>\n        <style>\n          ").concat(s(),"\n        </style>\n      </head>\n      <body>\n        ").concat(e,"\n      </body>\n      </html>\n    "),n=new Blob([a],{type:"text/html"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download="expense-voucher-".concat(t.id||Date.now(),".html"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)},className:"download-btn",children:"\ud83d\udce5 \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0633\u0646\u062f"})]})]})});var n,i,r},ft=e=>{let{dateFilter:t,onExpenseChange:a}=e;const{user:n,token:r,hasPermission:l}=F();(0,s.useEffect)(()=>{const e=null===n||void 0===n?void 0:n.role;"super_admin"===e||"financial_manager"===e||"operational_manager"===e||l("view_finances")||l("manage_finances")||m({message_ar:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0623\u0648 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",retryable:!1})},[l,n]);const[o,c]=(0,s.useState)([]),[d,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),[h,u]=(0,s.useState)(0),[g,b]=(0,s.useState)(null),[j,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),[N,w]=(0,s.useState)("all"),[A,k]=(0,s.useState)("all"),[_,C]=(0,s.useState)("created_at"),[T,z]=(0,s.useState)("desc"),[R,D]=(0,s.useState)(!1),[I,B]=(0,s.useState)(null),[E,P]=(0,s.useState)(null),[L,M]=(0,s.useState)({title_ar:"",title_en:"",description_ar:"",description_en:"",amount:"",category:"",receipt_image:null,notes:""}),[W]=(0,s.useState)([{value:"operations",label_ar:"\u062a\u0634\u063a\u064a\u0644\u064a\u0629",label_en:"Operations"},{value:"activities",label_ar:"\u0623\u0646\u0634\u0637\u0629",label_en:"Activities"},{value:"maintenance",label_ar:"\u0635\u064a\u0627\u0646\u0629",label_en:"Maintenance"},{value:"utilities",label_ar:"\u0645\u0631\u0627\u0641\u0642",label_en:"Utilities"},{value:"supplies",label_ar:"\u0645\u0633\u062a\u0644\u0632\u0645\u0627\u062a",label_en:"Supplies"},{value:"travel",label_ar:"\u0633\u0641\u0631",label_en:"Travel"},{value:"marketing",label_ar:"\u062a\u0633\u0648\u064a\u0642",label_en:"Marketing"},{value:"other",label_ar:"\u0623\u062e\u0631\u0649",label_en:"Other"}]);(0,s.useEffect)(()=>{O()},[t,N,A,_,T]);const O=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const a=Date.now();if(!(g&&a-g<1e3)||e){p(!0),m(null);try{const e=new URLSearchParams;t.hijri_month&&e.append("hijri_month",t.hijri_month),t.hijri_year&&e.append("hijri_year",t.hijri_year),"all"!==N&&e.append("status",N),"all"!==A&&e.append("category",A),e.append("sort_by",_),e.append("sort_order",T),y&&e.append("search",y);const n=new AbortController,i=setTimeout(()=>n.abort(),15e3),l=await fetch("".concat("http://localhost:3001","/api/expenses?").concat(e),{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},signal:n.signal});if(clearTimeout(i),!l.ok)throw new Error("HTTP ".concat(l.status,": ").concat(l.statusText));const o=await l.json();if(!o.success)throw new Error(o.message_ar||"\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a");var s;c((null===(s=o.data)||void 0===s?void 0:s.expenses)||o.data||[]),u(0),b(a)}catch(x){console.error("Error fetching expenses:",x);let t="\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645";"AbortError"===x.name?t="\u0627\u0646\u062a\u0647\u062a \u0645\u0647\u0644\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.":x.message.includes("HTTP 401")?t="\u0627\u0646\u062a\u0647\u062a \u0635\u0644\u0627\u062d\u064a\u0629 \u062c\u0644\u0633\u0629 \u0627\u0644\u0639\u0645\u0644. \u064a\u0631\u062c\u0649 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.":x.message.includes("HTTP 403")?t="\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0639\u0631\u0636 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a.":x.message.includes("HTTP 429")?t="\u062a\u0645 \u062a\u062c\u0627\u0648\u0632 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 \u0644\u0644\u0637\u0644\u0628\u0627\u062a. \u064a\u0631\u062c\u0649 \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631 \u0642\u0644\u064a\u0644\u0627\u064b.":x.message.includes("HTTP 5")?t="\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062e\u0627\u062f\u0645. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b.":x.message&&(t=x.message),m({message_ar:t,originalError:x,retryable:!x.message.includes("HTTP 401")&&!x.message.includes("HTTP 403")})}finally{p(!1)}}},[t,N,A,_,T,y,r,g]),q=e=>{switch(e){case"pending":return"orange";case"approved":return"green";case"rejected":return"red";default:return"gray"}},H=e=>{switch(e){case"pending":return"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631";case"approved":return"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647";case"rejected":return"\u0645\u0631\u0641\u0648\u0636";default:return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}},U=e=>{if(!e)return"";const t=new Date(e);return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{year:"numeric",month:"long",day:"numeric"}).format(t)},X=e=>{if(!e)return"";return new Date(e).toLocaleDateString("ar-SA")};return(0,S.jsxs)("div",{className:"expense-management",dir:"rtl",children:[(0,S.jsxs)("div",{className:"expense-header glass-morphism",children:[(0,S.jsxs)("div",{className:"header-actions",children:[(0,S.jsx)("h2",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),l("manage_finances")&&(0,S.jsxs)("button",{className:"create-btn hover-lift ripple-effect",onClick:()=>f(!j),disabled:d,children:[(0,S.jsx)("span",{className:"btn-icon",children:"\u2795"}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 \u062c\u062f\u064a\u062f"]}),!l("manage_finances")&&l("view_finances")&&(0,S.jsxs)("div",{className:"view-only-notice",children:[(0,S.jsx)("span",{className:"notice-icon",children:"\ud83d\udc41\ufe0f"}),"\u0639\u0631\u0636 \u0641\u0642\u0637 - \u0644\u0627 \u064a\u0645\u0643\u0646\u0643 \u0625\u0636\u0627\u0641\u0629 \u0623\u0648 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"]})]}),(0,S.jsxs)("div",{className:"filters-section",children:[(0,S.jsxs)("div",{className:"search-box",children:[(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a...",value:y,onChange:e=>{e.stopPropagation(),v(e.target.value)},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"search-input",autoComplete:"off",disabled:d}),(0,S.jsx)("button",{className:"search-btn",onClick:O,disabled:d,children:"\ud83d\udd0d"})]}),(0,S.jsxs)("div",{className:"filter-controls",children:[(0,S.jsxs)("select",{value:N,onChange:e=>{e.stopPropagation(),w(e.target.value)},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"filter-select",disabled:d,children:[(0,S.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0627\u0644\u0627\u062a"}),(0,S.jsx)("option",{value:"pending",children:"\u0641\u064a \u0627\u0644\u0627\u0646\u062a\u0638\u0627\u0631"}),(0,S.jsx)("option",{value:"approved",children:"\u0645\u0648\u0627\u0641\u0642 \u0639\u0644\u064a\u0647"}),(0,S.jsx)("option",{value:"rejected",children:"\u0645\u0631\u0641\u0648\u0636"})]}),(0,S.jsxs)("select",{value:A,onChange:e=>{e.stopPropagation(),k(e.target.value)},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"filter-select",disabled:d,children:[(0,S.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),W.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label_ar},e.value))]}),(0,S.jsxs)("select",{value:"".concat(_,"-").concat(T),onChange:e=>{e.stopPropagation();const[t,a]=e.target.value.split("-");C(t),z(a)},onFocus:e=>e.stopPropagation(),onClick:e=>e.stopPropagation(),className:"filter-select",disabled:d,children:[(0,S.jsx)("option",{value:"created_at-desc",children:"\u0627\u0644\u0623\u062d\u062f\u062b \u0623\u0648\u0644\u0627\u064b"}),(0,S.jsx)("option",{value:"created_at-asc",children:"\u0627\u0644\u0623\u0642\u062f\u0645 \u0623\u0648\u0644\u0627\u064b"}),(0,S.jsx)("option",{value:"amount-desc",children:"\u0627\u0644\u0645\u0628\u0644\u063a (\u0627\u0644\u0623\u0639\u0644\u0649)"}),(0,S.jsx)("option",{value:"amount-asc",children:"\u0627\u0644\u0645\u0628\u0644\u063a (\u0627\u0644\u0623\u0642\u0644)"})]})]})]})]}),j&&l("manage_finances")&&(0,S.jsx)("div",{className:"create-expense-form glass-morphism animate-float",children:(0,S.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!L.title_ar||!L.amount||!L.category)return console.log("Validation failed:",{title_ar:L.title_ar,amount:L.amount,category:L.category}),void m({message_ar:"\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629",retryable:!1});const t=parseFloat(L.amount);if(isNaN(t)||t<=0)m({message_ar:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d",retryable:!1});else if(t>1e6)m({message_ar:"\u0627\u0644\u0645\u0628\u0644\u063a \u0643\u0628\u064a\u0631 \u062c\u062f\u0627\u064b. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0642\u064a\u0645\u0629",retryable:!1});else{p(!0),m(null);try{const e=new FormData;Object.keys(L).forEach(t=>{null!==L[t]&&""!==L[t]&&e.append(t,L[t])});const t=new AbortController,l=setTimeout(()=>t.abort(),3e4),o=await fetch("".concat("http://localhost:3001","/api/expenses"),{method:"POST",headers:{Authorization:"Bearer ".concat(r)},body:e,signal:t.signal});if(clearTimeout(l),!o.ok)throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText));const c=await o.json();if(!c.success)throw new Error(c.message_ar||"\u062e\u0637\u0623 \u0641\u064a \u0625\u0646\u0634\u0627\u0621 \u0627\u0644\u0645\u0635\u0631\u0648\u0641");{var s;const e=(0,i.A)((0,i.A)({},L),{},{id:(null===(s=c.data)||void 0===s?void 0:s.id)||Date.now(),created_at:(new Date).toISOString(),status:"pending",created_by_name:(null===n||void 0===n?void 0:n.name)||"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"});P(e),D(!0),M({title_ar:"",title_en:"",description_ar:"",description_en:"",amount:"",category:"",receipt_image:null,notes:""}),f(!1),O(!0),a&&a()}}catch(x){console.error("Error creating expense:",x);let t="\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645";"AbortError"===x.name?t="\u0627\u0646\u062a\u0647\u062a \u0645\u0647\u0644\u0629 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.":x.message.includes("HTTP 413")?t="\u0628\u0631\u0641\u0642 \u0627\u0644\u0645\u0644\u0641 \u0645\u0634\u0639\u0634 \u062d\u062c\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u0643\u0628\u064a\u0631 \u062c\u062f\u0627\u064b.":x.message.includes("HTTP 400")?t="\u0628\u064a\u0627\u0646\u0627\u062a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d\u0629. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644.":x.message&&(t=x.message),m({message_ar:t,originalError:x,retryable:!x.message.includes("HTTP 4")})}finally{p(!1)}}},children:[(0,S.jsxs)("div",{className:"form-header",children:[(0,S.jsx)("h3",{children:"\u0625\u0636\u0627\u0641\u0629 \u0645\u0635\u0631\u0648\u0641 \u062c\u062f\u064a\u062f"}),(0,S.jsx)("button",{type:"button",className:"close-btn",onClick:()=>f(!1),children:"\u2715"})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 (\u0639\u0631\u0628\u064a) *"}),(0,S.jsx)("input",{type:"text",value:L.title_ar,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{title_ar:e.target.value})),required:!0,className:"form-input",autoComplete:"off",style:{width:"100%",padding:"12px 16px",border:"1px solid #ccc",borderRadius:"10px",fontSize:"16px",backgroundColor:"white",color:"black",boxSizing:"border-box",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 (\u0625\u0646\u062c\u0644\u064a\u0632\u064a)"}),(0,S.jsx)("input",{type:"text",value:L.title_en,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{title_en:e.target.value})),className:"form-input",autoComplete:"off",style:{width:"100%",padding:"12px 16px",border:"1px solid #ccc",borderRadius:"10px",fontSize:"16px",backgroundColor:"white",color:"black",boxSizing:"border-box",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0645\u0628\u0644\u063a (\u0631.\u0633) *"}),(0,S.jsx)("input",{type:"number",step:"0.01",min:"0",max:"1000000",value:L.amount,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{amount:e.target.value})),required:!0,className:"form-input",autoComplete:"off",style:{width:"100%",padding:"12px 16px",border:"1px solid #ccc",borderRadius:"10px",fontSize:"16px",backgroundColor:"white",color:"black",boxSizing:"border-box",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"}})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0641\u0626\u0629 *"}),(0,S.jsxs)("select",{value:L.category,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{category:e.target.value})),required:!0,className:"form-select",style:{width:"100%",padding:"12px 16px",border:"1px solid #ccc",borderRadius:"10px",fontSize:"16px",backgroundColor:"white",color:"black",boxSizing:"border-box",cursor:"pointer"},children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u0626\u0629"}),W.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label_ar},e.value))]})]}),(0,S.jsxs)("div",{className:"form-group full-width",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0648\u0635\u0641 (\u0639\u0631\u0628\u064a)"}),(0,S.jsx)("textarea",{value:L.description_ar,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{description_ar:e.target.value})),className:"form-textarea",rows:"3",style:{width:"100%",padding:"12px 16px",border:"1px solid #ccc",borderRadius:"10px",fontSize:"16px",backgroundColor:"white",color:"black",boxSizing:"border-box",resize:"vertical"}})]}),(0,S.jsxs)("div",{className:"form-group full-width",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0648\u0635\u0641 (\u0625\u0646\u062c\u0644\u064a\u0632\u064a)"}),(0,S.jsx)("textarea",{value:L.description_en,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{description_en:e.target.value})),className:"form-textarea",rows:"3"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"}),(0,S.jsx)("input",{type:"file",accept:"image/*",onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{receipt_image:e.target.files[0]})),className:"form-file"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,S.jsx)("textarea",{value:L.notes,onChange:e=>M(t=>(0,i.A)((0,i.A)({},t),{},{notes:e.target.value})),className:"form-textarea",rows:"2"})]})]}),(0,S.jsxs)("div",{className:"form-actions",children:[(0,S.jsxs)("button",{type:"submit",className:"submit-btn hover-lift ripple-effect",disabled:d,children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83d\udcbe"}),"\u062d\u0641\u0638 \u0627\u0644\u0645\u0635\u0631\u0648\u0641"]}),(0,S.jsx)("button",{type:"button",className:"cancel-btn hover-lift",onClick:()=>f(!1),children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),x&&(0,S.jsx)(ut,{error:x,onRetry:x.retryable?()=>{u(e=>e+1),O(!0)}:null,onDismiss:()=>m(null),title:"\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a",showDetails:!1}),(0,S.jsxs)("div",{className:"expenses-list",children:[d&&(0,S.jsx)(gt,{size:"large",message:h>0?"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 ".concat(h,"... \u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"):"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a...",overlay:!0}),!d&&0===o.length&&(0,S.jsxs)("div",{className:"empty-state glass-morphism",children:[(0,S.jsx)("div",{className:"empty-icon",children:"\ud83d\udcdd"}),(0,S.jsx)("h3",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,S.jsx)("p",{children:"\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0645\u0635\u0631\u0648\u0641\u0627\u062a \u062a\u0637\u0627\u0628\u0642 \u0627\u0644\u0645\u0639\u0627\u064a\u064a\u0631 \u0627\u0644\u0645\u062d\u062f\u062f\u0629"})]}),!d&&o.length>0&&(0,S.jsx)("div",{className:"expenses-grid",children:o.map(e=>{var t;return(0,S.jsxs)("div",{className:"expense-card glass-morphism hover-lift",children:[(0,S.jsxs)("div",{className:"expense-header",children:[(0,S.jsxs)("div",{className:"expense-title",children:[(0,S.jsx)("h4",{children:e.title_ar}),e.title_en&&(0,S.jsx)("p",{className:"title-en",children:e.title_en})]}),(0,S.jsxs)("div",{className:"expense-status status-".concat(e.status),children:[(0,S.jsx)("span",{className:"status-indicator",style:{color:q(e.status)},children:"\u25cf"}),H(e.status)]})]}),(0,S.jsxs)("div",{className:"expense-details",children:[(0,S.jsxs)("div",{className:"expense-amount",children:[(0,S.jsx)("span",{className:"amount-label",children:"\u0627\u0644\u0645\u0628\u0644\u063a:"}),(0,S.jsxs)("span",{className:"amount-value",children:[parseFloat(e.amount).toLocaleString("ar-SA")," \u0631.\u0633"]})]}),(0,S.jsxs)("div",{className:"expense-category",children:[(0,S.jsx)("span",{className:"category-label",children:"\u0627\u0644\u0641\u0626\u0629:"}),(0,S.jsx)("span",{className:"category-value",children:(null===(t=W.find(t=>t.value===e.category))||void 0===t?void 0:t.label_ar)||e.category})]}),(0,S.jsxs)("div",{className:"expense-date",children:[(0,S.jsx)("div",{className:"hijri-date",children:U(e.created_at)}),(0,S.jsxs)("div",{className:"gregorian-date",children:["(",X(e.created_at),")"]})]}),e.description_ar&&(0,S.jsx)("div",{className:"expense-description",children:(0,S.jsx)("p",{children:e.description_ar})}),e.notes&&(0,S.jsxs)("div",{className:"expense-notes",children:[(0,S.jsx)("span",{className:"notes-label",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,S.jsx)("p",{children:e.notes})]}),e.receipt_image_url&&(0,S.jsx)("div",{className:"expense-receipt",children:(0,S.jsx)("img",{src:e.receipt_image_url,alt:"\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641",className:"receipt-image"})})]}),(0,S.jsxs)("div",{className:"expense-actions",children:[(0,S.jsxs)("button",{className:"voucher-btn hover-lift ripple-effect",onClick:()=>{B(e),D(!0)},title:"\u0639\u0631\u0636 \u0627\u0644\u0633\u0646\u062f",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83e\uddfe"}),"\u0639\u0631\u0636 \u0627\u0644\u0633\u0646\u062f"]}),"pending"===e.status&&l("manage_finances")&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("button",{className:"approve-btn hover-lift ripple-effect",onClick:()=>(async e=>{if(e){p(!0),m(null);try{const t=new AbortController,s=setTimeout(()=>t.abort(),1e4),n=await fetch("".concat("http://localhost:3001","/api/expenses/").concat(e,"/approval"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({status:"approved"}),signal:t.signal});if(clearTimeout(s),!n.ok)throw new Error("HTTP ".concat(n.status,": ").concat(n.statusText));const i=await n.json();if(!i.success)throw new Error(i.message_ar||"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u0635\u0631\u0648\u0641");O(!0),a&&a()}catch(x){console.error("Error approving expense:",x);let t="\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u0635\u0631\u0648\u0641";"AbortError"===x.name?t="\u0627\u0646\u062a\u0647\u062a \u0645\u0647\u0644\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.":x.message.includes("HTTP 409")?t="\u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0647\u0630\u0627 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u0641\u064a \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u062d\u0627\u0644\u064a.":x.message.includes("HTTP 404")?t="\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0645\u0635\u0631\u0648\u0641. \u0642\u062f \u064a\u0643\u0648\u0646 \u0645\u062d\u0630\u0648\u0641\u0627\u064b.":x.message&&(t=x.message),m({message_ar:t,originalError:x,retryable:!x.message.includes("HTTP 4")||"AbortError"===x.name})}finally{p(!1)}}else m({message_ar:"\u0645\u0639\u0631\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d",retryable:!1})})(e.id),disabled:d,title:"\u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0639\u0644\u0649 \u0627\u0644\u0645\u0635\u0631\u0648\u0641",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\u2705"}),"\u0645\u0648\u0627\u0641\u0642\u0629"]}),(0,S.jsxs)("button",{className:"reject-btn hover-lift ripple-effect",onClick:()=>{const t=prompt("\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636 (\u0645\u0637\u0644\u0648\u0628):");t&&t.trim().length>=3?(async(e,t)=>{if(e)if(!t||t.trim().length<3)m({message_ar:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0648\u0627\u0636\u062d \u0644\u0644\u0631\u0641\u0636",retryable:!1});else{p(!0),m(null);try{const s=new AbortController,n=setTimeout(()=>s.abort(),1e4),i=await fetch("".concat("http://localhost:3001","/api/expenses/").concat(e,"/approval"),{method:"PUT",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify({status:"rejected",rejection_reason:t.trim()}),signal:s.signal});if(clearTimeout(n),!i.ok)throw new Error("HTTP ".concat(i.status,": ").concat(i.statusText));const l=await i.json();if(!l.success)throw new Error(l.message_ar||"\u062e\u0637\u0623 \u0641\u064a \u0631\u0641\u0636 \u0627\u0644\u0645\u0635\u0631\u0648\u0641");O(!0),a&&a()}catch(x){console.error("Error rejecting expense:",x);let t="\u062e\u0637\u0623 \u0641\u064a \u0631\u0641\u0636 \u0627\u0644\u0645\u0635\u0631\u0648\u0641";"AbortError"===x.name?t="\u0627\u0646\u062a\u0647\u062a \u0645\u0647\u0644\u0629 \u0627\u0644\u0627\u062a\u0635\u0627\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.":x.message.includes("HTTP 409")?t="\u0644\u0627 \u064a\u0645\u0643\u0646 \u0631\u0641\u0636 \u0647\u0630\u0627 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u0641\u064a \u0627\u0644\u0648\u0642\u062a \u0627\u0644\u062d\u0627\u0644\u064a.":x.message.includes("HTTP 404")?t="\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0627\u0644\u0645\u0635\u0631\u0648\u0641. \u0642\u062f \u064a\u0643\u0648\u0646 \u0645\u062d\u0630\u0648\u0641\u0627\u064b.":x.message&&(t=x.message),m({message_ar:t,originalError:x,retryable:!x.message.includes("HTTP 4")||"AbortError"===x.name})}finally{p(!1)}}else m({message_ar:"\u0645\u0639\u0631\u0641 \u0627\u0644\u0645\u0635\u0631\u0648\u0641 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d",retryable:!1})})(e.id,t):t&&m({message_ar:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0633\u0628\u0628 \u0648\u0627\u0636\u062d \u0644\u0644\u0631\u0641\u0636 (3 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644)",retryable:!1})},disabled:d,title:"\u0631\u0641\u0636 \u0627\u0644\u0645\u0635\u0631\u0648\u0641",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\u274c"}),"\u0631\u0641\u0636"]})]})]}),"pending"===e.status&&!l("manage_finances")&&l("view_finances")&&(0,S.jsxs)("div",{className:"expense-status-notice",children:[(0,S.jsx)("span",{className:"status-icon",children:"\u23f3"}),"\u0641\u064a \u0627\u0646\u062a\u0638\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0645\u0646 \u0627\u0644\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"]}),"rejected"===e.status&&e.rejection_reason&&(0,S.jsxs)("div",{className:"rejection-reason",children:[(0,S.jsx)("span",{className:"reason-label",children:"\u0633\u0628\u0628 \u0627\u0644\u0631\u0641\u0636:"}),(0,S.jsx)("p",{children:e.rejection_reason})]}),(0,S.jsx)("div",{className:"expense-print-actions",children:(0,S.jsxs)("button",{className:"voucher-btn hover-lift",onClick:()=>{B(e),D(!0)},title:"\u0639\u0631\u0636 \u0648\u0637\u0628\u0627\u0639\u0629 \u0627\u0644\u0633\u0646\u062f",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83e\uddfe"}),"\u0633\u0646\u062f \u0627\u0644\u0635\u0631\u0641"]})}),(0,S.jsxs)("div",{className:"expense-footer",children:[(0,S.jsxs)("span",{className:"created-by",children:["\u062a\u0645 \u0625\u0646\u0634\u0627\u0624\u0647 \u0628\u0648\u0627\u0633\u0637\u0629: ",e.created_by_name||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]}),e.approved_by_name&&(0,S.jsxs)("span",{className:"approved-by",children:["\u062a\u0645\u062a \u0627\u0644\u0645\u0648\u0627\u0641\u0642\u0629 \u0628\u0648\u0627\u0633\u0637\u0629: ",e.approved_by_name]})]})]},e.id)})})]}),R&&(I||E)&&(0,S.jsx)(jt,{expense:I||E,onClose:()=>{D(!1),B(null),P(null)}})]})},yt=()=>{const e=new Date,t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),n=Math.floor(t-579+(a-1)/12),i=["\u0645\u062d\u0631\u0645","\u0635\u0641\u0631","\u0631\u0628\u064a\u0639 \u0627\u0644\u0623\u0648\u0644","\u0631\u0628\u064a\u0639 \u0627\u0644\u0622\u062e\u0631","\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0623\u0648\u0644\u0649","\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0622\u062e\u0631\u0629","\u0631\u062c\u0628","\u0634\u0639\u0628\u0627\u0646","\u0631\u0645\u0636\u0627\u0646","\u0634\u0648\u0627\u0644","\u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629","\u0630\u0648 \u0627\u0644\u062d\u062c\u0629"][e.getMonth()];return{year:n,month:i,day:s,formatted:"".concat(s," ").concat(i," ").concat(n,"\u0647\u0640"),gregorian:e.toLocaleDateString("ar-SA")}},vt=()=>{const[e,t]=(0,s.useState)("dashboard"),[a,n]=(0,s.useState)(!1),[i,r]=(0,s.useState)([]),[l,o]=(0,s.useState)(yt()),c=(0,s.useRef)(null);(0,s.useEffect)(()=>{o(yt())},[]);return(0,S.jsxs)("div",{style:{padding:"20px",backgroundColor:"#f5f5f5",minHeight:"500px"},children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,S.jsx)("div",{style:{textAlign:"left",color:"#666",fontSize:"14px"},children:(0,S.jsxs)("div",{children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f\u064a: ",l.gregorian]})}),(0,S.jsx)("h1",{style:{fontSize:"24px",color:"#333",textAlign:"right",margin:0},children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 - \u0646\u0638\u0627\u0645 \u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062c\u0646\u0627\u0626\u064a \u0627\u0644\u0645\u062a\u0642\u062f\u0645"}),(0,S.jsx)("div",{style:{textAlign:"right",color:"#333",fontSize:"16px",fontWeight:"bold"},children:(0,S.jsxs)("div",{style:{color:"#4CAF50"},children:["\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0647\u062c\u0631\u064a: ",l.formatted]})})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{onClick:()=>t("dashboard"),style:{padding:"10px 20px",backgroundColor:"dashboard"===e?"#4CAF50":"#ddd",color:"dashboard"===e?"white":"#333",border:"none",borderRadius:"5px",cursor:"pointer"},children:"\u0644\u0648\u062d\u0629 \u0627\u0644\u0642\u064a\u0627\u062f\u0629"}),(0,S.jsx)("button",{onClick:()=>t("expenses"),style:{padding:"10px 20px",backgroundColor:"expenses"===e?"#4CAF50":"#ddd",color:"expenses"===e?"white":"#333",border:"none",borderRadius:"5px",cursor:"pointer"},children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,S.jsx)("button",{onClick:()=>t("forensic"),style:{padding:"10px 20px",backgroundColor:"forensic"===e?"#4CAF50":"#ddd",color:"forensic"===e?"white":"#333",border:"none",borderRadius:"5px",cursor:"pointer"},children:"\u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062c\u0646\u0627\u0626\u064a"}),(0,S.jsx)("button",{onClick:()=>t("reports"),style:{padding:"10px 20px",backgroundColor:"reports"===e?"#4CAF50":"#ddd",color:"reports"===e?"white":"#333",border:"none",borderRadius:"5px",cursor:"pointer"},children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0648\u0627\u0644\u062a\u0635\u062f\u064a\u0631"})]}),(0,S.jsxs)("div",{style:{backgroundColor:"white",padding:"20px",borderRadius:"8px",minHeight:"300px"},children:["dashboard"===e&&(0,S.jsxs)("div",{children:[(0,S.jsxs)("h2",{style:{fontSize:"20px",marginBottom:"15px",textAlign:"right"},children:["\u0644\u0648\u062d\u0629 \u0627\u0644\u0642\u064a\u0627\u062f\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629 - \u0634\u0647\u0631 ",l.month," ",l.year,"\u0647\u0640"]}),(0,S.jsx)("div",{style:{marginBottom:"15px",textAlign:"right"},children:(0,S.jsxs)("select",{style:{padding:"8px 15px",borderRadius:"5px",border:"1px solid #ddd",backgroundColor:"white",fontSize:"14px",cursor:"pointer"},children:[(0,S.jsxs)("option",{children:["\u0634\u0647\u0631 ",l.month," ",l.year,"\u0647\u0640"]}),(0,S.jsx)("option",{children:"\u0631\u0628\u0639 \u0633\u0646\u0648\u064a - \u0631\u0628\u064a\u0639 \u0627\u0644\u0623\u0648\u0644 \u0625\u0644\u0649 \u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0622\u062e\u0631\u0629"}),(0,S.jsx)("option",{children:"\u0646\u0635\u0641 \u0633\u0646\u0648\u064a - \u0645\u062d\u0631\u0645 \u0625\u0644\u0649 \u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0622\u062e\u0631\u0629"}),(0,S.jsxs)("option",{children:["\u0633\u0646\u0629 \u0643\u0627\u0645\u0644\u0629 ",l.year,"\u0647\u0640"]})]})}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"15px",marginBottom:"20px"},children:[(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#e3f2fd",borderRadius:"5px",textAlign:"center"},children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2196F3"},children:"\u0665\u0660,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"}),(0,S.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:["\u0634\u0647\u0631 ",l.month]}),(0,S.jsxs)("div",{style:{fontSize:"11px",color:"#4CAF50",marginTop:"3px"},children:["\u2191 \u0661\u0662\u066a \u0645\u0646 \u0634\u0647\u0631 ","\u0645\u062d\u0631\u0645"===l.month?"\u0630\u0648 \u0627\u0644\u062d\u062c\u0629":"\u0627\u0644\u0633\u0627\u0628\u0642"]})]}),(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#ffebee",borderRadius:"5px",textAlign:"center"},children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#f44336"},children:"\u0663\u0660,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a"}),(0,S.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:["\u0634\u0647\u0631 ",l.month]}),(0,S.jsxs)("div",{style:{fontSize:"11px",color:"#4CAF50",marginTop:"3px"},children:["\u2193 \u0665\u066a \u0645\u0646 \u0634\u0647\u0631 ","\u0645\u062d\u0631\u0645"===l.month?"\u0630\u0648 \u0627\u0644\u062d\u062c\u0629":"\u0627\u0644\u0633\u0627\u0628\u0642"]})]}),(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#e8f5e9",borderRadius:"5px",textAlign:"center"},children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#4CAF50"},children:"\u0662\u0660,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("div",{style:{fontSize:"14px",color:"#666"},children:"\u0635\u0627\u0641\u064a \u0627\u0644\u062f\u062e\u0644"}),(0,S.jsxs)("div",{style:{fontSize:"12px",color:"#999",marginTop:"5px"},children:["\u0634\u0647\u0631 ",l.month]}),(0,S.jsx)("div",{style:{fontSize:"11px",color:"#666",marginTop:"3px"},children:"\u0647\u0627\u0645\u0634 \u0627\u0644\u0631\u0628\u062d: \u0664\u0660\u066a"})]})]}),(0,S.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,S.jsxs)("h3",{style:{fontSize:"18px",marginBottom:"10px",textAlign:"right"},children:["\u0645\u0635\u0627\u062f\u0631 \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a - ",l.month," ",l.year,"\u0647\u0640"]}),(0,S.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"5px"},children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,S.jsx)("span",{children:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a"}),(0,S.jsx)("span",{style:{color:"#2196F3"},children:"\u0662\u0665,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,S.jsx)("span",{children:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a"}),(0,S.jsx)("span",{style:{color:"#2196F3"},children:"\u0661\u0665,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px"},children:[(0,S.jsx)("span",{children:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a"}),(0,S.jsx)("span",{style:{color:"#2196F3"},children:"\u0667,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062f\u064a\u0627\u062a"}),(0,S.jsx)("span",{style:{color:"#2196F3"},children:"\u0663,\u0660\u0660\u0660 \u0631\u064a\u0627\u0644"})]})]})]})]}),"expenses"===e&&(0,S.jsx)(ft,{dateFilter:{hijri_month:(new Date).getMonth()+1,hijri_year:l.year},onExpenseChange:()=>{console.log("Expense changed")}}),"forensic"===e&&(0,S.jsxs)("div",{children:[(0,S.jsxs)("h2",{style:{fontSize:"20px",marginBottom:"15px",textAlign:"right"},children:["\u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062c\u0646\u0627\u0626\u064a \u0627\u0644\u0645\u0627\u0644\u064a - ",l.month," ",l.year,"\u0647\u0640"]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px",marginBottom:"20px"},children:[(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#f3e5f5",borderRadius:"5px",cursor:"pointer"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"5px",color:"#9c27b0"},children:"\u062a\u062d\u0644\u064a\u0644 \u0645\u0646 \u062f\u0641\u0639 \u0644\u0645\u0646"}),(0,S.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"\u062a\u062a\u0628\u0639 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0645\u062a\u0642\u0627\u0637\u0639\u0629 \u0628\u064a\u0646 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"})]}),(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#e8eaf6",borderRadius:"5px",cursor:"pointer"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"5px",color:"#3f51b5"},children:"\u062a\u062d\u0644\u064a\u0644 \u0623\u0646\u0645\u0627\u0637 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0627\u062a"}),(0,S.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"\u062f\u0631\u0627\u0633\u0629 \u0623\u0646\u0645\u0627\u0637 \u0627\u0644\u0645\u0633\u0627\u0647\u0645\u0627\u062a \u062d\u0633\u0628 \u0627\u0644\u0639\u0627\u0626\u0644\u0629 \u0648\u0627\u0644\u0641\u062a\u0631\u0629"})]}),(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#fce4ec",borderRadius:"5px",cursor:"pointer"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"5px",color:"#e91e63"},children:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629"}),(0,S.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"\u062e\u0631\u064a\u0637\u0629 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0628\u064a\u0646 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"})]}),(0,S.jsxs)("div",{style:{padding:"15px",backgroundColor:"#e0f2f1",borderRadius:"5px",cursor:"pointer"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"5px",color:"#009688"},children:"\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0627\u0645\u062a\u062b\u0627\u0644"}),(0,S.jsx)("p",{style:{fontSize:"12px",color:"#666"},children:"\u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u0627\u0645\u062a\u062b\u0627\u0644 \u0648\u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a"})]})]}),(0,S.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"5px"},children:[(0,S.jsxs)("h3",{style:{fontSize:"16px",marginBottom:"10px",textAlign:"right"},children:["\u0631\u0624\u0649 \u0627\u0644\u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u062c\u0646\u0627\u0626\u064a - \u0634\u0647\u0631 ",l.month]}),(0,S.jsxs)("ul",{style:{textAlign:"right",listStyle:"none",padding:0},children:[(0,S.jsxs)("li",{style:{marginBottom:"8px"},children:["\u2022 \u062a\u0645 \u062a\u062d\u062f\u064a\u062f \u0661\u0665 \u0645\u0639\u0627\u0645\u0644\u0629 \u062f\u0641\u0639 \u0645\u062a\u0642\u0627\u0637\u0639 \u0641\u064a \u0634\u0647\u0631 ",l.month]}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2022 \u0667 \u0623\u0639\u0636\u0627\u0621 \u062f\u0641\u0639\u0648\u0627 \u0644\u0622\u062e\u0631\u064a\u0646 \u0645\u0646 \u0639\u0627\u0626\u0644\u0627\u062a \u0645\u062e\u062a\u0644\u0641\u0629"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2022 \u0645\u0639\u062f\u0644 \u0627\u0644\u0627\u0645\u062a\u062b\u0627\u0644 \u0644\u0644\u0648\u062b\u0627\u0626\u0642: \u0669\u0665\u066a"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2022 \u0663 \u0645\u0639\u0627\u0645\u0644\u0627\u062a \u062a\u062d\u062a\u0627\u062c \u0645\u0631\u0627\u062c\u0639\u0629 \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,S.jsxs)("li",{children:["\u2022 \u0622\u062e\u0631 \u062a\u062d\u062f\u064a\u062b: ",l.formatted]})]})]})]}),"reports"===e&&(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{style:{fontSize:"20px",marginBottom:"15px",textAlign:"right"},children:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0648\u0627\u0644\u062a\u0635\u062f\u064a\u0631"}),(0,S.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"10px",textAlign:"right"},children:"\u062e\u064a\u0627\u0631\u0627\u062a \u0627\u0644\u062a\u0635\u062f\u064a\u0631"}),(0,S.jsxs)("div",{style:{display:"flex",gap:"10px",marginBottom:"15px"},children:[(0,S.jsx)("button",{onClick:async()=>{n(!0);try{const e=await fetch("http://localhost:3001/api/reports/forensic?format=pdf&report_type=comprehensive_forensic",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"mock-token")}});if(e.ok){const t=await e.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="financial-report-".concat(Date.now(),".pdf"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),alert("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0628\u0646\u062c\u0627\u062d!")}else alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631")}catch(e){console.error("Export error:",e),alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631")}finally{n(!1)}},disabled:a,style:{padding:"10px 20px",backgroundColor:a?"#ccc":"#2196F3",color:"white",border:"none",borderRadius:"5px",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"5px"},children:a?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0635\u062f\u064a\u0631...":"\ud83d\udcc4 \u062a\u0635\u062f\u064a\u0631 PDF"}),(0,S.jsx)("button",{onClick:async()=>{n(!0);try{const e=await fetch("http://localhost:3001/api/reports/forensic?format=excel&report_type=comprehensive_forensic",{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")||"mock-token")}});if(e.ok){const t=await e.blob(),a=window.URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="financial-report-".concat(Date.now(),".xlsx"),document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s),alert("\u062a\u0645 \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631 \u0628\u0646\u062c\u0627\u062d!")}else alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631")}catch(e){console.error("Export error:",e),alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u062a\u0642\u0631\u064a\u0631")}finally{n(!1)}},disabled:a,style:{padding:"10px 20px",backgroundColor:a?"#ccc":"#4CAF50",color:"white",border:"none",borderRadius:"5px",cursor:a?"not-allowed":"pointer",display:"flex",alignItems:"center",gap:"5px"},children:a?"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u0635\u062f\u064a\u0631...":"\ud83d\udcca \u062a\u0635\u062f\u064a\u0631 Excel"})]})]}),(0,S.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"10px",textAlign:"right"},children:"\u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a"}),(0,S.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"5px"},children:[(0,S.jsx)("input",{ref:c,type:"file",multiple:!0,onChange:e=>{const t=e.target.files;if(t&&t.length>0){const e=Array.from(t);r(t=>[...t,...e]),alert("\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 ".concat(e.length," \u0645\u0631\u0641\u0642(\u0627\u062a)"))}},style:{display:"none"},accept:".pdf,.xlsx,.xls,.doc,.docx,.png,.jpg,.jpeg"}),(0,S.jsx)("button",{onClick:()=>{var e;return null===(e=c.current)||void 0===e?void 0:e.click()},style:{padding:"10px 20px",backgroundColor:"#FF9800",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginBottom:"10px",display:"flex",alignItems:"center",gap:"5px"},children:"\ud83d\udcce \u0625\u0636\u0627\u0641\u0629 \u0645\u0631\u0641\u0642"}),i.length>0&&(0,S.jsxs)("div",{style:{marginTop:"10px"},children:[(0,S.jsx)("p",{style:{textAlign:"right",marginBottom:"10px"},children:"\u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u0644\u0645\u0636\u0627\u0641\u0629:"}),i.map((e,t)=>(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px",backgroundColor:"white",borderRadius:"5px",marginBottom:"5px"},children:[(0,S.jsx)("button",{onClick:()=>(e=>{r(t=>t.filter((t,a)=>a!==e))})(t),style:{padding:"4px 8px",backgroundColor:"#f44336",color:"white",border:"none",borderRadius:"3px",cursor:"pointer",fontSize:"12px"},children:"\u062d\u0630\u0641"}),(0,S.jsxs)("span",{style:{fontSize:"14px"},children:[e.name," (",(e.size/1024).toFixed(2)," KB)"]})]},t))]}),0===i.length&&(0,S.jsx)("p",{style:{textAlign:"right",color:"#666",fontSize:"14px"},children:'\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u0631\u0641\u0642\u0627\u062a \u062d\u0627\u0644\u064a\u0627\u064b. \u0627\u0636\u063a\u0637 \u0639\u0644\u0649 \u0632\u0631 "\u0625\u0636\u0627\u0641\u0629 \u0645\u0631\u0641\u0642" \u0644\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0644\u0641\u0627\u062a.'})]})]}),(0,S.jsxs)("div",{style:{backgroundColor:"#f9f9f9",padding:"15px",borderRadius:"5px"},children:[(0,S.jsx)("h3",{style:{fontSize:"16px",marginBottom:"10px",textAlign:"right"},children:"\u0623\u0646\u0648\u0627\u0639 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u062a\u0627\u062d\u0629"}),(0,S.jsxs)("ul",{style:{textAlign:"right",listStyle:"none",padding:0},children:[(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2705 \u062a\u0642\u0631\u064a\u0631 \u0634\u0627\u0645\u0644 \u0645\u0641\u0635\u0644"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2705 \u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0645\u0641\u0635\u0644"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2705 \u062a\u062d\u0644\u064a\u0644 \u0627\u0644\u0645\u0635\u0631\u0648\u0641\u0627\u062a \u0627\u0644\u0645\u0641\u0635\u0644"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2705 \u062a\u0642\u0631\u064a\u0631 \u0627\u0644\u062f\u064a\u0627\u062a \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a"}),(0,S.jsx)("li",{style:{marginBottom:"8px"},children:"\u2705 \u062a\u062d\u0644\u064a\u0644 \u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("li",{children:"\u2705 \u0645\u0633\u0627\u0647\u0645\u0627\u062a \u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u0645\u0641\u0635\u0644\u0629"})]})]})]})]})]})};const Nt=new class{constructor(){this.baseURL="localhost"===window.location.hostname?"http://localhost:3001":"https://proshael.onrender.com",this.cache=new Map,this.cacheDuration=3e5,this.maxRetries=3,this.retryDelay=1e3,console.log("\ud83d\udd27 API Service initialized with baseURL:",this.baseURL)}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.requestWithRetry(e,t,this.maxRetries)}async requestWithRetry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s="".concat(this.baseURL).concat(e),n="".concat(t.method||"GET",":").concat(s,":").concat(JSON.stringify(t.body||{}));if(!t.method||"GET"===t.method){const t=this.getFromCache(n);if(t)return console.log("\ud83d\udccb Using cached data for:",e),t}const r=(0,i.A)({headers:(0,i.A)({"Content-Type":"application/json"},t.headers),timeout:3e4},t),l=localStorage.getItem("token");l&&(r.headers.Authorization="Bearer ".concat(l));try{console.log("\ud83c\udf10 API Request:",{url:s,method:r.method||"GET",hasToken:!!r.headers.Authorization,attempt:this.maxRetries-a+1,endpoint:e});const l=new AbortController,c=setTimeout(()=>l.abort(),r.timeout),d=await fetch(s,(0,i.A)((0,i.A)({},r),{},{signal:l.signal}));let p;clearTimeout(c);try{p=await d.json()}catch(o){console.warn("\u26a0\ufe0f Failed to parse JSON response:",o),p={error:"Invalid response format"}}if(!d.ok){if(console.error("\u274c API Error Response:",{status:d.status,statusText:d.statusText,error:p.error,url:s,endpoint:e}),(401===d.status||403===d.status)&&(console.warn("\ud83d\udd11 Authentication error, attempting token refresh..."),await this.handleAuthError(),a>0))return await this.delay(this.retryDelay),this.requestWithRetry(e,t,a-1);if(d.status>=500&&a>0)return console.warn("\u23f3 Server error ".concat(d.status,", retrying in ").concat(this.retryDelay,"ms...")),await this.delay(this.retryDelay*(this.maxRetries-a+1)),this.requestWithRetry(e,t,a-1);throw new Error(p.error||"HTTP ".concat(d.status,": ").concat(d.statusText))}return console.log("\u2705 API Success:",{endpoint:e,status:d.status,dataKeys:Object.keys(p)}),t.method&&"GET"!==t.method||this.setCache(n,p),p}catch(c){if(console.error("\ud83d\udca5 API Request Failed:",{endpoint:e,error:c.message,type:c.name,retriesLeft:a}),a>0&&("AbortError"===c.name||"TypeError"===c.name||c.message.includes("fetch")))return console.warn("\ud83d\udd04 Retrying request to ".concat(e," (").concat(a," attempts left)...")),await this.delay(this.retryDelay*(this.maxRetries-a+1)),this.requestWithRetry(e,t,a-1);if(!t.method||"GET"===t.method){const t=this.getFromCache(n,!0);if(t)return console.warn("\ud83d\udccb Using stale cached data as fallback for:",e),t;const a=this.getMockData(e);if(a)return console.warn("\ud83c\udfad Using mock data as fallback for:",e),a}throw c}}async delay(e){return new Promise(t=>setTimeout(t,e))}async handleAuthError(){try{const e=localStorage.getItem("token");if(!e)return console.warn("\ud83d\udd11 No token found, redirecting to login..."),void this.redirectToLogin();const t=await fetch("".concat(this.baseURL,"/api/auth/refresh"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();if(e.success&&e.token)return localStorage.setItem("token",e.token),void console.log("\ud83d\udd11 Token refreshed successfully")}console.warn("\ud83d\udd11 Token refresh failed, redirecting to login..."),this.redirectToLogin()}catch(e){console.error("\ud83d\udd11 Token refresh error:",e),this.redirectToLogin()}}redirectToLogin(){localStorage.removeItem("token"),"/login"!==window.location.pathname&&(window.location.href="/login")}setCache(e,t){this.cache.set(e,{data:t,timestamp:Date.now()})}getFromCache(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=this.cache.get(e);if(!a)return null;return Date.now()-a.timestamp>this.cacheDuration&&!t?(this.cache.delete(e),null):a.data}getMockData(e){return{"/api/dashboard/stats":{success:!0,data:{members:{total:299,active:288,inactive:11,newThisMonth:5},payments:{pending:12,pendingAmount:36e3,monthlyRevenue:15e4,totalRevenue:25e5,totalPaid:287},subscriptions:{active:280,expired:19,total:299,revenue:84e4},activities:[{id:1,type:"payment",description:"\u062f\u0641\u0639\u0629 \u062c\u062f\u064a\u062f\u0629 \u0645\u0646 \u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f",date:(new Date).toISOString(),amount:3e3},{id:2,type:"member",description:"\u0639\u0636\u0648 \u062c\u062f\u064a\u062f \u0627\u0646\u0636\u0645 \u0644\u0644\u0646\u0638\u0627\u0645",date:(new Date).toISOString(),amount:null},{id:3,type:"occasion",description:"\u0645\u0646\u0627\u0633\u0628\u0629 \u062c\u062f\u064a\u062f\u0629 \u062a\u0645 \u0625\u0646\u0634\u0627\u0624\u0647\u0627",date:(new Date).toISOString(),amount:null}]}},"/api/members":{success:!0,data:Array.from({length:10},(e,t)=>({id:t+1,full_name:"\u0639\u0636\u0648 \u062a\u062c\u0631\u064a\u0628\u064a ".concat(t+1),phone:"050123456".concat(t),membership_number:"SH".concat(String(t+1).padStart(3,"0")),balance:Math.floor(5e3*Math.random())+1e3,membership_status:"active",tribal_section:"\u0627\u0644\u0641\u0631\u0639 \u0627\u0644\u0623\u0648\u0644",created_at:(new Date).toISOString()}))}}[e]||null}async login(e,t){return this.request("/api/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async verifyToken(){return this.request("/api/auth/verify",{method:"POST"})}async getDashboardStats(){return this.request("/api/dashboard/stats")}async getMembers(){return this.request("/api/members")}async getMember(e){return this.request("/api/members/".concat(e))}async createMember(e){return this.request("/api/members",{method:"POST",body:JSON.stringify(e)})}async updateMember(e,t){return this.request("/api/members/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteMember(e){return this.request("/api/members/".concat(e),{method:"DELETE"})}async getPayments(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return this.request("/api/payments?".concat(e))}async createPayment(e){return this.request("/api/payments",{method:"POST",body:JSON.stringify(e)})}async updatePaymentStatus(e,t){return this.request("/api/payments/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})})}async getPaymentStats(){return this.request("/api/payments/stats")}async getSubscriptions(){return this.request("/api/subscriptions")}async createSubscription(e){return this.request("/api/subscriptions",{method:"POST",body:JSON.stringify(e)})}async getOccasions(){return this.request("/api/occasions")}async getOccasion(e){return this.request("/api/occasions/".concat(e))}async createOccasion(e){return this.request("/api/occasions",{method:"POST",body:JSON.stringify(e)})}async updateOccasion(e,t){return this.request("/api/occasions/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteOccasion(e){return this.request("/api/occasions/".concat(e),{method:"DELETE"})}async updateRSVP(e,t){return this.request("/api/occasions/".concat(e,"/rsvp"),{method:"PUT",body:JSON.stringify(t)})}async getOccasionStats(){return this.request("/api/occasions/stats")}async getInitiatives(){return this.request("/api/initiatives")}async getInitiative(e){return this.request("/api/initiatives/".concat(e))}async createInitiative(e){return this.request("/api/initiatives",{method:"POST",body:JSON.stringify(e)})}async updateInitiative(e,t){return this.request("/api/initiatives/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async addContribution(e,t){return this.request("/api/initiatives/".concat(e,"/contribute"),{method:"POST",body:JSON.stringify(t)})}async updateContributionStatus(e,t,a){return this.request("/api/initiatives/".concat(e,"/contributions/").concat(t),{method:"PUT",body:JSON.stringify({status:a})})}async getInitiativeStats(){return this.request("/api/initiatives/stats")}async getDiyas(){return this.request("/api/diyas")}async getDiya(e){return this.request("/api/diyas/".concat(e))}async createDiya(e){return this.request("/api/diyas",{method:"POST",body:JSON.stringify(e)})}async updateDiya(e,t){return this.request("/api/diyas/".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteDiya(e){return this.request("/api/diyas/".concat(e),{method:"DELETE"})}async updateDiyaStatus(e,t){return this.request("/api/diyas/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})})}async getMemberDiyas(e){return this.request("/api/diyas/member/".concat(e))}async getDiyaStats(){return this.request("/api/diyas/stats")}async getNotifications(){return this.request("/api/notifications")}async getNotification(e){return this.request("/api/notifications/".concat(e))}async createNotification(e){return this.request("/api/notifications",{method:"POST",body:JSON.stringify(e)})}async deleteNotification(e){return this.request("/api/notifications/".concat(e),{method:"DELETE"})}async markAsRead(e){return this.request("/api/notifications/".concat(e,"/read"),{method:"PUT"})}async bulkMarkAsRead(e){return this.request("/api/notifications/bulk-read",{method:"PUT",body:JSON.stringify({notificationIds:e})})}async getMemberNotifications(e){return this.request("/api/notifications/member/".concat(e))}async getNotificationStats(){return this.request("/api/notifications/stats")}async healthCheck(){return this.request("/api/health")}clearCache(){this.cache.clear(),console.log("\ud83e\uddf9 API cache cleared")}getCacheStatus(){return{size:this.cache.size,keys:Array.from(this.cache.keys()),oldest:Math.min(...Array.from(this.cache.values()).map(e=>e.timestamp)),newest:Math.max(...Array.from(this.cache.values()).map(e=>e.timestamp))}}};const wt=new class{constructor(){this.baseURL="http://localhost:3001"}getAuthToken(){return localStorage.getItem("token")}async makeRequest(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a="".concat(this.baseURL).concat(e),s=(0,i.A)({headers:(0,i.A)({},t.headers)},t),n=this.getAuthToken();n&&(s.headers.Authorization="Bearer ".concat(n));try{const e=await fetch(a,s);if(!e.ok){const t=await e.json().catch(()=>({}));return console.error("API Error Response:",t),{success:!1,error:t.error||t.message||"HTTP error! status: ".concat(e.status),status:e.status}}const t=await e.json();return"success"in t||(t.success=!0),t}catch(r){return console.error("API Error:",r),{success:!1,error:r.message||"Network error"}}}async importMembersFromExcel(e){const t=new FormData;return t.append("excel",e),this.makeRequest("/api/members/import",{method:"POST",body:t,headers:{}})}async getMembersList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:25;const s=new URLSearchParams((0,i.A)({page:t.toString(),limit:a.toString()},e));return this.makeRequest("/api/members?".concat(s))}async getMemberStatistics(){return this.makeRequest("/api/members/statistics")}async sendRegistrationReminders(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.makeRequest("/api/members/send-reminders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberIds:e})})}async getMemberById(e){return this.makeRequest("/api/members/".concat(e))}async addMember(e){return this.makeRequest("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async updateMember(e,t){return this.makeRequest("/api/members/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async deleteMember(e){return this.makeRequest("/api/members/".concat(e),{method:"DELETE"})}async exportMembersToExcel(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=await fetch("".concat(this.baseURL,"/api/members/export?").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(this.getAuthToken())}});if(!t.ok)throw new Error("Export failed");return t.blob()}async getImportHistory(){return this.makeRequest("/api/members/import-history")}async verifyRegistrationToken(e){return this.makeRequest("/api/members/verify-token/".concat(e),{method:"GET"})}async completeProfile(e,t){const a=new FormData;return Object.keys(t).forEach(e=>{"profile_photo"!==e&&null!==t[e]&&void 0!==t[e]&&a.append(e,t[e])}),t.profile_photo&&t.profile_photo instanceof File&&a.append("profile_photo",t.profile_photo),this.makeRequest("/api/members/complete-profile/".concat(e),{method:"POST",body:a,headers:{}})}async uploadProfilePhoto(e,t){const a=new FormData;return a.append("profile_photo",t),this.makeRequest("/api/members/upload-photo/".concat(e),{method:"POST",body:a,headers:{}})}async searchMembers(e){const t=new URLSearchParams({q:e});return this.makeRequest("/api/members/search?".concat(t))}async getMemberByPhone(e){return this.makeRequest("/api/members/by-phone/".concat(e))}async checkMembershipNumberAvailability(e){return this.makeRequest("/api/members/check-membership/".concat(e))}async generateMembershipNumber(){return this.makeRequest("/api/members/generate-membership-number")}async sendWelcomeSMS(e){return this.makeRequest("/api/members/".concat(e,"/send-welcome"),{method:"POST"})}async getRegistrationStatistics(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return this.makeRequest("/api/members/registration-stats?".concat(e))}async bulkUpdateStatus(e,t){return this.makeRequest("/api/members/bulk-update-status",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberIds:e,status:t})})}async sendBulkSMS(e,t){return this.makeRequest("/api/members/bulk-sms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({memberIds:e,message:t})})}},At=wt;var kt=a(4112),St=a(5641),_t=a(7873),Ct=a(45),Ft=a(4729),Tt=a(201),zt=a(2599),Rt=a(4725),Dt=a(1506),It=a(6992),Bt=a(2608);const Et=()=>{const[e,t]=(0,s.useState)(1),[a,n]=(0,s.useState)({fullName:"",nationalId:"",phone:"",email:"",birthDate:"",birthDateHijri:"",gender:"",nationality:"saudi",country:"\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629",city:"",district:"",street:"",buildingNumber:"",postalCode:"",additionalNumber:"",maritalStatus:"",numberOfDependents:0,familyMembers:[],occupation:"",employer:"",employmentType:"full-time",monthlyIncome:"",educationLevel:"",hasHealthConditions:!1,needsAssistance:!1,emergencyContact:"",emergencyPhone:""}),[r,o]=(0,s.useState)([]),[d,p]=(0,s.useState)(!1),[x,u]=(0,s.useState)(!1),[g,b]=(0,s.useState)(""),[j,f]=(0,s.useState)(20),v=(0,s.useRef)(null),N=["\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629","\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0633\u0643\u0646\u064a","\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u064a\u0629","\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629","\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0643\u0645\u064a\u0644\u064a\u0629"],w=[kt.A,l.A,y.A,St.A,c.A];(0,s.useEffect)(()=>{const e=setTimeout(()=>{var e;null===(e=v.current)||void 0===e||e.classList.add("form-visible")},100);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{f(e/5*100)},[e]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{localStorage.setItem("premiumRegistrationFormData",JSON.stringify(a))},1e3);return()=>clearTimeout(e)},[a]),(0,s.useEffect)(()=>{const e=localStorage.getItem("premiumRegistrationFormData");if(e)try{n(JSON.parse(e))}catch(t){console.error("Failed to load saved data")}},[]);const A=(e,t)=>{n(a=>(0,i.A)((0,i.A)({},a),{},{[e]:t})),o(t=>t.filter(t=>t.field!==e))},k=e=>{const t=[];switch(e){case 1:(!a.fullName||a.fullName.length<3)&&t.push({field:"fullName",message:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u0637\u0644\u0648\u0628 (3 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644)"}),a.nationalId&&10===a.nationalId.length||t.push({field:"nationalId",message:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 10 \u0623\u0631\u0642\u0627\u0645"}),a.phone&&a.phone.match(/^(05|5)(5|0|3|6|4|9|1|8|7)([0-9]{7})$/)||t.push({field:"phone",message:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"}),a.email&&!a.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)&&t.push({field:"email",message:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"}),a.gender||t.push({field:"gender",message:"\u064a\u0631\u062c\u0649 \u062a\u062d\u062f\u064a\u062f \u0627\u0644\u062c\u0646\u0633"});break;case 2:a.city||t.push({field:"city",message:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"}),a.district||t.push({field:"district",message:"\u0627\u0644\u062d\u064a \u0645\u0637\u0644\u0648\u0628"}),a.street||t.push({field:"street",message:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639 \u0645\u0637\u0644\u0648\u0628"});break;case 3:a.maritalStatus||t.push({field:"maritalStatus",message:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"}),"married"!==a.maritalStatus||a.spouseName||t.push({field:"spouseName",message:"\u0627\u0633\u0645 \u0627\u0644\u0632\u0648\u062c/\u0627\u0644\u0632\u0648\u062c\u0629 \u0645\u0637\u0644\u0648\u0628"});break;case 4:a.occupation||t.push({field:"occupation",message:"\u0627\u0644\u0645\u0647\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"}),a.employmentType||t.push({field:"employmentType",message:"\u0646\u0648\u0639 \u0627\u0644\u062a\u0648\u0638\u064a\u0641 \u0645\u0637\u0644\u0648\u0628"});break;case 5:a.emergencyContact||t.push({field:"emergencyContact",message:"\u0627\u0633\u0645 \u0634\u062e\u0635 \u0627\u0644\u0637\u0648\u0627\u0631\u0626 \u0645\u0637\u0644\u0648\u0628"}),a.emergencyPhone||t.push({field:"emergencyPhone",message:"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0637\u0648\u0627\u0631\u0626 \u0645\u0637\u0644\u0648\u0628"})}return o(t),0===t.length};return x?(0,S.jsxs)("div",{className:"success-screen animate-scale-up",children:[(0,S.jsxs)("div",{className:"success-animation",children:[(0,S.jsxs)("div",{className:"success-circle",children:[(0,S.jsx)("div",{className:"success-circle-fill"}),(0,S.jsx)(It.A,{className:"success-icon"})]}),(0,S.jsx)("div",{className:"success-sparkles",children:[...Array(12)].map((e,t)=>(0,S.jsx)("div",{className:"sparkle sparkle-".concat(t+1),children:(0,S.jsx)(Bt.A,{className:"w-4 h-4"})},t))})]}),(0,S.jsx)("h1",{className:"success-title",children:"\u062a\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0628\u0646\u062c\u0627\u062d!"}),(0,S.jsx)("p",{className:"success-message",children:"\u0634\u0643\u0631\u0627\u064b \u0644\u0643 \u0639\u0644\u0649 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u0646\u0638\u0627\u0645 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644"}),(0,S.jsxs)("div",{className:"success-details",children:[(0,S.jsxs)("div",{className:"success-detail-card",children:[(0,S.jsx)("div",{className:"detail-icon",children:(0,S.jsx)(c.A,{className:"w-6 h-6"})}),(0,S.jsxs)("div",{className:"detail-content",children:[(0,S.jsx)("span",{className:"detail-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639"}),(0,S.jsxs)("span",{className:"detail-value",children:["REG-",(new Date).getFullYear(),"-",Math.random().toString(36).substr(2,9).toUpperCase()]})]})]}),(0,S.jsxs)("div",{className:"success-detail-card",children:[(0,S.jsx)("div",{className:"detail-icon",children:(0,S.jsx)(V.A,{className:"w-6 h-6"})}),(0,S.jsxs)("div",{className:"detail-content",children:[(0,S.jsx)("span",{className:"detail-label",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062a\u0633\u062c\u064a\u0644"}),(0,S.jsx)("span",{className:"detail-value",children:(new Date).toLocaleDateString("ar-SA")})]})]})]}),(0,S.jsx)("div",{className:"success-actions",children:(0,S.jsxs)("button",{className:"primary-button large",onClick:()=>window.location.href="/",children:[(0,S.jsx)(l.A,{className:"w-5 h-5"}),"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"]})})]}):(0,S.jsxs)("div",{className:"premium-registration-container",children:[(0,S.jsxs)("header",{className:"premium-header",children:[(0,S.jsxs)("div",{className:"header-background",children:[(0,S.jsx)("div",{className:"gradient-overlay"}),(0,S.jsx)("div",{className:"pattern-overlay"})]}),(0,S.jsxs)("div",{className:"header-content",children:[(0,S.jsxs)("div",{className:"logo-section",children:[(0,S.jsx)("div",{className:"logo-wrapper",children:(0,S.jsx)(E.A,{className:"logo-icon"})}),(0,S.jsxs)("div",{className:"logo-text",children:[(0,S.jsx)("h1",{className:"logo-title",children:"\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644"}),(0,S.jsx)("p",{className:"logo-subtitle",children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0627\u0644\u0645\u062a\u0642\u062f\u0645"})]})]}),(0,S.jsxs)("div",{className:"header-badges",children:[(0,S.jsxs)("div",{className:"badge",children:[(0,S.jsx)(Bt.A,{className:"badge-icon"}),(0,S.jsx)("span",{children:"\u0646\u0638\u0627\u0645 \u0645\u062d\u0645\u064a"})]}),(0,S.jsxs)("div",{className:"badge",children:[(0,S.jsx)(me.A,{className:"badge-icon"}),(0,S.jsx)("span",{children:"SSL \u0645\u0634\u0641\u0631"})]}),(0,S.jsxs)("div",{className:"badge",children:[(0,S.jsx)(It.A,{className:"badge-icon"}),(0,S.jsx)("span",{children:"\u0645\u0639\u062a\u0645\u062f"})]})]})]})]}),(0,S.jsxs)("div",{className:"progress-bar-container",children:[(0,S.jsx)("div",{className:"progress-bar-track",children:(0,S.jsx)("div",{className:"progress-bar-fill",style:{width:"".concat(j,"%")},children:(0,S.jsx)("div",{className:"progress-bar-glow"})})}),(0,S.jsxs)("div",{className:"progress-text",children:[(0,S.jsxs)("span",{className:"progress-step",children:["\u0627\u0644\u062e\u0637\u0648\u0629 ",e," \u0645\u0646 ",5]}),(0,S.jsxs)("span",{className:"progress-percent",children:[Math.round(j),"%"]})]})]}),(0,S.jsx)("div",{className:"step-indicator-wrapper",children:(0,S.jsx)("div",{className:"step-indicator",children:[...Array(5)].map((a,n)=>{const i=w[n],r=n+1===e,l=n+1<e;return(0,S.jsxs)(s.Fragment,{children:[(0,S.jsxs)("div",{className:"step-item ".concat(r?"active":""," ").concat(l?"completed":""),onClick:()=>l&&t(n+1),children:[(0,S.jsx)("div",{className:"step-icon",children:l?(0,S.jsx)(It.A,{className:"w-6 h-6"}):(0,S.jsx)(i,{className:"w-5 h-5"})}),(0,S.jsx)("span",{className:"step-label",children:N[n]}),r&&(0,S.jsx)("div",{className:"step-active-indicator"})]}),n<4&&(0,S.jsx)("div",{className:"step-connector ".concat(n+1<e?"completed":"")})]},n)})})}),(0,S.jsx)("div",{className:"form-container",ref:v,children:(0,S.jsxs)("div",{className:"form-wrapper",children:[r.length>0&&(0,S.jsxs)("div",{className:"error-banner animate-shake",children:[(0,S.jsx)(ee.A,{className:"error-icon"}),(0,S.jsx)("div",{className:"error-messages",children:r.map((e,t)=>(0,S.jsx)("p",{className:"error-message",children:e.message},t))})]}),(0,S.jsxs)("div",{className:"form-content",children:[1===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-up",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("div",{className:"section-icon-wrapper",children:(0,S.jsx)(kt.A,{className:"section-icon"})}),(0,S.jsxs)("div",{className:"section-text",children:[(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0627\u0644\u0623\u0633\u0627\u0633\u064a\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 \u0644\u0644\u062a\u0633\u062c\u064a\u0644"})]})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group large",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(kt.A,{className:"label-icon"}),"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"fullName"===e.field)?"error":""," ").concat("fullName"===g?"focused":""),placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0643\u0645\u0627 \u0641\u064a \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629",value:a.fullName,onChange:e=>A("fullName",e.target.value),onFocus:()=>b("fullName"),onBlur:()=>b("")}),"fullName"===g&&(0,S.jsx)("div",{className:"field-hint",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0631\u0628\u0627\u0639\u064a \u0643\u0627\u0645\u0644\u0627\u064b \u0643\u0645\u0627 \u0647\u0648 \u0645\u0633\u062c\u0644 \u0641\u064a \u0627\u0644\u0647\u0648\u064a\u0629"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(_t.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"nationalId"===e.field)?"error":""),placeholder:"1XXXXXXXXX",maxLength:10,value:a.nationalId,onChange:e=>A("nationalId",e.target.value.replace(/\D/g,"")),onFocus:()=>b("nationalId"),onBlur:()=>b(""),dir:"ltr"}),(0,S.jsx)("div",{className:"input-icon",children:(0,S.jsx)(m.A,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(Ct.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"tel",className:"input-field ".concat(r.find(e=>"phone"===e.field)?"error":""),placeholder:"05XXXXXXXX",maxLength:10,value:a.phone,onChange:e=>A("phone",e.target.value.replace(/\D/g,"")),onFocus:()=>b("phone"),onBlur:()=>b(""),dir:"ltr"}),(0,S.jsx)("div",{className:"input-icon",children:(0,S.jsx)(Ft.A,{className:"w-5 h-5 text-gray-400"})})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(je.A,{className:"label-icon"}),"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"]}),(0,S.jsx)("div",{className:"input-wrapper",children:(0,S.jsx)("input",{type:"email",className:"input-field ".concat(r.find(e=>"email"===e.field)?"error":""),placeholder:"example@domain.com",value:a.email,onChange:e=>A("email",e.target.value),onFocus:()=>b("email"),onBlur:()=>b(""),dir:"ltr"})})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(kt.A,{className:"label-icon"}),"\u0627\u0644\u062c\u0646\u0633"]}),(0,S.jsxs)("div",{className:"radio-group",children:[(0,S.jsxs)("label",{className:"radio-label",children:[(0,S.jsx)("input",{type:"radio",name:"gender",value:"male",checked:"male"===a.gender,onChange:e=>A("gender",e.target.value),className:"radio-input"}),(0,S.jsx)("span",{className:"radio-text",children:"\u0630\u0643\u0631"})]}),(0,S.jsxs)("label",{className:"radio-label",children:[(0,S.jsx)("input",{type:"radio",name:"gender",value:"female",checked:"female"===a.gender,onChange:e=>A("gender",e.target.value),className:"radio-input"}),(0,S.jsx)("span",{className:"radio-text",children:"\u0623\u0646\u062b\u0649"})]})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(V.A,{className:"label-icon"}),"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"]}),(0,S.jsx)("div",{className:"input-wrapper",children:(0,S.jsx)("input",{type:"date",className:"input-field",value:a.birthDate,onChange:e=>A("birthDate",e.target.value),max:(new Date).toISOString().split("T")[0]})})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(V.A,{className:"label-icon"}),"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f \u0627\u0644\u0647\u062c\u0631\u064a"]}),(0,S.jsx)("div",{className:"input-wrapper",children:(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"1445/01/01",value:a.birthDateHijri,onChange:e=>A("birthDateHijri",e.target.value),dir:"ltr"})})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(ie.A,{className:"label-icon"}),"\u0627\u0644\u062c\u0646\u0633\u064a\u0629"]}),(0,S.jsxs)("select",{className:"input-field",value:a.nationality,onChange:e=>A("nationality",e.target.value),children:[(0,S.jsx)("option",{value:"saudi",children:"\u0633\u0639\u0648\u062f\u064a"}),(0,S.jsx)("option",{value:"gcc",children:"\u062e\u0644\u064a\u062c\u064a"}),(0,S.jsx)("option",{value:"arab",children:"\u0639\u0631\u0628\u064a"}),(0,S.jsx)("option",{value:"other",children:"\u0623\u062e\u0631\u0649"})]})]})]}),(0,S.jsxs)("div",{className:"document-upload-section",children:[(0,S.jsxs)("h3",{className:"upload-section-title",children:[(0,S.jsx)(Tt.A,{className:"w-5 h-5"}),"\u0627\u0644\u0645\u0631\u0641\u0642\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"]}),(0,S.jsxs)("div",{className:"upload-grid",children:[(0,S.jsxs)("div",{className:"upload-card",children:[(0,S.jsx)("input",{type:"file",id:"nationalIdDoc",accept:"image/*,.pdf",onChange:e=>{var t;return A("nationalIdDocument",null===(t=e.target.files)||void 0===t?void 0:t[0])},className:"hidden"}),(0,S.jsxs)("label",{htmlFor:"nationalIdDoc",className:"upload-label",children:[(0,S.jsx)("div",{className:"upload-icon-wrapper",children:(0,S.jsx)(c.A,{className:"upload-icon"})}),(0,S.jsx)("span",{className:"upload-title",children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"PNG, JPG, PDF - \u062d\u062a\u0649 5MB"}),a.nationalIdDocument&&(0,S.jsxs)("div",{className:"upload-success",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),a.nationalIdDocument.name]})]})]}),(0,S.jsxs)("div",{className:"upload-card",children:[(0,S.jsx)("input",{type:"file",id:"profilePhoto",accept:"image/*",onChange:e=>{var t;return A("profilePhoto",null===(t=e.target.files)||void 0===t?void 0:t[0])},className:"hidden"}),(0,S.jsxs)("label",{htmlFor:"profilePhoto",className:"upload-label",children:[(0,S.jsx)("div",{className:"upload-icon-wrapper",children:(0,S.jsx)(Tt.A,{className:"upload-icon"})}),(0,S.jsx)("span",{className:"upload-title",children:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"PNG, JPG - \u062d\u062a\u0649 2MB"}),a.profilePhoto&&(0,S.jsxs)("div",{className:"upload-success",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),a.profilePhoto.name]})]})]})]})]})]}),2===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-up",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("div",{className:"section-icon-wrapper",children:(0,S.jsx)(l.A,{className:"section-icon"})}),(0,S.jsxs)("div",{className:"section-text",children:[(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0633\u0643\u0646\u064a"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0633\u0643\u0646 \u0627\u0644\u062d\u0627\u0644\u064a \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644"})]})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(Q.A,{className:"label-icon"}),"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"]}),(0,S.jsxs)("select",{className:"input-field ".concat(r.find(e=>"city"===e.field)?"error":""),value:a.city,onChange:e=>A("city",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062f\u064a\u0646\u0629"}),(0,S.jsx)("option",{value:"riyadh",children:"\u0627\u0644\u0631\u064a\u0627\u0636"}),(0,S.jsx)("option",{value:"jeddah",children:"\u062c\u062f\u0629"}),(0,S.jsx)("option",{value:"makkah",children:"\u0645\u0643\u0629 \u0627\u0644\u0645\u0643\u0631\u0645\u0629"}),(0,S.jsx)("option",{value:"madinah",children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0627\u0644\u0645\u0646\u0648\u0631\u0629"}),(0,S.jsx)("option",{value:"dammam",children:"\u0627\u0644\u062f\u0645\u0627\u0645"}),(0,S.jsx)("option",{value:"khobar",children:"\u0627\u0644\u062e\u0628\u0631"}),(0,S.jsx)("option",{value:"dhahran",children:"\u0627\u0644\u0638\u0647\u0631\u0627\u0646"}),(0,S.jsx)("option",{value:"abha",children:"\u0623\u0628\u0647\u0627"}),(0,S.jsx)("option",{value:"tabuk",children:"\u062a\u0628\u0648\u0643"}),(0,S.jsx)("option",{value:"hail",children:"\u062d\u0627\u0626\u0644"}),(0,S.jsx)("option",{value:"qassim",children:"\u0627\u0644\u0642\u0635\u064a\u0645"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(zt.A,{className:"label-icon"}),"\u0627\u0644\u062d\u064a"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"district"===e.field)?"error":""),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u062d\u064a",value:a.district,onChange:e=>A("district",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(l.A,{className:"label-icon"}),"\u0627\u0644\u0634\u0627\u0631\u0639"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"street"===e.field)?"error":""),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639",value:a.street,onChange:e=>A("street",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(l.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u0645\u0628\u0646\u0649"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0628\u0646\u0649",value:a.buildingNumber,onChange:e=>A("buildingNumber",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(je.A,{className:"label-icon"}),"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"12345",maxLength:5,value:a.postalCode,onChange:e=>A("postalCode",e.target.value.replace(/\D/g,"")),dir:"ltr"})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(l.A,{className:"label-icon"}),"\u0627\u0644\u0631\u0642\u0645 \u0627\u0644\u0625\u0636\u0627\u0641\u064a"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"1234",maxLength:4,value:a.additionalNumber,onChange:e=>A("additionalNumber",e.target.value.replace(/\D/g,"")),dir:"ltr"})]})]}),(0,S.jsxs)("div",{className:"address-preview-card",children:[(0,S.jsxs)("div",{className:"address-preview-header",children:[(0,S.jsx)(Q.A,{className:"w-6 h-6 text-blue-600"}),(0,S.jsx)("h3",{children:"\u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0639\u0646\u0648\u0627\u0646"})]}),(0,S.jsx)("div",{className:"address-preview-content",children:a.street&&a.district&&a.city?(0,S.jsxs)("p",{children:[a.street,"\u060c ",a.district,"\u060c ",a.city,a.buildingNumber&&" - \u0645\u0628\u0646\u0649 \u0631\u0642\u0645 ".concat(a.buildingNumber),a.postalCode&&" - ".concat(a.postalCode)]}):(0,S.jsx)("p",{className:"text-gray-400",children:"\u0633\u064a\u0638\u0647\u0631 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0643\u0627\u0645\u0644 \u0647\u0646\u0627 \u0628\u0639\u062f \u0625\u062f\u062e\u0627\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"})})]})]}),3===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-up",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("div",{className:"section-icon-wrapper",children:(0,S.jsx)(y.A,{className:"section-icon"})}),(0,S.jsxs)("div",{className:"section-text",children:[(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0639\u0646 \u0627\u0644\u0623\u0633\u0631\u0629 \u0648\u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"})]})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(K.A,{className:"label-icon"}),"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629"]}),(0,S.jsxs)("select",{className:"input-field ".concat(r.find(e=>"maritalStatus"===e.field)?"error":""),value:a.maritalStatus,onChange:e=>A("maritalStatus",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("option",{value:"single",children:"\u0623\u0639\u0632\u0628 / \u0639\u0632\u0628\u0627\u0621"}),(0,S.jsx)("option",{value:"married",children:"\u0645\u062a\u0632\u0648\u062c / \u0645\u062a\u0632\u0648\u062c\u0629"}),(0,S.jsx)("option",{value:"divorced",children:"\u0645\u0637\u0644\u0642 / \u0645\u0637\u0644\u0642\u0629"}),(0,S.jsx)("option",{value:"widowed",children:"\u0623\u0631\u0645\u0644 / \u0623\u0631\u0645\u0644\u0629"})]})]}),"married"===a.maritalStatus&&(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(kt.A,{className:"label-icon"}),"\u0627\u0633\u0645 \u0627\u0644\u0632\u0648\u062c / \u0627\u0644\u0632\u0648\u062c\u0629"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"spouseName"===e.field)?"error":""),placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",value:a.spouseName||"",onChange:e=>A("spouseName",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(y.A,{className:"label-icon"}),"\u0639\u062f\u062f \u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"]}),(0,S.jsxs)("div",{className:"number-input-wrapper",children:[(0,S.jsx)("button",{type:"button",className:"number-button",onClick:()=>A("numberOfDependents",Math.max(0,a.numberOfDependents-1)),children:"-"}),(0,S.jsx)("input",{type:"number",className:"input-field number-field",value:a.numberOfDependents,onChange:e=>A("numberOfDependents",parseInt(e.target.value)||0),min:"0",max:"20"}),(0,S.jsx)("button",{type:"button",className:"number-button",onClick:()=>A("numberOfDependents",Math.min(20,a.numberOfDependents+1)),children:"+"})]})]})]}),a.numberOfDependents>0&&(0,S.jsxs)("div",{className:"dependents-section",children:[(0,S.jsxs)("h3",{className:"subsection-title",children:[(0,S.jsx)(y.A,{className:"w-5 h-5"}),"\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"]}),(0,S.jsx)("div",{className:"dependents-grid",children:[...Array(Math.min(a.numberOfDependents,10))].map((e,t)=>{var s,n;return(0,S.jsxs)("div",{className:"dependent-card",children:[(0,S.jsx)("div",{className:"dependent-header",children:(0,S.jsxs)("span",{className:"dependent-number",children:["\u0627\u0644\u0645\u0639\u0627\u0644 ",t+1]})}),(0,S.jsxs)("div",{className:"dependent-fields",children:[(0,S.jsx)("input",{type:"text",className:"input-field small",placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",value:(null===(s=a.familyMembers[t])||void 0===s?void 0:s.name)||"",onChange:e=>{const s=[...a.familyMembers];s[t]||(s[t]={name:"",relationship:"",birthDate:"",nationalId:""}),s[t].name=e.target.value,A("familyMembers",s)}}),(0,S.jsxs)("select",{className:"input-field small",value:(null===(n=a.familyMembers[t])||void 0===n?void 0:n.relationship)||"",onChange:e=>{const s=[...a.familyMembers];s[t]||(s[t]={name:"",relationship:"",birthDate:"",nationalId:""}),s[t].relationship=e.target.value,A("familyMembers",s)},children:[(0,S.jsx)("option",{value:"",children:"\u0635\u0644\u0629 \u0627\u0644\u0642\u0631\u0627\u0628\u0629"}),(0,S.jsx)("option",{value:"son",children:"\u0627\u0628\u0646"}),(0,S.jsx)("option",{value:"daughter",children:"\u0627\u0628\u0646\u0629"}),(0,S.jsx)("option",{value:"parent",children:"\u0648\u0627\u0644\u062f / \u0648\u0627\u0644\u062f\u0629"}),(0,S.jsx)("option",{value:"sibling",children:"\u0623\u062e / \u0623\u062e\u062a"})]})]})]},t)})})]})]}),4===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-up",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("div",{className:"section-icon-wrapper",children:(0,S.jsx)(St.A,{className:"section-icon"})}),(0,S.jsxs)("div",{className:"section-text",children:[(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0648\u0638\u064a\u0641\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0648\u0627\u0644\u062a\u0639\u0644\u064a\u0645"})]})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(St.A,{className:"label-icon"}),"\u0627\u0644\u0645\u0647\u0646\u0629"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"occupation"===e.field)?"error":""),placeholder:"\u0627\u0644\u0645\u0633\u0645\u0649 \u0627\u0644\u0648\u0638\u064a\u0641\u064a",value:a.occupation,onChange:e=>A("occupation",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(zt.A,{className:"label-icon"}),"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0623\u0648 \u0627\u0644\u0645\u0624\u0633\u0633\u0629",value:a.employer,onChange:e=>A("employer",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(St.A,{className:"label-icon"}),"\u0646\u0648\u0639 \u0627\u0644\u062a\u0648\u0638\u064a\u0641"]}),(0,S.jsxs)("select",{className:"input-field ".concat(r.find(e=>"employmentType"===e.field)?"error":""),value:a.employmentType,onChange:e=>A("employmentType",e.target.value),children:[(0,S.jsx)("option",{value:"full-time",children:"\u062f\u0648\u0627\u0645 \u0643\u0627\u0645\u0644"}),(0,S.jsx)("option",{value:"part-time",children:"\u062f\u0648\u0627\u0645 \u062c\u0632\u0626\u064a"}),(0,S.jsx)("option",{value:"self-employed",children:"\u0639\u0645\u0644 \u062d\u0631"}),(0,S.jsx)("option",{value:"retired",children:"\u0645\u062a\u0642\u0627\u0639\u062f"}),(0,S.jsx)("option",{value:"unemployed",children:"\u063a\u064a\u0631 \u0645\u0648\u0638\u0641"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(h.A,{className:"label-icon"}),"\u0627\u0644\u062f\u062e\u0644 \u0627\u0644\u0634\u0647\u0631\u064a"]}),(0,S.jsxs)("select",{className:"input-field",value:a.monthlyIncome,onChange:e=>A("monthlyIncome",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0646\u0637\u0627\u0642"}),(0,S.jsx)("option",{value:"less-3000",children:"\u0623\u0642\u0644 \u0645\u0646 3,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"3000-5000",children:"3,000 - 5,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"5000-10000",children:"5,000 - 10,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"10000-15000",children:"10,000 - 15,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"15000-20000",children:"15,000 - 20,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"20000-30000",children:"20,000 - 30,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"more-30000",children:"\u0623\u0643\u062b\u0631 \u0645\u0646 30,000 \u0631\u064a\u0627\u0644"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(ne.A,{className:"label-icon"}),"\u0627\u0644\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u064a"]}),(0,S.jsxs)("select",{className:"input-field",value:a.educationLevel,onChange:e=>A("educationLevel",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u062a\u0648\u0649"}),(0,S.jsx)("option",{value:"primary",children:"\u0627\u0628\u062a\u062f\u0627\u0626\u064a"}),(0,S.jsx)("option",{value:"intermediate",children:"\u0645\u062a\u0648\u0633\u0637"}),(0,S.jsx)("option",{value:"secondary",children:"\u062b\u0627\u0646\u0648\u064a"}),(0,S.jsx)("option",{value:"diploma",children:"\u062f\u0628\u0644\u0648\u0645"}),(0,S.jsx)("option",{value:"bachelor",children:"\u0628\u0643\u0627\u0644\u0648\u0631\u064a\u0648\u0633"}),(0,S.jsx)("option",{value:"master",children:"\u0645\u0627\u062c\u0633\u062a\u064a\u0631"}),(0,S.jsx)("option",{value:"phd",children:"\u062f\u0643\u062a\u0648\u0631\u0627\u0647"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(ne.A,{className:"label-icon"}),"\u0627\u0644\u062a\u062e\u0635\u0635"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0627\u0644\u062a\u062e\u0635\u0635 \u0627\u0644\u062f\u0631\u0627\u0633\u064a",value:a.specialization||"",onChange:e=>A("specialization",e.target.value)})]})]})]}),5===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-up",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("div",{className:"section-icon-wrapper",children:(0,S.jsx)(c.A,{className:"section-icon"})}),(0,S.jsxs)("div",{className:"section-text",children:[(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u062a\u0643\u0645\u064a\u0644\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u0644\u0644\u0637\u0648\u0627\u0631\u0626 \u0648\u0627\u0644\u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629"})]})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(Ct.A,{className:"label-icon"}),"\u0627\u0633\u0645 \u0634\u062e\u0635 \u0644\u0644\u0637\u0648\u0627\u0631\u0626"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"emergencyContact"===e.field)?"error":""),placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",value:a.emergencyContact,onChange:e=>A("emergencyContact",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label required",children:[(0,S.jsx)(Ct.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u0627\u0644\u0637\u0648\u0627\u0631\u0626"]}),(0,S.jsx)("input",{type:"tel",className:"input-field ".concat(r.find(e=>"emergencyPhone"===e.field)?"error":""),placeholder:"05XXXXXXXX",maxLength:10,value:a.emergencyPhone,onChange:e=>A("emergencyPhone",e.target.value.replace(/\D/g,"")),dir:"ltr"})]})]}),(0,S.jsxs)("div",{className:"checkbox-sections",children:[(0,S.jsxs)("div",{className:"checkbox-group",children:[(0,S.jsxs)("label",{className:"premium-checkbox",children:[(0,S.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:a.hasHealthConditions,onChange:e=>A("hasHealthConditions",e.target.checked)}),(0,S.jsx)("span",{className:"checkbox-box",children:a.hasHealthConditions&&(0,S.jsx)(Rt.A,{className:"w-4 h-4"})}),(0,S.jsxs)("span",{className:"checkbox-text",children:[(0,S.jsx)(me.A,{className:"w-5 h-5"}),"\u0644\u062f\u064a \u062d\u0627\u0644\u0629 \u0635\u062d\u064a\u0629 \u062a\u062a\u0637\u0644\u0628 \u0631\u0639\u0627\u064a\u0629 \u062e\u0627\u0635\u0629"]})]}),a.hasHealthConditions&&(0,S.jsx)("div",{className:"conditional-field animate-fade-in",children:(0,S.jsx)("textarea",{className:"input-field textarea",placeholder:"\u064a\u0631\u062c\u0649 \u062a\u0648\u0636\u064a\u062d \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0635\u062d\u064a\u0629...",rows:3,value:a.healthConditions||"",onChange:e=>A("healthConditions",e.target.value)})})]}),(0,S.jsxs)("div",{className:"checkbox-group",children:[(0,S.jsxs)("label",{className:"premium-checkbox",children:[(0,S.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:a.needsAssistance,onChange:e=>A("needsAssistance",e.target.checked)}),(0,S.jsx)("span",{className:"checkbox-box",children:a.needsAssistance&&(0,S.jsx)(Rt.A,{className:"w-4 h-4"})}),(0,S.jsxs)("span",{className:"checkbox-text",children:[(0,S.jsx)(K.A,{className:"w-5 h-5"}),"\u0623\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0645\u0633\u0627\u0639\u062f\u0629 \u0645\u0646 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"]})]}),a.needsAssistance&&(0,S.jsx)("div",{className:"conditional-field animate-fade-in",children:(0,S.jsx)("textarea",{className:"input-field textarea",placeholder:"\u064a\u0631\u062c\u0649 \u062a\u0648\u0636\u064a\u062d \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629...",rows:3,value:a.assistanceType||"",onChange:e=>A("assistanceType",e.target.value)})})]})]}),(0,S.jsxs)("div",{className:"summary-section",children:[(0,S.jsxs)("h3",{className:"summary-title",children:[(0,S.jsx)(D.A,{className:"w-6 h-6"}),"\u0645\u0644\u062e\u0635 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u062f\u062e\u0644\u0629"]}),(0,S.jsxs)("div",{className:"summary-grid",children:[(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,S.jsx)("span",{className:"summary-value",children:a.fullName||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.nationalId||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644:"}),(0,S.jsx)("span",{className:"summary-value",children:a.phone||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.city?{riyadh:"\u0627\u0644\u0631\u064a\u0627\u0636",jeddah:"\u062c\u062f\u0629",makkah:"\u0645\u0643\u0629 \u0627\u0644\u0645\u0643\u0631\u0645\u0629",madinah:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0627\u0644\u0645\u0646\u0648\u0631\u0629",dammam:"\u0627\u0644\u062f\u0645\u0627\u0645",khobar:"\u0627\u0644\u062e\u0628\u0631",dhahran:"\u0627\u0644\u0638\u0647\u0631\u0627\u0646",abha:"\u0623\u0628\u0647\u0627",tabuk:"\u062a\u0628\u0648\u0643",hail:"\u062d\u0627\u0626\u0644",qassim:"\u0627\u0644\u0642\u0635\u064a\u0645"}[a.city]||a.city:"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.maritalStatus?{single:"\u0623\u0639\u0632\u0628 / \u0639\u0632\u0628\u0627\u0621",married:"\u0645\u062a\u0632\u0648\u062c / \u0645\u062a\u0632\u0648\u062c\u0629",divorced:"\u0645\u0637\u0644\u0642 / \u0645\u0637\u0644\u0642\u0629",widowed:"\u0623\u0631\u0645\u0644 / \u0623\u0631\u0645\u0644\u0629"}[a.maritalStatus]:"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u0645\u0647\u0646\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.occupation||"---"})]})]})]})]})]}),(0,S.jsxs)("div",{className:"form-navigation",children:[e>1&&(0,S.jsxs)("button",{className:"nav-button secondary",onClick:()=>{t(e=>Math.max(e-1,1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:d,children:[(0,S.jsx)(Dt.A,{className:"button-icon rotate-180"}),(0,S.jsx)("span",{children:"\u0627\u0644\u0633\u0627\u0628\u0642"})]}),(0,S.jsx)("div",{className:"nav-spacer"}),e<5?(0,S.jsxs)("button",{className:"nav-button primary",onClick:()=>{k(e)&&(t(e=>Math.min(e+1,5)),window.scrollTo({top:0,behavior:"smooth"}))},disabled:d,children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0627\u0644\u064a"}),(0,S.jsx)(Dt.A,{className:"button-icon"})]}):(0,S.jsx)("button",{className:"nav-button submit ".concat(d?"loading":""),onClick:async()=>{if(k(e)){p(!0);try{if(!(await fetch("".concat("http://localhost:3001","/api/members/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok)throw new Error("Registration failed");u(!0),localStorage.removeItem("premiumRegistrationFormData"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},500)}catch(t){console.error("Submission error:",t),o([{field:"submit",message:"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0627\u0644\u062a\u0633\u062c\u064a\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649."}])}finally{p(!1)}}},disabled:d,children:d?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"button-loader"}),(0,S.jsx)("span",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(Rt.A,{className:"button-icon"}),(0,S.jsx)("span",{children:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628"})]})})]})]})}),(0,S.jsx)("footer",{className:"registration-footer",children:(0,S.jsxs)("div",{className:"footer-content",children:[(0,S.jsx)("p",{className:"footer-text",children:"\xa9 2024 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 - \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629"}),(0,S.jsxs)("div",{className:"footer-links",children:[(0,S.jsx)("a",{href:"/privacy",children:"\u0633\u064a\u0627\u0633\u0629 \u0627\u0644\u062e\u0635\u0648\u0635\u064a\u0629"}),(0,S.jsx)("span",{className:"separator",children:"\u2022"}),(0,S.jsx)("a",{href:"/terms",children:"\u0627\u0644\u0634\u0631\u0648\u0637 \u0648\u0627\u0644\u0623\u062d\u0643\u0627\u0645"}),(0,S.jsx)("span",{className:"separator",children:"\u2022"}),(0,S.jsx)("a",{href:"/support",children:"\u0627\u0644\u062f\u0639\u0645 \u0627\u0644\u0641\u0646\u064a"})]})]})})]})};var Pt=a(1946);const Lt=e=>{let{onMemberAdded:t}=e;const[a,n]=(0,s.useState)({full_name:"",phone:"",email:"",national_id:"",tribal_section:"",city:"",district:"",occupation:"",workplace:"",password:"",confirmPassword:""}),[r,o]=(0,s.useState)({}),[c,d]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),[u,g]=(0,s.useState)(null),[b,j]=(0,s.useState)(null),[f,y]=(0,s.useState)(null),v=e=>{const{name:t,value:a}=e.target;n(e=>(0,i.A)((0,i.A)({},e),{},{[t]:a})),r[t]&&o(e=>(0,i.A)((0,i.A)({},e),{},{[t]:""}))};return p?(0,S.jsxs)("div",{className:"success-screen",children:[(0,S.jsx)(D.A,{className:"success-icon"}),(0,S.jsx)("h2",{children:"\u062a\u0645\u062a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0636\u0648 \u0628\u0646\u062c\u0627\u062d!"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621..."})]}):(0,S.jsx)("div",{className:"compact-add-member-form",children:(0,S.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return a.full_name.trim()||(e.full_name="\u0627\u0644\u0627\u0633\u0645 \u0645\u0637\u0644\u0648\u0628"),a.phone.trim()?/^(05|5)(5|0|3|6|4|9|1|8|7)([0-9]{7})$/.test(a.phone.replace(/\s/g,""))||(e.phone="\u0631\u0642\u0645 \u0647\u0627\u062a\u0641 \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"):e.phone="\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0645\u0637\u0644\u0648\u0628",a.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)&&(e.email="\u0628\u0631\u064a\u062f \u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u0627\u0644\u062d"),a.password?a.password.length<6&&(e.password="\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064a\u062c\u0628 \u0623\u0646 \u062a\u0643\u0648\u0646 6 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"):e.password="\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u0637\u0644\u0648\u0628\u0629",a.password!==a.confirmPassword&&(e.confirmPassword="\u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629"),o(e),0===Object.keys(e).length})()){d(!0);try{const e={full_name:a.full_name,phone:a.phone,email:a.email||"",national_id:a.national_id||"",tribal_section:a.tribal_section||"",city:a.city||"",district:a.district||"",occupation:a.occupation||"",employer:a.workplace||"",password:a.password,membership_status:"active",profile_completed:!1};console.log("\ud83d\udce4 Sending new member data:",e);const s=await At.addMember(e);if(console.log("\ud83d\udce5 Add member response:",s),!s.success)throw new Error(s.error||"Failed to add member");x(!0),setTimeout(()=>{n({full_name:"",phone:"",email:"",national_id:"",tribal_section:"",city:"",district:"",occupation:"",workplace:"",password:"",confirmPassword:""}),x(!1),t&&t(s.data)},2e3)}catch(s){console.error("\u274c Error adding member:",s),o({submit:s.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0636\u0648"})}finally{d(!1)}}},className:"member-form",children:(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-column",children:[(0,S.jsxs)("div",{className:"column-header",children:[(0,S.jsx)(kt.A,{className:"header-icon"}),(0,S.jsx)("h3",{children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"full_name",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 *"}),(0,S.jsx)("input",{type:"text",id:"full_name",name:"full_name",value:a.full_name,onChange:v,className:r.full_name?"error":"",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",dir:"rtl"}),r.full_name&&(0,S.jsx)("span",{className:"error-message",children:r.full_name})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"phone",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,S.jsx)("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:v,className:r.phone?"error":"",placeholder:"05XXXXXXXX",dir:"ltr"}),r.phone&&(0,S.jsx)("span",{className:"error-message",children:r.phone})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"email",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,S.jsx)("input",{type:"email",id:"email",name:"email",value:a.email,onChange:v,className:r.email?"error":"",placeholder:"example@email.com",dir:"ltr"}),r.email&&(0,S.jsx)("span",{className:"error-message",children:r.email})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"national_id",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629"}),(0,S.jsx)("input",{type:"text",id:"national_id",name:"national_id",value:a.national_id,onChange:v,placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629",dir:"ltr"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"tribal_section",children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsxs)("select",{id:"tribal_section",name:"tribal_section",value:a.tribal_section,onChange:v,className:"form-select",dir:"rtl",children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("option",{value:"\u0627\u0644\u062f\u063a\u064a\u0634",children:"\u0627\u0644\u062f\u063a\u064a\u0634"}),(0,S.jsx)("option",{value:"\u0627\u0644\u0631\u0634\u064a\u062f",children:"\u0627\u0644\u0631\u0634\u064a\u062f"}),(0,S.jsx)("option",{value:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646",children:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646"}),(0,S.jsx)("option",{value:"\u0627\u0644\u0639\u064a\u062f",children:"\u0627\u0644\u0639\u064a\u062f"}),(0,S.jsx)("option",{value:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f",children:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f"}),(0,S.jsx)("option",{value:"\u0631\u0634\u0648\u062f",children:"\u0631\u0634\u0648\u062f"}),(0,S.jsx)("option",{value:"\u0631\u0634\u064a\u062f",children:"\u0631\u0634\u064a\u062f"}),(0,S.jsx)("option",{value:"\u0639\u0642\u0627\u0628",children:"\u0639\u0642\u0627\u0628"})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsx)("div",{className:"upload-area",children:m?(0,S.jsxs)("div",{className:"preview-container",children:[(0,S.jsx)("img",{src:m,alt:"\u0635\u0648\u0631\u0629 \u0634\u062e\u0635\u064a\u0629",className:"photo-preview"}),(0,S.jsx)("button",{type:"button",className:"remove-btn",onClick:()=>{j(null),h(null)},children:(0,S.jsx)(A.A,{})})]}):(0,S.jsxs)("label",{htmlFor:"photo-upload",className:"upload-label",children:[(0,S.jsx)(Tt.A,{className:"upload-icon"}),(0,S.jsx)("span",{children:"\u0627\u0636\u063a\u0637 \u0644\u0631\u0641\u0639 \u0627\u0644\u0635\u0648\u0631\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"JPG, PNG (\u062d\u062f \u0623\u0642\u0635\u0649 5MB)"}),(0,S.jsx)("input",{type:"file",id:"photo-upload",accept:"image/jpeg,image/png,image/jpg",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return void o(e=>(0,i.A)((0,i.A)({},e),{},{photo:"\u062d\u062c\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 5 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a"}));j(t);const e=new FileReader;e.onload=e=>{h(e.target.result)},e.readAsDataURL(t),o(e=>(0,i.A)((0,i.A)({},e),{},{photo:""}))}},style:{display:"none"}})]})}),r.photo&&(0,S.jsx)("span",{className:"error-message",children:r.photo})]})]}),(0,S.jsxs)("div",{className:"form-column",children:[(0,S.jsxs)("div",{className:"column-header",children:[(0,S.jsx)(l.A,{className:"header-icon"}),(0,S.jsx)("h3",{children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0648\u0627\u0644\u0639\u0645\u0644"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"city",children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"}),(0,S.jsx)("input",{type:"text",id:"city",name:"city",value:a.city,onChange:v,placeholder:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",dir:"rtl"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"district",children:"\u0627\u0644\u062d\u064a"}),(0,S.jsx)("input",{type:"text",id:"district",name:"district",value:a.district,onChange:v,placeholder:"\u0627\u0644\u062d\u064a",dir:"rtl"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"occupation",children:"\u0627\u0644\u0645\u0647\u0646\u0629"}),(0,S.jsx)("input",{type:"text",id:"occupation",name:"occupation",value:a.occupation,onChange:v,placeholder:"\u0627\u0644\u0645\u0647\u0646\u0629",dir:"rtl"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"workplace",children:"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"}),(0,S.jsx)("input",{type:"text",id:"workplace",name:"workplace",value:a.workplace,onChange:v,placeholder:"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644",dir:"rtl"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsx)("div",{className:"upload-area",children:u?(0,S.jsxs)("div",{className:"preview-container",children:[u.includes("application/pdf")?(0,S.jsxs)("div",{className:"pdf-preview",children:[(0,S.jsx)(Pt.A,{className:"doc-icon"}),(0,S.jsx)("span",{children:"\u0645\u0644\u0641 PDF"})]}):(0,S.jsx)("img",{src:u,alt:"\u0627\u0644\u0647\u0648\u064a\u0629",className:"id-preview"}),(0,S.jsx)("button",{type:"button",className:"remove-btn",onClick:()=>{y(null),g(null)},children:(0,S.jsx)(A.A,{})})]}):(0,S.jsxs)("label",{htmlFor:"id-upload",className:"upload-label",children:[(0,S.jsx)(Pt.A,{className:"upload-icon"}),(0,S.jsx)("span",{children:"\u0627\u0636\u063a\u0637 \u0644\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"JPG, PNG, PDF (\u062d\u062f \u0623\u0642\u0635\u0649 10MB)"}),(0,S.jsx)("input",{type:"file",id:"id-upload",accept:"image/jpeg,image/png,image/jpg,application/pdf",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>10485760)return void o(e=>(0,i.A)((0,i.A)({},e),{},{idDoc:"\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 10 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a"}));y(t);const e=new FileReader;e.onload=e=>{g(e.target.result)},e.readAsDataURL(t),o(e=>(0,i.A)((0,i.A)({},e),{},{idDoc:""}))}},style:{display:"none"}})]})}),r.idDoc&&(0,S.jsx)("span",{className:"error-message",children:r.idDoc})]})]}),(0,S.jsxs)("div",{className:"form-column",children:[(0,S.jsxs)("div",{className:"column-header",children:[(0,S.jsx)(_t.A,{className:"header-icon"}),(0,S.jsx)("h3",{children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"password",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 *"}),(0,S.jsx)("input",{type:"password",id:"password",name:"password",value:a.password,onChange:v,className:r.password?"error":"",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",dir:"ltr"}),r.password&&(0,S.jsx)("span",{className:"error-message",children:r.password})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{htmlFor:"confirmPassword",children:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 *"}),(0,S.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:v,className:r.confirmPassword?"error":"",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",dir:"ltr"}),r.confirmPassword&&(0,S.jsx)("span",{className:"error-message",children:r.confirmPassword})]}),(0,S.jsx)("div",{className:"form-actions",children:(0,S.jsx)("button",{type:"submit",className:"submit-btn",disabled:c,children:c?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{className:"loading-spinner"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0636\u0627\u0641\u0629..."]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(D.A,{className:"btn-icon"}),"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0636\u0648"]})})}),r.submit&&(0,S.jsx)("div",{className:"submit-error",children:r.submit})]})]})})})},Mt=e=>{let{label:t,value:a,onChange:n,options:i,placeholder:r="\u0627\u062e\u062a\u0631...",name:l,id:o}=e;const[c,d]=(0,s.useState)(""),[p,x]=(0,s.useState)(!1),m=(0,s.useRef)(null);(0,s.useEffect)(()=>{function e(e){m.current&&!m.current.contains(e.target)&&x(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[m]),(0,s.useEffect)(()=>{if(a){const e=i.find(e=>e.value===a);d(e?e.label:a)}else d("")},[a,i]);const h=(e,t)=>{n({target:{value:e,name:l}}),d(t),x(!1)};return(0,S.jsxs)("div",{className:"form-group arabic-select-container",children:[(0,S.jsx)("label",{children:t}),(0,S.jsxs)("div",{ref:m,className:"custom-select-wrapper",style:{position:"relative"},children:[(0,S.jsxs)("div",{className:"form-input custom-select-display",onClick:()=>x(!p),style:{cursor:"pointer",position:"relative",paddingLeft:"35px",backgroundColor:"white",userSelect:"none",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsx)("span",{style:{color:c?"#1f2937":"#9ca3af",fontSize:"15px",fontFamily:"system-ui, -apple-system, Arial, sans-serif"},children:c||r}),(0,S.jsx)("svg",{style:{position:"absolute",left:"10px",width:"20px",height:"20px",transform:p?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&(0,S.jsxs)("div",{className:"custom-select-dropdown",style:{position:"absolute",top:"100%",left:0,right:0,backgroundColor:"white",border:"1px solid #D1D5DB",borderRadius:"8px",marginTop:"4px",maxHeight:"200px",overflowY:"auto",zIndex:1e3,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)"},children:[(0,S.jsx)("div",{className:"custom-select-option",onClick:()=>h("",""),style:{padding:"10px 16px",cursor:"pointer",color:"#9ca3af",fontSize:"15px",fontFamily:"system-ui, -apple-system, Arial, sans-serif",borderBottom:"1px solid #f3f4f6"},onMouseEnter:e=>e.target.style.backgroundColor="#f3f4f6",onMouseLeave:e=>e.target.style.backgroundColor="white",children:r}),i.map(e=>(0,S.jsx)("div",{className:"custom-select-option",onClick:()=>h(e.value,e.label),style:{padding:"10px 16px",cursor:"pointer",color:"#1f2937",fontSize:"15px",fontFamily:"system-ui, -apple-system, Arial, sans-serif",backgroundColor:a===e.value?"#eff6ff":"white",fontWeight:a===e.value?"600":"400"},onMouseEnter:t=>{a!==e.value&&(t.target.style.backgroundColor="#f9fafb")},onMouseLeave:t=>{a!==e.value&&(t.target.style.backgroundColor="white")},children:e.label},e.value))]})]}),(0,S.jsxs)("select",{id:o,name:l,value:a,onChange:e=>n(e),style:{display:"none"},children:[(0,S.jsx)("option",{value:"",children:r}),i.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))]})]})};var Wt=a(4517),Ot=a(229);const qt=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[r,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(!1),[d,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)("list"),[u,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[f,y]=(0,s.useState)("personal"),v=(0,s.useRef)(null),[N,w]=(0,s.useState)({status:"",profile_completed:"",social_security_beneficiary:""}),[_,C]=(0,s.useState)({page:1,limit:50,total:0,totalPages:0}),[F,T]=(0,s.useState)(!0),z=(0,s.useRef)(new Map),[R,D]=(0,s.useState)(!1),I=()=>{let e=localStorage.getItem("userRole");const t=localStorage.getItem("user");if(!e&&t)try{e=JSON.parse(t).role}catch(a){console.error("Error parsing user data:",a)}return console.log("Current user role:",e),e||"viewer"};(0,s.useEffect)(()=>{B(!1,!0)},[]),(0,s.useEffect)(()=>{F||(C(e=>(0,i.A)((0,i.A)({},e),{},{page:1})),B())},[N]),(0,s.useEffect)(()=>{F||B()},[_.limit]),(0,s.useEffect)(()=>(v.current&&clearTimeout(v.current),F||(D(!0),v.current=setTimeout(()=>{B(!1,!1,!0)},300)),()=>{v.current&&clearTimeout(v.current)}),[r]);const B=async function(){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];console.log("\ud83d\udd0d Loading members..."),console.log("API Base URL:",wt.baseURL),console.log("Auth Token:",localStorage.getItem("token")?"Present":"Missing"),console.log("User Role:",I());const s="".concat(_.page,"-").concat(_.limit,"-").concat(r,"-").concat(JSON.stringify(N));if(!e&&!a&&z.current.has(s)){console.log("\u2705 Using cached data for page",_.page);const e=z.current.get(s);return t(e.members),void C(t=>(0,i.A)((0,i.A)({},t),{},{total:e.total,totalPages:e.totalPages}))}e&&n(!0),e&&T(!1);try{const e={};r.trim()&&(e.search=r.trim()),N.status&&(e.status=N.status),N.profile_completed&&(e.profile_completed=N.profile_completed),N.social_security_beneficiary&&(e.social_security_beneficiary=N.social_security_beneficiary),console.log("\ud83d\udce4 Sending request with filters:",e),console.log("Page:",_.page,"Limit:",_.limit);const a=await wt.getMembersList(e,_.page,_.limit);console.log("\u2705 API Response received:",a);const n=a.data||a.members||[],l=a.pagination||{};if(console.log("\u2705 Members count:",n.length),console.log("\u2705 Total members:",l.total||a.total),t(n),C(e=>(0,i.A)((0,i.A)({},e),{},{total:l.total||a.total||0,totalPages:l.pages||a.totalPages||0})),z.current.set(s,{members:n,total:l.total||a.total||0,totalPages:l.pages||a.totalPages||0}),z.current.size>10){const e=z.current.keys().next().value;z.current.delete(e)}}catch(l){console.error("\u274c API Error:",l),console.error("\u274c Error details:",l.message),console.error("\u274c Error stack:",l.stack),console.error("\u274c Full error object:",JSON.stringify(l,null,2)),alert("\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a: ".concat(l.message,"\n\n\u062a\u062d\u0642\u0642 \u0645\u0646:\n1. \u0627\u0644\u062e\u0627\u062f\u0645 \u064a\u0639\u0645\u0644 \u0639\u0644\u0649 \u0627\u0644\u0645\u0646\u0641\u0630 5001\n2. \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")),console.log("\u26a0\ufe0f Setting empty members array due to error"),t([]),C(e=>(0,i.A)((0,i.A)({},e),{},{total:0,totalPages:0}))}finally{n(!1),D(!1),console.log("\u2705 Loading complete")}},E=(0,s.useCallback)(e=>{l(e.target.value),C(e=>(0,i.A)((0,i.A)({},e),{},{page:1}))},[]),L=(e,t)=>{w(a=>(0,i.A)((0,i.A)({},a),{},{[e]:t})),C(e=>(0,i.A)((0,i.A)({},e),{},{page:1}))},H=e=>{if(!e.length)return"";const t=Object.keys(e[0]);return[t.join(","),...e.map(e=>t.map(t=>'"'.concat((e[t]||"").toString().replace(/"/g,'""'),'"')).join(","))].join("\n")},U=e=>{C(t=>(0,i.A)((0,i.A)({},t),{},{page:e})),B(!0)},X=e=>{h("list"),B()},Y=()=>{h("list")},G=()=>{g(!1),j(null)},V=(e,t)=>{console.log("\ud83d\udcdd Field changed: ".concat(e," = ").concat(t)),j(a=>{const s=(0,i.A)((0,i.A)({},a),{},{[e]:t});return console.log("Updated member state:",s),s})};(0,s.useEffect)(()=>{b&&u&&console.log("\ud83d\udd0d Edit modal opened with member data:",{id:b.id,name:b.full_name,gender:b.gender,tribal_section:b.tribal_section})},[b,u]);return"add"===m?(0,S.jsxs)("div",{className:"full-page-add-member",children:[(0,S.jsxs)("div",{className:"add-member-header",children:[(0,S.jsxs)("button",{className:"back-to-list-btn",onClick:Y,children:[(0,S.jsx)(q.A,{className:"btn-icon"}),(0,S.jsx)("span",{children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"})]}),(0,S.jsx)("h1",{className:"add-member-title",children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0636\u0648 \u062c\u062f\u064a\u062f"})]}),(0,S.jsx)("div",{className:"add-member-content",children:(0,S.jsx)(Lt,{onMemberAdded:X})})]}):(0,S.jsxs)("div",{className:"two-section-container",children:[(0,S.jsx)("div",{className:"top-control-section",children:(0,S.jsxs)("div",{className:"control-section-inner",children:[(0,S.jsxs)("div",{className:"control-row",children:[(0,S.jsxs)("button",{className:"add-member-btn",onClick:()=>{h("add")},children:[(0,S.jsx)(p.A,{className:"btn-icon"}),(0,S.jsx)("span",{children:"\u0625\u0636\u0627\u0641\u0629 \u0639\u0636\u0648 \u062c\u062f\u064a\u062f"})]}),(0,S.jsxs)("div",{className:"search-container",children:[(0,S.jsx)(P.A,{className:"search-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0639\u0636\u0648...",value:r,onChange:E,className:"search-input",dir:"rtl"})]})]}),(0,S.jsxs)("div",{className:"control-row",children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsxs)("button",{className:"filter-toggle-btn",onClick:()=>c(!o),children:[(0,S.jsx)(Wt.A,{className:"btn-icon"}),(0,S.jsx)("span",{children:"\u0627\u0644\u0641\u0644\u0627\u062a\u0631"}),Object.values(N).filter(e=>e).length>0&&(0,S.jsx)("span",{className:"filter-badge",children:Object.values(N).filter(e=>e).length})]}),o&&(0,S.jsxs)("div",{className:"filter-dropdown",children:[(0,S.jsxs)("div",{className:"filter-item",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,S.jsxs)("select",{value:N.status,onChange:e=>L("status",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u0644\u0643\u0644"}),(0,S.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"})]})]}),(0,S.jsxs)("div",{className:"filter-item",children:[(0,S.jsx)("label",{children:"\u0627\u0643\u062a\u0645\u0627\u0644 \u0627\u0644\u0645\u0644\u0641:"}),(0,S.jsxs)("select",{value:N.profile_completed,onChange:e=>L("profile_completed",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u0644\u0643\u0644"}),(0,S.jsx)("option",{value:"true",children:"\u0645\u0643\u062a\u0645\u0644"}),(0,S.jsx)("option",{value:"false",children:"\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644"})]})]}),(0,S.jsxs)("div",{className:"filter-item",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a:"}),(0,S.jsxs)("select",{value:N.social_security_beneficiary,onChange:e=>L("social_security_beneficiary",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u0644\u0643\u0644"}),(0,S.jsx)("option",{value:"true",children:"\u0645\u0633\u062a\u0641\u064a\u062f"}),(0,S.jsx)("option",{value:"false",children:"\u063a\u064a\u0631 \u0645\u0633\u062a\u0641\u064a\u062f"})]})]})]})]}),(0,S.jsxs)("div",{className:"import-export-group",children:[(0,S.jsxs)("button",{className:"import-btn",onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".csv,.xlsx,.xls",e.onchange=async e=>{const a=e.target.files[0];if(a){const e=new FileReader;e.onload=async e=>{try{const a=e.target.result.split("\n"),s=a[0].split(",").map(e=>e.replace(/["\r]/g,"").trim()),n=[];for(let e=1;e<a.length;e++)if(a[e].trim()){const t=a[e].match(/(".*?"|[^,]+)/g).map(e=>e.replace(/["\r]/g,"").trim()),r={};s.forEach((e,a)=>{"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"===e&&(r.full_name=t[a]),"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"===e&&(r.phone=t[a]),"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"===e&&(r.email=t[a]),"\u0627\u0644\u062d\u0627\u0644\u0629"===e&&(r.status="\u0646\u0634\u0637"===t[a]?"active":"inactive"),"\u0627\u0643\u062a\u0645\u0627\u0644 \u0627\u0644\u0645\u0644\u0641"===e&&(r.profile_completed="\u0645\u0643\u062a\u0645\u0644"===t[a])}),r.full_name&&r.phone&&n.push((0,i.A)((0,i.A)({},r),{},{id:Date.now()+e}))}n.length>0?(t(e=>[...e,...n]),alert("\u062a\u0645 \u0627\u0633\u062a\u064a\u0631\u0627\u062f ".concat(n.length," \u0639\u0636\u0648 \u0628\u0646\u062c\u0627\u062d"))):alert("\u0644\u0645 \u064a\u062a\u0645 \u0627\u0644\u0639\u062b\u0648\u0631 \u0639\u0644\u0649 \u0628\u064a\u0627\u0646\u0627\u062a \u0635\u0627\u0644\u062d\u0629 \u0644\u0644\u0627\u0633\u062a\u064a\u0631\u0627\u062f")}catch(a){console.error("Import error:",a),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0633\u062a\u064a\u0631\u0627\u062f \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},e.readAsText(a,"UTF-8")}},e.click()},children:[(0,S.jsx)(Ot.A,{className:"btn-icon"}),(0,S.jsx)("span",{children:"\u0627\u0633\u062a\u064a\u0631\u0627\u062f Excel"})]}),(0,S.jsxs)("button",{className:"export-btn",onClick:async()=>{try{const t=e.map(e=>({"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644":e.full_name,"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641":e.phone,"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a":e.email||"","\u0627\u0644\u062d\u0627\u0644\u0629":"active"===e.status?"\u0646\u0634\u0637":"\u063a\u064a\u0631 \u0646\u0634\u0637","\u0627\u0643\u062a\u0645\u0627\u0644 \u0627\u0644\u0645\u0644\u0641":e.profile_completed?"\u0645\u0643\u062a\u0645\u0644":"\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644"})),a="\ufeff"+H(t),s=new Blob([a],{type:"text/csv;charset=utf-8;"}),n=window.URL.createObjectURL(s),i=document.createElement("a");i.href=n,i.download="\u0627\u0644\u0623\u0639\u0636\u0627\u0621_".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(n)}catch(t){console.error("Export error:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u0635\u062f\u064a\u0631 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a")}},children:[(0,S.jsx)(J.A,{className:"btn-icon"}),(0,S.jsx)("span",{children:"\u062a\u0635\u062f\u064a\u0631 Excel"})]})]})]})]})}),(0,S.jsx)("div",{className:"bottom-data-section",children:(0,S.jsxs)("div",{className:"data-section-inner",children:[(0,S.jsxs)("div",{className:"results-info",style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,S.jsxs)("span",{children:["\u0639\u0631\u0636 ",e.length," \u0645\u0646 ",_.total," \u0639\u0636\u0648"]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)("label",{htmlFor:"pageSize",style:{fontSize:"14px"},children:"\u0639\u0631\u0636:"}),(0,S.jsxs)("select",{id:"pageSize",value:_.limit,onChange:e=>(e=>{const t=parseInt(e);console.log("\ud83d\udd04 Changing page size to:",t),z.current.clear(),C(e=>(0,i.A)((0,i.A)({},e),{},{limit:t,page:1}))})(e.target.value),style:{padding:"6px 12px",borderRadius:"8px",border:"1px solid #ddd",backgroundColor:"white",fontSize:"14px",cursor:"pointer",minWidth:"80px"},children:[(0,S.jsx)("option",{value:"10",children:"10"}),(0,S.jsx)("option",{value:"20",children:"20"}),(0,S.jsx)("option",{value:"50",children:"50"}),(0,S.jsx)("option",{value:"100",children:"100"})]}),(0,S.jsx)("span",{style:{fontSize:"14px"},children:"\u0641\u064a \u0627\u0644\u0635\u0641\u062d\u0629"})]})]}),a?(0,S.jsxs)("div",{className:"loading-container",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a..."})]}):0===e.length?(0,S.jsxs)("div",{style:{padding:"40px",textAlign:"center",background:"#f8f9fa",borderRadius:"12px",margin:"20px 0"},children:[(0,S.jsx)("h3",{style:{color:"#666",marginBottom:"20px"},children:"\u26a0\ufe0f \u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"}),(0,S.jsx)("p",{style:{color:"#999",marginBottom:"20px"},children:"\u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645 \u0648\u0648\u062c\u0648\u062f \u0628\u064a\u0627\u0646\u0627\u062a \u0641\u064a \u0642\u0627\u0639\u062f\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}),(0,S.jsxs)("div",{style:{background:"white",padding:"20px",borderRadius:"8px",textAlign:"right",maxWidth:"600px",margin:"0 auto"},children:[(0,S.jsx)("p",{children:(0,S.jsx)("strong",{children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062a\u0634\u062e\u064a\u0635:"})}),(0,S.jsxs)("p",{children:["API URL: ",wt.baseURL]}),(0,S.jsxs)("p",{children:["Token: ",localStorage.getItem("token")?"\u2705 \u0645\u0648\u062c\u0648\u062f":"\u274c \u063a\u064a\u0631 \u0645\u0648\u062c\u0648\u062f"]}),(0,S.jsxs)("p",{children:["User Role: ",I()]}),(0,S.jsxs)("p",{children:["Total: ",_.total]}),(0,S.jsx)("button",{onClick:B,style:{marginTop:"15px",padding:"10px 20px",background:"#007AFF",color:"white",border:"none",borderRadius:"8px",cursor:"pointer"},children:"\ud83d\udd04 \u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"})]})]}):(0,S.jsx)("div",{className:"members-table-container",children:(0,S.jsxs)("table",{className:"members-table",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"}),(0,S.jsx)("th",{children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,S.jsx)("th",{children:"\u0627\u0644\u062c\u0646\u0633"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("th",{children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{children:"\u0627\u0643\u062a\u0645\u0627\u0644 \u0627\u0644\u0645\u0644\u0641"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsxs)("tbody",{children:[a&&0===e.length&&[...Array(5)].map((e,t)=>(0,S.jsxs)("tr",{className:"table-row skeleton-row",children:[(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-text"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-text"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-text"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-text"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-text"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-badge"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-badge"})}),(0,S.jsx)("td",{children:(0,S.jsx)("div",{className:"skeleton skeleton-actions"})})]},"skeleton-".concat(t))),!a&&0===e.length&&(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:"8",className:"empty-cell",children:(0,S.jsx)("div",{className:"empty-state",children:(0,S.jsx)("span",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0628\u064a\u0627\u0646\u0627\u062a"})})})}),e.map(e=>(0,S.jsxs)("tr",{className:"table-row",children:[(0,S.jsx)("td",{className:"member-name",children:e.full_name}),(0,S.jsx)("td",{className:"member-phone",children:e.phone}),(0,S.jsx)("td",{className:"member-email",children:e.email||"-"}),(0,S.jsx)("td",{className:"member-gender",children:"male"===e.gender?"\u0630\u0643\u0631":"female"===e.gender?"\u0623\u0646\u062b\u0649":"-"}),(0,S.jsx)("td",{className:"member-tribal",children:e.tribal_section||"-"}),(0,S.jsx)("td",{children:(0,S.jsx)("span",{className:"status-badge ".concat(e.status),children:"active"===e.status?"\u0646\u0634\u0637":"\u063a\u064a\u0631 \u0646\u0634\u0637"})}),(0,S.jsx)("td",{children:(0,S.jsx)("span",{className:"profile-badge ".concat(e.profile_completed?"complete":"incomplete"),children:e.profile_completed?"\u0645\u0643\u062a\u0645\u0644":"\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644"})}),(0,S.jsxs)("td",{className:"actions-cell",children:[(0,S.jsx)("button",{className:"action-btn view",title:"\u0639\u0631\u0636",children:(0,S.jsx)(M.A,{})}),(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("button",{className:"action-btn edit",title:"\u062a\u0639\u062f\u064a\u0644",onClick:()=>(e=>{const t=(0,i.A)((0,i.A)({},e),{},{gender:e.gender||"",tribal_section:e.tribal_section||"",national_id:e.national_id||"",date_of_birth:e.date_of_birth||"",city:e.city||"",address:e.address||"",occupation:e.occupation||"",employer:e.employer||"",nationality:e.nationality||"\u0633\u0639\u0648\u062f\u064a",notes:e.notes||"",email:e.email||"",phone:e.phone||"",full_name:e.full_name||""});console.log("\ud83d\udd8a\ufe0f Opening edit modal with member:",t),console.log("Gender value:",t.gender),console.log("Tribal section value:",t.tribal_section),j(t),y("personal"),g(!0)})(e),children:(0,S.jsx)(W.A,{})}),(0,S.jsx)("button",{className:"action-btn delete",title:"\u062d\u0630\u0641",onClick:()=>(async e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0639\u0636\u0648\u061f"))try{n(!0),await wt.deleteMember(e),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0639\u0636\u0648 \u0628\u0646\u062c\u0627\u062d"),B()}catch(t){console.error("Error deleting member:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062d\u0630\u0641 \u0627\u0644\u0639\u0636\u0648: "+t.message)}finally{n(!1)}})(e.id),children:(0,S.jsx)(O.A,{})})]})]})]},e.id))]})]})}),_.totalPages>1&&(0,S.jsxs)("div",{className:"pagination-container",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)("button",{className:"pagination-btn",onClick:()=>U(_.page-1),disabled:1===_.page,children:(0,S.jsx)(Ne.A,{})}),(0,S.jsx)("div",{className:"page-numbers",children:(()=>{let e=Math.max(1,_.page-Math.floor(2.5)),t=Math.min(_.totalPages,e+5-1);t-e+1<5&&(e=Math.max(1,t-5+1));const a=[];for(let s=e;s<=t;s++)a.push((0,S.jsx)("button",{className:"page-number ".concat(_.page===s?"active":""),onClick:()=>U(s),children:s},s));return a})()}),(0,S.jsx)("button",{className:"pagination-btn",onClick:()=>U(_.page+1),disabled:_.page===_.totalPages,children:(0,S.jsx)(k.A,{})})]}),(0,S.jsxs)("div",{style:{fontSize:"14px",color:"#666"},children:["\u0627\u0644\u0635\u0641\u062d\u0629 ",_.page," \u0645\u0646 ",_.totalPages]})]})]})}),u&&b&&(0,S.jsxs)("div",{className:"edit-member-fullpage",dir:"rtl",children:[(0,S.jsxs)("div",{className:"modal-header",children:[(0,S.jsx)("h2",{children:"\u062a\u0639\u062f\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0636\u0648"}),(0,S.jsx)("button",{className:"close-btn",onClick:G,children:(0,S.jsx)(A.A,{style:{width:"24px",height:"24px"}})})]}),(0,S.jsxs)("div",{className:"modal-body",children:[(0,S.jsxs)("div",{className:"section-tabs",children:[(0,S.jsx)("div",{className:"tab ".concat("personal"===f?"active":""),onClick:()=>y("personal"),children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsx)("div",{className:"tab ".concat("address"===f?"active":""),onClick:()=>y("address"),children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0648\u0627\u0644\u0639\u0645\u0644"}),(0,S.jsx)("div",{className:"tab ".concat("account"===f?"active":""),onClick:()=>y("account"),children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628"})]}),(0,S.jsxs)("div",{className:"form-sections",children:["personal"===f&&(0,S.jsxs)("div",{className:"form-section",children:[(0,S.jsx)("h3",{className:"section-title",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 *"}),(0,S.jsx)("input",{type:"text",value:b.full_name||"",onChange:e=>V("full_name",e.target.value),className:"form-input",placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,S.jsx)("input",{type:"text",value:b.phone||"",onChange:e=>V("phone",e.target.value),className:"form-input",placeholder:"05xxxxxxxx"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,S.jsx)("input",{type:"email",value:b.email||"",onChange:e=>V("email",e.target.value),className:"form-input",placeholder:"example@email.com"})]}),(0,S.jsx)(Mt,{label:"\u0627\u0644\u0641\u062e\u0630",id:"tribal_section",name:"tribal_section",value:(null===b||void 0===b?void 0:b.tribal_section)||"",onChange:e=>{console.log("Tribal section changed to:",e.target.value),V("tribal_section",e.target.value)},placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0641\u062e\u0630",options:[{value:"\u0627\u0644\u062f\u063a\u064a\u0634",label:"\u0627\u0644\u062f\u063a\u064a\u0634"},{value:"\u0627\u0644\u0631\u0634\u064a\u062f",label:"\u0627\u0644\u0631\u0634\u064a\u062f"},{value:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646",label:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646"},{value:"\u0627\u0644\u0639\u064a\u062f",label:"\u0627\u0644\u0639\u064a\u062f"},{value:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f",label:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f"},{value:"\u0631\u0634\u0648\u062f",label:"\u0631\u0634\u0648\u062f"},{value:"\u0631\u0634\u064a\u062f",label:"\u0631\u0634\u064a\u062f"},{value:"\u0639\u0642\u0627\u0628",label:"\u0639\u0642\u0627\u0628"}]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"}),(0,S.jsx)("input",{type:"date",value:b.date_of_birth||"",onChange:e=>V("date_of_birth",e.target.value),className:"form-input"})]}),(0,S.jsx)(Mt,{label:"\u0627\u0644\u062c\u0646\u0633",id:"gender",name:"gender",value:(null===b||void 0===b?void 0:b.gender)||"",onChange:e=>{console.log("Gender changed to:",e.target.value),V("gender",e.target.value)},placeholder:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062c\u0646\u0633",options:[{value:"male",label:"\u0630\u0643\u0631"},{value:"female",label:"\u0623\u0646\u062b\u0649"}]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsx)("input",{type:"text",value:b.national_id||"",onChange:e=>V("national_id",e.target.value),className:"form-input",placeholder:"10xxxxxxxxx"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u062c\u0646\u0633\u064a\u0629"}),(0,S.jsx)("input",{type:"text",value:b.nationality||"\u0633\u0639\u0648\u062f\u064a",onChange:e=>V("nationality",e.target.value),className:"form-input"})]})]})]}),"address"===f&&(0,S.jsxs)("div",{className:"form-section",children:[(0,S.jsx)("h3",{className:"section-title",children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0648\u0627\u0644\u0639\u0645\u0644"}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"}),(0,S.jsx)("input",{type:"text",value:b.city||"",onChange:e=>V("city",e.target.value),className:"form-input",placeholder:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u062d\u064a"}),(0,S.jsx)("input",{type:"text",value:b.district||"",onChange:e=>V("district",e.target.value),className:"form-input",placeholder:"\u0627\u0644\u062d\u064a"})]}),(0,S.jsxs)("div",{className:"form-group full-width",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0643\u0627\u0645\u0644"}),(0,S.jsx)("input",{type:"text",value:b.address||"",onChange:e=>V("address",e.target.value),className:"form-input",placeholder:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0628\u0627\u0644\u062a\u0641\u0635\u064a\u0644"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"}),(0,S.jsx)("input",{type:"text",value:b.employer||"",onChange:e=>V("employer",e.target.value),className:"form-input",placeholder:"\u0627\u0633\u0645 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0645\u0647\u0646\u0629"}),(0,S.jsx)("input",{type:"text",value:b.occupation||"",onChange:e=>V("occupation",e.target.value),className:"form-input",placeholder:"\u0627\u0644\u0645\u0633\u0645\u0649 \u0627\u0644\u0648\u0638\u064a\u0641\u064a"})]})]})]}),"account"===f&&(0,S.jsxs)("div",{className:"form-section",children:[(0,S.jsx)("h3",{className:"section-title",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("input",{type:"text",value:b.membership_number||"",onChange:e=>V("membership_number",e.target.value),className:"form-input",placeholder:"\u0633\u064a\u062a\u0645 \u062a\u0648\u0644\u064a\u062f\u0647 \u062a\u0644\u0642\u0627\u0626\u064a\u0627\u064b"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsxs)("select",{value:b.membership_status||"active",onChange:e=>V("membership_status",e.target.value),className:"form-input",children:[(0,S.jsx)("option",{value:"active",children:"\u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"inactive",children:"\u063a\u064a\u0631 \u0646\u0634\u0637"}),(0,S.jsx)("option",{value:"suspended",children:"\u0645\u0639\u0644\u0642"})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u0636\u0645\u0627\u0645"}),(0,S.jsx)("input",{type:"date",value:b.membership_date||"",onChange:e=>V("membership_date",e.target.value),className:"form-input"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0646\u0648\u0639 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsxs)("select",{value:b.membership_type||"regular",onChange:e=>V("membership_type",e.target.value),className:"form-input",children:[(0,S.jsx)("option",{value:"regular",children:"\u0639\u0627\u062f\u064a"}),(0,S.jsx)("option",{value:"vip",children:"VIP"}),(0,S.jsx)("option",{value:"honorary",children:"\u0634\u0631\u0641\u064a"})]})]})]})]}),"account"===f&&(0,S.jsxs)("div",{className:"form-section",children:[(0,S.jsx)("h3",{className:"section-title",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"form-group full-width",children:[(0,S.jsx)("label",{children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"}),(0,S.jsx)("textarea",{value:b.notes||"",onChange:e=>V("notes",e.target.value),className:"form-input",rows:"3",placeholder:"\u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629..."})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0636\u0648"}),(0,S.jsxs)("div",{className:"file-upload-area",children:[(0,S.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&(console.log("Member photo selected:",t),V("photo_file",t))},className:"file-input",id:"member-photo"}),(0,S.jsxs)("label",{htmlFor:"member-photo",className:"file-upload-label",children:[(0,S.jsx)("span",{children:"\ud83d\udcf8 \u0627\u0636\u063a\u0637 \u0644\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0627\u0644\u0639\u0636\u0648"}),(0,S.jsx)("span",{className:"file-info",children:"PNG, JPG \u062d\u062f \u0623\u0642\u0635\u0649 10MB"})]})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsxs)("div",{className:"file-upload-area",children:[(0,S.jsx)("input",{type:"file",accept:"image/*,application/pdf",onChange:e=>{const t=e.target.files[0];t&&(console.log("National ID selected:",t),V("national_id_file",t))},className:"file-input",id:"national-id"}),(0,S.jsxs)("label",{htmlFor:"national-id",className:"file-upload-label",children:[(0,S.jsx)("span",{children:"\ud83c\udd94 \u0627\u0636\u063a\u0637 \u0644\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsx)("span",{className:"file-info",children:"PNG, JPG, PDF \u062d\u062f \u0623\u0642\u0635\u0649 10MB"})]})]})]})]})]})]})]}),(0,S.jsxs)("div",{className:"modal-footer",children:[(0,S.jsx)("button",{className:"btn-cancel",onClick:G,children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsxs)("button",{className:"btn-save",onClick:async()=>{try{n(!0),console.log("\ud83d\udd0d Current editingMember state:",b);const a={full_name:b.full_name,phone:b.phone,email:b.email,national_id:b.national_id,tribal_section:b.tribal_section,date_of_birth:b.date_of_birth,gender:b.gender,nationality:b.nationality||"\u0633\u0639\u0648\u062f\u064a",city:b.city,address:b.address,employer:b.employer,occupation:b.occupation,membership_number:b.membership_number,membership_status:b.membership_status||"active",membership_date:b.membership_date,membership_type:b.membership_type||"regular",notes:b.notes},s={};Object.keys(a).forEach(e=>{const t=a[e];"date_of_birth"===e||"membership_date"===e?t&&""!==t&&(s[e]=t):s[e]=void 0===t||null===t?"":t}),console.log("\ud83d\udce4 Sending data to backend:",JSON.stringify(s,null,2));const r=await wt.updateMember(b.id,s);if(console.log("\ud83d\udce5 Update response from backend:",r),!r.success)throw new Error(r.error||"Failed to update member");{const a=e.map(e=>e.id===b.id?(0,i.A)((0,i.A)({},e),r.data):e);t(a),alert("\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0639\u0636\u0648 \u0628\u0646\u062c\u0627\u062d"),g(!1),j(null),y("personal"),await B()}}catch(a){console.error("\u274c Error updating member:",a),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a: "+a.message)}finally{n(!1)}},children:[(0,S.jsx)("span",{children:"\ud83d\udcbe"})," \u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"]})]})]})]})};var Ht=a(619),Ut=a(8258);const Xt=(0,s.createContext)(void 0),Yt={super_admin:{modules:["dashboard","members","family-tree","financial","occasions","initiatives","diyas","reports","settings","audit"],permissions:{all_access:!0}},financial_manager:{modules:["dashboard","financial-overview","subscriptions","payments","financial-reports"],permissions:{financial_only:!0,view_member_financial:!0}},family_tree_admin:{modules:["dashboard","family-tree","tree-management","relationships"],permissions:{family_tree_only:!0,view_member_relationships:!0}},occasions_initiatives_diyas_admin:{modules:["dashboard","occasions","initiatives","diyas","events-calendar","charity-projects","mediation-cases"],permissions:{occasions_access:!0,initiatives_access:!0,diyas_access:!0,view_member_participation:!0}},user_member:{modules:["dashboard","my-profile","my-payments","family-events","volunteer-opportunities"],permissions:{personal_only:!0,view_own_data:!0}}},Jt=e=>{let{children:t}=e;const[a,n]=(0,s.useState)(null),[i,r]=(0,s.useState)(!0),[l,o]=(0,s.useState)(null);(0,s.useEffect)(()=>{c()},[]);const c=async()=>{try{r(!0),o(null);const t=localStorage.getItem("isLoggedIn"),a=localStorage.getItem("userEmail");if(!t||"true"!==t)return void n(null);const s=localStorage.getItem("user"),i=localStorage.getItem("token");if(s&&i)try{const e=JSON.parse(s),t={id:e.id||"1",email:e.email||a||"admin@alshuail.com",role:e.role||"super_admin",roleAr:"super_admin"===e.role?"\u0645\u062f\u064a\u0631 \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0631\u0626\u064a\u0633\u064a":"\u0645\u062f\u064a\u0631 \u0627\u0644\u0646\u0638\u0627\u0645",permissions:e.permissions||{users:{create:!0,read:!0,update:!0,delete:!0},settings:{read:!0,update:!0},roles:{assign:!0,revoke:!0},all:!0}};return void n(t)}catch(e){console.error("Error parsing stored user:",e)}n({id:"1",email:a||"admin@alshuail.com",role:"super_admin",roleAr:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0631\u0626\u064a\u0633\u064a",permissions:{users:{create:!0,read:!0,update:!0,delete:!0},settings:{read:!0,update:!0},roles:{assign:!0,revoke:!0},all:!0}})}catch(e){console.error("Error fetching user role:",e),o("\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"),n(null)}finally{r(!1)}},d={user:a,loading:i,error:l,checkPermission:e=>{if(!a)return!1;if("super_admin"===a.role)return!0;const t=e.split(".");let s=a.permissions;for(const a of t){if(!s||"object"!==typeof s||!(a in s))return!1;s=s[a]}return!0===s},hasRole:e=>!!a&&("super_admin"===a.role||e.includes(a.role)),canAccessModule:e=>{if(!a)return!1;const t=Yt[a.role];return!!t&&t.modules.includes(e)},refreshUserRole:async()=>{await c()}};return(0,S.jsx)(Xt.Provider,{value:d,children:t})},Gt={super_admin:{en:"Super Admin",ar:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649"},financial_manager:{en:"Financial Manager",ar:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a"},family_tree_admin:{en:"Family Tree Admin",ar:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"},occasions_initiatives_diyas_admin:{en:"Occasions, Initiatives & Diyas Admin",ar:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0648\u0627\u0644\u062f\u064a\u0627\u062a"},user_member:{en:"User Member",ar:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a"}},Vt=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[r,l]=(0,s.useState)(""),[o,c]=(0,s.useState)("all"),[d,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[h,u]=(0,s.useState)(null),[g,b]=(0,s.useState)(!1),[j,f]=(0,s.useState)(null),[v,N]=(0,s.useState)({email:"",phone:"",name:"",role:"super_admin",password:""});(0,s.useEffect)(()=>{w()},[]);const w=async()=>{n(!0);try{t([{id:"1",email:"admin@alshuail.com",phone:"0551234567",name:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",role:"super_admin",roleAr:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649",isActive:!0,createdAt:"2024-01-01",lastLogin:"2024-12-20"},{id:"2",email:"finance@alshuail.com",phone:"0552345678",name:"\u0645\u062d\u0645\u062f \u0627\u0644\u0645\u0627\u0644\u064a",role:"financial_manager",roleAr:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a",isActive:!0,createdAt:"2024-01-15",lastLogin:"2024-12-19"},{id:"3",email:"tree@alshuail.com",phone:"0553456789",name:"\u0633\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",role:"family_tree_admin",roleAr:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",isActive:!0,createdAt:"2024-02-01",lastLogin:"2024-12-18"},{id:"4",email:"events@alshuail.com",phone:"0554567890",name:"\u0641\u0627\u0637\u0645\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",role:"occasions_initiatives_diyas_admin",roleAr:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0648\u0627\u0644\u062f\u064a\u0627\u062a",isActive:!0,createdAt:"2024-02-15",lastLogin:"2024-12-20"},{id:"5",email:"member1@alshuail.com",phone:"0555678901",name:"\u062e\u0627\u0644\u062f \u0627\u0644\u0634\u0639\u064a\u0644",role:"user_member",roleAr:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a",isActive:!0,createdAt:"2024-03-01"}]),n(!1)}catch(e){console.error("Error fetching users:",e),n(!1),f({type:"error",text:"\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"})}},A=e=>({super_admin:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649",financial_manager:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a",family_tree_admin:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",occasions_initiatives_diyas_admin:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a",user_member:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a"}[e]||e),k=e.filter(e=>{var t,a;const s=e.email.toLowerCase().includes(r.toLowerCase())||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(a=e.phone)||void 0===a?void 0:a.includes(r)),n="all"===o||e.role===o;return s&&n}),_={background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(20px)",borderRadius:"16px",padding:"20px",border:"1px solid rgba(0, 0, 0, 0.1)",display:"flex",alignItems:"center",gap:"15px",transition:"all 0.3s ease"},C={padding:"15px",textAlign:"right",borderBottom:"2px solid rgba(0, 0, 0, 0.1)",fontSize:"13px",fontWeight:"600",color:"#4B5563",textTransform:"uppercase",letterSpacing:"0.5px"},F={padding:"15px",borderBottom:"1px solid rgba(0, 0, 0, 0.05)",fontSize:"14px",color:"#1F2937"},T=e=>{const t={super_admin:{bg:"#DC2626",text:"white"},financial_manager:{bg:"#059669",text:"white"},family_tree_admin:{bg:"#7C3AED",text:"white"},occasions_initiatives_diyas_admin:{bg:"#EA580C",text:"white"},user_member:{bg:"#6B7280",text:"white"}},a=t[e]||t.user_member;return{display:"inline-block",padding:"6px 12px",backgroundColor:a.bg,color:a.text,borderRadius:"20px",fontSize:"12px",fontWeight:"600"}},z={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},R={background:"white",borderRadius:"20px",padding:"30px",width:"500px",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},E={super_admin:e.filter(e=>"super_admin"===e.role).length,financial_manager:e.filter(e=>"financial_manager"===e.role).length,family_tree_admin:e.filter(e=>"family_tree_admin"===e.role).length,occasions_initiatives_diyas_admin:e.filter(e=>"occasions_initiatives_diyas_admin"===e.role).length,user_member:e.filter(e=>"user_member"===e.role).length};return(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,S.jsxs)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937",marginBottom:"10px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)(y.A,{style:{width:"28px",height:"28px"}}),"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0648\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a"]}),(0,S.jsx)("p",{style:{color:"#6B7280",fontSize:"14px"},children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0648\u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0623\u062f\u0648\u0627\u0631 \u0648\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0644\u0643\u0644 \u0645\u0633\u062a\u062e\u062f\u0645 \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"})]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"},children:[(0,S.jsxs)("div",{style:_,children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #DC2626 0%, #B91C1C 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(me.A,{style:{width:"20px",height:"20px",color:"white"}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"700"},children:E.super_admin}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:"\u0645\u062f\u064a\u0631 \u0623\u0639\u0644\u0649"})]})]}),(0,S.jsxs)("div",{style:_,children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #059669 0%, #047857 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(kt.A,{style:{width:"20px",height:"20px",color:"white"}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"700"},children:E.financial_manager}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:"\u0645\u062f\u064a\u0631 \u0645\u0627\u0644\u064a"})]})]}),(0,S.jsxs)("div",{style:_,children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #7C3AED 0%, #6D28D9 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(kt.A,{style:{width:"20px",height:"20px",color:"white"}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"700"},children:E.family_tree_admin}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629"})]})]}),(0,S.jsxs)("div",{style:_,children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"linear-gradient(135deg, #6B7280 0%, #4B5563 100%)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(kt.A,{style:{width:"20px",height:"20px",color:"white"}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:"700"},children:E.user_member}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a"})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,S.jsxs)("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[(0,S.jsx)(P.A,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",color:"#6B7280"}}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0645\u0633\u062a\u062e\u062f\u0645...",value:r,onChange:e=>l(e.target.value),style:{width:"100%",padding:"12px 45px 12px 15px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none",transition:"all 0.3s ease"}})]}),(0,S.jsxs)("select",{value:o,onChange:e=>c(e.target.value),style:{padding:"12px 20px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none",cursor:"pointer",minWidth:"150px"},children:[(0,S.jsx)("option",{value:"all",children:"\u0643\u0644 \u0627\u0644\u0623\u062f\u0648\u0627\u0631"}),(0,S.jsx)("option",{value:"super_admin",children:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649"}),(0,S.jsx)("option",{value:"financial_manager",children:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a"}),(0,S.jsx)("option",{value:"family_tree_admin",children:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsx)("option",{value:"occasions_initiatives_diyas_admin",children:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a"}),(0,S.jsx)("option",{value:"user_member",children:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a"})]}),(0,S.jsxs)("button",{onClick:w,style:{padding:"12px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease"},children:[(0,S.jsx)(Ht.A,{style:{width:"16px",height:"16px"}}),"\u062a\u062d\u062f\u064a\u062b"]}),(0,S.jsxs)("button",{onClick:()=>m(!0),style:{padding:"12px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.3s ease"},children:[(0,S.jsx)(L.A,{style:{width:"16px",height:"16px"}}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645"]})]}),j&&(0,S.jsxs)("div",{style:{padding:"12px 20px",borderRadius:"12px",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px",backgroundColor:"success"===j.type?"#D1FAE5":"error"===j.type?"#FEE2E2":"#DBEAFE",color:"success"===j.type?"#065F46":"error"===j.type?"#991B1B":"#1E40AF"},children:["success"===j.type&&(0,S.jsx)(D.A,{style:{width:"20px",height:"20px"}}),"error"===j.type&&(0,S.jsx)(B.A,{style:{width:"20px",height:"20px"}}),"info"===j.type&&(0,S.jsx)(I.A,{style:{width:"20px",height:"20px"}}),j.text]}),(0,S.jsx)("div",{style:{overflowX:"auto",background:"white",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)"},children:(0,S.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:"0",marginTop:"20px"},children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{style:C,children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"}),(0,S.jsx)("th",{style:C,children:"\u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,S.jsx)("th",{style:C,children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{style:C,children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0625\u0646\u0636\u0645\u0627\u0645"}),(0,S.jsx)("th",{style:C,children:"\u0622\u062e\u0631 \u062f\u062e\u0648\u0644"}),(0,S.jsx)("th",{style:C,children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsx)("tbody",{children:a?(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:6,style:(0,i.A)((0,i.A)({},F),{},{textAlign:"center",padding:"40px"}),children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})}):0===k.length?(0,S.jsx)("tr",{children:(0,S.jsx)("td",{colSpan:6,style:(0,i.A)((0,i.A)({},F),{},{textAlign:"center",padding:"40px"}),children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0646\u062a\u0627\u0626\u062c"})}):k.map(e=>(0,S.jsxs)("tr",{style:{transition:"background 0.2s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(0, 0, 0, 0.02)"},onMouseLeave:e=>{e.currentTarget.style.background="transparent"},children:[(0,S.jsx)("td",{style:F,children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"600",fontSize:"14px"},children:e.name?e.name[0]:e.email[0].toUpperCase()}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontWeight:"600"},children:e.name||e.email}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:e.email}),e.phone&&(0,S.jsx)("div",{style:{fontSize:"12px",color:"#6B7280"},children:e.phone})]})]})}),(0,S.jsx)("td",{style:F,children:(0,S.jsx)("span",{style:T(e.role),children:e.roleAr})}),(0,S.jsx)("td",{style:F,children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[(0,S.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:e.isActive?"#10B981":"#EF4444"}}),(0,S.jsx)("span",{style:{fontSize:"13px",color:e.isActive?"#059669":"#DC2626"},children:e.isActive?"\u0646\u0634\u0637":"\u063a\u064a\u0631 \u0646\u0634\u0637"})]})}),(0,S.jsx)("td",{style:(0,i.A)((0,i.A)({},F),{},{fontSize:"13px",color:"#6B7280"}),children:new Date(e.createdAt).toLocaleDateString("ar-SA")}),(0,S.jsx)("td",{style:(0,i.A)((0,i.A)({},F),{},{fontSize:"13px",color:"#6B7280"}),children:e.lastLogin?new Date(e.lastLogin).toLocaleDateString("ar-SA"):"\u0644\u0645 \u064a\u062f\u062e\u0644 \u0628\u0639\u062f"}),(0,S.jsx)("td",{style:F,children:(0,S.jsx)("div",{style:{display:"flex",gap:"8px"},children:(0,S.jsx)("button",{onClick:()=>{u(e),p(!0)},style:{padding:"8px",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",background:"white",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onMouseEnter:e=>{e.currentTarget.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)",e.currentTarget.style.borderColor="transparent";const t=e.currentTarget.querySelector("svg");t&&(t.style.color="white")},onMouseLeave:e=>{e.currentTarget.style.background="white",e.currentTarget.style.borderColor="rgba(0, 0, 0, 0.1)";const t=e.currentTarget.querySelector("svg");t&&(t.style.color="#6B7280")},children:(0,S.jsx)(W.A,{style:{width:"16px",height:"16px",color:"#6B7280"}})})})})]},e.id))})]})}),d&&h&&(0,S.jsx)("div",{style:z,onClick:()=>p(!1),children:(0,S.jsxs)("div",{style:R,onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"20px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)(Ut.A,{style:{width:"24px",height:"24px"}}),"\u062a\u063a\u064a\u064a\u0631 \u062f\u0648\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"]}),(0,S.jsxs)("div",{style:{padding:"20px",background:"rgba(0, 0, 0, 0.02)",borderRadius:"12px",marginBottom:"20px"},children:[(0,S.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645:"})," ",h.name||h.email]}),(0,S.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a:"})," ",h.email]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a:"})," ",(0,S.jsx)("span",{style:T(h.role),children:h.roleAr})]})]}),(0,S.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"10px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f:"}),(0,S.jsx)("select",{defaultValue:h.role,onChange:e=>{u((0,i.A)((0,i.A)({},h),{},{role:e.target.value}))},style:{width:"100%",padding:"12px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",cursor:"pointer"},children:Object.entries(Gt).map(e=>{let[t,a]=e;return(0,S.jsx)("option",{value:t,children:a.ar},t)})})]}),(0,S.jsxs)("div",{style:{padding:"15px",background:"rgba(251, 191, 36, 0.1)",borderRadius:"12px",marginBottom:"20px"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px",color:"#92400E"},children:[(0,S.jsx)(I.A,{style:{width:"20px",height:"20px"}}),(0,S.jsx)("strong",{children:"\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u0645\u062e\u062a\u0627\u0631:"})]}),(0,S.jsxs)("ul",{style:{margin:"0",paddingRight:"20px",fontSize:"13px",color:"#78350F",lineHeight:"1.8"},children:["super_admin"===h.role&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("li",{children:"\u0627\u0644\u0648\u0635\u0648\u0644 \u0627\u0644\u0643\u0627\u0645\u0644 \u0644\u062c\u0645\u064a\u0639 \u0623\u0646\u062d\u0627\u0621 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0648\u0627\u0644\u0623\u062f\u0648\u0627\u0631"}),(0,S.jsx)("li",{children:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0639\u0636\u0627\u0621"}),(0,S.jsx)("li",{children:"\u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u062a\u062f\u0642\u064a\u0642"})]}),"financial_manager"===h.role&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a \u0648\u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("li",{children:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"}),(0,S.jsx)("li",{children:"\u0644\u0627 \u064a\u0645\u0643\u0646\u0647 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0623\u0648 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a"})]}),"family_tree_admin"===h.role&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsx)("li",{children:"\u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u064a\u0629"}),(0,S.jsx)("li",{children:"\u0644\u0627 \u064a\u0645\u0643\u0646\u0647 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629"})]}),"occasions_initiatives_diyas_admin"===h.role&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a"}),(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0627\u0644\u062e\u064a\u0631\u064a\u0629"}),(0,S.jsx)("li",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u062f\u064a\u0627\u062a \u0648\u0627\u0644\u062a\u0639\u0648\u064a\u0636\u0627\u062a"}),(0,S.jsx)("li",{children:"\u0644\u0627 \u064a\u0645\u0643\u0646\u0647 \u0627\u0644\u0648\u0635\u0648\u0644 \u0644\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0627\u0644\u064a\u0629 \u0623\u0648 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"})]}),"user_member"===h.role&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("li",{children:"\u0639\u0631\u0636 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0641\u0642\u0637"}),(0,S.jsx)("li",{children:"\u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0641\u064a \u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a"}),(0,S.jsx)("li",{children:"\u0639\u0631\u0636 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u062e\u0627\u0635\u0629"}),(0,S.jsx)("li",{children:"\u0644\u0627 \u064a\u0645\u0643\u0646\u0647 \u0639\u0631\u0636 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0622\u062e\u0631\u064a\u0646"})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{onClick:()=>p(!1),style:{padding:"12px 24px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",background:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{onClick:()=>(async(e,t)=>{b(!0);try{if(!(await fetch("http://localhost:3001/api/users/".concat(e,"/assign-role"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({roleName:t})})).ok)throw new Error("Failed to update role");f({type:"success",text:"\u062a\u0645 \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062f\u0648\u0631 \u0628\u0646\u062c\u0627\u062d"}),p(!1),w()}catch(a){console.error("Error updating role:",a),f({type:"error",text:"\u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u062f\u064a\u062b \u0627\u0644\u062f\u0648\u0631"})}finally{b(!1)}})(h.id,h.role),disabled:g,style:{padding:"12px 24px",borderRadius:"12px",background:g?"#9CA3AF":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease"},children:g?"\u062c\u0627\u0631\u064a \u0627\u0644\u062d\u0641\u0638...":"\u062d\u0641\u0638 \u0627\u0644\u062a\u063a\u064a\u064a\u0631\u0627\u062a"})]})]})}),x&&(0,S.jsx)("div",{style:z,onClick:()=>m(!1),children:(0,S.jsxs)("div",{style:R,onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("h3",{style:{fontSize:"20px",fontWeight:"700",marginBottom:"24px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)(L.A,{style:{width:"24px",height:"24px",color:"#10B981"}}),"\u0625\u0636\u0627\u0641\u0629 \u0645\u0633\u062a\u062e\u062f\u0645 \u062c\u062f\u064a\u062f"]}),(0,S.jsxs)("div",{style:{display:"grid",gap:"16px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 *"}),(0,S.jsx)("input",{type:"text",value:v.name,onChange:e=>N((0,i.A)((0,i.A)({},v),{},{name:e.target.value})),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none"},placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a *"}),(0,S.jsx)("input",{type:"email",value:v.email,onChange:e=>N((0,i.A)((0,i.A)({},v),{},{email:e.target.value})),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none"},placeholder:"example@alshuail.com",dir:"ltr"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 *"}),(0,S.jsx)("input",{type:"tel",value:v.phone,onChange:e=>N((0,i.A)((0,i.A)({},v),{},{phone:e.target.value})),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none"},placeholder:"05XXXXXXXX",dir:"ltr"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 *"}),(0,S.jsx)("input",{type:"password",value:v.password,onChange:e=>N((0,i.A)((0,i.A)({},v),{},{password:e.target.value})),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none"},placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",dir:"ltr"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:{display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"\u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u0648\u0638\u064a\u0641\u064a *"}),(0,S.jsxs)("select",{value:v.role,onChange:e=>N((0,i.A)((0,i.A)({},v),{},{role:e.target.value})),style:{width:"100%",padding:"10px 12px",borderRadius:"8px",border:"2px solid #007AFF",fontSize:"14px",outline:"none",cursor:"pointer",backgroundColor:"#FFFFFF",color:"#1F2937"},children:[(0,S.jsx)("option",{value:"super_admin",children:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649"}),(0,S.jsx)("option",{value:"financial_manager",children:"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0627\u0644\u064a"}),(0,S.jsx)("option",{value:"family_tree_admin",children:"\u0645\u062f\u064a\u0631 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsx)("option",{value:"occasions_initiatives_diyas_admin",children:"\u0645\u062f\u064a\u0631 \u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a \u0648\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a \u0648\u0627\u0644\u062f\u064a\u0627\u062a"}),(0,S.jsx)("option",{value:"user_member",children:"\u0639\u0636\u0648 \u0639\u0627\u062f\u064a"})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",gap:"12px",marginTop:"24px",justifyContent:"flex-end"},children:[(0,S.jsx)("button",{onClick:()=>{m(!1),N({email:"",phone:"",name:"",role:"user_member",password:""})},style:{padding:"12px 24px",borderRadius:"12px",background:"#F3F4F6",color:"#6B7280",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease"},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{onClick:async()=>{b(!0),f(null);try{if(!v.email||!v.name||!v.phone||!v.password)return f({type:"error",text:"\u064a\u0631\u062c\u0649 \u0645\u0644\u0621 \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629"}),void b(!1);await new Promise(e=>setTimeout(e,1e3));const e={id:String(Date.now()),email:v.email,phone:v.phone,name:v.name,role:v.role,roleAr:A(v.role),isActive:!0,createdAt:(new Date).toISOString().split("T")[0]};t(t=>[...t,e]),f({type:"success",text:"\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645 \u0628\u0646\u062c\u0627\u062d"}),m(!1),N({email:"",phone:"",name:"",role:"user_member",password:""})}catch(e){console.error("Error adding user:",e),f({type:"error",text:"\u062e\u0637\u0623 \u0641\u064a \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"})}finally{b(!1)}},disabled:g,style:{padding:"12px 24px",borderRadius:"12px",background:g?"#9CA3AF":"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer",transition:"all 0.2s ease"},children:g?"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0636\u0627\u0641\u0629...":"\u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645"})]})]})})]})};var Zt=a(2368),$t=a(3721);const Kt=()=>{const[e,t]=(0,s.useState)({systemName:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644",systemVersion:"2.0.1",apiUrl:"http://localhost:3001",maxUploadSize:"10",sessionTimeout:"30",enableNotifications:!0,enableAutoBackup:!0,backupFrequency:"daily",maintenanceMode:!1,debugMode:!1}),[a,n]=(0,s.useState)(!1),r={width:"100%",padding:"12px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none",transition:"all 0.3s ease"},l={display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},o={marginBottom:"30px",padding:"20px",background:"rgba(0, 0, 0, 0.02)",borderRadius:"16px"};return(0,S.jsxs)("div",{children:[(0,S.jsxs)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937",marginBottom:"30px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)(Zt.A,{style:{width:"28px",height:"28px"}}),"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0639\u0627\u0645\u0629"]}),(0,S.jsxs)("div",{style:o,children:[(0,S.jsxs)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)($t.A,{style:{width:"20px",height:"20px"}}),"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645"]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u0627\u0633\u0645 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,S.jsx)("input",{type:"text",value:e.systemName,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{systemName:a.target.value})),style:r})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u0625\u0635\u062f\u0627\u0631 \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,S.jsx)("input",{type:"text",value:e.systemVersion,readOnly:!0,style:(0,i.A)((0,i.A)({},r),{},{backgroundColor:"#F3F4F6",cursor:"not-allowed"})})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u0631\u0627\u0628\u0637 API"}),(0,S.jsx)("input",{type:"text",value:e.apiUrl,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{apiUrl:a.target.value})),style:r,dir:"ltr"})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u062d\u062c\u0645 \u0627\u0644\u0631\u0641\u0639 \u0627\u0644\u0623\u0642\u0635\u0649 (MB)"}),(0,S.jsx)("input",{type:"number",value:e.maxUploadSize,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{maxUploadSize:a.target.value})),style:r})]})]})]}),(0,S.jsxs)("div",{style:o,children:[(0,S.jsxs)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(me.A,{style:{width:"20px",height:"20px"}}),"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0623\u0645\u0627\u0646"]}),(0,S.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u0645\u062f\u0629 \u0627\u0644\u062c\u0644\u0633\u0629 (\u062f\u0642\u064a\u0642\u0629)"}),(0,S.jsx)("input",{type:"number",value:e.sessionTimeout,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{sessionTimeout:a.target.value})),style:r})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{style:l,children:"\u062a\u0643\u0631\u0627\u0631 \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a"}),(0,S.jsxs)("select",{value:e.backupFrequency,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{backupFrequency:a.target.value})),style:r,children:[(0,S.jsx)("option",{value:"hourly",children:"\u0643\u0644 \u0633\u0627\u0639\u0629"}),(0,S.jsx)("option",{value:"daily",children:"\u064a\u0648\u0645\u064a\u0627\u064b"}),(0,S.jsx)("option",{value:"weekly",children:"\u0623\u0633\u0628\u0648\u0639\u064a\u0627\u064b"}),(0,S.jsx)("option",{value:"monthly",children:"\u0634\u0647\u0631\u064a\u0627\u064b"})]})]})]}),(0,S.jsx)("div",{style:{marginTop:"20px"},children:(0,S.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,S.jsx)("input",{type:"checkbox",checked:e.enableAutoBackup,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{enableAutoBackup:a.target.checked})),style:{width:"18px",height:"18px"}}),(0,S.jsx)("span",{style:{fontSize:"14px"},children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0646\u0633\u062e \u0627\u0644\u0627\u062d\u062a\u064a\u0627\u0637\u064a \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a"})]})})]}),(0,S.jsxs)("div",{style:o,children:[(0,S.jsxs)("h3",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"20px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(v.A,{style:{width:"20px",height:"20px"}}),"\u062d\u0627\u0644\u0629 \u0627\u0644\u0646\u0638\u0627\u0645"]}),(0,S.jsxs)("div",{style:{display:"grid",gap:"15px"},children:[(0,S.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,S.jsx)("input",{type:"checkbox",checked:e.maintenanceMode,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{maintenanceMode:a.target.checked})),style:{width:"18px",height:"18px"}}),(0,S.jsx)("span",{style:{fontSize:"14px"},children:"\u0648\u0636\u0639 \u0627\u0644\u0635\u064a\u0627\u0646\u0629"}),e.maintenanceMode&&(0,S.jsx)("span",{style:{padding:"4px 8px",background:"#FEE2E2",color:"#DC2626",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:"\u0646\u0634\u0637"})]}),(0,S.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,S.jsx)("input",{type:"checkbox",checked:e.debugMode,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{debugMode:a.target.checked})),style:{width:"18px",height:"18px"}}),(0,S.jsx)("span",{style:{fontSize:"14px"},children:"\u0648\u0636\u0639 \u0627\u0644\u062a\u0637\u0648\u064a\u0631"})]}),(0,S.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"10px",cursor:"pointer"},children:[(0,S.jsx)("input",{type:"checkbox",checked:e.enableNotifications,onChange:a=>t((0,i.A)((0,i.A)({},e),{},{enableNotifications:a.target.checked})),style:{width:"18px",height:"18px"}}),(0,S.jsx)("span",{style:{fontSize:"14px"},children:"\u062a\u0641\u0639\u064a\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"})]})]})]}),(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",marginTop:"30px"},children:[a&&(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"#D1FAE5",color:"#065F46",borderRadius:"12px",fontSize:"14px"},children:[(0,S.jsx)(D.A,{style:{width:"20px",height:"20px"}}),"\u062a\u0645 \u0627\u0644\u062d\u0641\u0638 \u0628\u0646\u062c\u0627\u062d"]}),(0,S.jsx)("button",{onClick:()=>{n(!0),setTimeout(()=>n(!1),3e3)},style:{padding:"12px 30px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease"},children:"\u062d\u0641\u0638 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a"})]})]})},Qt=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[i,r]=(0,s.useState)(""),[l,o]=(0,s.useState)("all"),[c,d]=(0,s.useState)("all"),[p,x]=(0,s.useState)({start:"",end:""});(0,s.useEffect)(()=>{m()},[]);const m=async()=>{n(!0);try{const e=[{id:"1",userId:"1",userEmail:"admin@alshuail.com",userName:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",action:"\u062a\u063a\u064a\u064a\u0631 \u062f\u0648\u0631 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645",module:"user_management",entityType:"user",entityId:"5",oldValues:{role:"user_member"},newValues:{role:"financial_manager"},ipAddress:"192.168.1.1",createdAt:(new Date).toISOString(),severity:"warning"},{id:"2",userId:"2",userEmail:"finance@alshuail.com",userName:"\u0645\u062d\u0645\u062f \u0627\u0644\u0645\u0627\u0644\u064a",action:"\u0625\u0636\u0627\u0641\u0629 \u062f\u0641\u0639\u0629 \u0645\u0627\u0644\u064a\u0629",module:"financial",entityType:"payment",entityId:"123",newValues:{amount:500,currency:"SAR"},ipAddress:"192.168.1.2",createdAt:new Date(Date.now()-36e5).toISOString(),severity:"success"},{id:"3",userId:"1",userEmail:"admin@alshuail.com",userName:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",action:"\u062a\u0633\u062c\u064a\u0644 \u062f\u062e\u0648\u0644",module:"authentication",ipAddress:"192.168.1.1",createdAt:new Date(Date.now()-72e5).toISOString(),severity:"info"},{id:"4",userId:"3",userEmail:"tree@alshuail.com",userName:"\u0633\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",action:"\u062a\u062d\u062f\u064a\u062b \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",module:"family_tree",entityType:"relationship",entityId:"456",ipAddress:"192.168.1.3",createdAt:new Date(Date.now()-108e5).toISOString(),severity:"info"},{id:"5",userId:"1",userEmail:"admin@alshuail.com",userName:"\u0623\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",action:"\u062d\u0630\u0641 \u0645\u0633\u062a\u062e\u062f\u0645",module:"user_management",entityType:"user",entityId:"789",oldValues:{email:"deleted@alshuail.com"},ipAddress:"192.168.1.1",createdAt:new Date(Date.now()-864e5).toISOString(),severity:"error"}];t(e)}catch(e){console.error("Error fetching audit logs:",e)}finally{n(!1)}},h=e.filter(e=>{var t;const a=e.userEmail.toLowerCase().includes(i.toLowerCase())||(null===(t=e.userName)||void 0===t?void 0:t.toLowerCase().includes(i.toLowerCase()))||e.action.toLowerCase().includes(i.toLowerCase())||e.module.toLowerCase().includes(i.toLowerCase()),s="all"===l||e.module===l,n="all"===c||e.severity===c;return a&&s&&n}),u=e=>({info:{bg:"#DBEAFE",color:"#1E40AF",icon:fe.A},warning:{bg:"#FED7AA",color:"#C2410C",icon:I.A},error:{bg:"#FEE2E2",color:"#DC2626",icon:B.A},success:{bg:"#D1FAE5",color:"#065F46",icon:D.A}}[e]);return(0,S.jsxs)("div",{children:[(0,S.jsxs)("h2",{style:{fontSize:"24px",fontWeight:"700",color:"#1F2937",marginBottom:"10px",display:"flex",alignItems:"center",gap:"10px"},children:[(0,S.jsx)(me.A,{style:{width:"28px",height:"28px"}}),"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u062a\u062f\u0642\u064a\u0642 \u0648\u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a"]}),(0,S.jsx)("p",{style:{color:"#6B7280",fontSize:"14px",marginBottom:"30px"},children:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a \u0648\u0627\u0644\u0639\u0645\u0644\u064a\u0627\u062a \u0627\u0644\u062a\u064a \u062a\u0645\u062a \u0641\u064a \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,S.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px",marginBottom:"30px"},children:["info","success","warning","error"].map(t=>{const a=u(t),s=a.icon,n=e.filter(e=>e.severity===t).length;return(0,S.jsxs)("div",{style:{background:a.bg,borderRadius:"12px",padding:"15px",display:"flex",alignItems:"center",gap:"12px"},children:[(0,S.jsx)(s,{style:{width:"24px",height:"24px",color:a.color}}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"20px",fontWeight:"700",color:a.color},children:n}),(0,S.jsxs)("div",{style:{fontSize:"12px",color:a.color,opacity:.8},children:["info"===t&&"\u0645\u0639\u0644\u0648\u0645\u0627\u062a","success"===t&&"\u0646\u062c\u0627\u062d","warning"===t&&"\u062a\u062d\u0630\u064a\u0631","error"===t&&"\u062e\u0637\u0623"]})]})]},t)})}),(0,S.jsxs)("div",{style:{display:"flex",gap:"15px",marginBottom:"20px",flexWrap:"wrap"},children:[(0,S.jsxs)("div",{style:{flex:1,minWidth:"200px",position:"relative"},children:[(0,S.jsx)(P.A,{style:{width:"20px",height:"20px",position:"absolute",right:"15px",top:"50%",transform:"translateY(-50%)",color:"#6B7280"}}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0633\u062c\u0644\u0627\u062a...",value:i,onChange:e=>r(e.target.value),style:{width:"100%",padding:"12px 45px 12px 15px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",outline:"none"}})]}),(0,S.jsxs)("select",{value:l,onChange:e=>o(e.target.value),style:{padding:"12px 20px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",cursor:"pointer",minWidth:"150px"},children:[(0,S.jsx)("option",{value:"all",children:"\u0643\u0644 \u0627\u0644\u0623\u0642\u0633\u0627\u0645"}),(0,S.jsx)("option",{value:"user_management",children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646"}),(0,S.jsx)("option",{value:"financial",children:"\u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0627\u0644\u064a"}),(0,S.jsx)("option",{value:"family_tree",children:"\u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsx)("option",{value:"authentication",children:"\u0627\u0644\u0645\u0635\u0627\u062f\u0642\u0629"})]}),(0,S.jsxs)("select",{value:c,onChange:e=>d(e.target.value),style:{padding:"12px 20px",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",fontSize:"14px",cursor:"pointer",minWidth:"150px"},children:[(0,S.jsx)("option",{value:"all",children:"\u0643\u0644 \u0627\u0644\u0645\u0633\u062a\u0648\u064a\u0627\u062a"}),(0,S.jsx)("option",{value:"info",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a"}),(0,S.jsx)("option",{value:"success",children:"\u0646\u062c\u0627\u062d"}),(0,S.jsx)("option",{value:"warning",children:"\u062a\u062d\u0630\u064a\u0631"}),(0,S.jsx)("option",{value:"error",children:"\u062e\u0637\u0623"})]}),(0,S.jsxs)("button",{onClick:m,style:{padding:"12px 20px",borderRadius:"12px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",border:"none",fontSize:"14px",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[(0,S.jsx)(Ht.A,{style:{width:"16px",height:"16px"}}),"\u062a\u062d\u062f\u064a\u062b"]})]}),(0,S.jsx)("div",{style:{background:"white",borderRadius:"12px",border:"1px solid rgba(0, 0, 0, 0.1)",padding:"20px"},children:a?(0,S.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."}):0===h.length?(0,S.jsx)("div",{style:{textAlign:"center",padding:"40px",color:"#6B7280"},children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0633\u062c\u0644\u0627\u062a"}):(0,S.jsxs)("div",{style:{position:"relative"},children:[(0,S.jsx)("div",{style:{position:"absolute",right:"30px",top:"20px",bottom:"20px",width:"2px",background:"linear-gradient(180deg, #E5E7EB 0%, transparent 100%)"}}),h.map((e,t)=>{const a=u(e.severity),s=a.icon;return(0,S.jsxs)("div",{style:{display:"flex",gap:"20px",marginBottom:t<h.length-1?"30px":"0",position:"relative"},children:[(0,S.jsx)("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:a.bg,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,zIndex:1,border:"2px solid ".concat(a.color)},children:(0,S.jsx)(s,{style:{width:"20px",height:"20px",color:a.color}})}),(0,S.jsxs)("div",{style:{flex:1,background:"rgba(0, 0, 0, 0.02)",borderRadius:"12px",padding:"15px",border:"1px solid rgba(0, 0, 0, 0.05)"},children:[(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"10px"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:(i=e.action,i.includes("\u062d\u0630\u0641")?"#DC2626":i.includes("\u0625\u0636\u0627\u0641\u0629")||i.includes("\u0625\u0646\u0634\u0627\u0621")?"#059669":i.includes("\u062a\u062d\u062f\u064a\u062b")||i.includes("\u062a\u063a\u064a\u064a\u0631")?"#D97706":"#6B7280"),marginBottom:"5px"},children:e.action}),(0,S.jsxs)("div",{style:{fontSize:"13px",color:"#6B7280"},children:[(0,S.jsx)("span",{style:{padding:"3px 8px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",marginLeft:"8px"},children:(n=e.module,{user_management:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",financial:"\u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0645\u0627\u0644\u064a",family_tree:"\u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",occasions:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",initiatives:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a",diyas:"\u0627\u0644\u062f\u064a\u0627\u062a",authentication:"\u0627\u0644\u0645\u0635\u0627\u062f\u0642\u0629",system:"\u0627\u0644\u0646\u0638\u0627\u0645"}[n]||n)}),e.entityType&&(0,S.jsxs)("span",{style:{marginRight:"8px"},children:["\u2022 ",e.entityType," #",e.entityId]})]})]}),(0,S.jsxs)("div",{style:{textAlign:"left",fontSize:"12px",color:"#9CA3AF"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"5px"},children:[(0,S.jsx)(v.A,{style:{width:"14px",height:"14px"}}),new Date(e.createdAt).toLocaleString("ar-SA")]}),(0,S.jsx)("div",{style:{marginTop:"5px"},children:e.ipAddress})]})]}),(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"#4B5563"},children:[(0,S.jsx)(kt.A,{style:{width:"16px",height:"16px"}}),(0,S.jsx)("span",{style:{fontWeight:"500"},children:e.userName||e.userEmail}),(0,S.jsxs)("span",{style:{color:"#9CA3AF",fontSize:"12px"},children:["(",e.userEmail,")"]})]}),(e.oldValues||e.newValues)&&(0,S.jsxs)("div",{style:{marginTop:"15px",padding:"10px",background:"rgba(0, 0, 0, 0.02)",borderRadius:"8px",fontSize:"13px"},children:[e.oldValues&&(0,S.jsxs)("div",{style:{marginBottom:"5px"},children:[(0,S.jsx)("span",{style:{color:"#DC2626",fontWeight:"600"},children:"\u0642\u062f\u064a\u0645:"})," ",(0,S.jsx)("code",{style:{background:"white",padding:"2px 6px",borderRadius:"4px",direction:"ltr",display:"inline-block"},children:JSON.stringify(e.oldValues,null,2)})]}),e.newValues&&(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{style:{color:"#059669",fontWeight:"600"},children:"\u062c\u062f\u064a\u062f:"})," ",(0,S.jsx)("code",{style:{background:"white",padding:"2px 6px",borderRadius:"4px",direction:"ltr",display:"inline-block"},children:JSON.stringify(e.newValues,null,2)})]})]})]})]},e.id);var n,i})]})})]})},ea=()=>{const{user:e,hasRole:t,hasPermission:a,loading:n}=F(),[i,r]=(0,s.useState)("user-management"),l=[{id:"user-management",label:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",icon:x.A,component:Vt,requiredRoles:["super_admin","admin"],description:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646 \u0648\u062a\u0639\u064a\u064a\u0646 \u0627\u0644\u0623\u062f\u0648\u0627\u0631 \u0648\u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a",gradient:"linear-gradient(135deg, var(--apple-blue-500) 0%, var(--apple-purple-600) 100%)",shadowColor:"rgba(59, 130, 246, 0.3)"},{id:"system-settings",label:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645",icon:Zt.A,component:Kt,requiredRoles:["super_admin","admin"],description:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0627\u0644\u0639\u0627\u0645\u0629 \u0648\u0627\u0644\u062a\u0643\u0648\u064a\u0646\u0627\u062a",gradient:"linear-gradient(135deg, var(--apple-emerald-500) 0%, var(--apple-teal-600) 100%)",shadowColor:"rgba(16, 185, 129, 0.3)"},{id:"audit-logs",label:"\u0633\u062c\u0644\u0627\u062a \u0627\u0644\u062a\u062f\u0642\u064a\u0642",icon:me.A,component:Qt,requiredRoles:["super_admin","admin"],description:"\u0639\u0631\u0636 \u0633\u062c\u0644\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645 \u0648\u0623\u0646\u0634\u0637\u0629 \u0627\u0644\u0645\u0633\u062a\u062e\u062f\u0645\u064a\u0646",gradient:"linear-gradient(135deg, var(--apple-amber-500) 0%, var(--apple-orange-600) 100%)",shadowColor:"rgba(245, 158, 11, 0.3)"}],o=localStorage.getItem("user");let c=null===e||void 0===e?void 0:e.role;if(!c&&o)try{const e=JSON.parse(o);c=e.role}catch(g){console.error("Error parsing stored user:",g)}console.log("[Settings] User role:",c),console.log("[Settings] User data:",e),console.log("[Settings] hasRole function available:","function"===typeof t);const d=l.filter(e=>{if(!e.requiredRoles||0===e.requiredRoles.length)return!0;return!("admin"!==c&&"super_admin"!==c)||(t&&"function"===typeof t?t(e.requiredRoles):!!c&&e.requiredRoles.includes(c))});console.log("[Settings] Available tabs:",d.map(e=>e.id)),console.log("[Settings] Active tab:",i),(0,s.useEffect)(()=>{d.length>0&&!d.find(e=>e.id===i)&&r(d[0].id)},[d,i]);const p=d.find(e=>e.id===i),m=null===p||void 0===p?void 0:p.component,h=()=>(0,S.jsxs)("div",{className:"glass-container-strong slide-in-up",style:{marginBottom:"2rem",position:"relative",overflow:"hidden"},children:[(0,S.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%)",zIndex:1}}),(0,S.jsx)("div",{className:"floating-element",style:{position:"absolute",top:"20px",right:"20px",width:"100px",height:"100px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%)",borderRadius:"50%",filter:"blur(20px)",zIndex:1}}),(0,S.jsx)("div",{style:{position:"relative",zIndex:2,padding:"2rem"},children:(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"1rem"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,S.jsxs)("div",{className:"breathing-element",style:{width:"64px",height:"64px",background:"linear-gradient(135deg, var(--apple-blue-600) 0%, var(--apple-purple-600) 100%)",borderRadius:"var(--radius-xl)",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"var(--apple-shadow-lg)",position:"relative",overflow:"hidden"},children:[(0,S.jsx)("div",{style:{position:"absolute",top:"-50%",left:"-50%",width:"200%",height:"200%",background:"linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent)",animation:"shimmer 3s infinite"}}),(0,S.jsx)(f.A,{style:{width:"32px",height:"32px",color:"white",zIndex:1}})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{style:{fontSize:"2.25rem",fontWeight:"700",color:"var(--apple-gray-900)",marginBottom:"0.5rem",fontFamily:"var(--font-display)"},children:"\u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0627\u0644\u0646\u0638\u0627\u0645"}),(0,S.jsx)("p",{style:{fontSize:"1.125rem",color:"var(--apple-gray-600)",fontFamily:"var(--font-display)",fontWeight:"500"},children:"\u0625\u062f\u0627\u0631\u0629 \u0648\u062a\u0643\u0648\u064a\u0646 \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0646\u0638\u0627\u0645 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644"})]})]}),(0,S.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"linear-gradient(135deg, var(--apple-green-500) 0%, var(--apple-emerald-600) 100%)",color:"white",borderRadius:"var(--radius-full)",fontSize:"14px",fontWeight:"600",boxShadow:"var(--apple-shadow-md)"},children:[(0,S.jsx)(E.A,{style:{width:"16px",height:"16px"}}),(0,S.jsx)("span",{children:"super_admin"===(null===e||void 0===e?void 0:e.role)?"\u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649":(null===e||void 0===e?void 0:e.role)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]})]}),(0,S.jsx)("div",{className:"pill-navigation",children:d.map(e=>{const t=e.icon;return(0,S.jsxs)("button",{onClick:()=>r(e.id),className:"pill-tab ".concat(i===e.id?"active":""),children:[(0,S.jsx)(t,{style:{width:"16px",height:"16px"}}),e.label]},e.id)})})]})})]}),u=()=>(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"4rem 2rem",textAlign:"center"},children:[(0,S.jsx)("div",{style:{width:"120px",height:"120px",background:"linear-gradient(135deg, var(--apple-red-500) 0%, var(--apple-rose-500) 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"2rem",boxShadow:"var(--apple-shadow-lg)"},children:(0,S.jsx)(I.A,{style:{width:"60px",height:"60px",color:"white"}})}),(0,S.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"700",color:"var(--apple-gray-900)",marginBottom:"1rem",fontFamily:"var(--font-display)"},children:"\u0644\u064a\u0633 \u0644\u062f\u064a\u0643 \u0635\u0644\u0627\u062d\u064a\u0629 \u0644\u0644\u0648\u0635\u0648\u0644"}),(0,S.jsx)("p",{style:{fontSize:"1rem",color:"var(--apple-gray-600)",marginBottom:"1.5rem",fontFamily:"var(--font-display)",lineHeight:"1.6"},children:"\u0647\u0630\u0647 \u0627\u0644\u0635\u0641\u062d\u0629 \u0645\u062e\u0635\u0635\u0629 \u0644\u0644\u0645\u062f\u064a\u0631\u064a\u0646 \u0641\u0642\u0637. \u064a\u0631\u062c\u0649 \u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639 \u0627\u0644\u0645\u062f\u064a\u0631 \u0627\u0644\u0623\u0639\u0644\u0649 \u0644\u0644\u062d\u0635\u0648\u0644 \u0639\u0644\u0649 \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0627\u062a \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629."}),(0,S.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"rgba(239, 68, 68, 0.1)",color:"var(--apple-red-500)",borderRadius:"var(--radius-lg)",fontSize:"14px",fontWeight:"500"},children:["\u0627\u0644\u062f\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a: ",(null===e||void 0===e?void 0:e.role)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]});if(n)return(0,S.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 50%, #f3e8ff 100%)",padding:"1.5rem",display:"flex",alignItems:"center",justifyContent:"center"},dir:"rtl",children:(0,S.jsxs)("div",{className:"glass-container",style:{padding:"3rem",textAlign:"center"},children:[(0,S.jsx)("div",{className:"loading-spinner",style:{width:"40px",height:"40px",margin:"0 auto 1.5rem",borderWidth:"3px",borderTopColor:"var(--apple-blue-600)"}}),(0,S.jsx)("div",{style:{fontSize:"1.125rem",color:"var(--apple-gray-600)",fontFamily:"var(--font-display)",fontWeight:"500"},children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a..."})]})});return"admin"===c||"super_admin"===c?(0,S.jsxs)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 50%, #f3e8ff 100%)",padding:"1.5rem",position:"relative",overflow:"hidden"},dir:"rtl",children:[(0,S.jsx)("div",{className:"floating-element",style:{position:"absolute",top:"10%",left:"10%",width:"200px",height:"200px",background:"linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(147, 51, 234, 0.1) 100%)",borderRadius:"50%",filter:"blur(40px)",zIndex:0}}),(0,S.jsx)("div",{className:"floating-element",style:{position:"absolute",bottom:"10%",right:"10%",width:"150px",height:"150px",background:"linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(34, 197, 94, 0.1) 100%)",borderRadius:"50%",filter:"blur(30px)",zIndex:0,animationDelay:"2s"}}),(0,S.jsxs)("div",{style:{maxWidth:"1400px",margin:"0 auto",position:"relative",zIndex:1},children:[(0,S.jsx)(h,{}),(0,S.jsxs)("div",{className:"glass-container slide-in-up",style:{padding:"2rem",minHeight:"600px",animationDelay:"200ms"},children:[p&&(0,S.jsxs)("div",{children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"2rem",padding:"1rem",background:p.gradient,borderRadius:"var(--radius-xl)",color:"white"},children:[(0,S.jsx)("div",{style:{width:"48px",height:"48px",background:"rgba(255, 255, 255, 0.2)",borderRadius:"var(--radius-lg)",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(p.icon,{style:{width:"24px",height:"24px"}})}),(0,S.jsxs)("div",{children:[(0,S.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.25rem",fontFamily:"var(--font-display)"},children:p.label}),(0,S.jsx)("p",{style:{fontSize:"0.875rem",opacity:.9,fontFamily:"var(--font-display)"},children:p.description})]})]}),(0,S.jsx)("div",{style:{position:"relative"},children:m?(0,S.jsx)(m,{}):(0,S.jsx)("div",{style:{padding:"2rem",textAlign:"center",color:"var(--apple-gray-600)"},children:(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0645\u062d\u062a\u0648\u0649..."})})})]}),0===d.length&&(0,S.jsxs)("div",{style:{textAlign:"center",padding:"3rem"},children:[(0,S.jsx)(Ut.A,{style:{width:"64px",height:"64px",margin:"0 auto 1rem",color:"var(--apple-gray-400)"}}),(0,S.jsx)("div",{style:{fontSize:"1.125rem",color:"var(--apple-gray-600)",fontFamily:"var(--font-display)",fontWeight:"500"},children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0639\u062f\u0627\u062f\u0627\u062a \u0645\u062a\u0627\u062d\u0629 \u0644\u062f\u0648\u0631\u0643 \u0627\u0644\u062d\u0627\u0644\u064a"})]})]})]})]}):(0,S.jsx)("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 50%, #f3e8ff 100%)",padding:"1.5rem",position:"relative",overflow:"hidden"},dir:"rtl",children:(0,S.jsx)("div",{style:{maxWidth:"800px",margin:"0 auto",position:"relative",zIndex:1},children:(0,S.jsx)("div",{className:"glass-container slide-in-up",children:(0,S.jsx)(u,{})})})})};var ta=a(8509),aa=a(4643),sa=a(5271),na=a(5612),ia=(a(4620),a(6429)),ra=a(9230);const la=()=>{const[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)([]),[i,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[d,p]=(0,s.useState)(null),[x,m]=(0,s.useState)(""),[h,u]=(0,s.useState)(!1),g=3e3,b=(0,s.useCallback)(async e=>{if(!e||e.length<2)return n([]),void u(!1);r(!0),m("");try{const t="http://localhost:3001",a=localStorage.getItem("token"),s=await fetch("".concat(t,"/api/members?search=").concat(encodeURIComponent(e),"&limit=10"),{headers:{Authorization:"Bearer ".concat(a)}});if(!s.ok)throw new Error("\u0641\u0634\u0644 \u0627\u0644\u0628\u062d\u062b");const i=await s.json(),r=(i.data||i.members||[]).map(e=>({id:e.id,member_no:e.membership_number||e.member_no,full_name:e.full_name,phone:e.phone,tribal_section:e.tribal_section,balance:e.balance||0}));n(r),u(!0)}catch(x){console.error("Search error:",x),m("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0628\u062d\u062b")}finally{r(!1)}},[]);(0,s.useEffect)(()=>{(async()=>{r(!0);try{const e="http://localhost:3001",t=localStorage.getItem("token"),a=await fetch("".concat(e,"/api/members"),{headers:{Authorization:"Bearer ".concat(t)}});if(a.ok){const e=await a.json(),t=(e.data||e.members||[]).map(e=>({id:e.id,member_no:e.membership_number||e.member_no,full_name:e.full_name,phone:e.phone,tribal_section:e.tribal_section,balance:e.balance||0}));n(t),u(!1)}}catch(x){console.error("Error loading initial members:",x)}finally{r(!1)}})()},[]),(0,s.useEffect)(()=>{if(e.length>1){const t=setTimeout(()=>{b(e)},300);return()=>clearTimeout(t)}},[e,b]);const j=e=>{switch(e){case"paid":return(0,S.jsx)(D.A,{className:"w-5 h-5 text-green-500"});case"partial":return(0,S.jsx)(v.A,{className:"w-5 h-5 text-yellow-500"});default:return(0,S.jsx)(B.A,{className:"w-5 h-5 text-red-500"})}},f=e=>{const t={paid:{text:"\u0645\u062f\u0641\u0648\u0639",className:"bg-green-100 text-green-800"},partial:{text:"\u062c\u0632\u0626\u064a",className:"bg-yellow-100 text-yellow-800"},pending:{text:"\u0645\u0639\u0644\u0642",className:"bg-red-100 text-red-800"}},a=t[e]||t.pending;return(0,S.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(a.className),children:a.text})},y=(0,s.useMemo)(()=>d?Math.min(100,d.totalPaid/d.totalRequired*100):0,[d]),N=e=>{(async e=>{r(!0),m("");try{var t;const a=e.balance||0,s=[];if(a>0){const t=Math.min(5,Math.floor(a/600));for(let a=0;a<t;a++)s.push({year:2021+a,amount:600,payment_date:"".concat(2021+a,"-06-15"),receipt_number:"RCP-".concat(2021+a,"-").concat(e.member_no),payment_method:"\u0628\u0646\u0643 \u0627\u0644\u0631\u0627\u062c\u062d\u064a"});const n=a%600;n>0&&t<5&&s.push({year:2021+t,amount:n,payment_date:"".concat(2021+t,"-06-15"),receipt_number:"RCP-".concat(2021+t,"-").concat(e.member_no),payment_method:"\u062a\u062d\u0648\u064a\u0644 \u0628\u0646\u0643\u064a"})}const n=null;n&&"PGRST116"!==n.code&&console.error("Payments fetch error:",n);const i=[2021,2022,2023,2024,2025],r=i.map(e=>{const t=null===s||void 0===s?void 0:s.find(t=>t.year===e);return{year:e,required:600,paid:(null===t||void 0===t?void 0:t.amount)||0,status:(null===t||void 0===t?void 0:t.amount)>=600?"paid":(null===t||void 0===t?void 0:t.amount)>0?"partial":"pending",paymentDate:null===t||void 0===t?void 0:t.payment_date,receiptNumber:null===t||void 0===t?void 0:t.receipt_number,paymentMethod:null===t||void 0===t?void 0:t.payment_method}}),l=r.reduce((e,t)=>e+t.paid,0),o=600*i.length,d=Math.max(0,o-l),x=l>=g?"compliant":"non-compliant";c(e),p({member:e,yearlyPayments:r,totalPaid:l,totalRequired:o,outstandingBalance:d,complianceStatus:x,lastPaymentDate:null===s||void 0===s||null===(t=s[0])||void 0===t?void 0:t.payment_date}),u(!1)}catch(a){console.error("Error loading statement:",a),m("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628")}finally{r(!1)}})(e),t(e.full_name)};return(0,S.jsxs)("div",{className:"member-statement-container",children:[(0,S.jsxs)("div",{className:"statement-header",children:[(0,S.jsx)("h1",{className:"statement-title",children:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628"}),(0,S.jsx)("p",{className:"statement-subtitle",children:"\u0627\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0639\u0636\u0648 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641 \u0644\u0639\u0631\u0636 \u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628"})]}),(0,S.jsxs)("div",{className:"search-section",children:[(0,S.jsxs)("div",{className:"search-input-wrapper",children:[(0,S.jsx)(P.A,{className:"search-icon"}),(0,S.jsx)("input",{type:"text",className:"search-input",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u060c \u0627\u0644\u0627\u0633\u0645\u060c \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644...",value:e,onChange:e=>t(e.target.value),dir:"rtl"}),i&&(0,S.jsx)("div",{className:"search-loading",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0628\u062d\u062b..."})]}),x&&(0,S.jsx)("div",{className:"search-error",children:x}),(0,S.jsx)(ia.N,{children:h&&a.length>0&&(0,S.jsx)(ra.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"autocomplete-dropdown",children:a.map(e=>(0,S.jsxs)("div",{onClick:()=>N(e),className:"autocomplete-item",children:[(0,S.jsxs)("div",{className:"flex justify-between items-center",children:[(0,S.jsx)("span",{className:"font-medium",children:e.full_name}),(0,S.jsx)("span",{className:"text-sm text-gray-500",children:e.member_no})]}),(0,S.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.phone," \u2022 ",e.tribal_section]})]},e.id))})})]}),!d&&a.length>0&&(0,S.jsxs)(ra.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"members-table-section",children:[(0,S.jsxs)("div",{className:"table-header",children:[(0,S.jsxs)("h2",{className:"table-title",children:["\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0639\u0636\u0627\u0621: ",a.length," \u0639\u0636\u0648"]}),(0,S.jsxs)("div",{className:"table-stats",children:[(0,S.jsxs)("div",{className:"stat-item stat-good",children:[(0,S.jsx)(D.A,{className:"stat-icon"}),(0,S.jsxs)("span",{children:["\u0645\u0643\u062a\u0645\u0644: ",a.filter(e=>e.balance>=g).length]})]}),(0,S.jsxs)("div",{className:"stat-item stat-warning",children:[(0,S.jsx)(B.A,{className:"stat-icon"}),(0,S.jsxs)("span",{children:["\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644: ",a.filter(e=>e.balance<g).length]})]})]}),(0,S.jsx)("p",{className:"table-subtitle",children:"\u0627\u0636\u063a\u0637 \u0639\u0644\u0649 \u0623\u064a \u0639\u0636\u0648 \u0644\u0639\u0631\u0636 \u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628 \u0627\u0644\u062a\u0641\u0635\u064a\u0644\u064a"})]}),(0,S.jsx)("div",{className:"members-table-container desktop-view",dir:"rtl",children:(0,S.jsxs)("table",{className:"members-table",dir:"rtl",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"}),(0,S.jsx)("th",{children:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,S.jsx)("th",{children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsx)("tbody",{children:a.map(e=>(0,S.jsxs)("tr",{className:"member-row",onClick:()=>N(e),children:[(0,S.jsx)("td",{className:"member-no",children:e.member_no}),(0,S.jsx)("td",{className:"member-name",children:(0,S.jsxs)("div",{className:"name-cell",children:[(0,S.jsx)(kt.A,{className:"name-icon"}),e.full_name]})}),(0,S.jsx)("td",{className:"member-phone",children:e.phone||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"}),(0,S.jsx)("td",{className:"member-section",children:e.tribal_section||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"}),(0,S.jsxs)("td",{className:"member-balance ".concat(e.balance>=g?"balance-good":"balance-low"),children:[new Intl.NumberFormat("ar-SA").format(e.balance||0)," \u0631.\u0633"]}),(0,S.jsx)("td",{className:"member-status",children:e.balance>=g?(0,S.jsxs)("span",{className:"status-badge status-good",children:[(0,S.jsx)(D.A,{className:"status-icon"}),"\u0645\u0643\u062a\u0645\u0644"]}):(0,S.jsxs)("span",{className:"status-badge status-warning",children:[(0,S.jsx)(B.A,{className:"status-icon"}),"\u063a\u064a\u0631 \u0645\u0643\u062a\u0645\u0644"]})}),(0,S.jsx)("td",{className:"member-actions",onClick:e=>e.stopPropagation(),children:(0,S.jsxs)("button",{onClick:()=>N(e),className:"view-btn",children:[(0,S.jsx)(P.A,{className:"btn-icon"}),"\u0639\u0631\u0636 \u0627\u0644\u0643\u0634\u0641"]})})]},e.id))})]})}),(0,S.jsx)("div",{className:"members-cards-container mobile-view",children:a.map(e=>(0,S.jsxs)(ra.P.div,{className:"member-card",onClick:()=>N(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,S.jsxs)("div",{className:"card-header",children:[(0,S.jsxs)("div",{className:"card-member-info",children:[(0,S.jsx)(kt.A,{className:"card-icon"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"card-name",children:e.full_name}),(0,S.jsx)("div",{className:"card-member-no",children:e.member_no})]})]}),e.balance>=g?(0,S.jsx)(D.A,{className:"card-status-icon status-good"}):(0,S.jsx)(B.A,{className:"card-status-icon status-warning"})]}),(0,S.jsxs)("div",{className:"card-details",children:[(0,S.jsxs)("div",{className:"card-detail-item",children:[(0,S.jsx)(Ct.A,{className:"detail-icon"}),(0,S.jsx)("span",{children:e.phone||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"})]}),(0,S.jsxs)("div",{className:"card-detail-item",children:[(0,S.jsx)(l.A,{className:"detail-icon"}),(0,S.jsx)("span",{children:e.tribal_section||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,S.jsxs)("div",{className:"card-detail-item",children:[(0,S.jsx)(U.A,{className:"detail-icon"}),(0,S.jsxs)("span",{className:e.balance>=g?"balance-good":"balance-low",children:[new Intl.NumberFormat("ar-SA").format(e.balance||0)," \u0631.\u0633"]})]})]}),(0,S.jsxs)("button",{className:"card-view-btn",children:[(0,S.jsx)(P.A,{className:"btn-icon"}),"\u0639\u0631\u0636 \u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628"]})]},e.id))})]}),d&&(0,S.jsx)(ra.P.div,{initial:{opacity:0},animate:{opacity:1},className:"statement-display",id:"statement-content",children:(0,S.jsxs)("div",{className:"statement-card",children:[(0,S.jsxs)("div",{className:"statement-member-header",children:[(0,S.jsxs)("div",{className:"member-info-section",children:[(0,S.jsx)("div",{className:"member-avatar",children:(0,S.jsx)(kt.A,{className:"w-12 h-12"})}),(0,S.jsxs)("div",{className:"member-details",children:[(0,S.jsx)("h2",{children:o.full_name}),(0,S.jsxs)("div",{className:"member-meta",children:[(0,S.jsxs)("span",{className:"meta-item",children:[(0,S.jsx)(kt.A,{className:"w-4 h-4"}),o.member_no]}),(0,S.jsxs)("span",{className:"meta-item",children:[(0,S.jsx)(Ct.A,{className:"w-4 h-4"}),o.phone||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631"]}),(0,S.jsxs)("span",{className:"meta-item",children:[(0,S.jsx)(l.A,{className:"w-4 h-4"}),o.tribal_section||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"]})]})]})]}),(0,S.jsxs)("div",{className:"statement-actions",children:[(0,S.jsxs)("button",{onClick:()=>{const e=window.open("","_blank"),t=document.getElementById("statement-content");e.document.write('\n      <html dir="rtl">\n        <head>\n          <title>\u0643\u0634\u0641 \u062d\u0633\u0627\u0628 - '.concat(null===o||void 0===o?void 0:o.full_name,"</title>\n          <style>\n            @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');\n            body {\n              font-family: 'Cairo', sans-serif;\n              direction: rtl;\n              padding: 20px;\n              background: white;\n            }\n            .header {\n              text-align: center;\n              margin-bottom: 30px;\n              padding-bottom: 20px;\n              border-bottom: 2px solid #ddd;\n            }\n            .member-info {\n              margin-bottom: 30px;\n              display: grid;\n              grid-template-columns: repeat(2, 1fr);\n              gap: 15px;\n            }\n            .info-item {\n              padding: 10px;\n              background: #f8f9fa;\n              border-radius: 8px;\n            }\n            table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-top: 20px;\n            }\n            th, td {\n              padding: 12px;\n              border: 1px solid #ddd;\n              text-align: right;\n            }\n            th {\n              background: #2980b9;\n              color: white;\n            }\n            .status-paid { color: green; }\n            .status-partial { color: orange; }\n            .status-pending { color: red; }\n            .summary {\n              margin-top: 30px;\n              padding: 20px;\n              background: #f8f9fa;\n              border-radius: 8px;\n              text-align: center;\n            }\n            @media print {\n              body { margin: 0; }\n              .no-print { display: none; }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat((null===t||void 0===t?void 0:t.innerHTML)||"","\n        </body>\n      </html>\n    ")),e.document.close(),setTimeout(()=>{e.print()},250)},className:"action-btn print-btn",children:[(0,S.jsx)(ta.A,{className:"btn-icon"}),"\u0637\u0628\u0627\u0639\u0629"]}),(0,S.jsxs)("button",{onClick:()=>{if(!d)return;const e=d.yearlyPayments.map(e=>({"\u0627\u0644\u0633\u0646\u0629":e.year,"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628":"".concat(e.required," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639":"".concat(e.paid," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u062d\u0627\u0644\u0629":"paid"===e.status?"\u0645\u062f\u0641\u0648\u0639":"partial"===e.status?"\u062c\u0632\u0626\u064a":"\u0645\u0639\u0644\u0642","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639":e.paymentDate||"-","\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644":e.receiptNumber||"-"}));e.push({"\u0627\u0644\u0633\u0646\u0629":"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a","\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628":"".concat(d.totalRequired," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639":"".concat(d.totalPaid," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u062d\u0627\u0644\u0629":"compliant"===d.complianceStatus?"\u0645\u0644\u062a\u0632\u0645":"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639":"","\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644":""});const t=sa.Wp.json_to_sheet(e),a=sa.Wp.book_new();sa.Wp.book_append_sheet(a,t,"\u0643\u0634\u0641 \u0627\u0644\u062d\u0633\u0627\u0628");const s="statement_".concat(o.member_no,"_").concat((new Date).toISOString().split("T")[0],".xlsx");sa._h(a,s)},className:"action-btn export-btn",children:[(0,S.jsx)(aa.A,{className:"btn-icon"}),"Excel"]}),(0,S.jsxs)("button",{onClick:()=>{if(!d)return;const e=new na.Ay({orientation:"portrait",unit:"mm",format:"a4"});e.setR2L(!0),e.setFontSize(20),e.text("\u0643\u0634\u0641 \u062d\u0633\u0627\u0628 \u0627\u0644\u0639\u0636\u0648",105,20,{align:"center"}),e.setFontSize(12);const t=["\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648: ".concat(o.member_no),"\u0627\u0644\u0627\u0633\u0645: ".concat(o.full_name),"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644: ".concat(o.phone||"-"),"\u0627\u0644\u0641\u062e\u0630: ".concat(o.tribal_section||"-")];let a=40;t.forEach(t=>{e.text(t,190,a,{align:"right"}),a+=10});const s=d.yearlyPayments.map(e=>["paid"===e.status?"\u2713":"partial"===e.status?"\u25d0":"\u2717",e.paymentDate||"-","".concat(e.paid," \u0631\u064a\u0627\u0644"),"".concat(e.required," \u0631\u064a\u0627\u0644"),e.year]);s.push(["compliant"===d.complianceStatus?"\u2713":"\u2717","","".concat(d.totalPaid," \u0631\u064a\u0627\u0644"),"".concat(d.totalRequired," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a"]),e.autoTable({head:[["\u0627\u0644\u062d\u0627\u0644\u0629","\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639","\u0627\u0644\u0645\u062f\u0641\u0648\u0639","\u0627\u0644\u0645\u0637\u0644\u0648\u0628","\u0627\u0644\u0633\u0646\u0629"]],body:s,startY:a+10,styles:{font:"helvetica",halign:"right",fontSize:11},headStyles:{fillColor:[41,128,185],textColor:255},columnStyles:{0:{halign:"center",cellWidth:20},1:{cellWidth:40},2:{cellWidth:35},3:{cellWidth:35},4:{cellWidth:25}}});const n=e.lastAutoTable.finalY+20;e.setFontSize(14),e.setTextColor(d.outstandingBalance>0?255:0,d.outstandingBalance>0?0:128,0),e.text("\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a: ".concat(d.outstandingBalance," \u0631\u064a\u0627\u0644"),105,n,{align:"center"});const i="statement_".concat(o.member_no,"_").concat((new Date).toISOString().split("T")[0],".pdf");e.save(i)},className:"action-btn pdf-btn",children:[(0,S.jsx)(aa.A,{className:"btn-icon"}),"PDF"]}),(0,S.jsx)("button",{onClick:()=>{c(null),p(null),t("")},className:"action-btn back-btn",children:"\u0631\u062c\u0648\u0639 \u0644\u0644\u0628\u062d\u062b"})]})]}),(0,S.jsxs)("div",{className:"summary-stats",children:[(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsxs)("div",{className:"stat-value",children:[d.totalPaid," \u0631\u064a\u0627\u0644"]}),(0,S.jsx)("div",{className:"stat-label",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsxs)("div",{className:"stat-value",children:[d.totalRequired," \u0631\u064a\u0627\u0644"]}),(0,S.jsx)("div",{className:"stat-label",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628"})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsxs)("div",{className:"stat-value ".concat(d.outstandingBalance>0?"text-red-500":"text-green-500"),children:[d.outstandingBalance," \u0631\u064a\u0627\u0644"]}),(0,S.jsx)("div",{className:"stat-label",children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsx)("div",{className:"stat-badge ".concat("compliant"===d.complianceStatus?"compliant":"non-compliant"),children:"compliant"===d.complianceStatus?"\u0645\u0644\u062a\u0632\u0645":"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645"}),(0,S.jsx)("div",{className:"stat-label",children:"\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u0644\u062a\u0632\u0627\u0645"})]})]}),(0,S.jsxs)("div",{className:"payment-progress",children:[(0,S.jsxs)("div",{className:"progress-header",children:[(0,S.jsx)("span",{children:"\u0646\u0633\u0628\u0629 \u0627\u0644\u0633\u062f\u0627\u062f"}),(0,S.jsxs)("span",{children:[Math.round(y),"%"]})]}),(0,S.jsx)("div",{className:"progress-bar",children:(0,S.jsx)("div",{className:"progress-fill",style:{width:"".concat(y,"%")}})})]}),(0,S.jsxs)("div",{className:"statement-table-wrapper",dir:"rtl",children:[(0,S.jsx)("h3",{className:"table-title",children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a \u0627\u0644\u0633\u0646\u0648\u064a\u0629"}),(0,S.jsxs)("table",{className:"statement-table",dir:"rtl",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"\u0627\u0644\u0633\u0646\u0629"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062f\u0641\u0648\u0639"}),(0,S.jsx)("th",{children:"\u0627\u0644\u0628\u0627\u0642\u064a"}),(0,S.jsx)("th",{children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("th",{children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("th",{children:"\u0631\u0642\u0645 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"})]})}),(0,S.jsx)("tbody",{children:d.yearlyPayments.map(e=>(0,S.jsxs)("tr",{className:"payment-row ".concat(e.status),children:[(0,S.jsx)("td",{className:"font-medium",children:e.year}),(0,S.jsxs)("td",{children:[e.required," \u0631\u064a\u0627\u0644"]}),(0,S.jsxs)("td",{className:e.paid>0?"text-green-600":"",children:[e.paid," \u0631\u064a\u0627\u0644"]}),(0,S.jsxs)("td",{className:e.required-e.paid>0?"text-red-600":"",children:[Math.max(0,e.required-e.paid)," \u0631\u064a\u0627\u0644"]}),(0,S.jsx)("td",{children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[j(e.status),f(e.status)]})}),(0,S.jsx)("td",{children:e.paymentDate?new Date(e.paymentDate).toLocaleDateString("ar-SA"):"-"}),(0,S.jsx)("td",{children:e.receiptNumber||"-"})]},e.year))})]})]}),(0,S.jsxs)("div",{className:"payment-chart-card",children:[(0,S.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"\u0631\u0633\u0645 \u0628\u064a\u0627\u0646\u064a \u0644\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("div",{className:"chart-container",children:(0,S.jsx)("div",{className:"bar-chart",children:d.yearlyPayments.map(e=>(0,S.jsxs)("div",{className:"chart-bar-wrapper",children:[(0,S.jsx)("div",{className:"chart-bar",style:{height:"".concat(e.paid/e.required*100,"%"),backgroundColor:"paid"===e.status?"#10b981":"partial"===e.status?"#f59e0b":"#ef4444"}}),(0,S.jsx)("div",{className:"chart-label",children:e.year}),(0,S.jsx)("div",{className:"chart-value",children:e.paid})]},e.year))})})]})]})})]})},oa=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!0),[r,l]=(0,s.useState)(null),[o,c]=(0,s.useState)(!1),d=(0,s.useRef)(null),p=(0,s.useRef)(null),[x,m]=(0,s.useState)(""),[h,u]=(0,s.useState)(""),[g,b]=(0,s.useState)(""),[f,y]=(0,s.useState)(""),[v,N]=(0,s.useState)(""),[w,A]=(0,s.useState)(""),[_,C]=(0,s.useState)("all"),[F,T]=(0,s.useState)("all"),[z,R]=(0,s.useState)("greater"),[B,E]=(0,s.useState)(""),[L,M]=(0,s.useState)(""),[W,O]=(0,s.useState)(""),[q,H]=(0,s.useState)("all"),[U,X]=(0,s.useState)(!1),[Y,G]=(0,s.useState)(1),[V,Z]=(0,s.useState)(50),[$,K]=(0,s.useState)(!1),[Q,ee]=(0,s.useState)(!1),[te,ae]=(0,s.useState)(null),[se,ne]=(0,s.useState)(1),ie="http://localhost:3001",re=[{value:"all",label:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u062e\u0648\u0630"},{value:"\u0631\u0634\u0648\u062f",label:"\u0631\u0634\u0648\u062f"},{value:"\u0627\u0644\u062f\u063a\u064a\u0634",label:"\u0627\u0644\u062f\u063a\u064a\u0634"},{value:"\u0631\u0634\u064a\u062f",label:"\u0631\u0634\u064a\u062f"},{value:"\u0627\u0644\u0639\u064a\u062f",label:"\u0627\u0644\u0639\u064a\u062f"},{value:"\u0627\u0644\u0631\u0634\u064a\u062f",label:"\u0627\u0644\u0631\u0634\u064a\u062f"},{value:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646",label:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646"},{value:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f",label:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f"},{value:"\u0639\u0642\u0627\u0628",label:"\u0639\u0642\u0627\u0628"}];(0,s.useEffect)(()=>{const e=setTimeout(()=>{y(x)},300);return()=>clearTimeout(e)},[x]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{N(h)},300);return()=>clearTimeout(e)},[h]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{A(g)},300);return()=>clearTimeout(e)},[g]);const le=(0,s.useMemo)(()=>{if(!e||0===e.length)return[];let t=[...e];if(f&&(t=t.filter(e=>e.memberId&&e.memberId.toLowerCase().includes(f.toLowerCase()))),v&&(t=t.filter(e=>e.name&&e.name.includes(v))),w&&(t=t.filter(e=>e.phone&&e.phone.includes(w))),"all"!==_&&(t=t.filter(e=>e.tribalSection===_)),"comparison"===F&&B){const e=parseFloat(B);isNaN(e)||(t=t.filter(t=>{switch(z){case"greater":return t.balance>e;case"less":return t.balance<e;case"equal":return t.balance===e;default:return!0}}))}else if("range"===F&&(L||W)){const e=L?parseFloat(L):-1/0,a=W?parseFloat(W):1/0;t=t.filter(t=>t.balance>=e&&t.balance<=a)}else"category"===F&&"all"!==q&&(t=t.filter(e=>{switch(q){case"compliant":return e.balance>=3e3;case"non-compliant":return e.balance<3e3;case"critical":return e.balance<1e3;case"excellent":case"5000+":return e.balance>=5e3;case"0-500":return e.balance>=0&&e.balance<=500;case"500-1000":return e.balance>500&&e.balance<=1e3;case"1000-2000":return e.balance>1e3&&e.balance<=2e3;case"2000-3000":return e.balance>2e3&&e.balance<3e3;case"3000-5000":return e.balance>=3e3&&e.balance<5e3;default:return!0}}));return t},[e,f,v,w,_,F,z,B,L,W,q]);(0,s.useEffect)(()=>{G(1)},[le]);const oe=Math.ceil(le.length/V)||1,ce=(Math.min(Y,oe)-1)*V,de=ce+V,pe=le.slice(ce,de);(0,s.useEffect)(()=>{Y>oe&&oe>0&&G(1)},[oe,Y]);const xe=()=>{const e=localStorage.getItem("userRole")||"admin";return"super_admin"===e||"finance_manager"===e},me=e=>{const t=xe();e.balance;return e.balance>=3e3?(0,S.jsx)("span",{className:"no-action",children:"---"}):t?(0,S.jsxs)("div",{className:"action-buttons",children:[!e.isSuspended&&(0,S.jsxs)("button",{className:"action-btn suspend",onClick:()=>(async e=>{ae(e),K(!0),ne(1)})(e),title:"\u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0639\u0636\u0648",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83d\udeab"})," \u0625\u064a\u0642\u0627\u0641"]}),e.isSuspended&&(0,S.jsx)("span",{className:"suspended-badge",children:"\u0645\u0648\u0642\u0648\u0641"}),(0,S.jsx)(he,{member:e,onSend:ge})]}):(0,S.jsxs)("div",{className:"action-buttons",children:[(0,S.jsxs)("button",{className:"action-btn suspend disabled",disabled:!0,title:"\u0635\u0644\u0627\u062d\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629",children:[(0,S.jsx)("span",{className:"btn-icon",children:"\ud83d\udeab"})," \u0625\u064a\u0642\u0627\u0641"]}),(0,S.jsx)("button",{className:"action-btn notify disabled",disabled:!0,title:"\u0635\u0644\u0627\u062d\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629",children:"\ud83d\udcf1 \u0625\u0634\u0639\u0627\u0631"})]})},he=e=>{let{member:t,onSend:a}=e;const[n,i]=(0,s.useState)(!1);return(0,S.jsxs)("div",{className:"notification-wrapper",children:[(0,S.jsxs)("button",{className:"action-btn notify-dropdown",onClick:()=>i(!n),children:["\ud83d\udcf1 ",(0,S.jsx)("span",{children:"\u0625\u0634\u0639\u0627\u0631"})," \u25bc"]}),n&&(0,S.jsxs)("div",{className:"notification-options",children:[(0,S.jsx)("div",{className:"notification-option",onClick:()=>{a(t,"app"),i(!1)},children:"\ud83d\udcf1 App Notification"}),(0,S.jsx)("div",{className:"notification-option",onClick:()=>{a(t,"whatsapp"),i(!1)},children:"\ud83d\udcac WhatsApp"}),(0,S.jsx)("div",{className:"notification-option",onClick:()=>{a(t,"email"),i(!1)},children:"\ud83d\udce7 Email"}),(0,S.jsx)("div",{className:"notification-option",onClick:()=>{a(t,"all"),i(!1)},children:"\ud83d\udcbe All Channels"})]})]})},ge=async(e,t)=>{const a=e.balance<3e3?"\u0639\u0632\u064a\u0632\u064a ".concat(e.name,"\u060c \u0631\u0635\u064a\u062f\u0643 \u0627\u0644\u062d\u0627\u0644\u064a ").concat(e.balance," \u0631\u064a\u0627\u0644. \u0627\u0644\u0645\u0637\u0644\u0648\u0628 3000 \u0631\u064a\u0627\u0644 \u0643\u062d\u062f \u0623\u062f\u0646\u0649. \u064a\u0631\u062c\u0649 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a ").concat(3e3-e.balance," \u0631\u064a\u0627\u0644."):"\u0639\u0632\u064a\u0632\u064a ".concat(e.name,"\u060c \u0634\u0643\u0631\u0627\u064b \u0644\u0627\u0644\u062a\u0632\u0627\u0645\u0643. \u0631\u0635\u064a\u062f\u0643 \u0627\u0644\u062d\u0627\u0644\u064a ").concat(e.balance," \u0631\u064a\u0627\u0644.");try{(await fetch("".concat(ie,"/api/members/").concat(e.id,"/notify"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({channel:t,message:a,type:e.balance<3e3?"payment_reminder":"general",adminId:localStorage.getItem("userId")})})).ok&&alert("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 \u0639\u0628\u0631 ".concat("all"===t?"\u062c\u0645\u064a\u0639 \u0627\u0644\u0642\u0646\u0648\u0627\u062a":t))}catch(s){console.error("Error sending notification:",s),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631")}},be=async e=>{try{(await fetch("".concat(ie,"/api/member-monitoring/").concat(te.id,"/notify"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({type:e,message:"payment"===e?"\u0639\u0632\u064a\u0632\u064a ".concat(te.name,"\u060c \u0631\u0635\u064a\u062f\u0643 \u0627\u0644\u062d\u0627\u0644\u064a ").concat(te.balance," \u0631\u064a\u0627\u0644 \u0648\u0647\u0648 \u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0627\u0644\u0645\u0637\u0644\u0648\u0628 (3000 \u0631\u064a\u0627\u0644). \u064a\u0631\u062c\u0649 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a."):"\u0639\u0632\u064a\u0632\u064a ".concat(te.name,"\u060c \u0647\u0630\u0627 \u0625\u0634\u0639\u0627\u0631 \u0645\u0646 \u0625\u062f\u0627\u0631\u0629 \u0635\u0646\u062f\u0648\u0642 \u0622\u0644 \u0627\u0644\u0634\u0639\u064a\u0644.")})})).ok&&alert("\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 \u0628\u0646\u062c\u0627\u062d")}catch(t){console.error("Error sending notification:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631")}finally{ee(!1)}};return(0,s.useEffect)(()=>{!async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{if(!e&&d.current&&p.current&&Date.now()-p.current<3e5)return console.log("\u2705 Using cached data"),t(d.current),c(!0),void n(!1);o&&!e||n(!0),l(null);const s={"Content-Type":"application/json"},i=localStorage.getItem("token");i&&(s.Authorization="Bearer ".concat(i));let r=await fetch("".concat(ie,"/api/member-monitoring?limit=500&page=1"),{headers:s,mode:"cors",credentials:"include"}),x=null,m=[];if(r.ok||404!==r.status||(console.log("\u26a0\ufe0f Trying fallback members endpoint..."),r=await fetch("".concat(ie,"/api/members?limit=500&page=1"),{headers:s,mode:"cors",credentials:"include"})),!r.ok){const e=await r.text();throw console.error("\u274c API Error:",r.status,e),new Error("API Error: ".concat(r.status))}try{x=await r.json(),console.log("\u2705 API Response received:",{hasData:!!x,hasDataProp:!(!x||!x.data),hasMembers:!(!x||!x.members),isArray:Array.isArray(x)})}catch(a){throw console.error("\u274c Failed to parse response:",a),new Error("Invalid response format from server")}x&&(!0===x.success&&x.data?x.data.members&&Array.isArray(x.data.members)?(m=x.data.members,console.log("\u2705 Found members in data.data.members")):Array.isArray(x.data)&&(m=x.data,console.log("\u2705 Found members in data.data array")):x.members&&Array.isArray(x.members)?(m=x.members,console.log("\u2705 Found members in data.members")):x.data&&Array.isArray(x.data)?(m=x.data,console.log("\u2705 Found members in data.data")):Array.isArray(x)&&(m=x,console.log("\u2705 Found members as direct array"))),Array.isArray(m)||(console.error("\u274c Members data is not an array:",typeof m,m),m=[]),console.log("\ud83d\udcca Processing ".concat(m.length," members..."));const h=m.map(e=>e&&"object"===typeof e?{id:e.id||"temp-".concat(Date.now(),"-").concat(Math.random()),memberId:e.membership_number||e.memberId||e.membershipNumber||"N/A",name:e.full_name||e.fullName||e.name||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631",phone:e.phone||e.mobile||"\u063a\u064a\u0631 \u0645\u062a\u0648\u0641\u0631",balance:parseFloat(e.total_balance||e.balance||e.totalBalance||0)||0,tribalSection:e.tribal_section||e.tribalSection||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",status:(parseFloat(e.total_balance||e.balance||e.totalBalance||0)||0)>=3e3?"sufficient":"insufficient",isSuspended:e.is_suspended||e.isSuspended||"suspended"===e.membership_status||!1}:(console.warn("\u26a0\ufe0f Invalid member object:",e),null)).filter(e=>null!==e);console.log("\u2705 Formatted members:",h.length),h.length>0&&console.log("\u2705 Sample member:",h[0]),d.current=h,p.current=Date.now(),t(h),c(!0),l(null)}catch(s){console.error("\u274c Error in fetchMembers:",s),l("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0623\u0639\u0636\u0627\u0621. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0644\u0627\u062d\u0642\u0627\u064b."),t([])}finally{n(!1),c(!0)}}()},[]),(0,S.jsxs)("div",{className:"member-monitoring-dashboard",children:[(0,S.jsxs)("div",{className:"dashboard-header",children:[(0,S.jsx)("h1",{className:"dashboard-title",children:"\u0644\u0648\u062d\u0629 \u0645\u062a\u0627\u0628\u0639\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"}),(0,S.jsx)("p",{className:"dashboard-subtitle",children:"\u0645\u062a\u0627\u0628\u0639\u0629 \u062d\u0627\u0644\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0648\u0627\u0644\u0623\u0631\u0635\u062f\u0629 \u0627\u0644\u0645\u0627\u0644\u064a\u0629"})]}),(0,S.jsx)("div",{className:"stats-inline-container",children:(0,S.jsxs)("div",{className:"stats-inline",children:[(0,S.jsxs)("span",{className:"stat-inline-item total",children:[(0,S.jsx)("span",{className:"stat-inline-icon",children:"\ud83d\udcca"}),(0,S.jsx)("span",{className:"stat-inline-label",children:"\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,S.jsx)("span",{className:"stat-inline-value",children:le.length})]}),(0,S.jsx)("span",{className:"stat-divider",children:"|"}),(0,S.jsxs)("span",{className:"stat-inline-item sufficient",children:[(0,S.jsx)("span",{className:"stat-inline-icon",children:"\u2705"}),(0,S.jsx)("span",{className:"stat-inline-label",children:"\u0645\u0644\u062a\u0632\u0645\u0648\u0646:"}),(0,S.jsx)("span",{className:"stat-inline-value",children:le.filter(e=>e.balance>=3e3).length})]}),(0,S.jsx)("span",{className:"stat-divider",children:"|"}),(0,S.jsxs)("span",{className:"stat-inline-item insufficient",children:[(0,S.jsx)("span",{className:"stat-inline-icon",children:"\u274c"}),(0,S.jsx)("span",{className:"stat-inline-label",children:"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645\u064a\u0646:"}),(0,S.jsx)("span",{className:"stat-inline-value",children:le.filter(e=>e.balance<3e3).length})]})]})}),(0,S.jsxs)("div",{className:"stats-container",children:[(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsx)("div",{className:"stat-icon total",children:(0,S.jsx)(D.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"stat-content",children:[(0,S.jsx)("h3",{children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0639\u0636\u0627\u0621"}),(0,S.jsx)("p",{className:"stat-value",children:le.length})]})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsx)("div",{className:"stat-icon sufficient",children:(0,S.jsx)(D.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"stat-content",children:[(0,S.jsx)("h3",{children:"\u0645\u0644\u062a\u0632\u0645\u0648\u0646 (\u22653000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("p",{className:"stat-value",children:le.filter(e=>e.balance>=3e3).length}),(0,S.jsxs)("span",{className:"stat-percentage",children:[(le.filter(e=>e.balance>=3e3).length/le.length*100||0).toFixed(1),"%"]})]})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsx)("div",{className:"stat-icon insufficient",children:(0,S.jsx)(I.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"stat-content",children:[(0,S.jsx)("h3",{children:"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645\u064a\u0646 (<3000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("p",{className:"stat-value",children:le.filter(e=>e.balance<3e3).length}),(0,S.jsxs)("span",{className:"stat-percentage warning",children:[(le.filter(e=>e.balance<3e3).length/le.length*100||0).toFixed(1),"%"]})]})]}),(0,S.jsxs)("div",{className:"stat-card",children:[(0,S.jsx)("div",{className:"stat-icon critical",children:(0,S.jsx)(I.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"stat-content",children:[(0,S.jsx)("h3",{children:"\u0648\u0636\u0639 \u062d\u0631\u062c (<1000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("p",{className:"stat-value",children:le.filter(e=>e.balance<1e3).length}),(0,S.jsxs)("span",{className:"stat-percentage critical",children:[(le.filter(e=>e.balance<1e3).length/le.length*100||0).toFixed(1),"%"]})]})]})]}),(0,S.jsxs)("div",{className:"filters-container",children:[(0,S.jsxs)("div",{className:"filter-row",children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(P.A,{className:"input-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629",value:x,onChange:e=>m(e.target.value),className:"filter-input"})]})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0627\u0633\u0645"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(P.A,{className:"input-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645",value:h,onChange:e=>u(e.target.value),className:"filter-input"})]})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(P.A,{className:"input-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646",value:g,onChange:e=>b(e.target.value),className:"filter-input"})]})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(ue.A,{className:"input-icon"}),(0,S.jsx)("select",{value:_,onChange:e=>C(e.target.value),className:"filter-select",children:re.map(e=>(0,S.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,S.jsxs)("div",{className:"filter-row",children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0641\u0644\u062a\u0631 \u0627\u0644\u0631\u0635\u064a\u062f"}),(0,S.jsxs)("select",{value:F,onChange:e=>T(e.target.value),className:"filter-select",children:[(0,S.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0623\u0631\u0635\u062f\u0629"}),(0,S.jsx)("option",{value:"comparison",children:"\u0645\u0642\u0627\u0631\u0646\u0629 \u0628\u0645\u0628\u0644\u063a"}),(0,S.jsx)("option",{value:"range",children:"\u0646\u0637\u0627\u0642 \u0645\u0628\u0644\u063a"}),(0,S.jsx)("option",{value:"category",children:"\u0641\u0626\u0627\u062a \u0645\u062d\u062f\u062f\u0629"})]})]}),"comparison"===F&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0645\u0642\u0627\u0631\u0646\u0629"}),(0,S.jsxs)("select",{value:z,onChange:e=>R(e.target.value),className:"filter-select",children:[(0,S.jsx)("option",{value:"greater",children:"\u0623\u0643\u062b\u0631 \u0645\u0646"}),(0,S.jsx)("option",{value:"less",children:"\u0623\u0642\u0644 \u0645\u0646"}),(0,S.jsx)("option",{value:"equal",children:"\u064a\u0633\u0627\u0648\u064a"})]})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0645\u0628\u0644\u063a"}),(0,S.jsx)("input",{type:"number",placeholder:"3000",value:B,onChange:e=>E(e.target.value),className:"filter-input"})]})]}),"range"===F&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0645\u0646"}),(0,S.jsx)("input",{type:"number",placeholder:"1000",value:L,onChange:e=>M(e.target.value),className:"filter-input"})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0625\u0644\u0649"}),(0,S.jsx)("input",{type:"number",placeholder:"5000",value:W,onChange:e=>O(e.target.value),className:"filter-input"})]})]}),"category"===F&&(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0641\u0626\u0629"}),(0,S.jsxs)("select",{value:q,onChange:e=>H(e.target.value),className:"filter-select",children:[(0,S.jsx)("option",{value:"all",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),(0,S.jsx)("option",{value:"compliant",children:"\u0645\u0644\u062a\u0632\u0645\u0648\u0646 (\u22653000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("option",{value:"non-compliant",children:"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645\u064a\u0646 (<3000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("option",{value:"critical",children:"\u0648\u0636\u0639 \u062d\u0631\u062c (<1000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("option",{value:"excellent",children:"\u0645\u0645\u062a\u0627\u0632 (\u22655000 \u0631\u064a\u0627\u0644)"}),(0,S.jsx)("option",{value:"0-500",children:"0 - 500 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"500-1000",children:"500 - 1000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"1000-2000",children:"1000 - 2000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"2000-3000",children:"2000 - 3000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"3000-5000",children:"3000 - 5000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"5000+",children:"5000+ \u0631\u064a\u0627\u0644"})]})]}),(0,S.jsxs)("div",{className:"filter-actions",children:[(0,S.jsxs)("button",{className:"btn-export excel",onClick:()=>{const e='\n      <html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40">\n      <head>\n        <meta charset="utf-8">\n        <style>\n          table { border-collapse: collapse; width: 100%; direction: rtl; }\n          th, td { border: 1px solid #ddd; padding: 8px; text-align: right; }\n          th { background-color: #f2f2f2; font-weight: bold; }\n          .sufficient { background-color: #d4edda; }\n          .insufficient { background-color: #f8d7da; }\n        </style>\n      </head>\n      <body>\n        <table>\n          <thead>\n            <tr>\n              <th>\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629</th>\n              <th>\u0627\u0644\u0627\u0633\u0645</th>\n              <th>\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641</th>\n              <th>\u0627\u0644\u0631\u0635\u064a\u062f</th>\n              <th>\u0627\u0644\u0641\u062e\u0630</th>\n              <th>\u0627\u0644\u062d\u0627\u0644\u0629</th>\n              <th>\u0627\u0644\u0646\u0642\u0635</th>\n            </tr>\n          </thead>\n          <tbody>\n            '.concat(le.map(e=>'\n              <tr class="'.concat(e.balance>=3e3?"sufficient":"insufficient",'">\n                <td>').concat(e.memberId,"</td>\n                <td>").concat(e.name,"</td>\n                <td>").concat(e.phone,"</td>\n                <td>").concat(e.balance,"</td>\n                <td>").concat(e.tribalSection,"</td>\n                <td>").concat(e.balance>=3e3?"\u0645\u0644\u062a\u0632\u0645":"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645","</td>\n                <td>").concat(e.balance<3e3?3e3-e.balance:"-","</td>\n              </tr>\n            ")).join(""),"\n          </tbody>\n        </table>\n      </body>\n      </html>\n    "),t=new Blob([e],{type:"application/vnd.ms-excel"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","members_report_".concat((new Date).toISOString().split("T")[0],".xls")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},title:"\u062a\u0635\u062f\u064a\u0631 \u0625\u0644\u0649 Excel",children:[(0,S.jsx)(aa.A,{className:"btn-icon-svg"}),"Excel"]}),(0,S.jsxs)("button",{className:"btn-export csv",onClick:()=>{const e=[["\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629","\u0627\u0644\u0627\u0633\u0645","\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641","\u0627\u0644\u0631\u0635\u064a\u062f","\u0627\u0644\u0641\u062e\u0630","\u0627\u0644\u062d\u0627\u0644\u0629"].join(","),...le.map(e=>[e.memberId,'"'.concat(e.name,'"'),e.phone,e.balance,e.tribalSection,e.balance>=3e3?"\u0645\u0644\u062a\u0632\u0645":"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645"].join(","))].join("\n"),t=new Blob(["\ufeff"+e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),s=URL.createObjectURL(t);a.setAttribute("href",s),a.setAttribute("download","members_report_".concat((new Date).toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},title:"\u062a\u0635\u062f\u064a\u0631 \u0625\u0644\u0649 CSV",children:[(0,S.jsx)(J.A,{className:"btn-icon-svg"}),"CSV"]}),(f||v||w||"all"!==_||"all"!==F)&&(0,S.jsx)("button",{className:"btn-clear-filters",onClick:()=>{m(""),u(""),b(""),y(""),N(""),A(""),C("all"),T("all"),E(""),M(""),O(""),H("all")},title:"\u0645\u0633\u062d \u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0644\u0627\u062a\u0631",children:"\ud83d\uddd1\ufe0f \u0645\u0633\u062d \u0627\u0644\u0643\u0644"})]})]})]}),(0,S.jsx)("div",{className:"table-container",children:a&&!o?(0,S.jsx)("div",{className:"loading-skeleton",children:[...Array(10)].map((e,t)=>(0,S.jsxs)("div",{className:"skeleton-row",children:[(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"12%"}}),(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"25%"}}),(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"15%"}}),(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"15%"}}),(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"15%"}}),(0,S.jsx)("div",{className:"skeleton skeleton-cell",style:{width:"18%"}})]},t))}):r?(0,S.jsx)("div",{className:"error-state",children:r}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("table",{className:"members-table",children:[(0,S.jsx)("thead",{children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{style:{width:"12%"},children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("th",{style:{width:"25%"},children:"\u0627\u0644\u0627\u0633\u0645"}),(0,S.jsx)("th",{style:{width:"15%"},children:"\u0631\u0642\u0645 \u0627\u0644\u062a\u0644\u064a\u0641\u0648\u0646"}),(0,S.jsx)("th",{style:{width:"15%"},children:"\u0627\u0644\u0631\u0635\u064a\u062f"}),(0,S.jsx)("th",{style:{width:"15%"},children:"\u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("th",{style:{width:"18%"},children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a"})]})}),(0,S.jsx)("tbody",{children:pe.map(e=>(0,S.jsxs)("tr",{className:e.isSuspended?"suspended":"",children:[(0,S.jsx)("td",{className:"member-id",children:e.memberId}),(0,S.jsx)("td",{className:"member-name",children:e.name}),(0,S.jsx)("td",{className:"member-phone",children:e.phone}),(0,S.jsxs)("td",{className:"member-balance",children:[(0,S.jsxs)("span",{className:"balance ".concat(e.status," ").concat(e.balance<1e3?"critical":""),children:[e.balance>=3e3?"\ud83d\udfe2":"\ud83d\udd34"," ",e.balance.toLocaleString()," \u0631.\u0633"]}),"insufficient"===e.status&&(0,S.jsxs)("span",{className:"balance-warning",children:["(\u0646\u0642\u0635: ",(3e3-e.balance).toLocaleString()," \u0631.\u0633)"]})]}),(0,S.jsx)("td",{className:"member-tribal",children:e.tribalSection}),(0,S.jsx)("td",{className:"member-actions",children:me(e)})]},e.id))})]}),(0,S.jsx)("div",{className:"member-cards",children:pe.map(e=>(0,S.jsxs)("div",{className:"member-card",children:[(0,S.jsxs)("div",{className:"member-card-header",children:[(0,S.jsx)("span",{className:"member-card-id",children:e.memberId}),(0,S.jsx)("span",{className:"member-card-status ".concat(e.status),children:e.balance>=3e3?"\ud83d\udfe2 \u0645\u0644\u062a\u0632\u0645":"\ud83d\udd34 \u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645"})]}),(0,S.jsxs)("div",{className:"member-card-body",children:[(0,S.jsx)("div",{className:"member-card-name",children:e.name}),(0,S.jsxs)("div",{className:"member-card-info",children:[(0,S.jsxs)("div",{className:"member-card-info-item",children:[(0,S.jsx)("span",{className:"member-card-info-label",children:"\u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,S.jsx)("span",{children:e.phone})]}),(0,S.jsxs)("div",{className:"member-card-info-item",children:[(0,S.jsx)("span",{className:"member-card-info-label",children:"\u0627\u0644\u0641\u062e\u0630:"}),(0,S.jsx)("span",{children:e.tribalSection})]})]}),(0,S.jsxs)("div",{className:"member-card-balance ".concat(e.balance<1e3?"critical":""),children:[e.balance>=3e3?"\ud83d\udfe2":"\ud83d\udd34"," ",e.balance.toLocaleString()," \u0631\u064a\u0627\u0644"]}),e.balance<3e3&&(0,S.jsxs)("div",{className:"member-card-deficit",children:["\u0646\u0642\u0635: ",(3e3-e.balance).toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"member-card-actions",children:me(e)})]},e.id))}),(0,S.jsxs)("div",{className:"pagination-container",children:[(0,S.jsxs)("div",{className:"page-size-selector",children:[(0,S.jsx)("label",{children:"\u0639\u0631\u0636:"}),(0,S.jsxs)("select",{value:V,onChange:e=>{const t=Number(e.target.value);console.log("\ud83d\udcc4 Changing page size to:",t),Z(t),G(1)},className:"page-size-select",children:[(0,S.jsx)("option",{value:10,children:"10"}),(0,S.jsx)("option",{value:15,children:"15"}),(0,S.jsx)("option",{value:20,children:"20"}),(0,S.jsx)("option",{value:50,children:"50"}),(0,S.jsx)("option",{value:100,children:"100"})]}),(0,S.jsx)("span",{children:"\u0639\u0636\u0648 \u0644\u0643\u0644 \u0635\u0641\u062d\u0629"})]}),(0,S.jsxs)("div",{className:"pagination-controls",children:[(0,S.jsxs)("button",{className:"page-btn",onClick:()=>{console.log("\u2b05\ufe0f Previous page clicked, current:",Y),G(e=>Math.max(1,e-1))},disabled:1===Y||0===oe,children:[(0,S.jsx)(Ne.A,{className:"page-icon"}),"\u0627\u0644\u0633\u0627\u0628\u0642"]}),(0,S.jsx)("div",{className:"page-numbers",children:Array.from({length:Math.min(5,oe)},(e,t)=>{let a;return a=oe<=5||Y<=3?t+1:Y>=oe-2?oe-4+t:Y-2+t,(0,S.jsx)("button",{className:"page-number ".concat(Y===a?"active":""),onClick:()=>G(a),children:a},a)})}),(0,S.jsxs)("button",{className:"page-btn",onClick:()=>{console.log("\u27a1\ufe0f Next page clicked, current:",Y,"total:",oe),G(e=>Math.min(oe,e+1))},disabled:Y>=oe||0===oe,children:["\u0627\u0644\u062a\u0627\u0644\u064a",(0,S.jsx)(k.A,{className:"page-icon"})]})]}),(0,S.jsxs)("div",{className:"page-info",children:["\u0635\u0641\u062d\u0629 ",Y," \u0645\u0646 ",oe," | \u0625\u062c\u0645\u0627\u0644\u064a: ",le.length," \u0639\u0636\u0648"]})]})]})}),$&&(0,S.jsx)("div",{className:"modal-overlay",onClick:()=>K(!1),children:(0,S.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{className:"modal-header warning",children:[(0,S.jsx)(I.A,{className:"modal-icon"}),(0,S.jsx)("h2",{children:"\u062a\u0623\u0643\u064a\u062f \u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0639\u0636\u0648"})]}),(0,S.jsx)("div",{className:"modal-body",children:1===se?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{className:"warning-text",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0639\u0636\u0648 \u0627\u0644\u062a\u0627\u0644\u064a\u061f"}),(0,S.jsxs)("div",{className:"member-info",children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0627\u0633\u0645:"})," ",null===te||void 0===te?void 0:te.name]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629:"})," ",null===te||void 0===te?void 0:te.memberId]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a:"})," ",null===te||void 0===te?void 0:te.balance," \u0631.\u0633"]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0646\u0642\u0635:"})," ",3e3-(null===te||void 0===te?void 0:te.balance)," \u0631.\u0633"]})]}),(0,S.jsx)("p",{className:"warning-note",children:"\u0633\u064a\u062a\u0645 \u0625\u064a\u0642\u0627\u0641 \u062c\u0645\u064a\u0639 \u062e\u062f\u0645\u0627\u062a \u0627\u0644\u0639\u0636\u0648 \u062d\u062a\u0649 \u064a\u062a\u0645 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u0637\u0644\u0648\u0628"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("p",{className:"confirm-text",children:"\u062a\u0623\u0643\u064a\u062f \u0646\u0647\u0627\u0626\u064a - \u0647\u0630\u0627 \u0627\u0644\u0625\u062c\u0631\u0627\u0621 \u0644\u0627 \u064a\u0645\u0643\u0646 \u0627\u0644\u062a\u0631\u0627\u062c\u0639 \u0639\u0646\u0647 \u0628\u0633\u0647\u0648\u0644\u0629"}),(0,S.jsx)("p",{className:"final-warning",children:'\u0627\u0643\u062a\u0628 "\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0625\u064a\u0642\u0627\u0641" \u0644\u0644\u0645\u062a\u0627\u0628\u0639\u0629'}),(0,S.jsx)("input",{type:"text",className:"confirm-input",placeholder:"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0625\u064a\u0642\u0627\u0641",onChange:e=>{"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0625\u064a\u0642\u0627\u0641"===e.target.value?e.target.classList.add("valid"):e.target.classList.remove("valid")}})]})}),(0,S.jsxs)("div",{className:"modal-footer",children:[(0,S.jsx)("button",{className:"btn-cancel",onClick:()=>{K(!1),ne(1)},children:"\u0625\u0644\u063a\u0627\u0621"}),(0,S.jsx)("button",{className:"btn-confirm warning",onClick:async()=>{if(1!==se)try{if((await fetch("".concat(ie,"/api/member-monitoring/").concat(te.id,"/suspend"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({reason:"\u0631\u0635\u064a\u062f \u0623\u0642\u0644 \u0645\u0646 \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u062f\u0646\u0649 \u0627\u0644\u0645\u0637\u0644\u0648\u0628",adminId:localStorage.getItem("userId")})})).ok){const a=e.map(e=>e.id===te.id?(0,i.A)((0,i.A)({},e),{},{isSuspended:!0}):e);t(a),alert("\u062a\u0645 \u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0639\u0636\u0648 \u0628\u0646\u062c\u0627\u062d")}}catch(a){console.error("Error suspending member:",a),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u064a\u0642\u0627\u0641 \u0627\u0644\u0639\u0636\u0648")}finally{K(!1),ne(1)}else ne(2)},disabled:2===se&&!document.querySelector(".confirm-input.valid"),children:1===se?"\u0645\u062a\u0627\u0628\u0639\u0629":"\u062a\u0623\u0643\u064a\u062f \u0627\u0644\u0625\u064a\u0642\u0627\u0641"})]})]})}),Q&&(0,S.jsx)("div",{className:"modal-overlay",onClick:()=>ee(!1),children:(0,S.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{className:"modal-header info",children:[(0,S.jsx)(j.A,{className:"modal-icon"}),(0,S.jsx)("h2",{children:"\u0625\u0631\u0633\u0627\u0644 \u0625\u0634\u0639\u0627\u0631"})]}),(0,S.jsxs)("div",{className:"modal-body",children:[(0,S.jsx)("p",{children:"\u0627\u062e\u062a\u0631 \u0646\u0648\u0639 \u0627\u0644\u0625\u0634\u0639\u0627\u0631 \u0627\u0644\u0645\u0631\u0627\u062f \u0625\u0631\u0633\u0627\u0644\u0647 \u0644\u0644\u0639\u0636\u0648:"}),(0,S.jsxs)("div",{className:"member-info",children:[(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0627\u0644\u0627\u0633\u0645:"})," ",null===te||void 0===te?void 0:te.name]}),(0,S.jsxs)("p",{children:[(0,S.jsx)("strong",{children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641:"})," ",null===te||void 0===te?void 0:te.phone]})]}),(0,S.jsxs)("div",{className:"notification-options",children:[(0,S.jsxs)("button",{className:"notification-type payment",onClick:()=>be("payment"),children:[(0,S.jsx)(j.A,{className:"option-icon"}),(0,S.jsx)("span",{children:"\u062a\u0630\u0643\u064a\u0631 \u0628\u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("p",{className:"option-desc",children:"\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u062a\u0630\u0643\u064a\u0631 \u0628\u0636\u0631\u0648\u0631\u0629 \u062a\u0633\u062f\u064a\u062f \u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a"})]}),(0,S.jsxs)("button",{className:"notification-type general",onClick:()=>be("general"),children:[(0,S.jsx)(j.A,{className:"option-icon"}),(0,S.jsx)("span",{children:"\u0625\u0634\u0639\u0627\u0631 \u0639\u0627\u0645"}),(0,S.jsx)("p",{className:"option-desc",children:"\u0625\u0631\u0633\u0627\u0644 \u0631\u0633\u0627\u0644\u0629 \u0625\u0634\u0639\u0627\u0631 \u0639\u0627\u0645\u0629 \u0645\u0646 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0635\u0646\u062f\u0648\u0642"})]})]})]}),(0,S.jsx)("div",{className:"modal-footer",children:(0,S.jsx)("button",{className:"btn-cancel",onClick:()=>ee(!1),children:"\u0625\u0644\u063a\u0627\u0621"})})]})})]})};var ca=a(5044),da=a(4243);const pa={national_id:"\u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629",marriage_certificate:"\u0639\u0642\u062f \u0627\u0644\u0632\u0648\u0627\u062c",property_deed:"\u0635\u0643 \u0627\u0644\u0645\u0644\u0643\u064a\u0629",birth_certificate:"\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0645\u064a\u0644\u0627\u062f",death_certificate:"\u0634\u0647\u0627\u062f\u0629 \u0627\u0644\u0648\u0641\u0627\u0629",passport:"\u062c\u0648\u0627\u0632 \u0627\u0644\u0633\u0641\u0631",driver_license:"\u0631\u062e\u0635\u0629 \u0627\u0644\u0642\u064a\u0627\u062f\u0629",education:"\u0627\u0644\u0634\u0647\u0627\u062f\u0627\u062a \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u064a\u0629",medical:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631 \u0627\u0644\u0637\u0628\u064a\u0629",other:"\u0623\u062e\u0631\u0649"},xa=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)(!1),[r,l]=(0,s.useState)(0),[o,c]=(0,s.useState)(""),[d,p]=(0,s.useState)(""),[x,m]=(0,s.useState)({title:"",description:"",category:"other"}),[h,u]=(0,s.useState)(!1),[g,b]=(0,s.useState)(null),[j,f]=(0,s.useState)({total_documents:0,total_size_mb:"0",by_category:[]}),y=async()=>{n(!0);try{const e=localStorage.getItem("token"),a=new URLSearchParams;d&&a.append("category",d),o&&a.append("search",o);const s=await fetch("".concat("http://localhost:3001","/api/documents/member?").concat(a),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e.data||[])}}catch(e){console.error("Error fetching documents:",e)}finally{n(!1)}},v=async()=>{try{const e=localStorage.getItem("token"),t=await fetch("".concat("http://localhost:3001","/api/documents/stats/overview"),{headers:{Authorization:"Bearer ".concat(e)}});if(t.ok){const e=await t.json();f(e.data)}}catch(e){console.error("Error fetching stats:",e)}};(0,s.useEffect)(()=>{y(),v()},[d,o]);const{getRootProps:N,getInputProps:w,isDragActive:A}=(0,ca.VB)({onDrop:e=>{e.length>0&&(b(e[0]),m((0,i.A)((0,i.A)({},x),{},{title:e[0].name})),u(!0))},accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxSize:10485760,multiple:!1});return(0,S.jsxs)("div",{className:"document-manager",dir:"rtl",children:[(0,S.jsxs)("div",{className:"dm-header",children:[(0,S.jsx)("h2",{children:"\u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a"}),(0,S.jsxs)("div",{className:"dm-stats",children:[(0,S.jsxs)("div",{className:"stat-item",children:[(0,S.jsx)("span",{className:"stat-label",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a:"}),(0,S.jsx)("span",{className:"stat-value",children:j.total_documents})]}),(0,S.jsxs)("div",{className:"stat-item",children:[(0,S.jsx)("span",{className:"stat-label",children:"\u0627\u0644\u062d\u062c\u0645 \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a:"}),(0,S.jsxs)("span",{className:"stat-value",children:[j.total_size_mb," MB"]})]})]})]}),(0,S.jsxs)("div",{className:"dm-controls",children:[(0,S.jsxs)("div",{className:"search-box",children:[(0,S.jsx)(da.KSO,{}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0641\u064a \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a...",value:o,onChange:e=>c(e.target.value)})]}),(0,S.jsxs)("div",{className:"filter-box",children:[(0,S.jsx)(da.YsJ,{}),(0,S.jsxs)("select",{value:d,onChange:e=>p(e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0641\u0626\u0627\u062a"}),Object.entries(pa).map(e=>{let[t,a]=e;return(0,S.jsx)("option",{value:t,children:a},t)})]})]})]}),(0,S.jsxs)("div",(0,i.A)((0,i.A)({},N()),{},{className:"upload-zone ".concat(A?"active":""),children:[(0,S.jsx)("input",(0,i.A)({},w())),(0,S.jsx)(da.HVe,{className:"upload-icon"}),(0,S.jsx)("p",{className:"upload-text",children:A?"\u0623\u0641\u0644\u062a \u0627\u0644\u0645\u0644\u0641 \u0647\u0646\u0627...":"\u0627\u0633\u062d\u0628 \u0648\u0623\u0641\u0644\u062a \u0627\u0644\u0645\u0644\u0641 \u0647\u0646\u0627 \u0623\u0648 \u0627\u0646\u0642\u0631 \u0644\u0644\u0627\u062e\u062a\u064a\u0627\u0631"}),(0,S.jsx)("p",{className:"upload-hint",children:"PDF, JPG, PNG - \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 10MB"})]})),a?(0,S.jsx)("div",{className:"loading-spinner",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."}):(0,S.jsx)("div",{className:"documents-grid",children:e.map(e=>{return(0,S.jsxs)("div",{className:"document-card",children:[(0,S.jsx)("div",{className:"doc-icon",children:(a=e.file_type,null!==a&&void 0!==a&&a.includes("pdf")?(0,S.jsx)(da.kl1,{className:"file-icon pdf"}):null!==a&&void 0!==a&&a.includes("image")?(0,S.jsx)(da.dkL,{className:"file-icon image"}):(0,S.jsx)(da.t69,{className:"file-icon default"}))}),(0,S.jsxs)("div",{className:"doc-info",children:[(0,S.jsx)("h4",{className:"doc-title",children:e.title}),(0,S.jsx)("p",{className:"doc-category",children:pa[e.category]}),(0,S.jsx)("p",{className:"doc-size",children:(t=e.file_size,t<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB")}),(0,S.jsx)("p",{className:"doc-date",children:new Date(e.created_at).toLocaleDateString("ar-SA")}),e.description&&(0,S.jsx)("p",{className:"doc-description",children:e.description})]}),(0,S.jsxs)("div",{className:"doc-actions",children:[(0,S.jsx)("button",{className:"action-btn view",onClick:()=>window.open(e.signed_url,"_blank"),title:"\u0639\u0631\u0636",children:(0,S.jsx)(da.Ny1,{})}),(0,S.jsx)("a",{href:e.signed_url,download:e.original_name,className:"action-btn download",title:"\u062a\u062d\u0645\u064a\u0644",children:(0,S.jsx)(da.WCW,{})}),(0,S.jsx)("button",{className:"action-btn delete",onClick:()=>(async e=>{if(window.confirm("\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u061f"))try{const t=localStorage.getItem("token");(await fetch("".concat("http://localhost:3001","/api/documents/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}})).ok&&(y(),v(),alert("\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u0645\u0633\u062a\u0646\u062f \u0628\u0646\u062c\u0627\u062d"))}catch(t){console.error("Delete error:",t)}})(e.id),title:"\u062d\u0630\u0641",children:(0,S.jsx)(da.qbC,{})})]})]},e.id);var t,a})}),h&&(0,S.jsx)("div",{className:"modal-overlay",onClick:()=>u(!1),children:(0,S.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,S.jsx)("h3",{children:"\u062a\u062d\u0645\u064a\u0644 \u0645\u0633\u062a\u0646\u062f \u062c\u062f\u064a\u062f"}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,S.jsx)("input",{type:"text",value:x.title,onChange:e=>m((0,i.A)((0,i.A)({},x),{},{title:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0645\u0633\u062a\u0646\u062f"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0648\u0635\u0641"}),(0,S.jsx)("textarea",{value:x.description,onChange:e=>m((0,i.A)((0,i.A)({},x),{},{description:e.target.value})),placeholder:"\u0623\u062f\u062e\u0644 \u0648\u0635\u0641 \u0627\u0644\u0645\u0633\u062a\u0646\u062f (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)",rows:"3"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0641\u0626\u0629"}),(0,S.jsx)("select",{value:x.category,onChange:e=>m((0,i.A)((0,i.A)({},x),{},{category:e.target.value})),children:Object.entries(pa).map(e=>{let[t,a]=e;return(0,S.jsx)("option",{value:t,children:a},t)})})]}),(0,S.jsxs)("div",{className:"modal-actions",children:[(0,S.jsx)("button",{className:"btn-primary",onClick:async()=>{if(!g)return;const e=new FormData;e.append("document",g),e.append("title",x.title),e.append("description",x.description),e.append("category",x.category),l(0),n(!0);try{const t=localStorage.getItem("token");(await fetch("".concat("http://localhost:3001","/api/documents/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:e})).ok?(u(!1),b(null),m({title:"",description:"",category:"other"}),y(),v(),alert("\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f \u0628\u0646\u062c\u0627\u062d")):alert("\u0641\u0634\u0644 \u0631\u0641\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f")}catch(t){console.error("Upload error:",t),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0631\u0641\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f")}finally{n(!1),l(0)}},disabled:a,children:a?"\u062c\u0627\u0631\u064a \u0627\u0644\u0631\u0641\u0639...":"\u0631\u0641\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f"}),(0,S.jsx)("button",{className:"btn-secondary",onClick:()=>u(!1),children:"\u0625\u0644\u063a\u0627\u0621"})]}),r>0&&(0,S.jsx)("div",{className:"upload-progress",children:(0,S.jsx)("div",{className:"progress-bar",style:{width:"".concat(r,"%")}})})]})})]})};var ma=a(4694),ha=a(2064),ua=a(9953),ga=a(1052),ba=a.n(ga);const ja=()=>{const[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),[i,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(null),[p,x]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),[g,b]=(0,s.useState)(new Set),[j,f]=(0,s.useState)([]),[v,N]=(0,s.useState)(null),[w,k]=(0,s.useState)(""),_=(0,s.useRef)(null),C=(0,s.useRef)(null),F="http://localhost:3001",T={translate:{x:400,y:200},zoom:1,separation:{siblings:2,nonSiblings:2},nodeSize:{x:200,y:150},orientation:"vertical",pathFunc:"diagonal",enableLegacyTransitions:!1,transitionDuration:500},z=()=>localStorage.getItem("token")||localStorage.getItem("auth_token"),R=(0,s.useCallback)(async()=>{try{const e=z();if(!e)return;const t=await fetch("".concat(F,"/api/members"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){const e=await t.json();e.success&&e.data&&f(e.data)}}catch(i){console.error("Error fetching members list:",i)}},[F]),D=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{n(!0);const a=z();if(!a)throw new Error("\u0644\u0627 \u064a\u0648\u062c\u062f \u0631\u0645\u0632 \u0645\u0635\u0627\u062f\u0642\u0629");if(!e)return n(!1),void t(null);const s="".concat(F,"/api/family-tree/visualization/").concat(e),i=await fetch(s,{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!i.ok)throw new Error("\u062e\u0637\u0623 \u0641\u064a \u062c\u0644\u0628 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a: ".concat(i.status));const r=await i.json();if(!r.success)throw new Error(r.error||"\u0641\u0634\u0644 \u0641\u064a \u062c\u0644\u0628 \u0628\u064a\u0627\u0646\u0627\u062a \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629");{const e=I(r.data);t(e)}}catch(a){console.error("Error fetching family tree:",a),r(a.message)}finally{n(!1)}},[F]),I=e=>{if(!e)return null;const t=e=>{const a={name:e.name||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",attributes:{memberId:e.memberId||e.id,phoneNumber:e.phoneNumber,balance:e.balance||0,id:e.id},children:[]};if(e.children&&e.children.length>0&&(a.children=e.children.map(e=>t(e))),e.spouse){const t={name:e.spouse.name||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f",attributes:{memberId:e.spouse.memberId||e.spouse.id,phoneNumber:e.spouse.phoneNumber,balance:e.spouse.balance||0,id:e.spouse.id,isSpouse:!0},children:[]};a.children.unshift(t)}return a};return t(e)},B=(0,s.useCallback)(t=>{if(o(t),!t.trim()||!e)return void b(new Set);const a=new Set,s=e=>{var n,i,r,l;const o=(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(i=e.attributes)||void 0===i||null===(r=i.memberId)||void 0===r?void 0:r.toString())||"",d=(null===(l=e.attributes)||void 0===l?void 0:l.phoneNumber)||"",p=t.toLowerCase();var x;(o.includes(p)||c.includes(p)||d.includes(p))&&a.add((null===(x=e.attributes)||void 0===x?void 0:x.id)||e.name);e.children&&e.children.forEach(e=>s(e))};s(e),b(a)},[e]),E=async e=>{try{var t,a;const s=(null===(t=e.attributes)||void 0===t?void 0:t.id)||(null===(a=e.attributes)||void 0===a?void 0:a.memberId);if(!s)return;const n=z(),i=await fetch("".concat(F,"/api/family-tree/relationships/").concat(s),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(i.ok){const e=await i.json();e.success&&(d(e.data),x(!0))}}catch(i){console.error("Error fetching member details:",i)}};(0,s.useEffect)(()=>{R(),n(!1)},[]);return a?(0,S.jsx)("div",{className:"family-tree-container",children:(0,S.jsxs)("div",{className:"family-tree-loading",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629..."})]})}):i?(0,S.jsx)("div",{className:"family-tree-container",children:(0,S.jsxs)("div",{className:"family-tree-error",children:[(0,S.jsxs)("p",{children:["\u062e\u0637\u0623: ",i]}),(0,S.jsx)("button",{onClick:()=>D(),className:"retry-button",children:"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"})]})}):(0,S.jsxs)("div",{className:"family-tree-container ".concat(h?"fullscreen":""),children:[(0,S.jsxs)("div",{className:"family-tree-header",children:[(0,S.jsxs)("div",{className:"header-title",children:[(0,S.jsx)(y.A,{className:"w-8 h-8 text-blue-400"}),(0,S.jsx)("h1",{children:"\u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"})]}),(0,S.jsxs)("div",{className:"header-controls",children:[e&&(0,S.jsxs)("button",{onClick:()=>{t(null),N(null),r(null)},className:"control-button",style:{background:"rgba(59, 130, 246, 0.2)",padding:"8px 16px",marginRight:"10px"},children:[(0,S.jsx)(y.A,{className:"w-5 h-5 inline-block ml-2"}),"\u0627\u062e\u062a\u0631 \u0639\u0636\u0648 \u0622\u062e\u0631"]}),(0,S.jsxs)("div",{className:"search-container",children:[(0,S.jsx)(P.A,{className:"search-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629 \u0623\u0648 \u0627\u0644\u0647\u0627\u062a\u0641...",value:l,onChange:e=>B(e.target.value),className:"search-input"})]}),(0,S.jsx)("button",{onClick:async()=>{if(_.current)try{const e=await ba()(_.current,{backgroundColor:"#1e293b",scale:2,logging:!1,useCORS:!0}),t=document.createElement("a");t.download="family-tree-".concat(Date.now(),".png"),t.href=e.toDataURL(),t.click()}catch(i){console.error("Error exporting image:",i)}},className:"control-button",title:"\u062a\u0635\u062f\u064a\u0631 \u0643\u0635\u0648\u0631\u0629",children:(0,S.jsx)(aa.A,{className:"w-5 h-5"})}),(0,S.jsx)("button",{onClick:async()=>{if(_.current)try{const e=await ba()(_.current,{backgroundColor:"#1e293b",scale:2,logging:!1,useCORS:!0}),t=e.toDataURL("image/png"),a=new na.Ay("l","mm","a4"),s=297,n=e.height*s/e.width;a.addImage(t,"PNG",0,0,s,n),a.save("family-tree-".concat(Date.now(),".pdf"))}catch(i){console.error("Error exporting PDF:",i)}},className:"control-button",title:"\u062a\u0635\u062f\u064a\u0631 \u0643\u0645\u0644\u0641 PDF",children:(0,S.jsx)(aa.A,{className:"w-5 h-5"})}),(0,S.jsx)("button",{onClick:()=>{u(!h)},className:"control-button",title:h?"\u0625\u063a\u0644\u0627\u0642 \u0648\u0636\u0639 \u0645\u0644\u0621 \u0627\u0644\u0634\u0627\u0634\u0629":"\u0648\u0636\u0639 \u0645\u0644\u0621 \u0627\u0644\u0634\u0627\u0634\u0629",children:h?(0,S.jsx)(ha.A,{className:"w-5 h-5"}):(0,S.jsx)(ua.A,{className:"w-5 h-5"})})]})]}),(0,S.jsx)("div",{ref:_,className:"tree-container",id:"tree-container",children:e?(0,S.jsx)(ma.A,{ref:C,data:e,orientation:"vertical",translate:T.translate,zoom:T.zoom,separation:T.separation,nodeSize:T.nodeSize,renderCustomNodeElement:e=>{var t,a,s,n;let{nodeDatum:i,toggleNode:r}=e;const l=g.has(null===(t=i.attributes)||void 0===t?void 0:t.id),o=null===(a=i.attributes)||void 0===a?void 0:a.isSpouse;return(0,S.jsxs)("g",{children:[(0,S.jsx)("circle",{r:30,fill:o?"rgba(255, 193, 7, 0.9)":"rgba(59, 130, 246, 0.9)",stroke:l?"#ef4444":"#ffffff",strokeWidth:l?"3":"2",className:"node-circle",onClick:()=>E(i),style:{cursor:"pointer"}}),(0,S.jsx)("foreignObject",{x:"-12",y:"-12",width:"24",height:"24",children:(0,S.jsx)(kt.A,{className:"text-white w-6 h-6"})}),(0,S.jsx)("text",{fill:"#1f2937",strokeWidth:"1",x:"0",y:"50",textAnchor:"middle",className:"node-text",style:{fontSize:"12px",fontWeight:"bold",fontFamily:"Tajawal, Cairo, sans-serif"},children:i.name}),(0,S.jsx)("text",{fill:"#6b7280",x:"0",y:"65",textAnchor:"middle",style:{fontSize:"10px",fontFamily:"Tajawal, Cairo, sans-serif"},children:(null===(s=i.attributes)||void 0===s?void 0:s.memberId)&&"#".concat(i.attributes.memberId)}),(0,S.jsx)("text",{fill:"#059669",x:"0",y:"80",textAnchor:"middle",style:{fontSize:"10px",fontWeight:"bold",fontFamily:"Tajawal, Cairo, sans-serif"},children:(null===(n=i.attributes)||void 0===n?void 0:n.balance)&&"".concat(i.attributes.balance," \u0631.\u0633")}),i.children&&i.children.length>0&&(0,S.jsx)("circle",{r:"8",fill:"#10b981",stroke:"#ffffff",strokeWidth:"2",cx:"25",cy:"-25",onClick:e=>{e.stopPropagation(),r()},style:{cursor:"pointer"}})]})},pathFunc:"diagonal",enableLegacyTransitions:!1,transitionDuration:500,zoomable:!0,draggable:!0,collapsible:!0,initialDepth:2}):(0,S.jsx)("div",{className:"member-selection-container",children:(0,S.jsxs)("div",{className:"member-selection-card",children:[(0,S.jsx)(y.A,{className:"w-16 h-16 text-blue-400 mb-4"}),(0,S.jsx)("h2",{className:"text-xl font-bold mb-4",children:"\u0627\u062e\u062a\u0631 \u0639\u0636\u0648 \u0644\u0639\u0631\u0636 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsxs)("div",{className:"member-search-box mb-4",children:[(0,S.jsx)(P.A,{className:"search-icon"}),(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0639\u0636\u0648 \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629...",value:w,onChange:e=>k(e.target.value),className:"search-input",style:{width:"100%",padding:"10px 40px 10px 10px",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.2)",background:"rgba(255,255,255,0.1)",color:"white"}})]}),(0,S.jsxs)("div",{className:"members-list",style:{maxHeight:"400px",overflowY:"auto",padding:"10px",borderRadius:"8px",background:"rgba(255,255,255,0.05)"},children:[j.filter(e=>{var t,a,s;const n=w.toLowerCase();return(null===(t=e.full_name)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(a=e.member_id)||void 0===a?void 0:a.toString().includes(n))||(null===(s=e.phone)||void 0===s?void 0:s.includes(n))}).slice(0,20).map(e=>(0,S.jsxs)("div",{className:"member-item",onClick:()=>{return t=e.id,N(t),void D(t);var t},style:{padding:"10px",margin:"5px 0",borderRadius:"6px",background:"rgba(59, 130, 246, 0.1)",cursor:"pointer",transition:"all 0.3s",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(59, 130, 246, 0.1)"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{className:"font-bold",children:e.full_name}),(0,S.jsxs)("div",{className:"text-sm opacity-75",children:["\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629: ",e.member_id]})]}),(0,S.jsx)(kt.A,{className:"w-5 h-5 text-blue-400"})]},e.id)),0===j.length&&(0,S.jsx)("div",{className:"text-center text-gray-400 py-4",children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0642\u0627\u0626\u0645\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621..."})]})]})})}),p&&c&&(0,S.jsx)("div",{className:"modal-overlay",onClick:()=>x(!1),children:(0,S.jsxs)("div",{className:"member-modal",onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{className:"modal-header",children:[(0,S.jsx)("h3",{children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u0639\u0636\u0648"}),(0,S.jsx)("button",{onClick:()=>x(!1),className:"close-button",children:(0,S.jsx)(A.A,{className:"w-6 h-6"})})]}),(0,S.jsxs)("div",{className:"modal-content",children:[(0,S.jsxs)("div",{className:"member-info",children:[(0,S.jsxs)("div",{className:"info-row",children:[(0,S.jsx)(kt.A,{className:"w-5 h-5 text-blue-400"}),(0,S.jsx)("span",{className:"info-label",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,S.jsx)("span",{className:"info-value",children:c.name})]}),(0,S.jsxs)("div",{className:"info-row",children:[(0,S.jsx)(m.A,{className:"w-5 h-5 text-green-400"}),(0,S.jsx)("span",{className:"info-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629:"}),(0,S.jsx)("span",{className:"info-value",children:c.memberId})]}),(0,S.jsxs)("div",{className:"info-row",children:[(0,S.jsx)(Ct.A,{className:"w-5 h-5 text-purple-400"}),(0,S.jsx)("span",{className:"info-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641:"}),(0,S.jsx)("span",{className:"info-value",children:c.phoneNumber||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]}),(0,S.jsxs)("div",{className:"info-row",children:[(0,S.jsx)("span",{className:"info-label",children:"\u0627\u0644\u0631\u0635\u064a\u062f:"}),(0,S.jsxs)("span",{className:"info-value balance",children:[c.balance||0," \u0631.\u0633"]})]})]}),(0,S.jsxs)("div",{className:"relationships",children:[(0,S.jsx)("h4",{children:"\u0627\u0644\u0639\u0644\u0627\u0642\u0627\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u064a\u0629"}),c.parents&&c.parents.length>0&&(0,S.jsxs)("div",{className:"relationship-group",children:[(0,S.jsx)("h5",{children:"\u0627\u0644\u0648\u0627\u0644\u062f\u0627\u0646:"}),(0,S.jsx)("ul",{children:c.parents.map((e,t)=>(0,S.jsx)("li",{children:e.name},t))})]}),c.spouse&&(0,S.jsxs)("div",{className:"relationship-group",children:[(0,S.jsx)("h5",{children:"\u0627\u0644\u0632\u0648\u062c/\u0627\u0644\u0632\u0648\u062c\u0629:"}),(0,S.jsx)("p",{children:c.spouse.name})]}),c.children&&c.children.length>0&&(0,S.jsxs)("div",{className:"relationship-group",children:[(0,S.jsx)("h5",{children:"\u0627\u0644\u0623\u0637\u0641\u0627\u0644:"}),(0,S.jsx)("ul",{children:c.children.map((e,t)=>(0,S.jsx)("li",{children:e.name},t))})]}),c.siblings&&c.siblings.length>0&&(0,S.jsxs)("div",{className:"relationship-group",children:[(0,S.jsx)("h5",{children:"\u0627\u0644\u0623\u0634\u0642\u0627\u0621:"}),(0,S.jsx)("ul",{children:c.siblings.map((e,t)=>(0,S.jsx)("li",{children:e.name},t))})]})]})]})]})})]})},fa=["\u0645\u062d\u0631\u0645","\u0635\u0641\u0631","\u0631\u0628\u064a\u0639 \u0627\u0644\u0623\u0648\u0644","\u0631\u0628\u064a\u0639 \u0627\u0644\u0622\u062e\u0631","\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0623\u0648\u0644\u0649","\u062c\u0645\u0627\u062f\u0649 \u0627\u0644\u0622\u062e\u0631\u0629","\u0631\u062c\u0628","\u0634\u0639\u0628\u0627\u0646","\u0631\u0645\u0636\u0627\u0646","\u0634\u0648\u0627\u0644","\u0630\u0648 \u0627\u0644\u0642\u0639\u062f\u0629","\u0630\u0648 \u0627\u0644\u062d\u062c\u0629"];function ya(e){const t=e.getFullYear(),a=e.getMonth()+1,s=e.getDate(),n=Math.floor(t-579+(a-1)/12),i=e.getMonth(),r=i+1,l=fa[i];return{year:n,month:r,monthName:l,day:s,formatted:"".concat(s," ").concat(l," ").concat(n,"\u0647\u0640"),gregorian:e.toLocaleDateString("ar-SA")}}function va(){return ya(new Date)}const Na={members:{total:0,active:0,inactive:0,newThisMonth:0},payments:{pending:0,pendingAmount:0,monthlyRevenue:0,totalRevenue:0,totalPaid:0},subscriptions:{active:0,expired:0,total:0,revenue:0},activities:[]},wa=Nt,Aa=(e,t)=>{var a;return e&&"object"===typeof e&&"data"in e&&null!==(a=e.data)&&void 0!==a?a:t},ka=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Unknown error";return e instanceof Error?e.message:"string"===typeof e?e:t},Sa={container:{height:"100vh",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",fontFamily:"Tajawal, Cairo, sans-serif",direction:"rtl",color:"white",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},header:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",padding:"1rem 2rem",height:"80px",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",position:"sticky",top:0,zIndex:100},mobileMenuButton:{display:"none",padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",cursor:"pointer",transition:"all 0.3s"},breadcrumbs:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"1rem"},mainLayout:{display:"flex",height:"calc(100vh - 80px)",flex:1,overflow:"hidden"},sidebar:{width:"280px",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",padding:"2rem 1rem",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",height:"100%",overflowY:"auto"},sidebarOverlay:{display:"none",position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(5px)",zIndex:199,opacity:0,transition:"opacity 0.3s"},sidebarMobile:{position:"fixed",top:0,right:"-100%",bottom:0,width:"80%",maxWidth:"320px",background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(25px)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"-5px 0 25px rgba(0, 0, 0, 0.3)",padding:"2rem 1rem",transition:"right 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:200,overflowY:"auto"},sidebarMobileOpen:{right:0},closeButton:{position:"absolute",top:"1rem",left:"1rem",padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",cursor:"pointer",transition:"all 0.3s"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 20px",marginBottom:"8px",borderRadius:"12px",background:"transparent",border:"2px solid transparent",color:"rgba(255, 255, 255, 0.8)",fontSize:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textAlign:"right",position:"relative",overflow:"hidden",minHeight:"48px"},menuItemActive:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(139, 92, 246, 0.25))",color:"white",border:"2px solid rgba(59, 130, 246, 0.4)",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.3)",transform:"translateX(-4px)"},menuItemHover:{background:"rgba(255, 255, 255, 0.08)",transform:"translateX(-2px)"},activeIndicator:{position:"absolute",right:0,width:"4px",height:"70%",background:"linear-gradient(180deg, #3b82f6, #8b5cf6)",borderRadius:"4px 0 0 4px",opacity:0,transition:"opacity 0.3s"},activeIndicatorVisible:{opacity:1},menuIcon:{width:"22px",height:"22px",transition:"transform 0.3s"},menuIconActive:{transform:"scale(1.15) rotate(5deg)"},content:{flex:1,padding:"2rem",overflowY:"auto",position:"relative",height:"calc(100vh - 80px)",maxHeight:"calc(100vh - 80px)"},contentTransition:{opacity:0,transform:"translateX(20px)",animation:"contentEnter 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards"},sectionHeader:{marginBottom:"2rem",opacity:0,animation:"fadeInUp 400ms ease-out forwards"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},loadingSpinner:{width:"50px",height:"50px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTop:"3px solid rgba(59, 130, 246, 0.8)",borderRadius:"50%",animation:"spin 1s linear infinite"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"3rem",textAlign:"center"},emptyStateIcon:{width:"80px",height:"80px",opacity:.3,marginBottom:"1.5rem"},skeletonCard:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1rem",animation:"pulse 2s ease-in-out infinite"},skeletonLine:{height:"12px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"6px",marginBottom:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",flexShrink:0},statCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem",textAlign:"center",transition:"transform 0.3s",cursor:"pointer"},iconBox:{width:"60px",height:"60px",margin:"0 auto 1rem",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},chartsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"1.5rem",flexShrink:0},chartCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem",height:"300px"},activitiesCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem"},activityItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",marginBottom:"0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}},_a=e=>{let{stats:t}=e;return(0,S.jsx)("div",{style:Sa.statsGrid,children:t.map((e,t)=>{const a=e.icon;return(0,S.jsxs)("div",{style:Sa.statCard,onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-5px)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)"},children:[(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},Sa.iconBox),{},{background:e.color}),children:(0,S.jsx)(a,{style:{width:"30px",height:"30px",color:"white"}})}),(0,S.jsx)("h3",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"8px"},children:e.title}),(0,S.jsx)("div",{style:{fontSize:"24px",fontWeight:400,marginBottom:"8px"},children:e.value}),(0,S.jsxs)("div",{style:{fontSize:"12px",color:e.trend>=0?"#10b981":"#ef4444",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},children:[(0,S.jsx)(N.A,{style:{width:"14px",height:"14px",transform:e.trend<0?"rotate(180deg)":"none"},"aria-hidden":"true"}),Math.abs(e.trend),"%"]})]},"".concat(e.title,"-").concat(t))})})};var Ca=a(6187);const Fa=e=>{let{revenueData:t,memberDistribution:a,chartOptions:s,tribalSectionsData:n}=e;return(0,S.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[n&&(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},Sa.chartCard),{},{width:"100%",maxWidth:"600px",margin:"0 auto",height:"500px",background:"linear-gradient(135deg, rgba(255,255,255,0.98) 0%, rgba(248,250,252,0.98) 100%)",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",borderRadius:"20px",padding:"30px"}),children:[(0,S.jsx)("h3",{style:{fontSize:"24px",marginBottom:"1rem",textAlign:"center",color:"#1e293b",fontWeight:"600",fontFamily:"Cairo, -apple-system, BlinkMacSystemFont, sans-serif"},children:"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0623\u0631\u0635\u062f\u0629 \u062d\u0633\u0628 \u0627\u0644\u0641\u062e\u0630"}),(0,S.jsx)("div",{style:{height:"calc(100% - 50px)",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsx)(Ca.Fq,{data:n,options:(0,i.A)((0,i.A)({},s),{},{maintainAspectRatio:!1,responsive:!0,layout:{padding:{top:20,bottom:20,left:20,right:20}},plugins:(0,i.A)((0,i.A)({},s.plugins),{},{legend:{display:!0,position:"right",align:"center",labels:{padding:12,usePointStyle:!0,pointStyle:"circle",font:{family:"-apple-system, BlinkMacSystemFont, Cairo, sans-serif",size:13,weight:"500"},generateLabels:function(e){const t=e.data;return t.labels.length&&t.datasets.length?t.labels.map((e,a)=>{const s=t.datasets[0],n=s.data[a],i=((n/s.data.reduce((e,t)=>e+t,0)*100).toFixed(1),(n/1e3).toFixed(0));return{text:"".concat(e,": ").concat(i,"k SAR"),fillStyle:s.backgroundColor[a],strokeStyle:s.borderColor||"#fff",lineWidth:2,hidden:!1,index:a}}):[]}}},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.9)",titleFont:{family:"-apple-system, BlinkMacSystemFont, Cairo, sans-serif",size:14,weight:"bold"},bodyFont:{family:"-apple-system, BlinkMacSystemFont, Cairo, sans-serif",size:13},padding:12,cornerRadius:8,callbacks:{label:function(e){const t=e.label||"",a=e.parsed||0,s=(a/e.dataset.data.reduce((e,t)=>e+t,0)*100).toFixed(1),n=a.toLocaleString("ar-SA");return["".concat(t),"\u0627\u0644\u0631\u0635\u064a\u062f: ".concat(n," \u0631\u064a\u0627\u0644"),"\u0627\u0644\u0646\u0633\u0628\u0629: ".concat(s,"%")]}}}})})})})]}),(0,S.jsxs)("div",{style:(0,i.A)((0,i.A)({},Sa.chartsGrid),{},{gridTemplateColumns:"repeat(auto-fit, minmax(320px, 1fr))"}),children:[(0,S.jsxs)("div",{style:Sa.chartCard,children:[(0,S.jsx)("h3",{style:{fontSize:"18px",marginBottom:"1rem"},children:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0647\u0631\u064a\u0629"}),(0,S.jsx)("div",{style:{height:"calc(100% - 40px)"},children:(0,S.jsx)(Ca.N1,{data:t,options:s})})]}),(0,S.jsxs)("div",{style:Sa.chartCard,children:[(0,S.jsx)("h3",{style:{fontSize:"18px",marginBottom:"1rem"},children:"\u062a\u0648\u0632\u064a\u0639 \u0627\u0644\u0623\u0639\u0636\u0627\u0621"}),(0,S.jsx)("div",{style:{height:"calc(100% - 40px)"},children:(0,S.jsx)(Ca.nu,{data:a,options:s})})]})]})]})},Ta=e=>{let{activities:t}=e;return(0,S.jsxs)("div",{style:Sa.activitiesCard,children:[(0,S.jsx)("h3",{style:{fontSize:"18px",marginBottom:"1rem"},children:"\u0627\u0644\u0646\u0634\u0627\u0637\u0627\u062a \u0627\u0644\u0623\u062e\u064a\u0631\u0629"}),t.map((e,t)=>(0,S.jsxs)("div",{style:Sa.activityItem,children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("div",{style:{fontWeight:400,marginBottom:"4px"},children:e.user}),(0,S.jsx)("div",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.7)"},children:e.action})]}),(0,S.jsxs)("div",{style:{textAlign:"left"},children:[(0,S.jsx)("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.5)"},children:e.time}),e.amount&&(0,S.jsx)("div",{style:{fontSize:"14px",color:"#10b981",fontWeight:400},children:e.amount})]})]},"".concat(e.user,"-").concat(t)))]})};var za=a(2146);za.t1.register(za.PP,za.kc,za.FN,za.No,za.hE,za.m_,za.s$,za.Bs);const Ra=document.createElement("style");Ra.textContent="\n\n  @keyframes ripple {\n\n    to {\n\n      transform: scale(4);\n\n      opacity: 0;\n\n    }\n\n  };\n\n  @keyframes contentEnter {\n\n    from {\n\n      opacity: 0;\n\n      transform: translateX(20px);\n\n    }\n\n    to {\n\n      opacity: 1;\n\n      transform: translateX(0);\n\n    }\n\n  @keyframes fadeInUp {\n\n    from {\n\n      opacity: 0;\n\n      transform: translateY(20px);\n\n    }\n\n    to {\n\n      opacity: 1;\n\n      transform: translateY(0);\n\n    }\n\n  }\n\n  @keyframes spin {\n\n    to {\n\n      transform: rotate(360deg);\n\n    }\n\n  }\n\n  @keyframes pulse {\n\n    0%, 100% {\n\n      opacity: 1;\n\n    }\n\n    50% {\n\n      opacity: 0.5;\n\n    }\n\n  }\n\n  .ripple {\n\n    position: absolute;\n\n    border-radius: 50%;\n\n    transform: scale(0);\n\n    animation: ripple 600ms ease-out;\n\n    background: rgba(255, 255, 255, 0.3);\n\n  }\n\n  @media (max-width: 768px) {\n\n    .mobile-menu-btn {\n\n      display: block !important;\n\n    }\n\n    .desktop-sidebar {\n\n      display: none !important;\n\n    }\n\n  }\n\n  @media (min-width: 769px) {\n\n    .mobile-menu-btn {\n\n      display: none !important;\n\n    }\n\n    .mobile-sidebar {\n\n      display: none !important;\n\n    }\n\n  }\n\n",document.querySelector("#dashboard-styles")||(Ra.id="dashboard-styles",document.head.appendChild(Ra));const Da={container:{height:"100vh",background:"linear-gradient(135deg, #1e3c72 0%, #2a5298 100%)",fontFamily:"Tajawal, Cairo, sans-serif",direction:"rtl",color:"white",position:"relative",overflow:"hidden",display:"flex",flexDirection:"column"},header:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",padding:"1rem 2rem",height:"80px",flexShrink:0,display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",position:"sticky",top:0,zIndex:100},mobileMenuButton:{display:"none",padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",cursor:"pointer",transition:"all 0.3s"},breadcrumbs:{display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",color:"rgba(255, 255, 255, 0.7)",marginBottom:"1rem"},mainLayout:{display:"flex",height:"calc(100vh - 80px)",flex:1,overflow:"hidden"},sidebar:{width:"280px",background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.2)",padding:"2rem 1rem",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",height:"100%",overflowY:"auto"},sidebarOverlay:{display:"none",position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",backdropFilter:"blur(5px)",zIndex:199,opacity:0,transition:"opacity 0.3s"},sidebarMobile:{position:"fixed",top:0,right:"-100%",bottom:0,width:"80%",maxWidth:"320px",background:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(25px)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"-5px 0 25px rgba(0, 0, 0, 0.3)",padding:"2rem 1rem",transition:"right 0.3s cubic-bezier(0.4, 0, 0.2, 1)",zIndex:200,overflowY:"auto"},sidebarMobileOpen:{right:0},closeButton:{position:"absolute",top:"1rem",left:"1rem",padding:"8px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"white",cursor:"pointer",transition:"all 0.3s"},menuItem:{display:"flex",alignItems:"center",gap:"12px",padding:"14px 20px",marginBottom:"8px",borderRadius:"12px",background:"transparent",border:"2px solid transparent",color:"rgba(255, 255, 255, 0.8)",fontSize:"16px",cursor:"pointer",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",width:"100%",textAlign:"right",position:"relative",overflow:"hidden",minHeight:"48px"},menuItemActive:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(139, 92, 246, 0.25))",color:"white",border:"2px solid rgba(59, 130, 246, 0.4)",boxShadow:"0 4px 15px rgba(59, 130, 246, 0.3)",transform:"translateX(-4px)"},menuItemHover:{background:"rgba(255, 255, 255, 0.08)",transform:"translateX(-2px)"},activeIndicator:{position:"absolute",right:0,width:"4px",height:"70%",background:"linear-gradient(180deg, #3b82f6, #8b5cf6)",borderRadius:"4px 0 0 4px",opacity:0,transition:"opacity 0.3s"},activeIndicatorVisible:{opacity:1},menuIcon:{width:"22px",height:"22px",transition:"transform 0.3s"},menuIconActive:{transform:"scale(1.15) rotate(5deg)"},content:{flex:1,padding:"2rem",overflowY:"auto",position:"relative",height:"calc(100vh - 80px)",maxHeight:"calc(100vh - 80px)"},contentTransition:{opacity:0,transform:"translateX(20px)",animation:"contentEnter 300ms cubic-bezier(0.4, 0, 0.2, 1) forwards"},sectionHeader:{marginBottom:"2rem",opacity:0,animation:"fadeInUp 400ms ease-out forwards"},loadingContainer:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},loadingSpinner:{width:"50px",height:"50px",border:"3px solid rgba(255, 255, 255, 0.1)",borderTop:"3px solid rgba(59, 130, 246, 0.8)",borderRadius:"50%",animation:"spin 1s linear infinite"},emptyState:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"3rem",textAlign:"center"},emptyStateIcon:{width:"80px",height:"80px",opacity:.3,marginBottom:"1.5rem"},skeletonCard:{background:"rgba(255, 255, 255, 0.05)",borderRadius:"16px",padding:"1.5rem",marginBottom:"1rem",animation:"pulse 2s ease-in-out infinite"},skeletonLine:{height:"12px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"6px",marginBottom:"8px"},statsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",flexShrink:0},statCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem",textAlign:"center",transition:"transform 0.3s",cursor:"pointer"},iconBox:{width:"60px",height:"60px",margin:"0 auto 1rem",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center"},chartsGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:"1.5rem",flexShrink:0},chartCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem",height:"300px"},activitiesCard:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"1.5rem"},activityItem:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",marginBottom:"0.5rem",background:"rgba(255, 255, 255, 0.05)",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.1)"}},Ia=e=>{let{onLogout:t}=e;const[a,n]=(0,s.useState)("monitoring"),[r,N]=(0,s.useState)(!1),[_,C]=(0,s.useState)(!1),[F,T]=(0,s.useState)(0),[z,R]=(0,s.useState)(va()),D=(0,s.useRef)(null),{data:I,loading:B,error:E}=(()=>{const[e,t]=(0,s.useState)(null),[a,n]=(0,s.useState)(!0),[i,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(0);return(0,s.useEffect)(()=>{let e,a=!0;const s=async function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{i||n(!0),console.log("\ud83d\udcca Fetching dashboard data...");const e=await wa.getDashboardStats(),s=Aa(e,Na);a&&(t(s),r(null),o(0),console.log("\u2705 Dashboard data loaded successfully"))}catch(c){if(!a)return;const n=ka(c);if(console.error("\u274c Dashboard data fetch failed:",n),!(l>=3))return o(e=>e+1),void(e=setTimeout(()=>{a&&(console.log("\ud83d\udd04 Retrying dashboard fetch (attempt ".concat(l+1,"/").concat(3,")...")),s(!0))},2e3*(l+1)));r("\u0641\u0634\u0644 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a: ".concat(n)),t(Na)}finally{a&&!i&&n(!1)}};s();const i=setInterval(()=>s(),3e5);return()=>{a=!1,clearInterval(i),e&&clearTimeout(e)}},[l]),{data:e,loading:a,error:i}})(),P=e=>"number"!==typeof e||Number.isNaN(e)?"0":e.toLocaleString("ar-SA"),L=e=>"number"!==typeof e||Number.isNaN(e)?"0 \u0631.\u0633":"".concat(e.toLocaleString("ar-SA")," \u0631.\u0633"),M=(e,t)=>{const a="number"!==typeof e||Number.isNaN(e)?0:e,s="number"===typeof t&&!Number.isNaN(t)&&t>0?t:0;return s?Math.round(a/s*100):0};(0,s.useEffect)(()=>{R(va());const e=new Date,t=new Date(e);t.setDate(t.getDate()+1),t.setHours(0,0,0,0);const a=t.getTime()-e.getTime(),s=setTimeout(()=>{R(va());const e=setInterval(()=>{R(va())},864e5);return()=>clearInterval(e)},a);return()=>clearTimeout(s)},[]);const[W,O]=(0,s.useState)("overview"),[q,U]=(0,s.useState)([]),[X,Y]=(0,s.useState)(()=>{const e=localStorage.getItem("subscriptionPlans");return e?JSON.parse(e):[]}),[J,V]=(0,s.useState)(!1),[Z,$]=(0,s.useState)(null),[K,Q]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(null),[ae,ne]=(0,s.useState)(!1),ie=e=>{e!==a&&(C(!0),D.current&&(D.current.style.opacity="0",D.current.style.transform="translateX(-20px)"),setTimeout(()=>{n(e),T(e=>e+1),N(!1),C(!1)},200))},re=e=>{const t=e.currentTarget,a=document.createElement("span"),s=t.getBoundingClientRect(),n=Math.max(s.width,s.height),i=e.clientX-s.left-n/2,r=e.clientY-s.top-n/2;a.style.width=a.style.height=n+"px",a.style.left=i+"px",a.style.top=r+"px",a.classList.add("ripple"),t.appendChild(a),setTimeout(()=>a.remove(),600)};(0,s.useEffect)(()=>{const e=()=>{window.innerWidth>768&&N(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,s.useEffect)(()=>{let e=0,t=0,a=!1;const s=t=>{t.touches[0].clientX<50&&(e=t.touches[0].clientX,a=!0)},n=s=>{a&&(t=s.touches[0].clientX,t-e>100&&(N(!0),a=!1))},i=()=>{a=!1};if(window.innerWidth<=768)return document.addEventListener("touchstart",s),document.addEventListener("touchmove",n),document.addEventListener("touchend",i),()=>{document.removeEventListener("touchstart",s),document.removeEventListener("touchmove",n),document.removeEventListener("touchend",i)}},[]);const le=[{id:"dashboard",label:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",icon:l.A},{id:"monitoring",label:"\ud83d\udcca \u0645\u0631\u0627\u0642\u0628\u0629 \u0627\u0644\u0623\u0639\u0636\u0627\u0621",icon:o.A},{id:"statement",label:"\ud83d\udccb \u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0643\u0634\u0641",icon:c.A},{id:"documents",label:"\ud83d\udcc1 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a",icon:d.A},{id:"family-tree",label:"\ud83c\udf33 \u0634\u062c\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629",icon:p.A},{id:"members",label:"\u0627\u0644\u0623\u0639\u0636\u0627\u0621",icon:x.A},{id:"subscriptions",label:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643\u0627\u062a",icon:m.A},{id:"payments",label:"\u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a",icon:h.A},{id:"occasions",label:"\u0627\u0644\u0645\u0646\u0627\u0633\u0628\u0627\u062a",icon:u.A},{id:"initiatives",label:"\u0627\u0644\u0645\u0628\u0627\u062f\u0631\u0627\u062a",icon:g.A},{id:"diyas",label:"\u0627\u0644\u062f\u064a\u0627\u062a",icon:b.A},{id:"notifications",label:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a",icon:j.A},{id:"reports",label:"\u0627\u0644\u062a\u0642\u0627\u0631\u064a\u0631",icon:c.A},{id:"settings",label:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a",icon:f.A}],oe=(0,s.useMemo)(()=>{var e,t;const a=null!==(e=null===I||void 0===I?void 0:I.members)&&void 0!==e?e:{total:0,active:0,inactive:0,newThisMonth:0},s=null!==(t=null===I||void 0===I?void 0:I.payments)&&void 0!==t?t:{pending:0,pendingAmount:0,monthlyRevenue:0,totalRevenue:0,totalPaid:0},n=Number(a.total)||0,i=(Number(s.pending)||0)+(Number(s.totalPaid)||0),r=Number(s.totalRevenue)||Number(s.monthlyRevenue)||0,l=M(s.pending,i);return[{title:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0623\u0639\u0636\u0627\u0621",value:P(n),icon:y.A,color:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",trend:M(a.newThisMonth,n)},{title:"\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u0646\u0634\u0637\u0648\u0646",value:P(a.active),icon:o.A,color:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",trend:M(a.active,n)},{title:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0647\u0631\u064a\u0629",value:L(s.monthlyRevenue),icon:h.A,color:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)",trend:M(s.monthlyRevenue,r)},{title:"\u0627\u0644\u0645\u0628\u0627\u0644\u063a \u0627\u0644\u0645\u0639\u0644\u0642\u0629",value:L(s.pendingAmount),icon:v.A,color:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)",trend:l?-l:0}]},[I]),ce=[{id:1,name_ar:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",name_en:"Monthly Subscription",price:100,duration_months:1,status:"active",description:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0634\u0647\u0631\u064a \u0644\u0644\u0623\u0639\u0636\u0627\u0621",benefits:["\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0645\u0631\u0627\u0641\u0642","\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0641\u064a \u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a","\u0627\u0644\u062f\u0639\u0645 \u0627\u0644\u0641\u0646\u064a"],subscribers_count:25},{id:2,name_ar:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0633\u0646\u0648\u064a",name_en:"Annual Subscription",price:1e3,duration_months:12,status:"active",description:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0633\u0646\u0648\u064a \u0628\u062e\u0635\u0645 20%",benefits:["\u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0627\u0644\u0645\u0631\u0627\u0641\u0642","\u0627\u0644\u0645\u0634\u0627\u0631\u0643\u0629 \u0641\u064a \u0627\u0644\u0641\u0639\u0627\u0644\u064a\u0627\u062a","\u0627\u0644\u062f\u0639\u0645 \u0627\u0644\u0641\u0646\u064a","\u0627\u0633\u062a\u0634\u0627\u0631\u0627\u062a \u0645\u062c\u0627\u0646\u064a\u0629"],subscribers_count:18},{id:3,name_ar:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0645\u0645\u064a\u0632",name_en:"Premium Subscription",price:200,duration_months:1,status:"active",description:"\u0627\u0634\u062a\u0631\u0627\u0643 \u0634\u0647\u0631\u064a \u0645\u0639 \u062e\u062f\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629",benefits:["\u062c\u0645\u064a\u0639 \u0645\u0632\u0627\u064a\u0627 \u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a","\u062e\u062f\u0645\u0627\u062a VIP","\u0623\u0648\u0644\u0648\u064a\u0629 \u0641\u064a \u0627\u0644\u062d\u062c\u0648\u0632\u0627\u062a","\u062f\u0639\u0645 24/7"],subscribers_count:8}],de=[{id:1,member_id:1,member_name:"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",status:"active",start_date:"2024-01-01",due_date:"2024-02-01",amount:100,payment_status:"paid"},{id:2,member_id:2,member_name:"\u0641\u0627\u0637\u0645\u0629 \u0639\u0628\u062f\u0627\u0644\u0644\u0647 \u0627\u0644\u0634\u0639\u064a\u0644",plan_id:2,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0633\u0646\u0648\u064a",status:"overdue",start_date:"2023-01-01",due_date:"2023-12-15",amount:1e3,payment_status:"overdue"},{id:3,member_id:3,member_name:"\u062e\u0627\u0644\u062f \u0633\u0639\u062f \u0627\u0644\u0634\u0639\u064a\u0644",plan_id:3,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0645\u0645\u064a\u0632",status:"active",start_date:"2024-01-15",due_date:"2024-02-15",amount:200,payment_status:"paid"},{id:4,member_id:4,member_name:"\u0646\u0648\u0631\u0627 \u062d\u0633\u0646 \u0627\u0644\u0634\u0639\u064a\u0644",plan_id:1,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0634\u0647\u0631\u064a",status:"cancelled",start_date:"2023-10-01",due_date:"2023-11-01",amount:100,payment_status:"cancelled"},{id:5,member_id:5,member_name:"\u0633\u0627\u0631\u0629 \u0639\u0644\u064a \u0627\u0644\u0634\u0639\u064a\u0644",plan_id:2,plan_name:"\u0627\u0644\u0627\u0634\u062a\u0631\u0627\u0643 \u0627\u0644\u0633\u0646\u0648\u064a",status:"pending",start_date:"2024-01-20",due_date:"2025-01-20",amount:1e3,payment_status:"pending"}];(0,s.useEffect)(()=>{if("subscriptions"===a&&0===X.length){localStorage.getItem("subscriptionPlans")||(Y(ce),localStorage.setItem("subscriptionPlans",JSON.stringify(ce))),U(de)}},[a,X.length]);const pe=(0,s.useMemo)(()=>{var e;const t=null!==(e=null===I||void 0===I?void 0:I.payments)&&void 0!==e?e:{monthlyRevenue:0,totalRevenue:0};return{labels:["\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a \u0627\u0644\u0634\u0647\u0631\u064a\u0629","\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a"],datasets:[{label:"\u0627\u0644\u0625\u064a\u0631\u0627\u062f\u0627\u062a",data:[Number(t.monthlyRevenue)||0,Number(t.totalRevenue)||0],borderColor:"rgba(59, 130, 246, 1)",backgroundColor:"rgba(59, 130, 246, 0.2)",tension:.4,fill:!0}]}},[I]),me=(0,s.useMemo)(()=>{const e=[...null!==I&&void 0!==I&&I.tribalSections&&Array.isArray(I.tribalSections)&&I.tribalSections.length>0?I.tribalSections:[{section:"\u0631\u0634\u0648\u062f",members:172,balance:233090},{section:"\u0627\u0644\u062f\u063a\u064a\u0634",members:45,balance:47650},{section:"\u0631\u0634\u064a\u062f",members:36,balance:48250},{section:"\u0627\u0644\u0639\u0642\u0627\u0628",members:22,balance:34900},{section:"\u0627\u0644\u0627\u062d\u064a\u0645\u0631",members:22,balance:21950},{section:"\u0627\u0644\u0639\u064a\u062f",members:14,balance:29100},{section:"\u0627\u0644\u0634\u0627\u0645\u062e",members:12,balance:17400},{section:"\u0627\u0644\u0631\u0634\u064a\u062f",members:12,balance:18300},{section:"\u0627\u0644\u0634\u0628\u064a\u0639\u0627\u0646",members:5,balance:4250},{section:"\u0627\u0644\u0645\u0633\u0639\u0648\u062f",members:4,balance:3950}]].sort((e,t)=>t.balance-e.balance),t=["rgba(0, 100, 0, 0.85)","rgba(34, 139, 34, 0.85)","rgba(60, 179, 113, 0.85)","rgba(144, 238, 144, 0.85)","rgba(255, 215, 0, 0.85)","rgba(255, 165, 0, 0.85)","rgba(255, 140, 0, 0.85)","rgba(255, 69, 0, 0.85)"];return{labels:e.map(e=>"".concat(e.section)),datasets:[{label:"\u0627\u0644\u0623\u0631\u0635\u062f\u0629 \u0628\u0627\u0644\u0631\u064a\u0627\u0644",data:e.map(e=>e.balance),backgroundColor:t,hoverBackgroundColor:t.map(e=>e.replace("0.85","1")),borderWidth:2,borderColor:"#ffffff",hoverBorderWidth:3,hoverBorderColor:"#ffffff"}],sortedData:e}},[I]),ue=(0,s.useMemo)(()=>{var e;const t=null!==(e=null===I||void 0===I?void 0:I.members)&&void 0!==e?e:{total:0,active:0,inactive:0,newThisMonth:0},a=Number(t.active)||0,s=Number(t.newThisMonth)||0;return{labels:["\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u0646\u0634\u0637\u0648\u0646","\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u063a\u064a\u0631 \u0627\u0644\u0646\u0634\u0637\u064a\u0646","\u0627\u0644\u0623\u0639\u0636\u0627\u0621 \u0627\u0644\u062c\u062f\u062f"],datasets:[{data:[a,"number"!==typeof t.inactive||Number.isNaN(Number(t.inactive))?Math.max((Number(t.total)||0)-a,0):Number(t.inactive)||0,s],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(168, 85, 247, 0.8)"],borderWidth:0}]}},[I]),ge=e=>{if(!e)return"";try{return new Intl.DateTimeFormat("ar-SA",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e))}catch(t){return e}},be=(0,s.useMemo)(()=>{var e;const t=null!==(e=null===I||void 0===I?void 0:I.activities)&&void 0!==e?e:[];return t.length?t.map(e=>({user:"payment"===e.type?"\u0639\u0645\u0644\u064a\u0629 \u0645\u0627\u0644\u064a\u0629":"\u0639\u0636\u0648 \u062c\u062f\u064a\u062f",action:e.description,time:ge(e.date),amount:e.amount?L(e.amount):null})):[{user:"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645",action:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0623\u0646\u0634\u0637\u0629 \u062d\u062f\u064a\u062b\u0629",time:ge((new Date).toISOString()),amount:null}]},[null===I||void 0===I?void 0:I.activities]),je=_||B,fe=()=>{const e=le.find(e=>e.id===a);return(null===e||void 0===e?void 0:e.label)||"\u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"};return(0,S.jsxs)("div",{style:Da.container,children:[(0,S.jsx)("div",{className:"mobile-sidebar-overlay",style:(0,i.A)((0,i.A)({},Da.sidebarOverlay),r?{display:"block",opacity:1}:{}),onClick:()=>N(!1)}),(0,S.jsxs)("div",{style:Da.header,children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,S.jsx)("button",{className:"mobile-menu-btn",onClick:()=>N(!0),style:Da.mobileMenuButton,"aria-label":"\u0641\u062a\u062d \u0627\u0644\u0642\u0627\u0626\u0645\u0629",children:(0,S.jsx)(w.A,{style:{width:"24px",height:"24px"}})}),(0,S.jsx)("h1",{style:{fontSize:"24px",fontWeight:"400",color:"#007AFF"},children:"\u0644\u0648\u062d\u0629 \u062a\u062d\u0643\u0645 \u0635\u0646\u062f\u0648\u0642 \u0634\u0639\u064a\u0644 \u0627\u0644\u0639\u0646\u0632\u064a"})]}),(0,S.jsx)("button",{onClick:t,style:{padding:"8px 24px",background:"rgba(132, 204, 22, 0.15)",border:"1px solid rgba(132, 204, 22, 0.3)",borderRadius:"8px",color:"#bef264",cursor:"pointer",fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="rgba(132, 204, 22, 0.25)",e.currentTarget.style.borderColor="rgba(132, 204, 22, 0.5)",e.currentTarget.style.color="white"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(132, 204, 22, 0.15)",e.currentTarget.style.borderColor="rgba(132, 204, 22, 0.3)",e.currentTarget.style.color="#bef264"},children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"})]}),(0,S.jsxs)("div",{style:Da.mainLayout,children:[(0,S.jsxs)("div",{className:"desktop-sidebar",style:Da.sidebar,children:[(0,S.jsxs)("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[(0,S.jsx)("img",{src:bt,alt:"Shuail Al-Anzi Fund Logo",style:{width:"140px",height:"140px",display:"block",margin:"0 auto 1rem auto",filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))",background:"rgba(255, 255, 255, 0.95)",borderRadius:"50%",padding:"10px"}}),(0,S.jsx)("h2",{style:{fontSize:"20px",marginBottom:"8px",color:"#ffffff",fontWeight:"400"},children:"\u0635\u0646\u062f\u0648\u0642 \u0634\u0639\u064a\u0644 \u0627\u0644\u0639\u0646\u0632\u064a"}),(0,S.jsx)("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.6)"},children:"Shuail Al-Anzi Fund"})]}),le.map(e=>{const t=e.icon,s=a===e.id;return(0,S.jsxs)("button",{onClick:t=>{re(t),ie(e.id)},style:(0,i.A)((0,i.A)({},Da.menuItem),s?Da.menuItemActive:{}),onMouseEnter:e=>{if(!s){Object.assign(e.currentTarget.style,Da.menuItemHover);const t=e.currentTarget.querySelector("svg");t instanceof HTMLElement&&(t.style.transform="scale(1.1) rotate(-5deg)")}},onMouseLeave:e=>{if(!s){e.currentTarget.style.background="transparent",e.currentTarget.style.transform="translateX(0)";const t=e.currentTarget.querySelector("svg");t instanceof HTMLElement&&(t.style.transform="scale(1) rotate(0)")}},"aria-label":e.label,"aria-current":s?"page":void 0,children:[(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},Da.activeIndicator),s?Da.activeIndicatorVisible:{})}),(0,S.jsx)(t,{style:(0,i.A)((0,i.A)({},Da.menuIcon),s?Da.menuIconActive:{})}),(0,S.jsx)("span",{children:e.label})]},e.id)})]}),(0,S.jsxs)("div",{className:"mobile-sidebar",style:(0,i.A)((0,i.A)({},Da.sidebarMobile),r?Da.sidebarMobileOpen:{}),children:[(0,S.jsx)("button",{onClick:()=>N(!1),style:Da.closeButton,"aria-label":"\u0625\u063a\u0644\u0627\u0642 \u0627\u0644\u0642\u0627\u0626\u0645\u0629",children:(0,S.jsx)(A.A,{style:{width:"20px",height:"20px"}})}),(0,S.jsxs)("div",{style:{marginBottom:"2rem",marginTop:"3rem",textAlign:"center"},children:[(0,S.jsx)("img",{src:bt,alt:"Shuail Al-Anzi Fund Logo",style:{width:"100px",height:"100px",display:"block",margin:"0 auto 1rem auto",filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))",background:"rgba(255, 255, 255, 0.95)",borderRadius:"50%",padding:"10px"}}),(0,S.jsx)("h2",{style:{fontSize:"20px",marginBottom:"8px",color:"#ffffff",fontWeight:"400"},children:"\u0635\u0646\u062f\u0648\u0642 \u0634\u0639\u064a\u0644 \u0627\u0644\u0639\u0646\u0632\u064a"}),(0,S.jsx)("p",{style:{fontSize:"14px",color:"rgba(255, 255, 255, 0.6)"},children:"Shuail Al-Anzi Fund"})]}),le.map(e=>{const t=e.icon,s=a===e.id;return(0,S.jsxs)("button",{onClick:t=>{re(t),ie(e.id)},style:(0,i.A)((0,i.A)({},Da.menuItem),s?Da.menuItemActive:{}),"aria-label":e.label,"aria-current":s?"page":void 0,children:[(0,S.jsx)("div",{style:(0,i.A)((0,i.A)({},Da.activeIndicator),s?Da.activeIndicatorVisible:{})}),(0,S.jsx)(t,{style:(0,i.A)((0,i.A)({},Da.menuIcon),s?Da.menuIconActive:{})}),(0,S.jsx)("span",{children:e.label})]},e.id)})]}),(0,S.jsxs)("div",{style:Da.content,children:[(0,S.jsxs)("div",{style:Da.breadcrumbs,children:[(0,S.jsx)(l.A,{style:{width:"16px",height:"16px"}}),(0,S.jsx)(k.A,{style:{width:"14px",height:"14px",opacity:.5}}),(0,S.jsx)("span",{children:fe()})]}),(0,S.jsxs)("div",{ref:D,style:Da.contentTransition,children:[E&&(0,S.jsx)("div",{style:{background:"rgba(239, 68, 68, 0.12)",border:"1px solid rgba(239, 68, 68, 0.35)",color:"#fecaca",borderRadius:"12px",padding:"12px 16px",marginBottom:"1rem"},children:E}),je?(0,S.jsx)("div",{style:Da.loadingContainer,children:(0,S.jsx)("div",{style:Da.loadingSpinner})}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{style:Da.sectionHeader,children:(0,S.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("h1",{style:{fontSize:"28px",marginBottom:"8px"},children:"dashboard"===a?"\u0645\u0631\u062d\u0628\u0627\u064b \u0628\u0643 \u0641\u064a \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645":fe()}),(0,S.jsx)("p",{style:{color:"rgba(255, 255, 255, 0.7)"},children:"dashboard"===a?"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 - \u0646\u0638\u0631\u0629 \u0634\u0627\u0645\u0644\u0629 \u0639\u0644\u0649 \u0627\u0644\u0623\u0646\u0634\u0637\u0629 \u0648\u0627\u0644\u0645\u0627\u0644\u064a\u0629":"\u0625\u062f\u0627\u0631\u0629 ".concat(fe()," - \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644")})]}),(0,S.jsxs)("div",{style:{textAlign:"right",padding:"8px 16px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"12px"},children:[(0,S.jsx)("div",{style:{fontSize:"18px",fontWeight:"400",color:"#10b981",marginBottom:"4px"},children:z.formatted}),(0,S.jsx)("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.6)"},children:z.gregorian})]})]})}),"dashboard"===a&&(0,S.jsxs)("div",{style:{height:"calc(100% - 100px)",display:"flex",flexDirection:"column",gap:"1.5rem",overflowY:"auto",paddingBottom:"20px"},children:[(0,S.jsx)(_a,{stats:oe}),(0,S.jsx)(Fa,{revenueData:pe,memberDistribution:ue,chartOptions:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgba(255, 255, 255, 0.8)",font:{family:"Tajawal",size:12}}}},scales:{y:{ticks:{color:"rgba(255, 255, 255, 0.6)",font:{family:"Tajawal"}},grid:{color:"rgba(255, 255, 255, 0.1)"}},x:{ticks:{color:"rgba(255, 255, 255, 0.6)",font:{family:"Tajawal"}},grid:{color:"rgba(255, 255, 255, 0.1)"}}}},tribalSectionsData:me}),(0,S.jsx)(Ta,{activities:be})]}),"members"===a&&(0,S.jsx)("div",{children:(0,S.jsx)(qt,{})}),"subscriptions"===a&&(0,S.jsx)(H,{}),"payments"===a&&(0,S.jsx)(G,{}),"occasions"===a&&(0,S.jsx)(se,{}),"initiatives"===a&&(0,S.jsx)(xe,{}),"diyas"===a&&(0,S.jsx)(he,{}),"notifications"===a&&(0,S.jsx)("div",{children:(0,S.jsx)(mt,{})}),"reports"===a&&(0,S.jsx)(vt,{}),"settings"===a&&(0,S.jsx)(ea,{}),"statement"===a&&(0,S.jsx)(la,{}),"monitoring"===a&&(0,S.jsx)(oa,{}),"documents"===a&&(0,S.jsx)(xa,{}),"family-tree"===a&&(0,S.jsx)(ja,{})]})]},F)]})]})]})},Ba=()=>{const{token:e}=(0,r.g)(),t=(0,r.Zp)(),[a,n]=(0,s.useState)(null),[l,o]=(0,s.useState)({national_id:"",birth_date:"",employer:"",email:"",social_security_beneficiary:"",profile_photo:null,national_id_document:null,national_id_document_url:""}),[c,d]=(0,s.useState)(!0),[p,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(""),[u,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(null),[f,y]=(0,s.useState)(null),[N,w]=(0,s.useState)(!1),[A,k]=(0,s.useState)({}),_=(0,s.useRef)(null),C=(0,s.useRef)(null),F=(0,s.useRef)(null),T=(0,s.useRef)(null),z=(0,s.useRef)(null);(0,s.useEffect)(()=>(R(),()=>{z.current&&z.current.getTracks().forEach(e=>e.stop())}),[e]);const R=async()=>{if(!e)return h("\u0631\u0645\u0632 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0645\u0641\u0642\u0648\u062f"),void d(!1);try{const t=await wt.verifyRegistrationToken(e);n(t.member),h("")}catch(m){console.error("Token verification error:",m),h("\u0631\u0645\u0632 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d \u0623\u0648 \u0645\u0646\u062a\u0647\u064a \u0627\u0644\u0635\u0644\u0627\u062d\u064a\u0629")}finally{d(!1)}},B=e=>{const{name:t,value:a}=e.target;o(e=>(0,i.A)((0,i.A)({},e),{},{[t]:a})),A[t]&&k(e=>(0,i.A)((0,i.A)({},e),{},{[t]:""}))},E=e=>{o(t=>(0,i.A)((0,i.A)({},t),{},{social_security_beneficiary:e}))},P=e=>{if(e.size>5242880)return void alert("\u062d\u062c\u0645 \u0627\u0644\u0635\u0648\u0631\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 5 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a");if(!e.type.startsWith("image/"))return void alert("\u064a\u0631\u062c\u0649 \u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0644\u0641 \u0635\u0648\u0631\u0629 \u0635\u062d\u064a\u062d");o(t=>(0,i.A)((0,i.A)({},t),{},{profile_photo:e}));const t=new FileReader;t.onload=e=>{j(e.target.result)},t.readAsDataURL(e)},L=()=>{z.current&&(z.current.getTracks().forEach(e=>e.stop()),z.current=null),w(!1)};return c?(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",dir:"rtl",children:(0,S.jsxs)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-8 shadow-lg border border-white/20 text-center",children:[(0,S.jsx)(v.A,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),(0,S.jsx)("p",{className:"text-gray-600",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0631\u0645\u0632 \u0627\u0644\u062a\u0633\u062c\u064a\u0644..."})]})}):m&&!a?(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",dir:"rtl",children:(0,S.jsxs)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-8 shadow-lg border border-white/20 text-center max-w-md",children:[(0,S.jsx)(I.A,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,S.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u062a\u062d\u0642\u0642"}),(0,S.jsx)("p",{className:"text-gray-600 mb-6",children:m}),(0,S.jsx)("button",{onClick:()=>t("/login"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors duration-200",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0625\u0644\u0649 \u0627\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"})]})}):u?(0,S.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",dir:"rtl",children:(0,S.jsxs)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-8 shadow-lg border border-white/20 text-center max-w-md",children:[(0,S.jsx)(D.A,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,S.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"\u062a\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0628\u0646\u062c\u0627\u062d!"}),(0,S.jsx)("p",{className:"text-gray-600 mb-6",children:"\u062a\u0645 \u0625\u0643\u0645\u0627\u0644 \u0645\u0644\u0641\u0643 \u0627\u0644\u0634\u062e\u0635\u064a \u0628\u0646\u062c\u0627\u062d. \u0633\u064a\u062a\u0645 \u062a\u0648\u062c\u064a\u0647\u0643 \u0625\u0644\u0649 \u0635\u0641\u062d\u0629 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u062e\u0644\u0627\u0644 \u0644\u062d\u0638\u0627\u062a."}),(0,S.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,S.jsx)("div",{className:"bg-green-500 h-2 rounded-full animate-pulse",style:{width:"100%"}})})]})}):(0,S.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",dir:"rtl",children:[(0,S.jsx)("div",{className:"max-w-2xl mx-auto mb-6",children:(0,S.jsx)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-6 shadow-lg border border-white/20",children:(0,S.jsxs)("div",{className:"text-center",children:[(0,S.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"\u0625\u0643\u0645\u0627\u0644 \u0645\u0644\u0641 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsxs)("p",{className:"text-gray-600",children:["\u0645\u0631\u062d\u0628\u0627\u064b ",null===a||void 0===a?void 0:a.full_name_arabic]}),(0,S.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629: ",null===a||void 0===a?void 0:a.membership_number]})]})})}),(0,S.jsx)("div",{className:"max-w-2xl mx-auto mb-6",children:(0,S.jsxs)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-6 shadow-lg border border-white/20",children:[(0,S.jsx)("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a \u0627\u0644\u0645\u0633\u062c\u0644\u0629 \u0645\u0633\u0628\u0642\u0627\u064b"}),(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,S.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50/50 rounded-lg",children:[(0,S.jsx)(kt.A,{className:"w-5 h-5 text-gray-500"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm text-gray-500",children:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"}),(0,S.jsx)("p",{className:"font-medium text-gray-800",children:(null===a||void 0===a?void 0:a.full_name_arabic)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]})]}),(0,S.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50/50 rounded-lg",children:[(0,S.jsx)(Ct.A,{className:"w-5 h-5 text-gray-500"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"text-sm text-gray-500",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062a\u0641"}),(0,S.jsx)("p",{className:"font-medium text-gray-800",children:(null===a||void 0===a?void 0:a.phone)||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]})]})]})]})}),(0,S.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,S.jsx)("div",{className:"backdrop-blur-md bg-white/70 rounded-2xl p-6 shadow-lg border border-white/20",children:(0,S.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),(()=>{const e={};if(l.national_id.trim()?/^\d{10}$/.test(l.national_id.trim())||(e.national_id="\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 10 \u0623\u0631\u0642\u0627\u0645"):e.national_id="\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0645\u0637\u0644\u0648\u0628",l.birth_date){const t=new Date(l.birth_date),a=(new Date).getFullYear()-t.getFullYear();(a<1||a>120)&&(e.birth_date="\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f \u063a\u064a\u0631 \u0635\u062d\u064a\u062d")}else e.birth_date="\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f \u0645\u0637\u0644\u0648\u0628";return l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email.trim())||(e.email="\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"):e.email="\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a \u0645\u0637\u0644\u0648\u0628",l.social_security_beneficiary||(e.social_security_beneficiary="\u064a\u0631\u062c\u0649 \u0627\u0644\u0625\u062c\u0627\u0628\u0629 \u0639\u0644\u0649 \u0633\u0624\u0627\u0644 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a"),l.national_id_document||(e.national_id_document="\u064a\u0631\u062c\u0649 \u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0645\u0646 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629 \u0644\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"),k(e),0===Object.keys(e).length})()){x(!0),h("");try{await wt.completeProfile(e,l);g(!0),setTimeout(()=>{t("/login",{replace:!0})},3e3)}catch(m){console.error("Registration error:",m),h(m.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0623\u062b\u0646\u0627\u0621 \u0625\u062a\u0645\u0627\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649.")}finally{x(!1)}}},className:"space-y-6",children:[(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629 *"}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(_t.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"text",name:"national_id",value:l.national_id,onChange:B,placeholder:"\u0623\u062f\u062e\u0644 \u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 (10 \u0623\u0631\u0642\u0627\u0645)",className:"w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.national_id?"border-red-500":"border-gray-300"),maxLength:"10"})]}),A.national_id&&(0,S.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.national_id})]}),(0,S.jsxs)("div",{children:[(0,S.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629 *",(0,S.jsx)("span",{className:"text-xs text-gray-500 block mt-1",children:"(\u064a\u0631\u062c\u0649 \u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0648\u0627\u0636\u062d\u0629 \u0644\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629 \u0644\u0644\u062a\u062d\u0642\u0642 \u0645\u0646 \u0635\u062d\u0629 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a)"})]}),(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsx)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center ".concat(A.national_id_document?"border-red-500 bg-red-50":"border-gray-300 hover:border-blue-500"," transition-colors duration-200"),children:f?(0,S.jsxs)("div",{className:"space-y-3",children:["PDF"===f?(0,S.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,S.jsx)("svg",{className:"w-12 h-12 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,S.jsx)("path",{d:"M4 18h12a2 2 0 002-2V6.414A2 2 0 0017.414 5L14 1.586A2 2 0 0012.586 1H4a2 2 0 00-2 2v13a2 2 0 002 2z"})}),(0,S.jsx)("span",{className:"text-sm font-medium",children:"\u0645\u0644\u0641 PDF \u0645\u062d\u0645\u0644"})]}):(0,S.jsx)("img",{src:f,alt:"National ID Preview",className:"max-w-full h-40 object-contain mx-auto rounded-lg shadow-md"}),(0,S.jsx)("button",{type:"button",onClick:()=>{y(null),o(e=>(0,i.A)((0,i.A)({},e),{},{national_id_document:null,national_id_document_url:""}))},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"\u0625\u0632\u0627\u0644\u0629 \u0648\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0631\u0641\u0639"})]}):(0,S.jsxs)("div",{children:[(0,S.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,S.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,S.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"\u0627\u0636\u063a\u0637 \u0644\u0631\u0641\u0639 \u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0623\u0648 \u0627\u0633\u062d\u0628 \u0627\u0644\u0645\u0644\u0641 \u0647\u0646\u0627"}),(0,S.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PNG, JPG, PDF \u062d\u062a\u0649 10 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a"}),(0,S.jsx)("input",{ref:C,type:"file",accept:"image/*,.pdf",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>10485760)return void alert("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 \u0623\u0642\u0644 \u0645\u0646 10 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a");if(!["image/jpeg","image/png","image/jpg","application/pdf"].includes(t.type))return void alert("\u064a\u0631\u062c\u0649 \u0631\u0641\u0639 \u0635\u0648\u0631\u0629 (JPG, PNG) \u0623\u0648 \u0645\u0644\u0641 PDF \u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629");if(o(e=>(0,i.A)((0,i.A)({},e),{},{national_id_document:t,national_id_document_url:URL.createObjectURL(t)})),t.type.startsWith("image/")){const e=new FileReader;e.onload=e=>{y(e.target.result)},e.readAsDataURL(t)}else y("PDF")}},className:"hidden"}),(0,S.jsx)("button",{type:"button",onClick:()=>{var e;return null===(e=C.current)||void 0===e?void 0:e.click()},className:"mt-3 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors duration-200",children:"\u0627\u062e\u062a\u0631 \u0645\u0644\u0641"})]})}),A.national_id_document&&(0,S.jsxs)("p",{className:"text-sm text-red-600 flex items-center",children:[(0,S.jsx)(I.A,{className:"w-4 h-4 ml-1"}),A.national_id_document]})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f *"}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(V.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"date",name:"birth_date",value:l.birth_date,onChange:B,className:"w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.birth_date?"border-red-500":"border-gray-300")})]}),A.birth_date&&(0,S.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.birth_date})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(zt.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"text",name:"employer",value:l.employer,onChange:B,placeholder:"\u0623\u062f\u062e\u0644 \u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644",className:"w-full pr-10 pl-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a *"}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)(je.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,S.jsx)("input",{type:"email",name:"email",value:l.email,onChange:B,placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a",className:"w-full pr-10 pl-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(A.email?"border-red-500":"border-gray-300")})]}),A.email&&(0,S.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.email})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u0633\u062a\u0641\u064a\u062f \u0645\u0646 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u061f *"}),(0,S.jsxs)("div",{className:"space-y-3",children:[(0,S.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,S.jsx)("input",{type:"radio",name:"social_security_beneficiary",value:"true",checked:"true"===l.social_security_beneficiary,onChange:()=>E("true"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,S.jsx)("span",{className:"mr-3 text-gray-800",children:"\u0646\u0639\u0645\u060c \u0623\u0646\u0627 \u0645\u0633\u062a\u0641\u064a\u062f \u0645\u0646 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a"})]}),(0,S.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg cursor-pointer hover:bg-gray-50",children:[(0,S.jsx)("input",{type:"radio",name:"social_security_beneficiary",value:"false",checked:"false"===l.social_security_beneficiary,onChange:()=>E("false"),className:"w-4 h-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,S.jsx)("span",{className:"mr-3 text-gray-800",children:"\u0644\u0627\u060c \u0644\u0633\u062a \u0645\u0633\u062a\u0641\u064a\u062f \u0645\u0646 \u0627\u0644\u0636\u0645\u0627\u0646 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a"})]})]}),A.social_security_beneficiary&&(0,S.jsx)("p",{className:"mt-1 text-sm text-red-600",children:A.social_security_beneficiary})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),b&&(0,S.jsxs)("div",{className:"mb-4 text-center",children:[(0,S.jsx)("img",{src:b,alt:"\u0645\u0639\u0627\u064a\u0646\u0629 \u0627\u0644\u0635\u0648\u0631\u0629",className:"w-32 h-32 object-cover rounded-full mx-auto border-4 border-white shadow-lg"}),(0,S.jsx)("button",{type:"button",onClick:()=>{j(null),o(e=>(0,i.A)((0,i.A)({},e),{},{profile_photo:null}))},className:"mt-2 text-sm text-red-600 hover:text-red-800",children:"\u062d\u0630\u0641 \u0627\u0644\u0635\u0648\u0631\u0629"})]}),N&&(0,S.jsxs)("div",{className:"mb-4 text-center",children:[(0,S.jsx)("video",{ref:F,autoPlay:!0,playsInline:!0,className:"w-full max-w-sm rounded-lg border-2 border-gray-300"}),(0,S.jsxs)("div",{className:"flex gap-3 mt-3 justify-center",children:[(0,S.jsx)("button",{type:"button",onClick:()=>{if(F.current&&T.current){const e=T.current,t=F.current,a=e.getContext("2d");e.width=t.videoWidth,e.height=t.videoHeight,a.drawImage(t,0,0),e.toBlob(e=>{const t=new File([e],"profile_photo.jpg",{type:"image/jpeg"});P(t),L()},"image/jpeg",.8)}},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors duration-200",children:"\u0627\u0644\u062a\u0642\u0637 \u0627\u0644\u0635\u0648\u0631\u0629"}),(0,S.jsx)("button",{type:"button",onClick:L,className:"bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200",children:"\u0625\u0644\u063a\u0627\u0621"})]})]}),!b&&!N&&(0,S.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,S.jsxs)("button",{type:"button",onClick:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});z.current=e,F.current&&(F.current.srcObject=e,w(!0))}catch(m){console.error("Camera error:",m),alert("\u062a\u0639\u0630\u0631 \u0627\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0627\u0644\u0643\u0627\u0645\u064a\u0631\u0627. \u064a\u0631\u062c\u0649 \u0627\u0644\u0633\u0645\u0627\u062d \u0628\u0627\u0644\u0648\u0635\u0648\u0644 \u0623\u0648 \u0627\u0633\u062a\u062e\u062f\u0627\u0645 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641.")}},className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors duration-200",children:[(0,S.jsx)(te.A,{className:"w-6 h-6 text-gray-500"}),(0,S.jsx)("span",{className:"text-gray-700",children:"\u0627\u0633\u062a\u062e\u062f\u0645 \u0627\u0644\u0643\u0627\u0645\u064a\u0631\u0627"})]}),(0,S.jsxs)("button",{type:"button",onClick:()=>{var e;return null===(e=_.current)||void 0===e?void 0:e.click()},className:"flex items-center justify-center gap-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors duration-200",children:[(0,S.jsx)(q.A,{className:"w-6 h-6 text-gray-500"}),(0,S.jsx)("span",{className:"text-gray-700",children:"\u0627\u062e\u062a\u0631 \u0645\u0646 \u0627\u0644\u0645\u0644\u0641\u0627\u062a"})]})]}),(0,S.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];t&&P(t)},className:"hidden"}),(0,S.jsx)("canvas",{ref:T,className:"hidden"})]}),m&&(0,S.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,S.jsxs)("div",{className:"flex items-center gap-2",children:[(0,S.jsx)(I.A,{className:"w-5 h-5 text-red-500"}),(0,S.jsx)("p",{className:"text-red-700",children:m})]})}),(0,S.jsx)("button",{type:"submit",disabled:p,className:"w-full bg-blue-600 text-white py-4 px-6 rounded-lg font-medium hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center gap-2",children:p?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(v.A,{className:"w-5 h-5 animate-spin"}),"\u062c\u0627\u0631\u064a \u0625\u062a\u0645\u0627\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644..."]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),"\u0625\u062a\u0645\u0627\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644"]})})]})})}),(0,S.jsx)("div",{className:"max-w-2xl mx-auto mt-8 text-center",children:(0,S.jsx)("p",{className:"text-sm text-gray-500",children:"\xa9 2024 \u0646\u0638\u0627\u0645 \u0627\u0644\u0634\u0639\u064a\u0644. \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629."})})]})},Ea=()=>{const[e,t]=(0,s.useState)(1),[a,n]=(0,s.useState)({fullName:"",nationalId:"",phone:"",email:"",birthDate:"",birthDateHijri:"",city:"",district:"",street:"",buildingNumber:"",postalCode:"",maritalStatus:"",numberOfDependents:0,familyMembers:[],occupation:"",employer:"",monthlyIncome:"",educationLevel:"",hasHealthConditions:!1,needsAssistance:!1}),[r,o]=(0,s.useState)([]),[d,p]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[u,g]=(0,s.useState)(""),b=(0,s.useRef)(null),j=["\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629","\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0646\u0648\u0627\u0646","\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u064a\u0629","\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0647\u0646\u064a\u0629","\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"],f=[kt.A,l.A,y.A,St.A,c.A];(0,s.useEffect)(()=>{const e=setTimeout(()=>{var e;null===(e=b.current)||void 0===e||e.classList.add("form-visible")},100);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{const e=setTimeout(()=>{localStorage.setItem("registrationFormData",JSON.stringify(a))},1e3);return()=>clearTimeout(e)},[a]);const v=(e,t)=>{n(a=>(0,i.A)((0,i.A)({},a),{},{[e]:t})),o(t=>t.filter(t=>t.field!==e))},N=e=>{const t=[];switch(e){case 1:a.fullName||t.push({field:"fullName",message:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644 \u0645\u0637\u0644\u0648\u0628"}),a.nationalId&&10===a.nationalId.length||t.push({field:"nationalId",message:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u064a\u062c\u0628 \u0623\u0646 \u064a\u0643\u0648\u0646 10 \u0623\u0631\u0642\u0627\u0645"}),a.phone&&a.phone.match(/^05\d{8}$/)||t.push({field:"phone",message:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 \u063a\u064a\u0631 \u0635\u062d\u064a\u062d"});break;case 2:a.city||t.push({field:"city",message:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"}),a.district||t.push({field:"district",message:"\u0627\u0644\u062d\u064a \u0645\u0637\u0644\u0648\u0628"});break;case 3:a.maritalStatus||t.push({field:"maritalStatus",message:"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"});break;case 4:a.occupation||t.push({field:"occupation",message:"\u0627\u0644\u0645\u0647\u0646\u0629 \u0645\u0637\u0644\u0648\u0628\u0629"})}return o(t),0===t.length};return x?(0,S.jsxs)("div",{className:"success-screen animate-scale-in",children:[(0,S.jsxs)("div",{className:"success-icon-wrapper",children:[(0,S.jsx)("div",{className:"success-icon-bg"}),(0,S.jsx)(It.A,{className:"success-icon"})]}),(0,S.jsx)("h1",{className:"success-title",children:"\u062a\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0628\u0646\u062c\u0627\u062d!"}),(0,S.jsx)("p",{className:"success-message",children:"\u0634\u0643\u0631\u0627\u064b \u0644\u0643 \u0639\u0644\u0649 \u0625\u0643\u0645\u0627\u0644 \u0627\u0644\u062a\u0633\u062c\u064a\u0644. \u0633\u064a\u062a\u0645 \u0645\u0631\u0627\u062c\u0639\u0629 \u0637\u0644\u0628\u0643 \u0648\u0627\u0644\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0643 \u0642\u0631\u064a\u0628\u0627\u064b."}),(0,S.jsxs)("div",{className:"success-details",children:[(0,S.jsxs)("div",{className:"detail-item",children:[(0,S.jsx)("span",{className:"detail-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0631\u062c\u0639:"}),(0,S.jsxs)("span",{className:"detail-value",children:["REG-2024-",Math.random().toString(36).substr(2,9).toUpperCase()]})]}),(0,S.jsxs)("div",{className:"detail-item",children:[(0,S.jsx)("span",{className:"detail-label",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,S.jsx)("span",{className:"detail-value",children:(new Date).toLocaleDateString("ar-SA")})]})]}),(0,S.jsx)("div",{className:"success-actions",children:(0,S.jsx)("button",{className:"primary-button",onClick:()=>window.location.href="/",children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0635\u0641\u062d\u0629 \u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629"})})]}):(0,S.jsxs)("div",{className:"apple-registration-container",children:[(0,S.jsxs)("header",{className:"premium-header",children:[(0,S.jsxs)("div",{className:"header-background",children:[(0,S.jsx)("div",{className:"gradient-overlay"}),(0,S.jsx)("div",{className:"particle-effect"})]}),(0,S.jsxs)("div",{className:"header-content",children:[(0,S.jsxs)("div",{className:"logo-section",children:[(0,S.jsx)("div",{className:"logo-wrapper",children:(0,S.jsx)(E.A,{className:"logo-icon"})}),(0,S.jsxs)("div",{className:"logo-text",children:[(0,S.jsx)("h1",{className:"logo-title",children:"\u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644"}),(0,S.jsx)("p",{className:"logo-subtitle",children:"\u0646\u0638\u0627\u0645 \u0627\u0644\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"})]})]}),(0,S.jsxs)("div",{className:"header-info",children:[(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)(Bt.A,{className:"info-icon"}),(0,S.jsx)("span",{children:"\u062a\u0633\u062c\u064a\u0644 \u0622\u0645\u0646 \u0648\u0645\u0634\u0641\u0631"})]}),(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)(It.A,{className:"info-icon"}),(0,S.jsx)("span",{children:"\u0645\u0639\u062a\u0645\u062f \u0645\u0646 \u0627\u0644\u0625\u062f\u0627\u0631\u0629"})]})]})]})]}),(0,S.jsx)("div",{className:"step-indicator-container",children:(0,S.jsx)("div",{className:"step-indicator",children:[...Array(5)].map((a,n)=>{const i=f[n],r=n+1===e,l=n+1<e;return(0,S.jsxs)(s.Fragment,{children:[(0,S.jsxs)("div",{className:"step-item ".concat(r?"active":""," ").concat(l?"completed":""),onClick:()=>l&&t(n+1),children:[(0,S.jsx)("div",{className:"step-icon",children:l?(0,S.jsx)(It.A,{className:"w-6 h-6"}):(0,S.jsx)(i,{className:"w-5 h-5"})}),(0,S.jsx)("span",{className:"step-label",children:j[n]})]}),n<4&&(0,S.jsx)("div",{className:"step-line ".concat(n+1<e?"completed":"")})]},n)})})}),(0,S.jsx)("div",{className:"form-container",ref:b,children:(0,S.jsxs)("div",{className:"form-wrapper",children:[r.length>0&&(0,S.jsxs)("div",{className:"error-banner animate-shake",children:[(0,S.jsx)(ee.A,{className:"error-icon"}),(0,S.jsx)("div",{className:"error-messages",children:r.map((e,t)=>(0,S.jsx)("p",{className:"error-message",children:e.message},t))})]}),1===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-in",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)(kt.A,{className:"section-icon"}),(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u064a\u0631\u062c\u0649 \u0625\u062f\u062e\u0627\u0644 \u0645\u0639\u0644\u0648\u0645\u0627\u062a\u0643 \u0627\u0644\u0634\u062e\u0635\u064a\u0629 \u0628\u062f\u0642\u0629"})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(kt.A,{className:"label-icon"}),"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"fullName"===e.field)?"error":""),placeholder:"\u0623\u062f\u062e\u0644 \u0627\u0633\u0645\u0643 \u0627\u0644\u0643\u0627\u0645\u0644",value:a.fullName,onChange:e=>v("fullName",e.target.value),onFocus:()=>g("fullName"),onBlur:()=>g("")}),"fullName"===u&&(0,S.jsx)("div",{className:"field-hint",children:"\u0627\u0644\u0627\u0633\u0645 \u0643\u0645\u0627 \u0647\u0648 \u0645\u0633\u062c\u0644 \u0641\u064a \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(_t.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"nationalId"===e.field)?"error":""),placeholder:"1234567890",maxLength:10,value:a.nationalId,onChange:e=>v("nationalId",e.target.value.replace(/\D/g,"")),onFocus:()=>g("nationalId"),onBlur:()=>g("")}),"nationalId"===u&&(0,S.jsx)("div",{className:"field-hint",children:"10 \u0623\u0631\u0642\u0627\u0645 \u0628\u062f\u0648\u0646 \u0623\u064a \u0631\u0645\u0648\u0632"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(Ct.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"tel",className:"input-field ".concat(r.find(e=>"phone"===e.field)?"error":""),placeholder:"05XXXXXXXX",maxLength:10,value:a.phone,onChange:e=>v("phone",e.target.value.replace(/\D/g,"")),onFocus:()=>g("phone"),onBlur:()=>g(""),dir:"ltr"}),"phone"===u&&(0,S.jsx)("div",{className:"field-hint",children:"\u0631\u0642\u0645 \u062c\u0648\u0627\u0644 \u0633\u0639\u0648\u062f\u064a \u064a\u0628\u062f\u0623 \u0628\u0640 05"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(je.A,{className:"label-icon"}),"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"email",className:"input-field",placeholder:"example@domain.com",value:a.email,onChange:e=>v("email",e.target.value),onFocus:()=>g("email"),onBlur:()=>g(""),dir:"ltr"}),"email"===u&&(0,S.jsx)("div",{className:"field-hint",children:"\u0627\u062e\u062a\u064a\u0627\u0631\u064a - \u0644\u0644\u062a\u0648\u0627\u0635\u0644 \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(V.A,{className:"label-icon"}),"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"date",className:"input-field",value:a.birthDate,onChange:e=>v("birthDate",e.target.value),onFocus:()=>g("birthDate"),onBlur:()=>g("")}),"birthDate"===u&&(0,S.jsx)("div",{className:"field-hint",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f\u064a"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(V.A,{className:"label-icon"}),"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0645\u064a\u0644\u0627\u062f \u0627\u0644\u0647\u062c\u0631\u064a"]}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"1445/01/01",value:a.birthDateHijri,onChange:e=>v("birthDateHijri",e.target.value),onFocus:()=>g("birthDateHijri"),onBlur:()=>g(""),dir:"ltr"}),"birthDateHijri"===u&&(0,S.jsx)("div",{className:"field-hint",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0647\u062c\u0631\u064a \u0628\u0635\u064a\u063a\u0629: \u0633\u0646\u0629/\u0634\u0647\u0631/\u064a\u0648\u0645"})]})]})]}),(0,S.jsxs)("div",{className:"document-upload-section",children:[(0,S.jsxs)("h3",{className:"upload-title",children:[(0,S.jsx)(Tt.A,{className:"w-5 h-5"}),"\u0631\u0641\u0639 \u0627\u0644\u0645\u0633\u062a\u0646\u062f\u0627\u062a"]}),(0,S.jsxs)("div",{className:"upload-grid",children:[(0,S.jsxs)("div",{className:"upload-card",children:[(0,S.jsx)("input",{type:"file",id:"nationalIdDoc",accept:"image/*,.pdf",onChange:e=>{var t;return v("nationalIdDocument",null===(t=e.target.files)||void 0===t?void 0:t[0])},className:"hidden"}),(0,S.jsxs)("label",{htmlFor:"nationalIdDoc",className:"upload-label",children:[(0,S.jsx)(c.A,{className:"upload-icon"}),(0,S.jsx)("span",{className:"upload-text",children:"\u0635\u0648\u0631\u0629 \u0627\u0644\u0647\u0648\u064a\u0629 \u0627\u0644\u0648\u0637\u0646\u064a\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"PNG, JPG, PDF - \u062d\u062a\u0649 5MB"}),a.nationalIdDocument&&(0,S.jsxs)("div",{className:"upload-success",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),"\u062a\u0645 \u0627\u0644\u0631\u0641\u0639 \u0628\u0646\u062c\u0627\u062d"]})]})]}),(0,S.jsxs)("div",{className:"upload-card",children:[(0,S.jsx)("input",{type:"file",id:"profilePhoto",accept:"image/*",onChange:e=>{var t;return v("profilePhoto",null===(t=e.target.files)||void 0===t?void 0:t[0])},className:"hidden"}),(0,S.jsxs)("label",{htmlFor:"profilePhoto",className:"upload-label",children:[(0,S.jsx)(Tt.A,{className:"upload-icon"}),(0,S.jsx)("span",{className:"upload-text",children:"\u0627\u0644\u0635\u0648\u0631\u0629 \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsx)("span",{className:"upload-hint",children:"PNG, JPG - \u062d\u062a\u0649 2MB"}),a.profilePhoto&&(0,S.jsxs)("div",{className:"upload-success",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),"\u062a\u0645 \u0627\u0644\u0631\u0641\u0639 \u0628\u0646\u062c\u0627\u062d"]})]})]})]})]})]}),2===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-in",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)(l.A,{className:"section-icon"}),(0,S.jsx)("h2",{className:"section-title",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0646\u0648\u0627\u0646"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0639\u0646\u0648\u0627\u0646 \u0627\u0644\u0633\u0643\u0646 \u0627\u0644\u062d\u0627\u0644\u064a"})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(Q.A,{className:"label-icon"}),"\u0627\u0644\u0645\u062f\u064a\u0646\u0629"]}),(0,S.jsxs)("select",{className:"input-field ".concat(r.find(e=>"city"===e.field)?"error":""),value:a.city,onChange:e=>v("city",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u062f\u064a\u0646\u0629"}),(0,S.jsx)("option",{value:"riyadh",children:"\u0627\u0644\u0631\u064a\u0627\u0636"}),(0,S.jsx)("option",{value:"jeddah",children:"\u062c\u062f\u0629"}),(0,S.jsx)("option",{value:"makkah",children:"\u0645\u0643\u0629 \u0627\u0644\u0645\u0643\u0631\u0645\u0629"}),(0,S.jsx)("option",{value:"madinah",children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629 \u0627\u0644\u0645\u0646\u0648\u0631\u0629"}),(0,S.jsx)("option",{value:"dammam",children:"\u0627\u0644\u062f\u0645\u0627\u0645"}),(0,S.jsx)("option",{value:"khobar",children:"\u0627\u0644\u062e\u0628\u0631"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(Q.A,{className:"label-icon"}),"\u0627\u0644\u062d\u064a"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"district"===e.field)?"error":""),placeholder:"\u0627\u0633\u0645 \u0627\u0644\u062d\u064a",value:a.district,onChange:e=>v("district",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(l.A,{className:"label-icon"}),"\u0627\u0644\u0634\u0627\u0631\u0639"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0627\u0631\u0639",value:a.street,onChange:e=>v("street",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(l.A,{className:"label-icon"}),"\u0631\u0642\u0645 \u0627\u0644\u0645\u0628\u0646\u0649"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0631\u0642\u0645 \u0627\u0644\u0645\u0628\u0646\u0649",value:a.buildingNumber,onChange:e=>v("buildingNumber",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(je.A,{className:"label-icon"}),"\u0627\u0644\u0631\u0645\u0632 \u0627\u0644\u0628\u0631\u064a\u062f\u064a"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"12345",maxLength:5,value:a.postalCode,onChange:e=>v("postalCode",e.target.value.replace(/\D/g,"")),dir:"ltr"})]})]}),(0,S.jsx)("div",{className:"map-preview",children:(0,S.jsxs)("div",{className:"map-placeholder",children:[(0,S.jsx)(Q.A,{className:"w-12 h-12 text-gray-400"}),(0,S.jsx)("p",{className:"text-gray-500 mt-2",children:"\u0645\u0648\u0642\u0639 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0639\u0644\u0649 \u0627\u0644\u062e\u0631\u064a\u0637\u0629"})]})})]}),3===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-in",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)(y.A,{className:"section-icon"}),(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0627\u0626\u0644\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0623\u0633\u0631\u0629 \u0648\u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(K.A,{className:"label-icon"}),"\u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0627\u062c\u062a\u0645\u0627\u0639\u064a\u0629"]}),(0,S.jsxs)("select",{className:"input-field ".concat(r.find(e=>"maritalStatus"===e.field)?"error":""),value:a.maritalStatus,onChange:e=>v("maritalStatus",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsx)("option",{value:"single",children:"\u0623\u0639\u0632\u0628"}),(0,S.jsx)("option",{value:"married",children:"\u0645\u062a\u0632\u0648\u062c"}),(0,S.jsx)("option",{value:"divorced",children:"\u0645\u0637\u0644\u0642"}),(0,S.jsx)("option",{value:"widowed",children:"\u0623\u0631\u0645\u0644"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(y.A,{className:"label-icon"}),"\u0639\u062f\u062f \u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"]}),(0,S.jsx)("input",{type:"number",className:"input-field",placeholder:"0",min:"0",value:a.numberOfDependents,onChange:e=>v("numberOfDependents",parseInt(e.target.value)||0)})]})]}),a.numberOfDependents>0&&(0,S.jsxs)("div",{className:"family-members-section",children:[(0,S.jsx)("h3",{className:"subsection-title",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0639\u0627\u0644\u064a\u0646"}),(0,S.jsx)("div",{className:"family-members-grid",children:[...Array(Math.min(a.numberOfDependents,10))].map((e,t)=>(0,S.jsxs)("div",{className:"family-member-card",children:[(0,S.jsxs)("div",{className:"member-header",children:[(0,S.jsx)(kt.A,{className:"w-5 h-5"}),(0,S.jsxs)("span",{children:["\u0627\u0644\u0645\u0639\u0627\u0644 ",t+1]})]}),(0,S.jsxs)("div",{className:"member-fields",children:[(0,S.jsx)("input",{type:"text",className:"input-field small",placeholder:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0643\u0627\u0645\u0644",onChange:e=>{const s=[...a.familyMembers];s[t]||(s[t]={name:"",relationship:"",birthDate:"",nationalId:""}),s[t].name=e.target.value,v("familyMembers",s)}}),(0,S.jsxs)("select",{className:"input-field small",onChange:e=>{const s=[...a.familyMembers];s[t]||(s[t]={name:"",relationship:"",birthDate:"",nationalId:""}),s[t].relationship=e.target.value,v("familyMembers",s)},children:[(0,S.jsx)("option",{value:"",children:"\u0635\u0644\u0629 \u0627\u0644\u0642\u0631\u0627\u0628\u0629"}),(0,S.jsx)("option",{value:"son",children:"\u0627\u0628\u0646"}),(0,S.jsx)("option",{value:"daughter",children:"\u0627\u0628\u0646\u0629"}),(0,S.jsx)("option",{value:"wife",children:"\u0632\u0648\u062c\u0629"}),(0,S.jsx)("option",{value:"parent",children:"\u0648\u0627\u0644\u062f/\u0648\u0627\u0644\u062f\u0629"})]})]})]},t))})]})]}),4===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-in",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)(St.A,{className:"section-icon"}),(0,S.jsx)("h2",{className:"section-title",children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0645\u0647\u0646\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0639\u0645\u0644 \u0648\u0627\u0644\u062a\u0639\u0644\u064a\u0645"})]}),(0,S.jsxs)("div",{className:"form-grid",children:[(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(St.A,{className:"label-icon"}),"\u0627\u0644\u0645\u0647\u0646\u0629"]}),(0,S.jsx)("input",{type:"text",className:"input-field ".concat(r.find(e=>"occupation"===e.field)?"error":""),placeholder:"\u0627\u0644\u0645\u0633\u0645\u0649 \u0627\u0644\u0648\u0638\u064a\u0641\u064a",value:a.occupation,onChange:e=>v("occupation",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(St.A,{className:"label-icon"}),"\u062c\u0647\u0629 \u0627\u0644\u0639\u0645\u0644"]}),(0,S.jsx)("input",{type:"text",className:"input-field",placeholder:"\u0627\u0633\u0645 \u0627\u0644\u0634\u0631\u0643\u0629 \u0623\u0648 \u0627\u0644\u0645\u0624\u0633\u0633\u0629",value:a.employer,onChange:e=>v("employer",e.target.value)})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(h.A,{className:"label-icon"}),"\u0627\u0644\u062f\u062e\u0644 \u0627\u0644\u0634\u0647\u0631\u064a"]}),(0,S.jsxs)("select",{className:"input-field",value:a.monthlyIncome,onChange:e=>v("monthlyIncome",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0646\u0637\u0627\u0642"}),(0,S.jsx)("option",{value:"less-3000",children:"\u0623\u0642\u0644 \u0645\u0646 3,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"3000-5000",children:"3,000 - 5,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"5000-10000",children:"5,000 - 10,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"10000-15000",children:"10,000 - 15,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"15000-20000",children:"15,000 - 20,000 \u0631\u064a\u0627\u0644"}),(0,S.jsx)("option",{value:"more-20000",children:"\u0623\u0643\u062b\u0631 \u0645\u0646 20,000 \u0631\u064a\u0627\u0644"})]})]}),(0,S.jsxs)("div",{className:"input-group",children:[(0,S.jsxs)("label",{className:"input-label",children:[(0,S.jsx)(ne.A,{className:"label-icon"}),"\u0627\u0644\u0645\u0633\u062a\u0648\u0649 \u0627\u0644\u062a\u0639\u0644\u064a\u0645\u064a"]}),(0,S.jsxs)("select",{className:"input-field",value:a.educationLevel,onChange:e=>v("educationLevel",e.target.value),children:[(0,S.jsx)("option",{value:"",children:"\u0627\u062e\u062a\u0631 \u0627\u0644\u0645\u0633\u062a\u0648\u0649"}),(0,S.jsx)("option",{value:"primary",children:"\u0627\u0628\u062a\u062f\u0627\u0626\u064a"}),(0,S.jsx)("option",{value:"intermediate",children:"\u0645\u062a\u0648\u0633\u0637"}),(0,S.jsx)("option",{value:"secondary",children:"\u062b\u0627\u0646\u0648\u064a"}),(0,S.jsx)("option",{value:"diploma",children:"\u062f\u0628\u0644\u0648\u0645"}),(0,S.jsx)("option",{value:"bachelor",children:"\u0628\u0643\u0627\u0644\u0648\u0631\u064a\u0648\u0633"}),(0,S.jsx)("option",{value:"master",children:"\u0645\u0627\u062c\u0633\u062a\u064a\u0631"}),(0,S.jsx)("option",{value:"phd",children:"\u062f\u0643\u062a\u0648\u0631\u0627\u0647"})]})]})]})]}),5===e&&(0,S.jsxs)("div",{className:"form-section animate-slide-in",children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)(c.A,{className:"section-icon"}),(0,S.jsx)("h2",{className:"section-title",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629"}),(0,S.jsx)("p",{className:"section-subtitle",children:"\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0635\u062d\u064a\u0629 \u0648\u0627\u062d\u062a\u064a\u0627\u062c\u0627\u062a \u062e\u0627\u0635\u0629"})]}),(0,S.jsxs)("div",{className:"checkbox-group",children:[(0,S.jsxs)("label",{className:"checkbox-label",children:[(0,S.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:a.hasHealthConditions,onChange:e=>v("hasHealthConditions",e.target.checked)}),(0,S.jsxs)("span",{className:"checkbox-text",children:[(0,S.jsx)(me.A,{className:"w-5 h-5"}),"\u0644\u062f\u064a \u062d\u0627\u0644\u0629 \u0635\u062d\u064a\u0629 \u062a\u062a\u0637\u0644\u0628 \u0631\u0639\u0627\u064a\u0629 \u062e\u0627\u0635\u0629"]})]}),a.hasHealthConditions&&(0,S.jsx)("div",{className:"conditional-field",children:(0,S.jsx)("textarea",{className:"input-field textarea",placeholder:"\u064a\u0631\u062c\u0649 \u062a\u0648\u0636\u064a\u062d \u0627\u0644\u062d\u0627\u0644\u0629 \u0627\u0644\u0635\u062d\u064a\u0629...",rows:3,value:a.healthConditions||"",onChange:e=>v("healthConditions",e.target.value)})})]}),(0,S.jsxs)("div",{className:"checkbox-group",children:[(0,S.jsxs)("label",{className:"checkbox-label",children:[(0,S.jsx)("input",{type:"checkbox",className:"checkbox-input",checked:a.needsAssistance,onChange:e=>v("needsAssistance",e.target.checked)}),(0,S.jsxs)("span",{className:"checkbox-text",children:[(0,S.jsx)(K.A,{className:"w-5 h-5"}),"\u0623\u062d\u062a\u0627\u062c \u0625\u0644\u0649 \u0645\u0633\u0627\u0639\u062f\u0629 \u0645\u0646 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"]})]}),a.needsAssistance&&(0,S.jsx)("div",{className:"conditional-field",children:(0,S.jsx)("textarea",{className:"input-field textarea",placeholder:"\u064a\u0631\u062c\u0649 \u062a\u0648\u0636\u064a\u062d \u0646\u0648\u0639 \u0627\u0644\u0645\u0633\u0627\u0639\u062f\u0629 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629...",rows:3,value:a.assistanceType||"",onChange:e=>v("assistanceType",e.target.value)})})]}),(0,S.jsxs)("div",{className:"summary-section",children:[(0,S.jsxs)("h3",{className:"summary-title",children:[(0,S.jsx)(D.A,{className:"w-5 h-5"}),"\u0645\u0644\u062e\u0635 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"]}),(0,S.jsxs)("div",{className:"summary-grid",children:[(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u0627\u0633\u0645:"}),(0,S.jsx)("span",{className:"summary-value",children:a.fullName||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0648\u064a\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.nationalId||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644:"}),(0,S.jsx)("span",{className:"summary-value",children:a.phone||"---"})]}),(0,S.jsxs)("div",{className:"summary-item",children:[(0,S.jsx)("span",{className:"summary-label",children:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629:"}),(0,S.jsx)("span",{className:"summary-value",children:a.city||"---"})]})]})]})]}),(0,S.jsxs)("div",{className:"form-navigation",children:[e>1&&(0,S.jsx)("button",{className:"secondary-button",onClick:()=>{t(e=>Math.max(e-1,1)),window.scrollTo({top:0,behavior:"smooth"})},disabled:d,children:"\u0627\u0644\u0633\u0627\u0628\u0642"}),e<5?(0,S.jsxs)("button",{className:"primary-button",onClick:()=>{N(e)&&(t(e=>Math.min(e+1,5)),window.scrollTo({top:0,behavior:"smooth"}))},disabled:d,children:[(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0627\u0644\u064a"}),(0,S.jsx)(Dt.A,{className:"button-icon"})]}):(0,S.jsx)("button",{className:"primary-button ".concat(d?"loading":""),onClick:async()=>{if(N(e)){p(!0);try{await new Promise(e=>setTimeout(e,2e3)),m(!0),localStorage.removeItem("registrationFormData"),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},500)}catch(t){console.error("Submission error:",t)}finally{p(!1)}}},disabled:d,children:d?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"button-spinner"}),(0,S.jsx)("span",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{children:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u0637\u0644\u0628"}),(0,S.jsx)(Rt.A,{className:"button-icon"})]})})]})]})})]})},Pa=e=>{let{message:t,type:a="info",duration:s=4e3}=e;const n=document.getElementById("custom-toast");n&&n.remove();const i=document.createElement("div");i.id="custom-toast",i.style.cssText="\n    position: fixed;\n    top: 20px;\n    left: 50%;\n    transform: translateX(-50%) translateY(-100px);\n    background: ".concat({success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"}[a],";\n    color: white;\n    padding: 16px 24px;\n    border-radius: 12px;\n    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);\n    backdrop-filter: blur(10px);\n    z-index: 10001;\n    max-width: 400px;\n    font-family: 'Cairo', sans-serif;\n    direction: rtl;\n    text-align: center;\n    font-size: 16px;\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 12px;\n    transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55), opacity 0.3s ease;\n    opacity: 0;\n  "),i.innerHTML='\n    <span style="font-size: 20px; font-weight: 700;">'.concat({success:"\u2713",error:"\u2715",warning:"\u26a0",info:"\u2139"}[a],"</span>\n    <span>").concat(t,"</span>\n  "),document.body.appendChild(i),requestAnimationFrame(()=>{i.style.transform="translateX(-50%) translateY(0)",i.style.opacity="1"}),setTimeout(()=>{i.style.transform="translateX(-50%) translateY(-100px)",i.style.opacity="0",setTimeout(()=>i.remove(),300)},s)};var La=a(8372);const Ma=()=>{const[e,t]=(0,s.useState)(""),[a,n]=(0,s.useState)(""),[i,l]=(0,s.useState)(!1),[o,c]=(0,s.useState)(!1),[d,p]=(0,s.useState)(""),[x,m]=(0,s.useState)(!1),[h,u]=(0,s.useState)(""),g=(0,r.Zp)();(0,s.useEffect)(()=>{(async()=>{const e=await(async()=>!1)(),t="true"===localStorage.getItem("biometric_enabled");m(e&&t),e&&u("\u0627\u0644\u0628\u0635\u0645\u0629")})()},[]);return(0,S.jsxs)("div",{className:"mobile-login-container",children:[(0,S.jsx)("div",{className:"mobile-login-bg"}),(0,S.jsxs)(ra.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mobile-login-card",children:[(0,S.jsxs)("div",{className:"mobile-login-header",children:[(0,S.jsx)("div",{className:"logo-circle",children:(0,S.jsx)("span",{className:"logo-text",children:"\u0627\u0644\u0634\u0639\u064a\u0644"})}),(0,S.jsx)("h1",{className:"login-title",children:"\u0646\u0638\u0627\u0645 \u0625\u062f\u0627\u0631\u0629 \u0627\u0644\u0639\u0627\u0626\u0644\u0629"}),(0,S.jsx)("p",{className:"login-subtitle",children:"Al-Shuail Family Management"})]}),d&&(0,S.jsxs)(ra.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"error-box",children:["\u26a0\ufe0f ",d]}),x&&(0,S.jsxs)(ra.P.button,{initial:{opacity:0},animate:{opacity:1},onClick:async()=>{c(!0),p("");try{const e=await(async()=>({success:!1,error:"\u0642\u0631\u064a\u0628\u0627\u064b"}))();if(!e.success)throw new Error(e.error||"\u0641\u0634\u0644 \u0627\u0644\u062a\u062d\u0642\u0642 \u0627\u0644\u0628\u064a\u0648\u0645\u062a\u0631\u064a");const t=localStorage.getItem("token"),a=localStorage.getItem("user");if(!t||!a)throw new Error("\u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0628\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0623\u0648\u0644\u0627\u064b");g("/mobile/dashboard")}catch(e){p(e.message)}finally{c(!1)}},className:"biometric-button",disabled:o,whileTap:{scale:.95},children:[(0,S.jsx)("span",{className:"biometric-icon",children:"Face ID"===h?"\ud83d\udd10":"\ud83d\udc46"}),(0,S.jsxs)("span",{children:["\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644 \u0628",h]})]}),x&&(0,S.jsx)("div",{className:"divider",children:"\u0623\u0648"}),(0,S.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),c(!0),p("");try{var s,n;const t="http://localhost:3001",i=await fetch("".concat(t,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,password:a})}),r=await i.json();if(!i.ok)throw new Error(r.message_ar||r.error||"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644");localStorage.setItem("token",(null===(s=r.data)||void 0===s?void 0:s.token)||r.token),localStorage.setItem("user",JSON.stringify((null===(n=r.data)||void 0===n?void 0:n.user)||r.user)),r.requires_password_change||r.is_first_login?g("/mobile/change-password",{state:{isFirstLogin:r.is_first_login}}):g("/mobile/dashboard")}catch(i){p(i.message)}finally{c(!1)}},className:"login-form",children:[(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(Ct.A,{className:"input-icon"}),(0,S.jsx)("input",{type:"tel",value:e,onChange:e=>t(e.target.value),placeholder:"05xxxxxxxx",required:!0,dir:"ltr",className:"form-input",inputMode:"numeric"})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)(La.A,{className:"input-icon"}),(0,S.jsx)("input",{type:i?"text":"password",value:a,onChange:e=>n(e.target.value),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",required:!0,className:"form-input",dir:"ltr"}),(0,S.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>l(!i),children:i?(0,S.jsx)(ye.A,{className:"eye-icon"}):(0,S.jsx)(M.A,{className:"eye-icon"})})]})]}),(0,S.jsx)(ra.P.button,{type:"submit",className:"login-button",disabled:o,whileTap:{scale:.98},children:o?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{className:"spinner"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0642\u0642..."]}):(0,S.jsx)(S.Fragment,{children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"})})]}),(0,S.jsxs)("div",{className:"help-section",children:[(0,S.jsxs)("p",{className:"help-text",children:["\ud83d\udd12 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u0627\u0641\u062a\u0631\u0627\u0636\u064a\u0629: ",(0,S.jsx)("strong",{children:"123456"})]}),(0,S.jsx)("p",{className:"help-subtext",children:"\u0633\u062a\u064f\u0637\u0644\u0628 \u0645\u0646\u0643 \u062a\u063a\u064a\u064a\u0631\u0647\u0627 \u0639\u0646\u062f \u0623\u0648\u0644 \u062f\u062e\u0648\u0644"})]}),(0,S.jsx)("div",{className:"login-footer",children:(0,S.jsx)("p",{children:"\xa9 2025 \u0639\u0627\u0626\u0644\u0629 \u0627\u0644\u0634\u0639\u064a\u0644 - \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629"})})]})]})},Wa=()=>{var e;const[t,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(""),[l,o]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[p,x]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!1),[u,g]=(0,s.useState)(!1),[b,j]=(0,s.useState)(""),[f,y]=(0,s.useState)(0),v=(0,r.Zp)(),N=(null===(e=(0,r.zy)().state)||void 0===e?void 0:e.isFirstLogin)||!1,w=()=>f<50?"#FF3B30":f<75?"#FF9500":"#34C759";return(0,S.jsx)("div",{className:"change-password-container",children:(0,S.jsxs)(ra.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"change-password-card",children:[(0,S.jsxs)("div",{className:"header-section",children:[(0,S.jsx)("div",{className:"icon-wrapper",children:(0,S.jsx)(La.A,{className:"lock-icon"})}),(0,S.jsx)("h1",{className:"title",children:N?"\u0645\u0631\u062d\u0628\u0627\u064b \u0628\u0643! \ud83d\udc4b":"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,S.jsx)("p",{className:"subtitle",children:N?"\u0647\u0630\u0627 \u0647\u0648 \u062f\u062e\u0648\u0644\u0643 \u0627\u0644\u0623\u0648\u0644. \u0627\u0644\u0631\u062c\u0627\u0621 \u062a\u0639\u064a\u064a\u0646 \u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0642\u0648\u064a\u0629 \u0648\u0622\u0645\u0646\u0629.":"\u0642\u0645 \u0628\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062e\u0627\u0635\u0629 \u0628\u0643"})]}),N&&(0,S.jsxs)("div",{className:"info-box",children:[(0,S.jsx)(D.A,{className:"info-icon"}),(0,S.jsxs)("div",{children:[(0,S.jsx)("p",{className:"info-title",children:"\u0646\u0635\u0627\u0626\u062d \u0644\u0643\u0644\u0645\u0629 \u0645\u0631\u0648\u0631 \u0642\u0648\u064a\u0629:"}),(0,S.jsxs)("ul",{className:"info-list",children:[(0,S.jsx)("li",{children:"\u0627\u0633\u062a\u062e\u062f\u0645 8 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"}),(0,S.jsx)("li",{children:"\u0627\u0645\u0632\u062c \u0628\u064a\u0646 \u0627\u0644\u0623\u062d\u0631\u0641 \u0627\u0644\u0643\u0628\u064a\u0631\u0629 \u0648\u0627\u0644\u0635\u063a\u064a\u0631\u0629"}),(0,S.jsx)("li",{children:"\u0623\u0636\u0641 \u0623\u0631\u0642\u0627\u0645\u0627\u064b \u0648\u0631\u0645\u0648\u0632\u0627\u064b \u062e\u0627\u0635\u0629"}),(0,S.jsx)("li",{children:"\u0644\u0627 \u062a\u0633\u062a\u062e\u062f\u0645 \u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0634\u062e\u0635\u064a\u0629"})]})]})]}),b&&(0,S.jsxs)(ra.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"error-message",children:[(0,S.jsx)(B.A,{className:"error-icon"}),b]}),(0,S.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g(!0),j(""),n!==l)return j("\u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629"),void g(!1);const a=(e=>{const t=[];return e.length<8&&t.push("8 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644"),/[A-Z]/.test(e)||t.push("\u062d\u0631\u0641 \u0643\u0628\u064a\u0631"),/[a-z]/.test(e)||t.push("\u062d\u0631\u0641 \u0635\u063a\u064a\u0631"),/[0-9]/.test(e)||t.push("\u0631\u0642\u0645"),/[@$!%*?&#]/.test(e)||t.push("\u0631\u0645\u0632 \u062e\u0627\u0635"),t})(n);if(a.length>0)return j("\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0636\u0639\u064a\u0641\u0629. \u064a\u062c\u0628 \u0623\u0646 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649: ".concat(a.join("\u060c "))),void g(!1);try{const e=localStorage.getItem("token"),a="http://localhost:3001",s=await fetch("".concat(a,"/api/auth/change-password"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)},body:JSON.stringify({current_password:N?"123456":t,new_password:n})}),i=await s.json();if(!s.ok)throw new Error(i.message_ar||"\u0641\u0634\u0644 \u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631");alert("\u2705 \u062a\u0645 \u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0628\u0646\u062c\u0627\u062d!"),v("/mobile/dashboard")}catch(s){j(s.message)}finally{g(!1)}},className:"password-form",children:[!N&&(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:c?"text":"password",value:t,onChange:e=>a(e.target.value),required:!0,className:"form-input",placeholder:"\u0623\u062f\u062e\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062d\u0627\u0644\u064a\u0629",dir:"ltr"}),(0,S.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>d(!c),children:c?(0,S.jsx)(ye.A,{className:"eye-icon"}):(0,S.jsx)(M.A,{className:"eye-icon"})})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u0627\u0644\u062c\u062f\u064a\u062f\u0629"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:p?"text":"password",value:n,onChange:e=>{return t=e.target.value,i(t),void y((e=>{let t=0;return e.length>=8&&(t+=25),/[a-z]/.test(e)&&(t+=25),/[A-Z]/.test(e)&&(t+=25),/[0-9]/.test(e)&&(t+=12.5),/[@$!%*?&#]/.test(e)&&(t+=12.5),t})(t));var t},required:!0,className:"form-input",placeholder:"8 \u0623\u062d\u0631\u0641 \u0639\u0644\u0649 \u0627\u0644\u0623\u0642\u0644",dir:"ltr"}),(0,S.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>x(!p),children:p?(0,S.jsx)(ye.A,{className:"eye-icon"}):(0,S.jsx)(M.A,{className:"eye-icon"})})]}),n&&(0,S.jsxs)("div",{className:"password-strength",children:[(0,S.jsx)("div",{className:"strength-bar",children:(0,S.jsx)("div",{className:"strength-fill",style:{width:"".concat(f,"%"),backgroundColor:w()}})}),(0,S.jsx)("span",{className:"strength-text",style:{color:w()},children:f<50?"\u0636\u0639\u064a\u0641\u0629":f<75?"\u0645\u062a\u0648\u0633\u0637\u0629":"\u0642\u0648\u064a\u0629"})]}),(0,S.jsx)("small",{className:"hint",children:"\u064a\u062c\u0628 \u0623\u0646 \u062a\u062d\u062a\u0648\u064a \u0639\u0644\u0649: \u062d\u0631\u0648\u0641 \u0643\u0628\u064a\u0631\u0629\u060c \u0635\u063a\u064a\u0631\u0629\u060c \u0623\u0631\u0642\u0627\u0645\u060c \u0648\u0631\u0645\u0648\u0632 \u062e\u0627\u0635\u0629 (@$!%*?&#)"})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u062a\u0623\u0643\u064a\u062f \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,S.jsxs)("div",{className:"input-wrapper",children:[(0,S.jsx)("input",{type:m?"text":"password",value:l,onChange:e=>o(e.target.value),required:!0,className:"form-input",placeholder:"\u0623\u0639\u062f \u0625\u062f\u062e\u0627\u0644 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",dir:"ltr"}),(0,S.jsx)("button",{type:"button",className:"toggle-password",onClick:()=>h(!m),children:m?(0,S.jsx)(ye.A,{className:"eye-icon"}):(0,S.jsx)(M.A,{className:"eye-icon"})})]}),l&&n!==l&&(0,S.jsx)("small",{className:"error-hint",children:"\u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u063a\u064a\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629"}),l&&n===l&&(0,S.jsx)("small",{className:"success-hint",children:"\u2713 \u0643\u0644\u0645\u0627\u062a \u0627\u0644\u0645\u0631\u0648\u0631 \u0645\u062a\u0637\u0627\u0628\u0642\u0629"})]}),(0,S.jsx)("button",{type:"submit",className:"submit-button",disabled:u||f<100,children:u?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("span",{className:"spinner"}),"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u063a\u064a\u064a\u0631..."]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(La.A,{className:"btn-icon"}),N?"\u062a\u0639\u064a\u064a\u0646 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631":"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"]})})]}),(0,S.jsx)("div",{className:"security-note",children:(0,S.jsx)("p",{children:"\ud83d\udd12 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631 \u064a\u062a\u0645 \u062a\u0634\u0641\u064a\u0631\u0647\u0627 \u0648\u062d\u0641\u0638\u0647\u0627 \u0628\u0634\u0643\u0644 \u0622\u0645\u0646"})})]})})};var Oa=a(6737),qa=a(4995),Ha=a(3655),Ua=a(9253),Xa=a(8571);const Ya=e=>{let{unreadNotifications:t=0}=e;const a=(0,r.Zp)(),s=(0,r.zy)(),n=[{path:"/mobile/dashboard",label:"\u0627\u0644\u0631\u0626\u064a\u0633\u064a\u0629",Icon:l.A,IconSolid:qa.A},{path:"/mobile/payment",label:"\u0627\u0644\u062f\u0641\u0639",Icon:m.A,IconSolid:Ha.A},{path:"/mobile/notifications",label:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a",Icon:j.A,IconSolid:Ua.A,badge:t},{path:"/mobile/profile",label:"\u0627\u0644\u0645\u0644\u0641",Icon:kt.A,IconSolid:Xa.A}];return(0,S.jsx)("nav",{className:"bottom-nav",children:(0,S.jsx)("div",{className:"bottom-nav-container",children:n.map(e=>{const t=(n=e.path,s.pathname===n);var n;const i=t?e.IconSolid:e.Icon;return(0,S.jsxs)(ra.P.button,{className:"nav-item ".concat(t?"active":""),onClick:()=>a(e.path),whileTap:{scale:.9},children:[(0,S.jsxs)("div",{className:"nav-icon-wrapper",children:[(0,S.jsx)(i,{className:"nav-icon"}),e.badge>0&&(0,S.jsx)(ra.P.span,{initial:{scale:0},animate:{scale:1},className:"nav-badge",children:e.badge>99?"99+":e.badge})]}),(0,S.jsx)("span",{className:"nav-label",children:e.label}),t&&(0,S.jsx)(ra.P.div,{layoutId:"activeIndicator",className:"active-indicator"})]},e.path)})})})},Ja=()=>{try{const e=new Date;return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(e)}catch(e){return""}},Ga=()=>{const e=(0,r.Zp)(),[t,a]=(0,s.useState)(null),[n,i]=(0,s.useState)({current:0,target:3e3,percentage:0,is_compliant:!1}),[l,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[p,x]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!1);(0,s.useEffect)(()=>{u()},[]);const u=async()=>{try{x(!0);const e=localStorage.getItem("token"),t="http://localhost:3001",s=await fetch("".concat(t,"/api/member/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();a(e)}const n=await fetch("".concat(t,"/api/member/balance"),{headers:{Authorization:"Bearer ".concat(e)}});if(n.ok){const e=await n.json();i(e)}const r=await fetch("".concat(t,"/api/member/payments?limit=5"),{headers:{Authorization:"Bearer ".concat(e)}});if(r.ok){const e=await r.json();o(e)}const l=await fetch("".concat(t,"/api/member/notifications?limit=3"),{headers:{Authorization:"Bearer ".concat(e)}});if(l.ok){const e=await l.json();d(e)}}catch(e){console.error("Error fetching dashboard data:",e)}finally{x(!1)}},g={news:"\u0623\u062e\u0628\u0627\u0631",occasions:"\u0645\u0646\u0627\u0633\u0628\u0627\u062a",diyas:"\u062f\u064a\u0627\u062a",initiatives:"\u0645\u0628\u0627\u062f\u0631\u0627\u062a",condolences:"\u062a\u0639\u0627\u0632\u064a"};return p?(0,S.jsxs)("div",{className:"mobile-loading",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u062a\u062d\u0645\u064a\u0644..."})]}):(0,S.jsxs)("div",{className:"mobile-dashboard",children:[(0,S.jsxs)("div",{className:"dashboard-header",children:[(0,S.jsx)("div",{className:"greeting-text",children:"\u0627\u0644\u0633\u0644\u0627\u0645 \u0639\u0644\u064a\u0643\u0645 \u0648\u0631\u062d\u0645\u0629 \u0627\u0644\u0644\u0647"}),(0,S.jsx)("div",{className:"member-name",children:(null===t||void 0===t?void 0:t.full_name)||"\u0623\u062d\u0645\u062f \u0645\u062d\u0645\u062f \u0627\u0644\u0634\u0639\u064a\u0644"}),(0,S.jsxs)("div",{className:"hijri-date-card",children:[(0,S.jsxs)("div",{className:"hijri-date-main",children:[(0,S.jsx)("span",{className:"hijri-icon",children:"\ud83c\udf19"}),(0,S.jsx)("span",{children:Ja()})]}),(0,S.jsx)("div",{className:"gregorian-date-sub",children:(new Date).toLocaleDateString("ar-SA")})]})]}),(0,S.jsxs)(ra.P.div,{className:"balance-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[(0,S.jsxs)("div",{className:"balance-header",children:[(0,S.jsx)("h3",{children:"\ud83d\udcb0 \u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,S.jsx)("span",{className:"status-badge ".concat(n.is_compliant?"compliant":"insufficient"),children:n.is_compliant?"\ud83d\udfe2 \u0645\u0644\u062a\u0632\u0645":"\u26a0 \u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645"})]}),(0,S.jsxs)("div",{className:"progress-container",children:[(0,S.jsx)("div",{className:"progress-bar",children:(0,S.jsx)("div",{className:"progress-fill ".concat(n.is_compliant?"":"insufficient"),style:{width:"".concat(Math.min(n.percentage,100),"%")}})}),(0,S.jsxs)("div",{className:"progress-text",children:[n.percentage,"%"]})]}),(0,S.jsxs)("div",{className:"balance-amounts",children:[(0,S.jsxs)("div",{className:"balance-item",children:[(0,S.jsx)("span",{className:"amount-label",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,S.jsxs)("span",{className:"amount-value",children:[n.current.toLocaleString("ar-SA")," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("div",{className:"balance-item",children:[(0,S.jsx)("span",{className:"amount-label",children:"\u0627\u0644\u0645\u0637\u0644\u0648\u0628"}),(0,S.jsxs)("span",{className:"amount-value target-value",children:[n.target.toLocaleString("ar-SA")," \u0631\u064a\u0627\u0644"]})]})]}),!n.is_compliant&&(0,S.jsxs)("div",{className:"remaining-alert",children:["\u0627\u0644\u0645\u0628\u0644\u063a \u0627\u0644\u0645\u062a\u0628\u0642\u064a: ",(n.target-n.current).toLocaleString("ar-SA")," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("div",{className:"quick-actions",children:[(0,S.jsx)("h4",{children:"\u0627\u0644\u0625\u062c\u0631\u0627\u0621\u0627\u062a \u0627\u0644\u0633\u0631\u064a\u0639\u0629"}),(0,S.jsx)("div",{className:"actions-grid",children:[{id:"payment",title:"\u062f\u0641\u0639 \u0627\u0634\u062a\u0631\u0627\u0643",emoji:"\ud83d\udcb5",route:"/mobile/payment"},{id:"history",title:"\u0633\u062c\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a",emoji:"\ud83d\udcca",route:"/mobile/payment-history"},{id:"profile",title:"\u0645\u0644\u0641\u064a \u0627\u0644\u0634\u062e\u0635\u064a",emoji:"\ud83d\udc64",route:"/mobile/profile"},{id:"contact",title:"\u062a\u0648\u0627\u0635\u0644 \u0645\u0639\u0646\u0627",emoji:"\ud83d\udcf1",route:"/mobile/contact"}].map((t,a)=>(0,S.jsxs)(ra.P.button,{className:"action-btn ".concat(0===a?"primary":""),onClick:()=>e(t.route),initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2+.05*a},children:[(0,S.jsx)("span",{className:"button-icon",children:t.emoji}),(0,S.jsx)("span",{className:"button-text",children:t.title})]},t.id))})]}),c.length>0&&(0,S.jsxs)(ra.P.div,{className:"notifications-preview",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("h4",{children:"\u0622\u062e\u0631 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"}),(0,S.jsx)("button",{className:"see-all-btn",onClick:()=>e("/mobile/notifications"),children:"\u0639\u0631\u0636 \u0627\u0644\u0643\u0644"})]}),(0,S.jsx)("div",{className:"notifications-list",children:c.slice(0,3).map(e=>(0,S.jsxs)("div",{className:"notification-item ".concat(e.is_read?"read":"unread"),children:[(0,S.jsx)("div",{className:"notification-type",children:g[e.type]}),(0,S.jsxs)("div",{className:"notification-content",children:[(0,S.jsx)("h5",{children:e.title}),(0,S.jsx)("p",{children:e.message}),(0,S.jsx)("span",{className:"notification-date",children:new Date(e.date).toLocaleDateString("ar-SA")})]})]},e.id))})]}),(0,S.jsxs)(ra.P.div,{className:"recent-payments",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[(0,S.jsxs)("div",{className:"section-header",children:[(0,S.jsx)("h4",{children:"\u0622\u062e\u0631 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("button",{className:"toggle-btn",onClick:()=>h(!m),children:(0,S.jsx)(Oa.A,{className:"arrow-icon ".concat(m?"rotated":"")})})]}),m&&(0,S.jsxs)("div",{className:"payments-list",children:[l.length>0?l.map(e=>(0,S.jsxs)("div",{className:"payment-item",children:[(0,S.jsxs)("div",{className:"payment-amount",children:[e.amount.toLocaleString()," \u0631\u064a\u0627\u0644"]}),(0,S.jsxs)("div",{className:"payment-details",children:[(0,S.jsx)("span",{className:"payment-date",children:new Date(e.date).toLocaleDateString("ar-SA")}),(0,S.jsx)("span",{className:"payment-status status-".concat(e.status),children:"approved"===e.status?"\u0645\u0639\u062a\u0645\u062f":"pending"===e.status?"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629":"\u0645\u0631\u0641\u0648\u0636"})]})]},e.id)):(0,S.jsx)("div",{className:"no-payments",children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u062f\u0641\u0648\u0639\u0627\u062a \u062d\u062a\u0649 \u0627\u0644\u0622\u0646"}),(0,S.jsx)("button",{className:"view-all-btn",onClick:()=>e("/mobile/payment-history"),children:"\u0639\u0631\u0636 \u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"})]})]}),(0,S.jsx)(Ya,{})]})};var Va=a(5320),Za=a(5066),$a=a(9348);const Ka=()=>{const e=(0,r.Zp)(),[t,a]=(0,s.useState)(null),[n,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)(!1);(0,s.useEffect)(()=>{d()},[]);const d=async()=>{try{l(!0);const t=localStorage.getItem("token"),s="http://localhost:3001",n=await fetch("".concat(s,"/api/member/profile"),{headers:{Authorization:"Bearer ".concat(t)}});if(n.ok){const e=await n.json();a((0,i.A)((0,i.A)({},e),{},{is_compliant:e.balance>=3e3}))}else 401===n.status&&e("/mobile/login")}catch(t){console.error("Error fetching profile:",t)}finally{l(!1)}};return n?(0,S.jsxs)("div",{className:"mobile-loading",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a..."})]}):t?(0,S.jsxs)("div",{className:"mobile-profile",children:[(0,S.jsx)("div",{className:"profile-header",children:(0,S.jsx)("h1",{children:"\u0627\u0644\u0645\u0644\u0641 \u0627\u0644\u0634\u062e\u0635\u064a"})}),(0,S.jsxs)(ra.P.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[(0,S.jsxs)("div",{className:"profile-photo-section",children:[(0,S.jsx)("div",{className:"profile-photo",children:(0,S.jsx)(Va.A,{className:"icon"})}),(0,S.jsx)("h2",{children:t.full_name}),(0,S.jsxs)("p",{className:"member-number",children:["\u0639\u0636\u0648 \u0631\u0642\u0645: ",t.membership_number]})]}),(0,S.jsxs)("div",{className:"balance-summary ".concat(t.is_compliant?"compliant":"non-compliant"),children:[(0,S.jsx)("div",{className:"balance-icon",children:(0,S.jsx)(X.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"balance-info",children:[(0,S.jsx)("span",{className:"balance-label",children:"\u0627\u0644\u0631\u0635\u064a\u062f \u0627\u0644\u062d\u0627\u0644\u064a"}),(0,S.jsxs)("span",{className:"balance-value",children:[t.balance.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsx)("div",{className:"compliance-status",children:t.is_compliant?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(D.A,{className:"status-icon success"}),(0,S.jsx)("span",{children:"\u0645\u0644\u062a\u0632\u0645"})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(I.A,{className:"status-icon warning"}),(0,S.jsx)("span",{children:"\u063a\u064a\u0631 \u0645\u0644\u062a\u0632\u0645"})]})})]})]}),(0,S.jsxs)(ra.P.div,{className:"profile-info",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},children:[(0,S.jsx)("h3",{children:"\u0627\u0644\u0645\u0639\u0644\u0648\u0645\u0627\u062a \u0627\u0644\u0634\u062e\u0635\u064a\u0629"}),(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)("div",{className:"info-icon",children:(0,S.jsx)(Ct.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"info-content",children:[(0,S.jsx)("span",{className:"info-label",children:"\u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644"}),(0,S.jsx)("span",{className:"info-value",children:t.phone||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]})]}),(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)("div",{className:"info-icon",children:(0,S.jsx)(_t.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"info-content",children:[(0,S.jsx)("span",{className:"info-label",children:"\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629"}),(0,S.jsx)("span",{className:"info-value",children:t.membership_number})]})]}),(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)("div",{className:"info-icon",children:(0,S.jsx)(y.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"info-content",children:[(0,S.jsx)("span",{className:"info-label",children:"\u0627\u0644\u0642\u0633\u0645 \u0627\u0644\u0642\u0628\u0644\u064a"}),(0,S.jsx)("span",{className:"info-value",children:t.tribal_section||"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f"})]})]}),t.family_branch&&(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)("div",{className:"info-icon",children:(0,S.jsx)(y.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"info-content",children:[(0,S.jsx)("span",{className:"info-label",children:"\u0627\u0644\u0641\u0631\u0639 \u0627\u0644\u0639\u0627\u0626\u0644\u064a"}),(0,S.jsx)("span",{className:"info-value",children:t.family_branch})]})]}),(0,S.jsxs)("div",{className:"info-item",children:[(0,S.jsx)("div",{className:"info-icon",children:(0,S.jsx)(u.A,{className:"icon"})}),(0,S.jsxs)("div",{className:"info-content",children:[(0,S.jsx)("span",{className:"info-label",children:"\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0627\u0646\u0636\u0645\u0627\u0645"}),(0,S.jsx)("span",{className:"info-value",children:(e=>{if(!e)return"\u063a\u064a\u0631 \u0645\u062d\u062f\u062f";return new Date(e).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"})})(t.created_at)})]})]})]}),(0,S.jsxs)(ra.P.div,{className:"profile-actions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},children:[(0,S.jsxs)("button",{className:"action-button",onClick:()=>e("/mobile/change-password"),children:[(0,S.jsx)(La.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u062a\u063a\u064a\u064a\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"})]}),(0,S.jsxs)("button",{className:"action-button",onClick:()=>e("/mobile/settings"),children:[(0,S.jsx)(Za.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0627\u0644\u0625\u0639\u062f\u0627\u062f\u0627\u062a"})]}),(0,S.jsxs)("button",{className:"action-button logout",onClick:()=>{c(!0)},children:[(0,S.jsx)($a.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"})]})]}),o&&(0,S.jsx)("div",{className:"modal-overlay",children:(0,S.jsxs)(ra.P.div,{className:"modal-content",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},children:[(0,S.jsx)("h3",{children:"\u062a\u0623\u0643\u064a\u062f \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"}),(0,S.jsx)("p",{children:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u0631\u063a\u0628\u062a\u0643 \u0641\u064a \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c\u061f"}),(0,S.jsxs)("div",{className:"modal-actions",children:[(0,S.jsx)("button",{className:"confirm-btn",onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("memberData"),e("/mobile/login")},children:"\u0646\u0639\u0645\u060c \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062e\u0631\u0648\u062c"}),(0,S.jsx)("button",{className:"cancel-btn",onClick:()=>c(!1),children:"\u0625\u0644\u063a\u0627\u0621"})]})]})}),(0,S.jsx)(Ya,{})]}):(0,S.jsxs)("div",{className:"mobile-error",children:[(0,S.jsx)("p",{children:"\u0639\u0630\u0631\u0627\u064b\u060c \u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0628\u064a\u0627\u0646\u0627\u062a"}),(0,S.jsx)("button",{onClick:()=>e("/mobile/dashboard"),children:"\u0627\u0644\u0639\u0648\u062f\u0629 \u0644\u0644\u0631\u0626\u064a\u0633\u064a\u0629"})]})},Qa=e=>{let{onUploadComplete:t}=e;const[a,n]=(0,s.useState)(null),[i,r]=(0,s.useState)(null),[l,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(0),[p,x]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),u=(0,s.useRef)(null),g=(0,s.useRef)(null),b=["image/jpeg","image/png","image/jpg","application/pdf"],j=e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&f(a)},f=e=>{if(x(null),b.includes(e.type))if(e.size>5242880)x("\u062d\u062c\u0645 \u0627\u0644\u0645\u0644\u0641 \u0643\u0628\u064a\u0631 \u062c\u062f\u0627\u064b. \u0627\u0644\u062d\u062f \u0627\u0644\u0623\u0642\u0635\u0649 5 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a");else if(n(e),e.type.startsWith("image/")){const t=new FileReader;t.onload=e=>{var t;r(null===(t=e.target)||void 0===t?void 0:t.result)},t.readAsDataURL(e)}else r(null);else x("\u0646\u0648\u0639 \u0627\u0644\u0645\u0644\u0641 \u063a\u064a\u0631 \u0645\u062f\u0639\u0648\u0645. \u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0635\u0648\u0631\u0629 (JPG, PNG) \u0623\u0648 PDF")},y=()=>{n(null),r(null),x(null),d(0),h(!1)};return(0,S.jsxs)("div",{className:"receipt-upload-container",children:[(0,S.jsx)("h2",{children:"\u0631\u0641\u0639 \u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u062f\u0641\u0639"}),a?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"file-preview",children:i?(0,S.jsx)("img",{src:i,alt:"Receipt preview"}):(0,S.jsxs)("div",{className:"pdf-preview",children:[(0,S.jsx)(Pt.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0645\u0644\u0641 PDF"})]})}),(0,S.jsxs)("div",{className:"file-info",children:[(0,S.jsx)("span",{className:"file-name",children:a.name}),(0,S.jsx)("span",{className:"file-size",children:(v=a.size,v<1024?v+" B":v<1048576?(v/1024).toFixed(1)+" KB":(v/1048576).toFixed(1)+" MB")})]}),l&&(0,S.jsxs)("div",{className:"upload-progress",children:[(0,S.jsx)("div",{className:"progress-bar",children:(0,S.jsx)("div",{className:"progress-fill",style:{width:"".concat(c,"%")}})}),(0,S.jsxs)("span",{className:"progress-text",children:[c,"%"]})]}),m&&(0,S.jsxs)(ra.P.div,{className:"success-message",initial:{scale:0},animate:{scale:1},children:[(0,S.jsx)(D.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0628\u0646\u062c\u0627\u062d"})]}),p&&(0,S.jsxs)(ra.P.div,{className:"error-message",initial:{opacity:0},animate:{opacity:1},children:[(0,S.jsx)(A.A,{className:"icon"}),(0,S.jsx)("span",{children:p})]}),(0,S.jsxs)("div",{className:"upload-actions",children:[!l&&!m&&!p&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("button",{className:"upload-btn primary",onClick:async()=>{if(a)try{o(!0),d(0),x(null);const e=new FormData;e.append("receipt",a);const s=localStorage.getItem("token"),n="http://localhost:3001",i=setInterval(()=>{d(e=>e>=90?(clearInterval(i),90):e+10)},200),r=await fetch("".concat(n,"/api/receipts/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:e});if(clearInterval(i),d(100),r.ok){const e=await r.json();h(!0),setTimeout(()=>{t(e.url)},1500)}else{const e=await r.json();x(e.message||"\u0641\u0634\u0644 \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641"),d(0)}}catch(p){console.error("Upload error:",p),x("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0631\u0641\u0639 \u0627\u0644\u0645\u0644\u0641"),d(0)}finally{o(!1)}},children:[(0,S.jsx)(Ot.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0631\u0641\u0639 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"})]}),(0,S.jsxs)("button",{className:"upload-btn secondary",onClick:y,children:[(0,S.jsx)(A.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0625\u0644\u063a\u0627\u0621"})]})]}),l&&(0,S.jsxs)("button",{className:"upload-btn loading",disabled:!0,children:[(0,S.jsx)(Ht.A,{className:"spinner icon"}),(0,S.jsx)("span",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0631\u0641\u0639..."})]}),p&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("button",{className:"upload-btn primary",onClick:()=>{x(null),d(0),h(!1)},children:[(0,S.jsx)(Ht.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0625\u0639\u0627\u062f\u0629 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629"})]}),(0,S.jsxs)("button",{className:"upload-btn secondary",onClick:y,children:[(0,S.jsx)(A.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0644\u0641 \u0622\u062e\u0631"})]})]})]})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsxs)("div",{className:"upload-options",children:[(0,S.jsxs)("button",{className:"upload-option camera",onClick:()=>{var e;return null===(e=g.current)||void 0===e?void 0:e.click()},children:[(0,S.jsx)(te.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0627\u0644\u062a\u0642\u0627\u0637 \u0635\u0648\u0631\u0629"})]}),(0,S.jsxs)("button",{className:"upload-option gallery",onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},children:[(0,S.jsx)(Tt.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0627\u062e\u062a\u064a\u0627\u0631 \u0645\u0646 \u0627\u0644\u0645\u0639\u0631\u0636"})]})]}),(0,S.jsx)("input",{ref:g,type:"file",accept:"image/*",capture:"environment",onChange:j,hidden:!0}),(0,S.jsx)("input",{ref:u,type:"file",accept:"image/*,.pdf",onChange:j,hidden:!0}),(0,S.jsxs)("div",{className:"upload-info",children:[(0,S.jsx)("p",{children:"\u0627\u0644\u0645\u0644\u0641\u0627\u062a \u0627\u0644\u0645\u062f\u0639\u0648\u0645\u0629: JPG, PNG, PDF"}),(0,S.jsx)("p",{children:"\u0627\u0644\u062d\u062c\u0645 \u0627\u0644\u0623\u0642\u0635\u0649: 5 \u0645\u064a\u062c\u0627\u0628\u0627\u064a\u062a"})]}),p&&(0,S.jsxs)(ra.P.div,{className:"error-message",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:[(0,S.jsx)(A.A,{className:"icon"}),(0,S.jsx)("span",{children:p})]})]})]});var v},es=()=>{const e=(0,r.Zp)(),[t,a]=(0,s.useState)("self"),[n,l]=(0,s.useState)(""),[o,c]=(0,s.useState)(""),[d,p]=(0,s.useState)(""),[x,u]=(0,s.useState)([]),[g,b]=(0,s.useState)(null),[j,f]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[N,w]=(0,s.useState)(!1),[k,_]=(0,s.useState)(!1),[C,F]=(0,s.useState)(null),[T,z]=(0,s.useState)({});(0,s.useEffect)(()=>{if("behalf"===t&&d.length>=2){const e=setTimeout(()=>{R()},500);return()=>clearTimeout(e)}u([])},[d,t]);const R=async()=>{try{f(!0);const e=localStorage.getItem("token"),t="http://localhost:3001",a=await fetch("".concat(t,"/api/member/search?query=").concat(encodeURIComponent(d)),{headers:{Authorization:"Bearer ".concat(e)}});if(a.ok){const e=await a.json();u(e)}}catch(e){console.error("Error searching members:",e)}finally{f(!1)}},I=()=>{l(""),c(""),p(""),b(null),F(null),z({})};return(0,S.jsxs)("div",{className:"mobile-payment",children:[(0,S.jsx)("div",{className:"payment-header",children:(0,S.jsx)("h1",{children:"\u062f\u0641\u0639\u0629 \u062c\u062f\u064a\u062f\u0629"})}),(0,S.jsxs)("div",{className:"payment-mode-selector",children:[(0,S.jsxs)("button",{className:"mode-btn ".concat("self"===t?"active":""),onClick:()=>{a("self"),b(null),p("")},children:[(0,S.jsx)(kt.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u062f\u0641\u0639 \u0644\u0646\u0641\u0633\u064a"})]}),(0,S.jsxs)("button",{className:"mode-btn ".concat("behalf"===t?"active":""),onClick:()=>a("behalf"),children:[(0,S.jsx)(m.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u062f\u0641\u0639 \u0639\u0646 \u0634\u062e\u0635 \u0622\u062e\u0631"})]})]}),(0,S.jsxs)(ra.P.div,{className:"payment-form",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:["behalf"===t&&(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0628\u062d\u062b \u0639\u0646 \u0627\u0644\u0639\u0636\u0648"}),(0,S.jsxs)("div",{className:"search-input-wrapper",children:[(0,S.jsx)("input",{type:"text",placeholder:"\u0627\u0628\u062d\u062b \u0628\u0627\u0644\u0627\u0633\u0645 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u062c\u0648\u0627\u0644 \u0623\u0648 \u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629",value:d,onChange:e=>p(e.target.value),className:T.member?"error":""}),j&&(0,S.jsx)("div",{className:"search-loading",children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0628\u062d\u062b..."}),d&&(0,S.jsx)("button",{className:"clear-search",onClick:()=>{p(""),b(null)},children:(0,S.jsx)(A.A,{className:"icon"})})]}),T.member&&(0,S.jsx)("span",{className:"error-message",children:T.member}),x.length>0&&!g&&(0,S.jsx)("div",{className:"search-results",children:x.map(e=>(0,S.jsxs)("div",{className:"search-result-item",onClick:()=>{b(e),p(e.full_name),u([])},children:[(0,S.jsx)("div",{className:"member-name",children:e.full_name}),(0,S.jsxs)("div",{className:"member-details",children:[(0,S.jsxs)("span",{children:["\u0631\u0642\u0645 \u0627\u0644\u0639\u0636\u0648\u064a\u0629: ",e.membership_number]}),(0,S.jsx)("span",{children:e.phone})]})]},e.id))}),g&&(0,S.jsxs)("div",{className:"selected-member",children:[(0,S.jsx)(D.A,{className:"check-icon"}),(0,S.jsxs)("div",{className:"member-info",children:[(0,S.jsx)("div",{className:"name",children:g.full_name}),(0,S.jsxs)("div",{className:"details",children:["\u0639\u0636\u0648 \u0631\u0642\u0645: ",g.membership_number]})]}),(0,S.jsx)("button",{className:"change-btn",onClick:()=>{b(null),p("")},children:"\u062a\u063a\u064a\u064a\u0631"})]})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsxs)("label",{children:[(0,S.jsx)(h.A,{className:"icon"}),"\u0627\u0644\u0645\u0628\u0644\u063a (\u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a)"]}),(0,S.jsxs)("div",{className:"amount-input-wrapper",children:[(0,S.jsx)("input",{type:"number",placeholder:"0",value:n,onChange:e=>l(e.target.value),className:T.amount?"error":""}),(0,S.jsx)("span",{className:"currency",children:"\u0631\u064a\u0627\u0644"})]}),T.amount&&(0,S.jsx)("span",{className:"error-message",children:T.amount})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a (\u0627\u062e\u062a\u064a\u0627\u0631\u064a)"}),(0,S.jsx)("textarea",{placeholder:"\u0623\u0636\u0641 \u0623\u064a \u0645\u0644\u0627\u062d\u0638\u0627\u062a \u0625\u0636\u0627\u0641\u064a\u0629 \u0647\u0646\u0627...",value:o,onChange:e=>c(e.target.value),rows:3})]}),(0,S.jsxs)("div",{className:"form-group",children:[(0,S.jsx)("label",{children:"\u0625\u064a\u0635\u0627\u0644 \u0627\u0644\u062f\u0641\u0639"}),(0,S.jsx)("div",{className:"receipt-actions",children:C?(0,S.jsxs)("div",{className:"receipt-uploaded",children:[(0,S.jsx)(D.A,{className:"success-icon"}),(0,S.jsx)("span",{children:"\u062a\u0645 \u0631\u0641\u0639 \u0627\u0644\u0625\u064a\u0635\u0627\u0644 \u0628\u0646\u062c\u0627\u062d"}),(0,S.jsx)("button",{className:"change-receipt",onClick:()=>_(!0),children:"\u062a\u063a\u064a\u064a\u0631"})]}):(0,S.jsxs)("button",{className:"upload-btn",onClick:()=>_(!0),children:[(0,S.jsx)(te.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0631\u0641\u0639 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"})]})})]}),(0,S.jsx)("button",{className:"submit-btn",onClick:async()=>{if((()=>{const e={};return(!n||parseFloat(n)<=0)&&(e.amount="\u0627\u0644\u0631\u062c\u0627\u0621 \u0625\u062f\u062e\u0627\u0644 \u0645\u0628\u0644\u063a \u0635\u062d\u064a\u062d"),"behalf"!==t||g||(e.member="\u0627\u0644\u0631\u062c\u0627\u0621 \u0627\u062e\u062a\u064a\u0627\u0631 \u0627\u0644\u0639\u0636\u0648"),z(e),0===Object.keys(e).length})())try{v(!0);const a=localStorage.getItem("token"),s="http://localhost:3001",r=(0,i.A)({amount:parseFloat(n),notes:o,receipt_url:C},"behalf"===t&&g&&{on_behalf_of:g.id}),l=await fetch("".concat(s,"/api/member/payments"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(r)});if(l.ok)w(!0),setTimeout(()=>{w(!1),I(),e("/mobile/payment-history")},3e3);else{const e=await l.json();alert(e.message||"\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062f\u0641\u0639\u0629")}}catch(a){console.error("Error submitting payment:",a),alert("\u062d\u062f\u062b \u062e\u0637\u0623 \u0641\u064a \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062f\u0641\u0639\u0629")}finally{v(!1)}},disabled:y,children:y?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"btn-spinner"}),(0,S.jsx)("span",{children:"\u062c\u0627\u0631\u064a \u0627\u0644\u0625\u0631\u0633\u0627\u0644..."})]}):(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(m.A,{className:"icon"}),(0,S.jsx)("span",{children:"\u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062f\u0641\u0639\u0629"})]})})]}),k&&(0,S.jsx)("div",{className:"modal-overlay",children:(0,S.jsxs)("div",{className:"modal-content",children:[(0,S.jsx)("button",{className:"modal-close",onClick:()=>_(!1),children:(0,S.jsx)(A.A,{className:"icon"})}),(0,S.jsx)(Qa,{onUploadComplete:e=>{F(e),_(!1)}})]})}),(0,S.jsx)(ia.N,{children:N&&(0,S.jsx)(ra.P.div,{className:"success-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,S.jsxs)(ra.P.div,{className:"success-modal",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},children:[(0,S.jsx)("div",{className:"success-icon",children:(0,S.jsx)(D.A,{className:"icon"})}),(0,S.jsx)("h2",{children:"\u062a\u0645 \u0625\u0631\u0633\u0627\u0644 \u0627\u0644\u062f\u0641\u0639\u0629 \u0628\u0646\u062c\u0627\u062d"}),(0,S.jsx)("p",{children:"\u0633\u064a\u062a\u0645 \u0645\u0631\u0627\u062c\u0639\u0629 \u0627\u0644\u062f\u0641\u0639\u0629 \u0648\u0627\u0639\u062a\u0645\u0627\u062f\u0647\u0627 \u0642\u0631\u064a\u0628\u0627\u064b"})]})})}),(0,S.jsx)(Ya,{})]})},ts=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[i,r]=(0,s.useState)(!0),[l,o]=(0,s.useState)("all"),[d,p]=(0,s.useState)((new Date).getFullYear()),[x,m]=(0,s.useState)(null),[h,g]=(0,s.useState)(null),[b,j]=(0,s.useState)(!1),f={approved:{label:"\u0645\u0639\u062a\u0645\u062f",color:"#34C759",bgColor:"#34C75910",icon:D.A},pending:{label:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629",color:"#FF9500",bgColor:"#FF950010",icon:v.A},rejected:{label:"\u0645\u0631\u0641\u0648\u0636",color:"#FF3B30",bgColor:"#FF3B3010",icon:B.A}};(0,s.useEffect)(()=>{y()},[]),(0,s.useEffect)(()=>{N()},[e,l,d,x]);const y=async()=>{try{r(!0);const e=localStorage.getItem("token"),a="http://localhost:3001",s=await fetch("".concat(a,"/api/member/payments"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e)}}catch(e){console.error("Error fetching payments:",e)}finally{r(!1)}},N=()=>{let t=[...e];"all"!==l&&(t=t.filter(e=>e.status===l)),t=t.filter(e=>new Date(e.date).getFullYear()===d),null!==x&&(t=t.filter(e=>new Date(e.date).getMonth()===x)),n(t)},w=e=>new Date(e).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"}),A=e=>{try{const t=new Date(e);return new Intl.DateTimeFormat("ar-SA-u-ca-islamic",{day:"numeric",month:"long",year:"numeric"}).format(t)}catch(t){return""}},k={approved:a.filter(e=>"approved"===e.status).reduce((e,t)=>e+t.amount,0),pending:a.filter(e=>"pending"===e.status).reduce((e,t)=>e+t.amount,0),total:a.reduce((e,t)=>e+t.amount,0)};return i?(0,S.jsxs)("div",{className:"mobile-loading",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0633\u062c\u0644..."})]}):(0,S.jsxs)("div",{className:"mobile-payment-history",children:[(0,S.jsxs)("div",{className:"history-header",children:[(0,S.jsx)("h1",{children:"\u0633\u062c\u0644 \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsx)("button",{className:"filter-toggle",onClick:()=>j(!b),children:(0,S.jsx)(ue.A,{className:"icon"})})]}),(0,S.jsxs)("div",{className:"payment-statistics",children:[(0,S.jsxs)("div",{className:"stat-card total",children:[(0,S.jsx)("span",{className:"stat-label",children:"\u0625\u062c\u0645\u0627\u0644\u064a \u0627\u0644\u0645\u062f\u0641\u0648\u0639\u0627\u062a"}),(0,S.jsxs)("span",{className:"stat-value",children:[k.total.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("div",{className:"stat-card approved",children:[(0,S.jsx)("span",{className:"stat-label",children:"\u0645\u0639\u062a\u0645\u062f"}),(0,S.jsxs)("span",{className:"stat-value",children:[k.approved.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("div",{className:"stat-card pending",children:[(0,S.jsx)("span",{className:"stat-label",children:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629"}),(0,S.jsxs)("span",{className:"stat-value",children:[k.pending.toLocaleString()," \u0631\u064a\u0627\u0644"]})]})]}),(0,S.jsx)(ia.N,{children:b&&(0,S.jsxs)(ra.P.div,{className:"filters-section",initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:[(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u062d\u0627\u0644\u0629"}),(0,S.jsxs)("div",{className:"filter-buttons",children:[(0,S.jsx)("button",{className:"all"===l?"active":"",onClick:()=>o("all"),children:"\u0627\u0644\u0643\u0644"}),(0,S.jsx)("button",{className:"approved"===l?"active":"",onClick:()=>o("approved"),children:"\u0645\u0639\u062a\u0645\u062f"}),(0,S.jsx)("button",{className:"pending"===l?"active":"",onClick:()=>o("pending"),children:"\u0642\u064a\u062f \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629"}),(0,S.jsx)("button",{className:"rejected"===l?"active":"",onClick:()=>o("rejected"),children:"\u0645\u0631\u0641\u0648\u0636"})]})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0633\u0646\u0629"}),(0,S.jsx)("select",{value:d,onChange:e=>p(Number(e.target.value)),children:[2024,2025,2026].map(e=>(0,S.jsx)("option",{value:e,children:e},e))})]}),(0,S.jsxs)("div",{className:"filter-group",children:[(0,S.jsx)("label",{children:"\u0627\u0644\u0634\u0647\u0631"}),(0,S.jsxs)("select",{value:null!==x&&void 0!==x?x:"",onChange:e=>m(""===e.target.value?null:Number(e.target.value)),children:[(0,S.jsx)("option",{value:"",children:"\u062c\u0645\u064a\u0639 \u0627\u0644\u0634\u0647\u0648\u0631"}),["\u064a\u0646\u0627\u064a\u0631","\u0641\u0628\u0631\u0627\u064a\u0631","\u0645\u0627\u0631\u0633","\u0623\u0628\u0631\u064a\u0644","\u0645\u0627\u064a\u0648","\u064a\u0648\u0646\u064a\u0648","\u064a\u0648\u0644\u064a\u0648","\u0623\u063a\u0633\u0637\u0633","\u0633\u0628\u062a\u0645\u0628\u0631","\u0623\u0643\u062a\u0648\u0628\u0631","\u0646\u0648\u0641\u0645\u0628\u0631","\u062f\u064a\u0633\u0645\u0628\u0631"].map((e,t)=>(0,S.jsx)("option",{value:t,children:e},t))]})]})]})}),(0,S.jsx)("div",{className:"payments-list",children:a.length>0?a.map((e,t)=>{const a=f[e.status].icon;return(0,S.jsxs)(ra.P.div,{className:"payment-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},onClick:()=>g(e),children:[(0,S.jsxs)("div",{className:"payment-main",children:[(0,S.jsxs)("div",{className:"payment-amount",children:[(0,S.jsx)("span",{className:"amount",children:e.amount.toLocaleString()}),(0,S.jsx)("span",{className:"currency",children:"\u0631\u064a\u0627\u0644"})]}),(0,S.jsxs)("div",{className:"payment-status",style:{color:f[e.status].color,backgroundColor:f[e.status].bgColor},children:[(0,S.jsx)(a,{className:"icon"}),(0,S.jsx)("span",{children:f[e.status].label})]})]}),(0,S.jsxs)("div",{className:"payment-details",children:[(0,S.jsxs)("div",{className:"payment-date",children:[(0,S.jsx)(u.A,{className:"icon"}),(0,S.jsx)("span",{children:w(e.date)})]}),e.hijri_date&&(0,S.jsx)("div",{className:"hijri-date",children:A(e.date)}),e.on_behalf_of&&(0,S.jsxs)("div",{className:"on-behalf",children:["\u062f\u0641\u0639\u062a \u0639\u0646: ",e.on_behalf_of.full_name]})]}),e.receipt_url&&(0,S.jsx)("div",{className:"receipt-indicator",children:(0,S.jsx)(c.A,{className:"icon"})})]},e.id)}):(0,S.jsx)("div",{className:"empty-state",children:(0,S.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0645\u062f\u0641\u0648\u0639\u0627\u062a"})})}),h&&(0,S.jsx)("div",{className:"modal-overlay",onClick:()=>g(null),children:(0,S.jsxs)(ra.P.div,{className:"payment-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},onClick:e=>e.stopPropagation(),children:[(0,S.jsx)("h3",{children:"\u062a\u0641\u0627\u0635\u064a\u0644 \u0627\u0644\u062f\u0641\u0639\u0629"}),(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u0627\u0644\u0645\u0628\u0644\u063a:"}),(0,S.jsxs)("span",{className:"value",children:[h.amount.toLocaleString()," \u0631\u064a\u0627\u0644"]})]}),(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e:"}),(0,S.jsx)("span",{className:"value",children:w(h.date)})]}),(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u0627\u0644\u062a\u0627\u0631\u064a\u062e \u0627\u0644\u0647\u062c\u0631\u064a:"}),(0,S.jsx)("span",{className:"value",children:A(h.date)})]}),(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u0627\u0644\u062d\u0627\u0644\u0629:"}),(0,S.jsx)("span",{className:"value status",style:{color:f[h.status].color},children:f[h.status].label})]}),h.on_behalf_of&&(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u062f\u0641\u0639\u062a \u0639\u0646:"}),(0,S.jsxs)("span",{className:"value",children:[h.on_behalf_of.full_name,"(",h.on_behalf_of.membership_number,")"]})]}),h.notes&&(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u0645\u0644\u0627\u062d\u0638\u0627\u062a:"}),(0,S.jsx)("span",{className:"value",children:h.notes})]}),h.reviewed_by&&(0,S.jsxs)("div",{className:"modal-detail",children:[(0,S.jsx)("span",{className:"label",children:"\u062a\u0645\u062a \u0627\u0644\u0645\u0631\u0627\u062c\u0639\u0629 \u0628\u0648\u0627\u0633\u0637\u0629:"}),(0,S.jsx)("span",{className:"value",children:h.reviewed_by})]}),h.receipt_url&&(0,S.jsxs)("div",{className:"receipt-actions",children:[(0,S.jsxs)("button",{className:"view-receipt",children:[(0,S.jsx)(M.A,{className:"icon"}),"\u0639\u0631\u0636 \u0627\u0644\u0625\u064a\u0635\u0627\u0644"]}),(0,S.jsxs)("button",{className:"download-receipt",children:[(0,S.jsx)(J.A,{className:"icon"}),"\u062a\u062d\u0645\u064a\u0644"]})]}),(0,S.jsx)("button",{className:"modal-close",onClick:()=>g(null),children:"\u0625\u063a\u0644\u0627\u0642"})]})}),(0,S.jsx)(Ya,{})]})};var as=a(182),ss=a(9661);const ns=()=>{const[e,t]=(0,s.useState)([]),[a,n]=(0,s.useState)([]),[r,l]=(0,s.useState)(!0),[o,c]=(0,s.useState)("all"),[d,p]=(0,s.useState)(null),[x,m]=(0,s.useState)(0),h={news:{label:"\u0623\u062e\u0628\u0627\u0631",icon:as.A,color:"#007AFF",bgColor:"#007AFF10"},occasions:{label:"\u0645\u0646\u0627\u0633\u0628\u0627\u062a",icon:ss.A,color:"#FF9500",bgColor:"#FF950010"},diyas:{label:"\u062f\u064a\u0627\u062a",icon:U.A,color:"#FF3B30",bgColor:"#FF3B3010"},initiatives:{label:"\u0645\u0628\u0627\u062f\u0631\u0627\u062a",icon:g.A,color:"#34C759",bgColor:"#34C75910"},condolences:{label:"\u062a\u0639\u0627\u0632\u064a",icon:K.A,color:"#8E8E93",bgColor:"#8E8E9310"}};(0,s.useEffect)(()=>{u()},[]),(0,s.useEffect)(()=>{b(),f()},[e,o]);const u=async()=>{try{l(!0);const e=localStorage.getItem("token"),a="http://localhost:3001",s=await fetch("".concat(a,"/api/member/notifications"),{headers:{Authorization:"Bearer ".concat(e)}});if(s.ok){const e=await s.json();t(e)}}catch(e){console.error("Error fetching notifications:",e)}finally{l(!1)}},b=()=>{n("all"===o?e:e.filter(e=>e.type===o))},f=()=>{const t=e.filter(e=>!e.is_read).length;m(t)},y=e=>{p(e),e.is_read||(async e=>{try{const a=localStorage.getItem("token"),s="http://localhost:3001";await fetch("".concat(s,"/api/member/notifications/").concat(e,"/read"),{method:"POST",headers:{Authorization:"Bearer ".concat(a)}}),t(t=>t.map(t=>t.id===e?(0,i.A)((0,i.A)({},t),{},{is_read:!0}):t))}catch(a){console.error("Error marking notification as read:",a)}})(e.id)},N=e=>{const t=new Date(e),a=(new Date).getTime()-t.getTime(),s=Math.floor(a/864e5),n=Math.floor(a/36e5),i=Math.floor(a/6e4);return i<60?"\u0645\u0646\u0630 ".concat(i," \u062f\u0642\u064a\u0642\u0629"):n<24?"\u0645\u0646\u0630 ".concat(n," \u0633\u0627\u0639\u0629"):s<7?"\u0645\u0646\u0630 ".concat(s," \u0623\u064a\u0627\u0645"):t.toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"})};return r?(0,S.jsxs)("div",{className:"mobile-loading",children:[(0,S.jsx)("div",{className:"loading-spinner"}),(0,S.jsx)("p",{children:"\u062c\u0627\u0631\u064a \u062a\u062d\u0645\u064a\u0644 \u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a..."})]}):(0,S.jsxs)("div",{className:"mobile-notifications",children:[(0,S.jsxs)("div",{className:"notifications-header",children:[(0,S.jsx)("h1",{children:"\u0627\u0644\u0625\u0634\u0639\u0627\u0631\u0627\u062a"}),x>0&&(0,S.jsxs)("button",{className:"mark-all-btn",onClick:async()=>{try{const e=localStorage.getItem("token"),a="http://localhost:3001";await fetch("".concat(a,"/api/member/notifications/read-all"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)}}),t(e=>e.map(e=>(0,i.A)((0,i.A)({},e),{},{is_read:!0})))}catch(e){console.error("Error marking all as read:",e)}},children:[(0,S.jsx)(Rt.A,{className:"icon"}),"\u0642\u0631\u0627\u0621\u0629 \u0627\u0644\u0643\u0644"]})]}),x>0&&(0,S.jsxs)("div",{className:"unread-banner",children:[(0,S.jsx)(j.A,{className:"icon"}),(0,S.jsxs)("span",{children:["\u0644\u062f\u064a\u0643 ",x," \u0625\u0634\u0639\u0627\u0631\u0627\u062a \u063a\u064a\u0631 \u0645\u0642\u0631\u0648\u0621\u0629"]})]}),(0,S.jsxs)("div",{className:"filter-tabs",children:[(0,S.jsx)("button",{className:"tab-btn ".concat("all"===o?"active":""),onClick:()=>c("all"),children:"\u0627\u0644\u0643\u0644"}),Object.entries(h).map(e=>{let[t,a]=e;return(0,S.jsx)("button",{className:"tab-btn ".concat(o===t?"active":""),onClick:()=>c(t),children:a.label},t)})]}),(0,S.jsx)("div",{className:"notifications-list",children:a.length>0?a.map((e,t)=>{const a=h[e.type],s=a.icon;return(0,S.jsxs)(ra.P.div,{className:"notification-card ".concat(e.is_read?"read":"unread"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},onClick:()=>y(e),children:[(0,S.jsx)("div",{className:"notification-icon",style:{backgroundColor:a.bgColor,color:a.color},children:(0,S.jsx)(s,{className:"icon"})}),(0,S.jsxs)("div",{className:"notification-content",children:[(0,S.jsxs)("div",{className:"notification-header",children:[(0,S.jsx)("span",{className:"notification-type",style:{color:a.color},children:a.label}),(0,S.jsxs)("span",{className:"notification-time",children:[(0,S.jsx)(v.A,{className:"icon"}),N(e.date)]})]}),(0,S.jsx)("h3",{className:"notification-title",children:e.title}),(0,S.jsx)("p",{className:"notification-message",children:e.message})]}),!e.is_read&&(0,S.jsx)("div",{className:"unread-indicator"})]},e.id)}):(0,S.jsxs)("div",{className:"empty-state",children:[(0,S.jsx)(j.A,{className:"icon"}),(0,S.jsx)("p",{children:"\u0644\u0627 \u062a\u0648\u062c\u062f \u0625\u0634\u0639\u0627\u0631\u0627\u062a"})]})}),(0,S.jsx)(ia.N,{children:d&&(0,S.jsx)(ra.P.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>p(null),children:(0,S.jsxs)(ra.P.div,{className:"notification-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[(0,S.jsxs)("div",{className:"modal-header",children:[(0,S.jsx)("span",{className:"modal-type",style:{color:h[d.type].color,backgroundColor:h[d.type].bgColor},children:h[d.type].label}),(0,S.jsx)("span",{className:"modal-date",children:new Date(d.date).toLocaleDateString("ar-SA",{year:"numeric",month:"long",day:"numeric"})})]}),d.image_url&&(0,S.jsx)("img",{src:d.image_url,alt:d.title,className:"modal-image"}),(0,S.jsx)("h2",{className:"modal-title",children:d.title}),(0,S.jsx)("p",{className:"modal-message",children:d.message}),d.action_url&&(0,S.jsx)("button",{className:"action-button",children:"\u0639\u0631\u0636 \u0627\u0644\u062a\u0641\u0627\u0635\u064a\u0644"}),(0,S.jsx)("button",{className:"modal-close",onClick:()=>p(null),children:"\u0625\u063a\u0644\u0627\u0642"})]})})}),(0,S.jsx)(Ya,{})]})},is=()=>{const[e,t]=s.useState({email:"",password:"",role:"super_admin"}),[a,n]=s.useState(()=>"true"===localStorage.getItem("isLoggedIn")),r=a=>{t((0,i.A)((0,i.A)({},e),{},{[a.target.name]:a.target.value}))},l=()=>{n(!1),t({email:"",password:"",role:"super_admin"}),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")};return a?(0,S.jsx)(Ia,{onLogout:l}):(0,S.jsxs)("div",{className:"modern-login-container",dir:"rtl",children:[(0,S.jsx)("div",{className:"modern-bg-pattern"}),(0,S.jsxs)("div",{className:"modern-circles",children:[(0,S.jsx)("div",{className:"circle circle-1"}),(0,S.jsx)("div",{className:"circle circle-2"}),(0,S.jsx)("div",{className:"circle circle-3"})]}),(0,S.jsx)("main",{className:"modern-main-content",children:(0,S.jsxs)("div",{className:"modern-login-card",children:[(0,S.jsxs)("div",{className:"modern-card-header",children:[(0,S.jsx)("div",{className:"modern-logo-wrapper",children:(0,S.jsx)("img",{src:bt,alt:"Shuail Al-Anzi Fund"})}),(0,S.jsx)("h1",{className:"modern-title",children:"\u0635\u0646\u062f\u0648\u0642 \u0634\u0639\u064a\u0644 \u0627\u0644\u0639\u0646\u0632\u064a"}),(0,S.jsx)("p",{className:"modern-subtitle",children:"Shuail Al-Anzi Fund"}),(0,S.jsx)("p",{className:"modern-system-text",children:"S.A.F Management System"})]}),(0,S.jsxs)("div",{className:"modern-form-container",children:[(0,S.jsxs)("div",{className:"modern-welcome",children:[(0,S.jsx)("h2",{className:"modern-welcome-title",children:"\u0645\u0631\u062d\u0628\u0627\u064b \u0628\u0643"}),(0,S.jsx)("p",{className:"modern-welcome-subtitle",children:"\u0633\u062c\u0651\u0644 \u062f\u062e\u0648\u0644\u0643 \u0644\u0644\u0648\u0635\u0648\u0644 \u0625\u0644\u0649 \u0644\u0648\u062d\u0629 \u0627\u0644\u062a\u062d\u0643\u0645"})]}),(0,S.jsxs)("form",{className:"modern-login-form",onSubmit:async t=>{t.preventDefault();try{const t=await fetch("".concat("http://localhost:3001","/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e.email,password:e.password,role:e.role||"super_admin"})}),a=await t.json();a.success?(n(!0),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("token",a.token),localStorage.setItem("user",JSON.stringify(a.user)),localStorage.setItem("userEmail",e.email),localStorage.setItem("loginTime",Date.now().toString())):Pa({message:a.error||"\u0641\u0634\u0644 \u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644",type:"error"})}catch(a){console.error("Login error:",a),Pa({message:"\u062e\u0637\u0623 \u0641\u064a \u0627\u0644\u0627\u062a\u0635\u0627\u0644 \u0628\u0627\u0644\u062e\u0627\u062f\u0645. \u064a\u0631\u062c\u0649 \u0627\u0644\u0645\u062d\u0627\u0648\u0644\u0629 \u0645\u0631\u0629 \u0623\u062e\u0631\u0649",type:"error"})}},dir:"rtl",children:[(0,S.jsxs)("div",{className:"modern-input-group",children:[(0,S.jsx)("label",{htmlFor:"email",className:"modern-input-label",children:"\u0627\u0644\u0628\u0631\u064a\u062f \u0627\u0644\u0625\u0644\u0643\u062a\u0631\u0648\u0646\u064a"}),(0,S.jsxs)("div",{className:"modern-input-wrapper",children:[(0,S.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:r,placeholder:"admin@alshuail.com",className:"modern-input-field",required:!0,dir:"ltr"}),(0,S.jsx)("svg",{className:"modern-input-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})]})]}),(0,S.jsxs)("div",{className:"modern-input-group",children:[(0,S.jsx)("label",{htmlFor:"password",className:"modern-input-label",children:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"}),(0,S.jsxs)("div",{className:"modern-input-wrapper",children:[(0,S.jsx)("input",{type:"password",id:"password",name:"password",value:e.password,onChange:r,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"modern-input-field",required:!0,dir:"ltr"}),(0,S.jsx)("svg",{className:"modern-input-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})]})]}),(0,S.jsxs)("button",{type:"submit",className:"modern-login-button",children:[(0,S.jsx)("span",{children:"\u062a\u0633\u062c\u064a\u0644 \u0627\u0644\u062f\u062e\u0648\u0644"}),(0,S.jsx)("svg",{className:"modern-button-arrow",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]}),(0,S.jsx)("div",{className:"modern-footer-links",children:(0,S.jsxs)("p",{className:"modern-secure-text",children:[(0,S.jsx)("svg",{className:"modern-lock-icon",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,S.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),"\u0627\u062a\u0635\u0627\u0644 \u0622\u0645\u0646 \u0648\u0645\u0634\u0641\u0631"]})})]})]})}),(0,S.jsx)("footer",{className:"modern-footer",children:(0,S.jsx)("p",{children:"\xa9 2024 \u0646\u0638\u0627\u0645 \u0627\u0644\u0634\u0639\u064a\u0644. \u062c\u0645\u064a\u0639 \u0627\u0644\u062d\u0642\u0648\u0642 \u0645\u062d\u0641\u0648\u0638\u0629."})})]})},rs=()=>(0,S.jsx)(T,{children:(0,S.jsx)(Jt,{children:(0,S.jsx)(r.Kd,{children:(0,S.jsxs)(r.BV,{children:[(0,S.jsx)(r.qh,{path:"/register/:token",element:(0,S.jsx)(Ba,{})}),(0,S.jsx)(r.qh,{path:"/apple-register",element:(0,S.jsx)(Ea,{})}),(0,S.jsx)(r.qh,{path:"/premium-register",element:(0,S.jsx)(Et,{})}),(0,S.jsx)(r.qh,{path:"/mobile/login",element:(0,S.jsx)(Ma,{})}),(0,S.jsx)(r.qh,{path:"/mobile/change-password",element:(0,S.jsx)(Wa,{})}),(0,S.jsx)(r.qh,{path:"/mobile/dashboard",element:(0,S.jsx)(Ga,{})}),(0,S.jsx)(r.qh,{path:"/mobile/profile",element:(0,S.jsx)(Ka,{})}),(0,S.jsx)(r.qh,{path:"/mobile/payment",element:(0,S.jsx)(es,{})}),(0,S.jsx)(r.qh,{path:"/mobile/payment-history",element:(0,S.jsx)(ts,{})}),(0,S.jsx)(r.qh,{path:"/mobile/notifications",element:(0,S.jsx)(ns,{})}),(0,S.jsx)(r.qh,{path:"/member",element:(0,S.jsx)(r.C5,{to:"/mobile/dashboard",replace:!0})}),(0,S.jsx)(r.qh,{path:"/member/*",element:(0,S.jsx)(r.C5,{to:"/mobile/dashboard",replace:!0})}),(0,S.jsx)(r.qh,{path:"/family-tree",element:(0,S.jsx)(is,{})}),(0,S.jsx)(r.qh,{path:"/admin/*",element:(0,S.jsx)(is,{})}),(0,S.jsx)(r.qh,{path:"/login",element:(0,S.jsx)(is,{})}),(0,S.jsx)(r.qh,{path:"/",element:(0,S.jsx)(r.C5,{to:"/login",replace:!0})}),(0,S.jsx)(r.qh,{path:"*",element:(0,S.jsx)(r.C5,{to:"/login",replace:!0})})]})})})}),ls=e=>{e&&e instanceof Function&&a.e(121).then(a.bind(a,8206)).then(t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:i,getTTFB:r}=t;a(e),s(e),n(e),i(e),r(e)})};function os(){if("PerformanceObserver"in window){try{new PerformanceObserver(e=>{const t=e.getEntries(),a=t[t.length-1];console.log("LCP:",a.startTime.toFixed(2)+"ms")}).observe({type:"largest-contentful-paint",buffered:!0})}catch(e){}try{new PerformanceObserver(e=>{e.getEntries().forEach(e=>{const t=e;if(t.processingStart){const e=t.processingStart-t.startTime;console.log("FID:",e.toFixed(2)+"ms")}})}).observe({type:"first-input",buffered:!0})}catch(e){}}"memory"in performance&&setInterval(()=>{const e=performance.memory,t=(e.usedJSHeapSize/1048576).toFixed(2),a=(e.totalJSHeapSize/1048576).toFixed(2);parseFloat(t)>.9*parseFloat(a)&&console.warn("High memory usage: ".concat(t,"MB / ").concat(a,"MB"))},3e4)}os();n.createRoot(document.getElementById("root")).render((0,S.jsx)(s.StrictMode,{children:(0,S.jsx)(rs,{})})),ls(e=>{0})}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,a),i.exports}a.m=e,(()=>{var e=[];a.O=(t,s,n,i)=>{if(!s){var r=1/0;for(d=0;d<e.length;d++){s=e[d][0],n=e[d][1],i=e[d][2];for(var l=!0,o=0;o<s.length;o++)(!1&i||r>=i)&&Object.keys(a.O).every(e=>a.O[e](s[o]))?s.splice(o--,1):(l=!1,i<r&&(r=i));if(l){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,n,i]}})(),a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var i=Object.create(null);a.r(i);var r={};e=e||[null,t({}),t([]),t(t)];for(var l=2&n&&s;("object"==typeof l||"function"==typeof l)&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach(e=>r[e]=()=>s[e]);return r.default=()=>s,a.d(i,r),i}})(),a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.e=()=>Promise.resolve(),a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var n,i,r=s[0],l=s[1],o=s[2],c=0;if(r.some(t=>0!==e[t])){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(o)var d=o(a)}for(t&&t(s);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},s=self.webpackChunkalshuail_admin_arabic=self.webpackChunkalshuail_admin_arabic||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s=a.O(void 0,[121],()=>a(8111));s=a.O(s)})();